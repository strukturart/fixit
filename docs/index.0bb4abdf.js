let $a0f3d463663c82ef$var$timeout,$d75865a97356644a$var$getRandomValues,$4817097f2da4986c$var$translation;var $07da88d463d75388$export$c1d46b5ea6262c0b,$73ac41bce01e26c9$export$5f828d93ff035aa8,$73ac41bce01e26c9$export$cd94982b18c6332c,$73ac41bce01e26c9$export$1d518568e4f529b0,$73ac41bce01e26c9$export$5285b6d41c912b41,$73ac41bce01e26c9$export$2fb37efbf6ae0c0e,$73ac41bce01e26c9$export$ab85ecd77ce6a5cd,$73ac41bce01e26c9$export$da39cf97e1eb7c91,$73ac41bce01e26c9$export$52a9039d7177394f,$73ac41bce01e26c9$export$448fa22aedc9dbca,$73ac41bce01e26c9$export$b80c7ba289c8fa56,$73ac41bce01e26c9$export$36b6d6ef312eab39,$73ac41bce01e26c9$export$45df7cae684751af,$73ac41bce01e26c9$export$1db683ad541682f6,$73ac41bce01e26c9$export$6f65485f87568e37,$73ac41bce01e26c9$export$91a8e56769aeb334,$73ac41bce01e26c9$export$2d4117e99c2179e4,$f6f6e24e01d689f8$export$bdd223f16383713e,$f6f6e24e01d689f8$export$26e5786e8ac8e530,$f6f6e24e01d689f8$export$2f64596b8cbf08b4,$f6f6e24e01d689f8$export$20533d26f07f1ee0,$f6f6e24e01d689f8$export$12ada9414fbc594c,$f6f6e24e01d689f8$export$2ce6d8d0e8b04e1a,$f6f6e24e01d689f8$export$36b6d6ef312eab39,$f6f6e24e01d689f8$export$f5e7e39d57cd9700,$f6f6e24e01d689f8$export$dedd8dc3dc62b370,$f6f6e24e01d689f8$export$58a258485f1e49f6,$f9d9c56bf2e34de5$export$eab97d15b1788b8d,$f9d9c56bf2e34de5$export$26e5786e8ac8e530,$f9d9c56bf2e34de5$export$cc8859615686b300,$f9d9c56bf2e34de5$export$8ad3f227af08fcc5,$f9d9c56bf2e34de5$export$947646e34766044f,$4267c26725f812c8$export$116f8a5cee447347,$4267c26725f812c8$export$7483c4066bfb7ae9,$4267c26725f812c8$export$e7a565d2e588bb06,$4267c26725f812c8$export$aaa2f54a426f3eb8,$4267c26725f812c8$export$eba20568dde4ada,$4267c26725f812c8$export$d3b5e5996938f5ae,$4267c26725f812c8$export$57c08356130bc99b,$4267c26725f812c8$export$c7169791d5c1e65d,$d07a5d50e8b73002$export$971862a2fcb1bb40,$d07a5d50e8b73002$export$c6ff6a88acbeaf40,$d07a5d50e8b73002$export$fdc27893e98845cc,$d07a5d50e8b73002$export$6671fb9a1323bed,$d07a5d50e8b73002$export$d74daf141a551db,$d1322f019848fee7$export$512823e338ddb1b7,$d1322f019848fee7$export$7efb24e2fddf99b9,$d1322f019848fee7$export$9d0e0c0c4a8d30f3,$d1322f019848fee7$export$b9d55ff329113abd,$d4fc44335ce77f37$export$bb1abf2ce84fc7e8,$d4fc44335ce77f37$export$2f7171e78e524d5e,$parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function $parcel$defineInteropFlag(t){Object.defineProperty(t,"__esModule",{value:!0,configurable:!0})}function $parcel$export(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}function $parcel$interopDefault(t){return t&&t.__esModule?t.default:t}var $parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire66eb;null==parcelRequire&&((parcelRequire=function(t){if(t in $parcel$modules)return $parcel$modules[t].exports;if(t in $parcel$inits){var e=$parcel$inits[t];delete $parcel$inits[t];var i={id:t,exports:{}};return $parcel$modules[t]=i,e.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){$parcel$inits[t]=e},$parcel$global.parcelRequire66eb=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("aEpXh",function(t,e){!/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */function(e,i){i(t.exports)}(t.exports,function(t){var e,i,r,n,o,a,s="1.9.4";function l(t){var e,i,r,n;for(i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])t[e]=n[e];return t}var h=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function u(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var r=i.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(i.call(arguments)):arguments)}}var c=0;function f(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function d(t,e,i){var r,n,o,a;return a=function(){r=!1,n&&(o.apply(i,n),n=!1)},o=function(){r?n=arguments:(t.apply(i,arguments),setTimeout(a,e),r=!0)}}function p(t,e,i){var r=e[1],n=e[0],o=r-n;return t===r&&i?t:((t-n)%o+o)%o+n}function m(){return!1}function g(t,e){if(!1===e)return t;var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function v(t){return y(t).split(/\s+/)}function _(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{}),e)t.options[i]=e[i];return t.options}function b(t,e,i){var r=[];for(var n in t)r.push(encodeURIComponent(i?n.toUpperCase():n)+"="+encodeURIComponent(t[n]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function w(t,e){return t.replace(x,function(t,i){var r=e[i];if(void 0===r)throw Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})}var M=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function S(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return -1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var I=0;function P(t){var e=+new Date,i=Math.max(0,16-(e-I));return I=e+i,window.setTimeout(t,i)}var T=window.requestAnimationFrame||E("RequestAnimationFrame")||P,A=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,i){if(!i||T!==P)return T.call(window,u(t,e));t.call(e)}function R(t){t&&A.call(window,t)}var N={__proto__:null,extend:l,create:h,bind:u,get lastId(){return c},stamp:f,throttle:d,wrapNum:p,falseFn:m,formatNum:g,trim:y,splitWords:v,setOptions:_,getParamString:b,template:w,isArray:M,indexOf:S,emptyImageUrl:k,requestFn:T,cancelFn:A,requestAnimFrame:C,cancelAnimFrame:R};function z(){}function O(t){if("undefined"!=typeof L&&L&&L.Mixin){t=M(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",Error().stack)}}z.extend=function(t){var e=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,r=h(i);for(var n in r.constructor=e,e.prototype=r,this)Object.prototype.hasOwnProperty.call(this,n)&&"prototype"!==n&&"__super__"!==n&&(e[n]=this[n]);return t.statics&&l(e,t.statics),t.includes&&(O(t.includes),l.apply(null,[r].concat(t.includes))),l(r,t),delete r.statics,delete r.includes,r.options&&(r.options=i.options?h(i.options):{},l(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},z.include=function(t){var e=this.prototype.options;return l(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},z.mergeOptions=function(t){return l(this.prototype.options,t),this},z.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var D={on:function(t,e,i){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else{t=v(t);for(var n=0,o=t.length;n<o;n++)this._on(t[n],e,i)}return this},off:function(t,e,i){if(arguments.length){if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else{t=v(t);for(var n=1==arguments.length,o=0,a=t.length;o<a;o++)n?this._off(t[o]):this._off(t[o],e,i)}}else delete this._events;return this},_on:function(t,e,i,r){if("function"!=typeof e){console.warn("wrong listener type: "+typeof e);return}if(!1===this._listens(t,e,i)){i===this&&(i=void 0);var n={fn:e,ctx:i};r&&(n.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(n)}},_off:function(t,e,i){if(this._events&&(r=this._events[t])){if(1==arguments.length){if(this._firingCount)for(n=0,o=r.length;n<o;n++)r[n].fn=m;delete this._events[t];return}if("function"!=typeof e){console.warn("wrong listener type: "+typeof e);return}var r,n,o,a=this._listens(t,e,i);if(!1!==a){var s=r[a];this._firingCount&&(s.fn=m,this._events[t]=r=r.slice()),r.splice(a,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var n=this._events[t];if(n){this._firingCount=this._firingCount+1||1;for(var o=0,a=n.length;o<a;o++){var s=n[o],h=s.fn;s.once&&this.off(t,h,s.ctx),h.call(s.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e,i,r){"string"!=typeof t&&console.warn('"string" type argument expected');var n=e;"function"!=typeof e&&(r=!!e,n=void 0,i=void 0);var o=this._events&&this._events[t];if(o&&o.length&&!1!==this._listens(t,n,i))return!0;if(r){for(var a in this._eventParents)if(this._eventParents[a].listens(t,e,i,r))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var r=this._events[t]||[];if(!e)return!!r.length;i===this&&(i=void 0);for(var n=0,o=r.length;n<o;n++)if(r[n].fn===e&&r[n].ctx===i)return n;return!1},once:function(t,e,i){if("object"==typeof t)for(var r in t)this._on(r,t[r],e,!0);else{t=v(t);for(var n=0,o=t.length;n<o;n++)this._on(t[n],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[f(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[f(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var B=z.extend(D);function F(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var j=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function q(t,e,i){return t instanceof F?t:M(t)?new F(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,e,i)}function V(t,e){if(t)for(var i=e?[t,e]:t,r=0,n=i.length;r<n;r++)this.extend(i[r])}function U(t,e){return!t||t instanceof V?t:new V(t,e)}function Z(t,e){if(t)for(var i=e?[t,e]:t,r=0,n=i.length;r<n;r++)this.extend(i[r])}function G(t,e){return t instanceof Z?t:new Z(t,e)}function H(t,e,i){if(isNaN(t)||isNaN(e))throw Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function W(t,e,i){return t instanceof H?t:M(t)&&"object"!=typeof t[0]?3===t.length?new H(t[0],t[1],t[2]):2===t.length?new H(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new H(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new H(t,e,i)}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(q(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(q(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(t){var e=(t=q(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=q(t)).x===this.x&&t.y===this.y},contains:function(t){return Math.abs((t=q(t)).x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}},V.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof F||"number"==typeof t[0]||"x"in t)e=i=q(t);else if(e=(t=U(t)).min,i=t.max,!e||!i)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=e.clone(),this.max=i.clone()),this},getCenter:function(t){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof F?q(t):U(t))instanceof V?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=U(t);var e=this.min,i=this.max,r=t.min,n=t.max,o=n.x>=e.x&&r.x<=i.x,a=n.y>=e.y&&r.y<=i.y;return o&&a},overlaps:function(t){t=U(t);var e=this.min,i=this.max,r=t.min,n=t.max,o=n.x>e.x&&r.x<i.x,a=n.y>e.y&&r.y<i.y;return o&&a},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,r=Math.abs(e.x-i.x)*t,n=Math.abs(e.y-i.y)*t;return U(q(e.x-r,e.y-n),q(i.x+r,i.y+n))},equals:function(t){return!!t&&(t=U(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},Z.prototype={extend:function(t){var e,i,r=this._southWest,n=this._northEast;if(t instanceof H)e=t,i=t;else if(!(t instanceof Z))return t?this.extend(W(t)||G(t)):this;else if(e=t._southWest,i=t._northEast,!e||!i)return this;return r||n?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),n.lat=Math.max(i.lat,n.lat),n.lng=Math.max(i.lng,n.lng)):(this._southWest=new H(e.lat,e.lng),this._northEast=new H(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,r=Math.abs(e.lat-i.lat)*t,n=Math.abs(e.lng-i.lng)*t;return new Z(new H(e.lat-r,e.lng-n),new H(i.lat+r,i.lng+n))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof H||"lat"in t?W(t):G(t);var e,i,r=this._southWest,n=this._northEast;return t instanceof Z?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=r.lat&&i.lat<=n.lat&&e.lng>=r.lng&&i.lng<=n.lng},intersects:function(t){t=G(t);var e=this._southWest,i=this._northEast,r=t.getSouthWest(),n=t.getNorthEast(),o=n.lat>=e.lat&&r.lat<=i.lat,a=n.lng>=e.lng&&r.lng<=i.lng;return o&&a},overlaps:function(t){t=G(t);var e=this._southWest,i=this._northEast,r=t.getSouthWest(),n=t.getNorthEast(),o=n.lat>e.lat&&r.lat<i.lat,a=n.lng>e.lng&&r.lng<i.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=G(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!!(this._southWest&&this._northEast)}},H.prototype={equals:function(t,e){return!!t&&(t=W(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+g(this.lat,t)+", "+g(this.lng,t)+")"},distanceTo:function(t){return $.distance(this,W(t))},wrap:function(){return $.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return G([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new H(this.lat,this.lng,this.alt)}};var X={latLngToPoint:function(t,e){var i=this.projection.project(t),r=this.scale(e);return this.transformation._transform(i,r)},pointToLatLng:function(t,e){var i=this.scale(e),r=this.transformation.untransform(t,i);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new V(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?p(t.lng,this.wrapLng,!0):t.lng;return new H(this.wrapLat?p(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),r=e.lat-i.lat,n=e.lng-i.lng;if(0===r&&0===n)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new Z(new H(o.lat-r,o.lng-n),new H(a.lat-r,a.lng-n))}},$=l({},X,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,r=t.lat*i,n=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=o*o+Math.cos(r)*Math.cos(n)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),Y=6378137,K={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,r=Math.sin(Math.max(Math.min(i,t.lat),-i)*e);return new F(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new H((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Y*Math.PI;return new V([-t,-t],[t,t])}()};function J(t,e,i,r){if(M(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=r}function Q(t,e,i,r){return new J(t,e,i,r)}J.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new F((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var tt=l({},$,{code:"EPSG:3857",projection:K,transformation:function(){var t=.5/(Math.PI*K.R);return Q(t,.5,-t,.5)}()}),te=l({},tt,{code:"EPSG:900913"});function ti(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function tr(t,e){var i,r,n,o,a,s,l="";for(i=0,n=t.length;i<n;i++){for(r=0,o=(a=t[i]).length;r<o;r++)s=a[r],l+=(r?"L":"M")+s.x+" "+s.y;l+=e?tj.svg?"z":"x":""}return l||"M0 0"}var tn=document.documentElement.style,to="ActiveXObject"in window,ta=to&&!document.addEventListener,ts="msLaunchUri"in navigator&&!("documentMode"in document),tl=tF("webkit"),th=tF("android"),tu=tF("android 2")||tF("android 3"),tc=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),tf=th&&tF("Google")&&tc<537&&!("AudioNode"in window),td=!!window.opera,tp=!ts&&tF("chrome"),tm=tF("gecko")&&!tl&&!td&&!to,tg=!tp&&tF("safari"),ty=tF("phantom"),tv="OTransition"in tn,t_=0===navigator.platform.indexOf("Win"),tb=to&&"transition"in tn,tx="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tu,tw="MozPerspective"in tn,tM=!window.L_DISABLE_3D&&(tb||tx||tw)&&!tv&&!ty,tS="undefined"!=typeof orientation||tF("mobile"),tk=tS&&tl,tE=tS&&tx,tI=!window.PointerEvent&&window.MSPointerEvent,tP=!!(window.PointerEvent||tI),tT="ontouchstart"in window||!!window.TouchEvent,tA=!window.L_NO_TOUCH&&(tT||tP),tC=tS&&td,tL=tS&&tm,tR=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tN=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",m,e),window.removeEventListener("testPassiveEventSupport",m,e)}catch(t){}return t}(),tz=function(){return!!document.createElement("canvas").getContext}(),tO=!!(document.createElementNS&&ti("svg").createSVGRect),tD=!!tO&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),tB=!tO&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function tF(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var tj={ie:to,ielt9:ta,edge:ts,webkit:tl,android:th,android23:tu,androidStock:tf,opera:td,chrome:tp,gecko:tm,safari:tg,phantom:ty,opera12:tv,win:t_,ie3d:tb,webkit3d:tx,gecko3d:tw,any3d:tM,mobile:tS,mobileWebkit:tk,mobileWebkit3d:tE,msPointer:tI,pointer:tP,touch:tA,touchNative:tT,mobileOpera:tC,mobileGecko:tL,retina:tR,passiveEvents:tN,canvas:tz,svg:tO,vml:tB,inlineSvg:tD,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},tq=tj.msPointer?"MSPointerDown":"pointerdown",tV=tj.msPointer?"MSPointerMove":"pointermove",tU=tj.msPointer?"MSPointerUp":"pointerup",tZ=tj.msPointer?"MSPointerCancel":"pointercancel",tG={touchstart:tq,touchmove:tV,touchend:tU,touchcancel:tZ},tH={touchstart:t2,touchmove:t1,touchend:t1,touchcancel:t1},tW={},tX=!1;function t$(t,e,i){return("touchstart"===e&&t0(),tH[e])?(i=tH[e].bind(this,i),t.addEventListener(tG[e],i,!1),i):(console.warn("wrong event specified:",e),m)}function tY(t,e,i){if(!tG[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(tG[e],i,!1)}function tK(t){tW[t.pointerId]=t}function tJ(t){tW[t.pointerId]&&(tW[t.pointerId]=t)}function tQ(t){delete tW[t.pointerId]}function t0(){tX||(document.addEventListener(tq,tK,!0),document.addEventListener(tV,tJ,!0),document.addEventListener(tU,tQ,!0),document.addEventListener(tZ,tQ,!0),tX=!0)}function t1(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in e.touches=[],tW)e.touches.push(tW[i]);e.changedTouches=[e],t(e)}}function t2(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&eO(e),t1(t,e)}function t6(t){var e,i,r={};for(i in t)e=t[i],r[i]=e&&e.bind?e.bind(t):e;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var t3=200;function t8(t,e){t.addEventListener("dblclick",e);var i,r=0;function n(t){if(1!==t.detail){i=t.detail;return}if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var n=eB(t);if(!n.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||n.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var o=Date.now();o-r<=t3?2==++i&&e(t6(t)):i=1,r=o}}}return t.addEventListener("click",n),{dblclick:e,simDblclick:n}}function t4(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var t5=ep(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),t7=ep(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),t9="webkitTransition"===t7||"OTransition"===t7?t7+"End":"transitionend";function et(t){return"string"==typeof t?document.getElementById(t):t}function ee(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);i=r?r[e]:null}return"auto"===i?null:i}function ei(t,e,i){var r=document.createElement(t);return r.className=e||"",i&&i.appendChild(r),r}function er(t){var e=t.parentNode;e&&e.removeChild(t)}function en(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function eo(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ea(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function es(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ec(t);return i.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function el(t,e){if(void 0!==t.classList)for(var i=v(e),r=0,n=i.length;r<n;r++)t.classList.add(i[r]);else if(!es(t,e)){var o=ec(t);eu(t,(o?o+" ":"")+e)}}function eh(t,e){void 0!==t.classList?t.classList.remove(e):eu(t,y((" "+ec(t)+" ").replace(" "+e+" "," ")))}function eu(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ec(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ef(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&ed(t,e)}function ed(t,e){var i=!1,r="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function ep(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function em(t,e,i){var r=e||new F(0,0);t.style[t5]=(tj.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(i?" scale("+i+")":"")}function eg(t,e){t._leaflet_pos=e,tj.any3d?em(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ey(t){return t._leaflet_pos||new F(0,0)}if("onselectstart"in document)e=function(){eE(window,"selectstart",eO)},i=function(){eP(window,"selectstart",eO)};else{var ev=ep(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e=function(){if(ev){var t=document.documentElement.style;r=t[ev],t[ev]="none"}},i=function(){ev&&(document.documentElement.style[ev]=r,r=void 0)}}function e_(){eE(window,"dragstart",eO)}function eb(){eP(window,"dragstart",eO)}function ex(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(ew(),n=t,o=t.style.outlineStyle,t.style.outlineStyle="none",eE(window,"keydown",ew))}function ew(){n&&(n.style.outlineStyle=o,n=void 0,o=void 0,eP(window,"keydown",ew))}function eM(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body)return t}function eS(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ek={__proto__:null,TRANSFORM:t5,TRANSITION:t7,TRANSITION_END:t9,get:et,getStyle:ee,create:ei,remove:er,empty:en,toFront:eo,toBack:ea,hasClass:es,addClass:el,removeClass:eh,setClass:eu,getClass:ec,setOpacity:ef,testProp:ep,setTransform:em,setPosition:eg,getPosition:ey,get disableTextSelection(){return e},get enableTextSelection(){return i},disableImageDrag:e_,enableImageDrag:eb,preventOutline:ex,restoreOutline:ew,getSizedParentNode:eM,getScale:eS};function eE(t,e,i,r){if(e&&"object"==typeof e)for(var n in e)eC(t,n,e[n],i);else{e=v(e);for(var o=0,a=e.length;o<a;o++)eC(t,e[o],i,r)}return this}var eI="_leaflet_events";function eP(t,e,i,r){if(1==arguments.length)eT(t),delete t[eI];else if(e&&"object"==typeof e)for(var n in e)eL(t,n,e[n],i);else if(e=v(e),2==arguments.length)eT(t,function(t){return -1!==S(e,t)});else for(var o=0,a=e.length;o<a;o++)eL(t,e[o],i,r);return this}function eT(t,e){for(var i in t[eI]){var r=i.split(/\d/)[0];(!e||e(r))&&eL(t,r,null,null,i)}}var eA={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function eC(t,e,i,r){var n=e+f(i)+(r?"_"+f(r):"");if(t[eI]&&t[eI][n])return this;var o=function(e){return i.call(r||t,e||window.event)},a=o;!tj.touchNative&&tj.pointer&&0===e.indexOf("touch")?o=t$(t,e,o):tj.touch&&"dblclick"===e?o=t8(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(eA[e]||e,o,!!tj.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){eV(t,e=e||window.event)&&a(e)},t.addEventListener(eA[e],o,!1)):t.addEventListener(e,a,!1):t.attachEvent("on"+e,o),t[eI]=t[eI]||{},t[eI][n]=o}function eL(t,e,i,r,n){n=n||e+f(i)+(r?"_"+f(r):"");var o=t[eI]&&t[eI][n];if(!o)return this;!tj.touchNative&&tj.pointer&&0===e.indexOf("touch")?tY(t,e,o):tj.touch&&"dblclick"===e?t4(t,o):"removeEventListener"in t?t.removeEventListener(eA[e]||e,o,!1):t.detachEvent("on"+e,o),t[eI][n]=null}function eR(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function eN(t){return eC(t,"wheel",eR),this}function ez(t){return eE(t,"mousedown touchstart dblclick contextmenu",eR),t._leaflet_disable_click=!0,this}function eO(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function eD(t){return eO(t),eR(t),this}function eB(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function eF(t,e){if(!e)return new F(t.clientX,t.clientY);var i=eS(e),r=i.boundingClientRect;return new F((t.clientX-r.left)/i.x-e.clientLeft,(t.clientY-r.top)/i.y-e.clientTop)}var ej=tj.linux&&tj.chrome?window.devicePixelRatio:tj.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function eq(t){return tj.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ej:t.deltaY&&1===t.deltaMode?-(20*t.deltaY):t.deltaY&&2===t.deltaMode?-(60*t.deltaY):t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>Math.abs(t.detail)?-(20*t.detail):t.detail?-(60*(t.detail/32765)):0}function eV(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var eU={__proto__:null,on:eE,off:eP,stopPropagation:eR,disableScrollPropagation:eN,disableClickPropagation:ez,preventDefault:eO,stop:eD,getPropagationPath:eB,getMousePosition:eF,getWheelDelta:eq,isExternalTarget:eV,addListener:eE,removeListener:eP},eZ=B.extend({run:function(t,e,i,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=ey(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),eg(this._el,i),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),eG=B.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=_(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(W(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=t7&&tj.any3d&&!tj.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),eE(this._proxy,t9,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(W(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=l({animate:i.animate},i.zoom),i.pan=l({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))?clearTimeout(this._sizeTimer):this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(tj.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(tj.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var r=this.getZoomScale(e),n=this.getSize().divideBy(2),o=(t instanceof F?t:this.latLngToContainerPoint(t)).subtract(n).multiplyBy(1-1/r),a=this.containerPointToLatLng(n.add(o));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():G(t);var i=q(e.paddingTopLeft||e.padding||[0,0]),r=q(e.paddingBottomRight||e.padding||[0,0]),n=this.getBoundsZoom(t,!1,i.add(r));if((n="number"==typeof e.maxZoom?Math.min(e.maxZoom,n):n)===1/0)return{center:t.getCenter(),zoom:n};var o=r.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),n),s=this.project(t.getNorthEast(),n);return{center:this.unproject(a.add(s).divideBy(2).add(o),n),zoom:n}},fitBounds:function(t,e){if(!(t=G(t)).isValid())throw Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=q(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new eZ,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){el(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!tj.any3d)return this.setView(t,e,i);this._stop();var r=this.project(this.getCenter()),n=this.project(t),o=this.getSize(),a=this._zoom;t=W(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),l=s*this.getZoomScale(a,e),h=n.distanceTo(r)||1,u=1.42,c=2.0164;function f(t){var e=t?-1:1,i=t?l:s,r=(l*l-s*s+e*c*c*h*h)/(2*i*c*h),n=Math.sqrt(r*r+1)-r;return n<1e-9?-18:Math.log(n)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return d(t)/p(t)}var g=f(0);function y(t){return s*(p(g)/p(g+u*t))}function v(t){return s*(p(g)*m(g+u*t)-d(g))/c}function _(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),x=(f(1)-g)/u,w=i.duration?1e3*i.duration:1e3*x*.8;function M(){var i=(Date.now()-b)/w,o=_(i)*x;i<=1?(this._flyToFrame=C(M,this),this._move(this.unproject(r.add(n.subtract(r).multiplyBy(v(o)/h)),a),this.getScaleZoom(s/y(o),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),M.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=G(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid())?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return(this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom))?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return(this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom))?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),r=this._limitCenter(i,this._zoom,G(t));return i.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=q((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=q(e.paddingBottomRight||e.padding||[0,0]),n=this.project(this.getCenter()),o=this.project(t),a=this.getPixelBounds(),s=U([a.min.add(i),a.max.subtract(r)]),l=s.getSize();if(!s.contains(o)){this._enforcingBounds=!0;var h=o.subtract(s.getCenter()),u=s.extend(o).getSize().subtract(l);n.x+=h.x<0?-u.x:u.x,n.y+=h.y<0?-u.y:u.y,this.panTo(this.unproject(n),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=e.divideBy(2).round(),n=i.divideBy(2).round(),o=r.subtract(n);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=u(this._handleGeolocationResponse,this),i=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,r=new H(e,i),n=r.toBounds(2*t.coords.accuracy),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(n);this.setView(r,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:r,bounds:n,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){var t;if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),er(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)er(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ei("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return(this._checkIfLoaded(),this._lastCenter&&!this._moved())?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new Z(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=G(t),i=q(i||[0,0]);var r=this.getZoom()||0,n=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),h=U(this.project(s,r),this.project(a,r)).getSize(),u=tj.any3d?this.options.zoomSnap:1,c=l.x/h.x,f=l.y/h.y,d=e?Math.max(c,f):Math.min(c,f);return r=this.getScaleZoom(d,r),u&&(r=u/100*Math.round(r/(u/100)),r=e?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(n,Math.min(o,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new V(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var r=i.zoom(t*i.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(W(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(q(t),e)},layerPointToLatLng:function(t){var e=q(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(W(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(W(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(G(t))},distance:function(t,e){return this.options.crs.distance(W(t),W(e))},containerPointToLayerPoint:function(t){return q(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return q(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(q(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t)))},mouseEventToContainerPoint:function(t){return eF(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=et(t);if(e){if(e._leaflet_id)throw Error("Map container is already initialized.")}else throw Error("Map container not found.");eE(e,"scroll",this._onScroll,this),this._containerId=f(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&tj.any3d,el(t,"leaflet-container"+(tj.touch?" leaflet-touch":"")+(tj.retina?" leaflet-retina":"")+(tj.ielt9?" leaflet-oldie":"")+(tj.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ee(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),eg(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(el(t.markerPane,"leaflet-zoom-hide"),el(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){eg(this._mapPane,new F(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,i)._move(t,e)._moveEnd(n),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,r){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?i&&i.pinch&&this.fire("zoom",i):((n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){eg(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[f(this._container)]=this;var e=t?eP:eE;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),tj.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,r=[],n="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((i=this._targets[f(o)])&&("click"===e||"preclick"===e)&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)&&(n&&!eV(o,t)||(r.push(i),n))||o===this._container)break;o=o.parentNode}return!r.length&&!a&&!n&&this.listens(e,!0)&&(r=[this]),r},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var i=t.type;"mousedown"===i&&ex(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=l({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var n=this._findEventTargets(t,e);if(i){for(var o=[],a=0;a<i.length;a++)i[a].listens(e,!0)&&o.push(i[a]);n=o.concat(n)}if(n.length){"contextmenu"===e&&eO(t);var s=n[0],h={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var u=s.getLatLng&&(!s._radius||s._radius<=10);h.containerPoint=u?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=u?s.getLatLng():this.layerPointToLatLng(h.layerPoint)}for(a=0;a<n.length;a++)if(n[a].fire(e,h,!0),h.originalEvent._stopped||!1===n[a].options.bubblingMouseEvents&&-1!==S(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ey(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var r=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,i){var r=this._getNewPixelOrigin(i,e);return U([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var r=this.project(t,e),n=this.getSize().divideBy(2),o=new V(r.subtract(n),r.add(n)),a=this._getBoundsOffset(o,i,e);return 1>=Math.abs(a.x)&&1>=Math.abs(a.y)?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),r=new V(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,i){var r=U(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),n=r.min.subtract(t.min),o=r.max.subtract(t.max);return new F(this._rebound(n.x,-o.x),this._rebound(n.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),r=tj.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){eh(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!!(!0===(e&&e.animate)||this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=ei("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=t5,i=this._proxy.style[e];em(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){er(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();em(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),n=this._getCenterOffset(t)._divideBy(1-1/r);return!!(!0===i.animate||this.getSize().contains(n))&&(C(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,el(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&eh(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function eH(t,e){return new eG(t,e)}var eW=z.extend({options:{position:"topright"},initialize:function(t){_(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),r=t._controlCorners[i];return el(e,"leaflet-control"),-1!==i.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(er(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),eX=function(t){return new eW(t)};eG.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ei("div",e+"control-container",this._container);function r(r,n){var o=e+r+" "+e+n;t[r+n]=ei("div",o,i)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)er(this._controlCorners[t]);er(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var e$=eW.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,r){return i<r?-1:r<i?1:0}},initialize:function(t,e,i){for(var r in _(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return eW.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(f(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){el(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(el(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):eh(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return eh(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ei("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ez(e),eN(e);var r=this._section=ei("section",t+"-list");i&&(this._map.on("click",this.collapse,this),eE(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var n=this._layersLink=ei("a",t+"-toggle",e);n.href="#",n.title="Layers",n.setAttribute("role","button"),eE(n,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){eO(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=ei("div",t+"-base",r),this._separator=ei("div",t+"-separator",r),this._overlaysList=ei("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&f(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(u(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;en(this._baseLayersList),en(this._overlaysList),this._layerControlInputs=[];var t,e,i,r,n=0;for(i=0;i<this._layers.length;i++)r=this._layers[i],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,n+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&n>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(f(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=i,r.firstChild},_addItem:function(t){var e,i=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+f(this),r),this._layerControlInputs.push(e),e.layerId=f(t.layer),eE(e,"click",this._onInputClick,this);var n=document.createElement("span");n.innerHTML=" "+t.name;var o=document.createElement("span");return i.appendChild(o),o.appendChild(e),o.appendChild(n),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t,e,i=this._layerControlInputs,r=[],n=[];this._handlingClick=!0;for(var o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||n.push(e);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])&&this._map.removeLayer(n[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,r=this._map.getZoom(),n=i.length-1;n>=0;n--)t=i[n],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,eE(t,"click",eO),this.expand();var e=this;setTimeout(function(){eP(t,"click",eO),e._preventClick=!1})}}),eY=function(t,e,i){return new e$(t,e,i)},eK=eW.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ei("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,r,n){var o=ei("a",i,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),ez(o),eE(o,"click",eD),eE(o,"click",n,this),eE(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";eh(this._zoomInButton,e),eh(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(el(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(el(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});eG.mergeOptions({zoomControl:!0}),eG.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new eK,this.addControl(this.zoomControl))});var eJ=function(t){return new eK(t)},eQ=eW.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ei("div",e),r=this.options;return this._addScales(r,e+"-line",i),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ei("div",e,i)),t.imperial&&(this._iScale=ei("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,r,n=3.2808399*t;n>5280?(e=n/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(r=this._getRoundNum(n),this._updateScale(this._iScale,r+" ft",r/n))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),e0=function(t){return new eQ(t)},e1='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',e2=eW.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(tj.inlineSvg?e1+" ":"")+"Leaflet</a>"},initialize:function(t){_(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ei("div","leaflet-control-attribution"),ez(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});eG.mergeOptions({attributionControl:!0}),eG.addInitHook(function(){this.options.attributionControl&&new e2().addTo(this)});var e6=function(t){return new e2(t)};eW.Layers=e$,eW.Zoom=eK,eW.Scale=eQ,eW.Attribution=e2,eX.layers=eY,eX.zoom=eJ,eX.scale=e0,eX.attribution=e6;var e3=z.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});e3.addTo=function(t,e){return t.addHandler(e,this),this};var e8={Events:D},e4=tj.touch?"touchstart mousedown":"mousedown",e5=B.extend({options:{clickTolerance:3},initialize:function(t,e,i,r){_(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(eE(this._dragStartTarget,e4,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(e5._dragging===this&&this.finishDrag(!0),eP(this._dragStartTarget,e4,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(!this._enabled||(this._moved=!1,es(this._element,"leaflet-zoom-anim")))){if(t.touches&&1!==t.touches.length){e5._dragging===this&&this.finishDrag();return}if(!e5._dragging&&!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(e5._dragging=this,this._preventOutline&&ex(this._element),e_(),e(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,r=eM(this._element);this._startPoint=new F(i.clientX,i.clientY),this._startPos=ey(this._element),this._parentScale=eS(r);var n="mousedown"===t.type;eE(document,n?"mousemove":"touchmove",this._onMove,this),eE(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new F(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,eO(t),this._moved||(this.fire("dragstart"),this._moved=!0,el(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),el(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),eg(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){eh(document.body,"leaflet-dragging"),this._lastTarget&&(eh(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),eP(document,"mousemove touchmove",this._onMove,this),eP(document,"mouseup touchend touchcancel",this._onUp,this),eb(),i();var e=this._moved&&this._moving;this._moving=!1,e5._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function e7(t,e,i){var r,n,o,a,s,l,h,u,c,f=[1,4,2,8];for(n=0,h=t.length;n<h;n++)t[n]._code=iu(t[n],e);for(a=0;a<4;a++){for(n=0,u=f[a],r=[],o=(h=t.length)-1;n<h;o=n++)s=t[n],l=t[o],s._code&u?l._code&u||((c=ih(l,s,u,e,i))._code=iu(c,e),r.push(c)):(l._code&u&&((c=ih(l,s,u,e,i))._code=iu(c,e),r.push(c)),r.push(s));t=r}return t}function e9(t,e){if(!t||0===t.length)throw Error("latlngs not passed");ip(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var i,r,n,o,a,s,l,h,u,c=W([0,0]),f=G(t);f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(c=it(t));var d=t.length,p=[];for(i=0;i<d;i++){var m=W(t[i]);p.push(e.project(W([m.lat-c.lat,m.lng-c.lng])))}for(i=0,s=l=h=0,r=d-1;i<d;r=i++)n=p[i],o=p[r],a=n.y*o.x-o.y*n.x,l+=(n.x+o.x)*a,h+=(n.y+o.y)*a,s+=3*a;u=0===s?p[0]:[l/s,h/s];var g=e.unproject(q(u));return W([g.lat+c.lat,g.lng+c.lng])}function it(t){for(var e=0,i=0,r=0,n=0;n<t.length;n++){var o=W(t[n]);e+=o.lat,i+=o.lng,r++}return W([e/r,i/r])}var ie={__proto__:null,clipPolygon:e7,polygonCenter:e9,centroid:it};function ii(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=io(t=is(t,i),i)}function ir(t,e,i){return Math.sqrt(id(t,e,i,!0))}function io(t,e){var i=t.length,r=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(i);r[0]=r[i-1]=1,ia(t,r,e,0,i-1);var n,o=[];for(n=0;n<i;n++)r[n]&&o.push(t[n]);return o}function ia(t,e,i,r,n){var o,a,s,l=0;for(a=r+1;a<=n-1;a++)(s=id(t[a],t[r],t[n],!0))>l&&(o=a,l=s);l>i&&(e[o]=1,ia(t,e,i,r,o),ia(t,e,i,o,n))}function is(t,e){for(var i=[t[0]],r=1,n=0,o=t.length;r<o;r++)ic(t[r],t[n])>e&&(i.push(t[r]),n=r);return n<o-1&&i.push(t[o-1]),i}function il(t,e,i,r,n){var o,s,l,h=r?a:iu(t,i),u=iu(e,i);for(a=u;;){if(!(h|u))return[t,e];if(h&u)return!1;l=iu(s=ih(t,e,o=h||u,i,n),i),o===h?(t=s,h=l):(e=s,u=l)}}function ih(t,e,i,r,n){var o,a,s=e.x-t.x,l=e.y-t.y,h=r.min,u=r.max;return 8&i?(o=t.x+s*(u.y-t.y)/l,a=u.y):4&i?(o=t.x+s*(h.y-t.y)/l,a=h.y):2&i?(o=u.x,a=t.y+l*(u.x-t.x)/s):1&i&&(o=h.x,a=t.y+l*(h.x-t.x)/s),new F(o,a,n)}function iu(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function ic(t,e){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function id(t,e,i,r){var n,o=e.x,a=e.y,s=i.x-o,l=i.y-a,h=s*s+l*l;return h>0&&((n=((t.x-o)*s+(t.y-a)*l)/h)>1?(o=i.x,a=i.y):n>0&&(o+=s*n,a+=l*n)),s=t.x-o,l=t.y-a,r?s*s+l*l:new F(o,a)}function ip(t){return!M(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function im(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ip(t)}function ig(t,e){if(!t||0===t.length)throw Error("latlngs not passed");ip(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var i,r,n,o,a,s,l,h,u=W([0,0]),c=G(t);c.getNorthWest().distanceTo(c.getSouthWest())*c.getNorthEast().distanceTo(c.getNorthWest())<1700&&(u=it(t));var f=t.length,d=[];for(i=0;i<f;i++){var p=W(t[i]);d.push(e.project(W([p.lat-u.lat,p.lng-u.lng])))}for(i=0,r=0;i<f-1;i++)r+=d[i].distanceTo(d[i+1])/2;if(0===r)h=d[0];else for(i=0,o=0;i<f-1;i++)if(a=d[i],s=d[i+1],(o+=n=a.distanceTo(s))>r){l=(o-r)/n,h=[s.x-l*(s.x-a.x),s.y-l*(s.y-a.y)];break}var m=e.unproject(q(h));return W([m.lat+u.lat,m.lng+u.lng])}var iy={__proto__:null,simplify:ii,pointToSegmentDistance:ir,closestPointOnSegment:function(t,e,i){return id(t,e,i)},clipSegment:il,_getEdgeIntersection:ih,_getBitCode:iu,_sqClosestPointOnSegment:id,isFlat:ip,_flat:im,polylineCenter:ig},iv={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new H(t.y,t.x)},bounds:new V([-180,-90],[180,90])},i_={R:6378137,R_MINOR:6356752.314245179,bounds:new V([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,r=t.lat*e,n=this.R_MINOR/i,o=Math.sqrt(1-n*n),a=o*Math.sin(r);return r=-i*Math.log(Math.max(Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2),1e-10)),new F(t.lng*e*i,r)},unproject:function(t){for(var e,i=180/Math.PI,r=this.R,n=this.R_MINOR/r,o=Math.sqrt(1-n*n),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)h=Math.PI/2-2*Math.atan(a*(e=Math.pow((1-(e=o*Math.sin(s)))/(1+e),o/2)))-s,s+=h;return new H(s*i,t.x*i/r)}},ib={__proto__:null,LonLat:iv,Mercator:i_,SphericalMercator:K},ix=l({},$,{code:"EPSG:3395",projection:i_,transformation:function(){var t=.5/(Math.PI*i_.R);return Q(t,.5,-t,.5)}()}),iw=l({},$,{code:"EPSG:4326",projection:iv,transformation:Q(1/180,1,-1/180,.5)}),iM=l({},X,{projection:iv,transformation:Q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(i*i+r*r)},infinite:!0});X.Earth=$,X.EPSG3395=ix,X.EPSG3857=tt,X.EPSG900913=te,X.EPSG4326=iw,X.Simple=iM;var iS=B.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[f(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[f(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});eG.include({addLayer:function(t){if(!t._layerAdd)throw Error("The provided object is not a Layer.");var e=f(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=f(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return f(t) in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?M(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[f(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=f(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var r in this._zoomBoundLayers){var n=this._zoomBoundLayers[r].options;t=void 0===n.minZoom?t:Math.min(t,n.minZoom),e=void 0===n.maxZoom?e:Math.max(e,n.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ik=iS.extend({initialize:function(t,e){var i,r;if(_(this,e),this._layers={},t)for(i=0,r=t.length;i<r;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return f(t)}}),iE=function(t,e){return new ik(t,e)},iI=ik.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ik.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ik.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Z;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),iP=function(t,e){return new iI(t,e)},iT=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){_(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var i=this.options,r=i[e+"Size"];"number"==typeof r&&(r=[r,r]);var n=q(r),o=q("shadow"===e&&i.shadowAnchor||i.iconAnchor||n&&n.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),n&&(t.style.width=n.x+"px",t.style.height=n.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return tj.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function iA(t){return new iT(t)}var iC=iT.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof iC.imagePath&&(iC.imagePath=this._detectIconPath()),(this.options.imagePath||iC.imagePath)+iT.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,i){var r=e.exec(t);return r&&r[i]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ei("div","leaflet-default-icon-path",document.body),e=ee(t,"background-image")||ee(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),iL=e3.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new e5(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),el(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&eh(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,r=this._marker.options.autoPanSpeed,n=this._marker.options.autoPanPadding,o=ey(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),l=U(a.min._subtract(s).add(n),a.max._subtract(s).subtract(n));if(!l.contains(o)){var h=q((Math.max(l.max.x,o.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(r);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),eg(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,r=ey(e._icon),n=e._map.layerPointToLatLng(r);i&&eg(i,r),e._latlng=n,t.latlng=n,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),iR=iS.extend({options:{icon:new iC,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){_(this,e),this._latlng=W(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),r=!1;i!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),el(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&eE(i,"focus",this._panOnFocus,this);var n=t.icon.createShadow(this._shadow),o=!1;n!==this._shadow&&(this._removeShadow(),o=!0),n&&(el(n,e),n.alt=""),this._shadow=n,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),n&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&eP(this._icon,"focus",this._panOnFocus,this),er(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&er(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&eg(this._icon,t),this._shadow&&eg(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(el(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),iL)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new iL(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ef(this._icon,t),this._shadow&&ef(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?q(e.iconSize):q(0,0),r=e.iconAnchor?q(e.iconAnchor):q(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:i.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function iN(t,e){return new iR(t,e)}var iz=iS.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return _(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),iO=iz.extend({options:{fill:!0,radius:10},initialize:function(t,e){_(this,e),this._latlng=W(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return iz.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),r=[t+i,e+i];this._pxBounds=new V(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function iD(t,e){return new iO(t,e)}var iB=iO.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=l({},i,{radius:e})),_(this,e),this._latlng=W(t),isNaN(this.options.radius))throw Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Z(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:iz.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,r=i.options.crs;if(r.distance===$.distance){var n=Math.PI/180,o=this._mRadius/$.R/n,a=i.project([e+o,t]),s=i.project([e-o,t]),l=a.add(s).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(o*n)-Math.sin(e*n)*Math.sin(h*n))/(Math.cos(e*n)*Math.cos(h*n)))/n;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([h,t-u]).x,this._radiusY=l.y-a.y}else{var c=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});function iF(t,e,i){return new iB(t,e,i)}var ij=iz.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){_(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,r=1/0,n=null,o=id,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],h=1,u=l.length;h<u;h++){var c=o(t,e=l[h-1],i=l[h],!0);c<r&&(r=c,n=o(t,e,i))}return n&&(n.distance=Math.sqrt(r)),n},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return ig(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=W(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Z,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return ip(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=ip(t),r=0,n=t.length;r<n;r++)i?(e[r]=W(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new F(t,t);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var r,n,o=t[0]instanceof H,a=t.length;if(o){for(r=0,n=[];r<a;r++)n[r]=this._map.latLngToLayerPoint(t[r]),i.extend(n[r]);e.push(n)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip){this._parts=this._rings;return}var e,i,r,n,o,a,s,l=this._parts;for(e=0,r=0,n=this._rings.length;e<n;e++)for(i=0,o=(s=this._rings[e]).length;i<o-1;i++)(a=il(s[i],s[i+1],t,i,!0))&&(l[r]=l[r]||[],l[r].push(a[0]),(a[1]!==s[i+1]||i===o-2)&&(l[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,r=t.length;i<r;i++)t[i]=ii(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,r,n,o,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,o=this._parts.length;i<o;i++)for(r=0,n=(a=(s=this._parts[i]).length)-1;r<a;n=r++)if((e||0!==r)&&ir(t,s[n],s[r])<=l)return!0;return!1}});function iq(t,e){return new ij(t,e)}ij._flat=im;var iV=ij.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return e9(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=ij.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof H&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){ij.prototype._setLatLngs.call(this,t),ip(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ip(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new F(e,e);if(t=new V(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip){this._parts=this._rings;return}for(var r,n=0,o=this._rings.length;n<o;n++)(r=e7(this._rings[n],t,!0)).length&&this._parts.push(r)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,r,n,o,a,s,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,s=this._parts.length;n<s;n++)for(o=0,a=(l=(e=this._parts[n]).length)-1;o<l;a=o++)i=e[o],r=e[a],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(h=!h);return h||ij.prototype._containsPoint.call(this,t,!0)}});function iU(t,e){return new iV(t,e)}var iZ=iI.extend({initialize:function(t,e){_(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,r,n=M(t)?t:t.features;if(n){for(e=0,i=n.length;e<i;e++)((r=n[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=iG(t,o);return a?(a.feature=iJ(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function iG(t,e){var i,r,n,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],h=e&&e.pointToLayer,u=e&&e.coordsToLatLng||iW;if(!s&&!a)return null;switch(a.type){case"Point":return iH(h,t,i=u(s),e);case"MultiPoint":for(n=0,o=s.length;n<o;n++)i=u(s[n]),l.push(iH(h,t,i,e));return new iI(l);case"LineString":case"MultiLineString":return new ij(r=iX(s,"LineString"===a.type?0:1,u),e);case"Polygon":case"MultiPolygon":return new iV(r=iX(s,"Polygon"===a.type?1:2,u),e);case"GeometryCollection":for(n=0,o=a.geometries.length;n<o;n++){var c=iG({geometry:a.geometries[n],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new iI(l);case"FeatureCollection":for(n=0,o=a.features.length;n<o;n++){var f=iG(a.features[n],e);f&&l.push(f)}return new iI(l);default:throw Error("Invalid GeoJSON object.")}}function iH(t,e,i,r){return t?t(e,i):new iR(i,r&&r.markersInheritOptions&&r)}function iW(t){return new H(t[1],t[0],t[2])}function iX(t,e,i){for(var r=[],n=0,o=t.length;n<o;n++)r.push(e?iX(t[n],e-1,i):(i||iW)(t[n]));return r}function i$(t,e){return void 0!==(t=W(t)).alt?[g(t.lng,e),g(t.lat,e),g(t.alt,e)]:[g(t.lng,e),g(t.lat,e)]}function iY(t,e,i,r){for(var n=[],o=0,a=t.length;o<a;o++)n.push(e?iY(t[o],ip(t[o])?0:e-1,i,r):i$(t[o],r));return!e&&i&&n.length>0&&n.push(n[0].slice()),n}function iK(t,e){return t.feature?l({},t.feature,{geometry:e}):iJ(e)}function iJ(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var iQ={toGeoJSON:function(t){return iK(this,{type:"Point",coordinates:i$(this.getLatLng(),t)})}};function i0(t,e){return new iZ(t,e)}iR.include(iQ),iB.include(iQ),iO.include(iQ),ij.include({toGeoJSON:function(t){var e=!ip(this._latlngs),i=iY(this._latlngs,e?1:0,!1,t);return iK(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),iV.include({toGeoJSON:function(t){var e=!ip(this._latlngs),i=e&&!ip(this._latlngs[0]),r=iY(this._latlngs,i?2:e?1:0,!0,t);return e||(r=[r]),iK(this,{type:(i?"Multi":"")+"Polygon",coordinates:r})}}),ik.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),iK(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,r=[];return(this.eachLayer(function(e){if(e.toGeoJSON){var n=e.toGeoJSON(t);if(i)r.push(n.geometry);else{var o=iJ(n);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),i)?iK(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var i1=i0,i2=iS.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=G(e),_(this,i)},onAdd:function(){!this._image&&(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(el(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){er(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&eo(this._image),this},bringToBack:function(){return this._map&&ea(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=G(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ei("img");if(el(e,"leaflet-image-layer"),this._zoomAnimated&&el(e,"leaflet-zoom-animated"),this.options.className&&el(e,this.options.className),e.onselectstart=m,e.onmousemove=m,e.onload=u(this.fire,this,"load"),e.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;em(this._image,i,e)},_reset:function(){var t=this._image,e=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();eg(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){ef(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),i6=function(t,e,i){return new i2(t,e,i)},i3=i2.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ei("video");if(el(e,"leaflet-image-layer"),this._zoomAnimated&&el(e,"leaflet-zoom-animated"),this.options.className&&el(e,this.options.className),e.onselectstart=m,e.onmousemove=m,e.onloadeddata=u(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],n=0;n<i.length;n++)r.push(i[n].src);this._url=i.length>0?r:[e.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var a=ei("source");a.src=this._url[o],e.appendChild(a)}}});function i8(t,e,i){return new i3(t,e,i)}var i4=i2.extend({_initImage:function(){var t=this._image=this._url;el(t,"leaflet-image-layer"),this._zoomAnimated&&el(t,"leaflet-zoom-animated"),this.options.className&&el(t,this.options.className),t.onselectstart=m,t.onmousemove=m}});function i5(t,e,i){return new i4(t,e,i)}var i7=iS.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof H||M(t))?(this._latlng=W(t),_(this,e)):(_(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ef(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ef(this._container,1),this.bringToFront(),this.options.interactive&&(el(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(ef(this._container,0),this._removeTimeout=setTimeout(u(er,void 0,this._container),200)):er(this._container),this.options.interactive&&(eh(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=W(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&eo(this._container),this},bringToBack:function(){return this._map&&ea(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof iI){e=null;var i=this._source._layers;for(var r in i)if(i[r]._map){e=i[r];break}if(!e)return!1;this._source=e}if(!t){if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw Error("Unable to get source layer LatLng.")}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=q(this.options.offset),i=this._getAnchor();this._zoomAnimated?eg(this._container,t.add(i)):e=e.add(t).add(i);var r=this._containerBottom=-e.y,n=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=n+"px"}},_getAnchor:function(){return[0,0]}});eG.include({_initOverlay:function(t,e,i,r){var n=e;return n instanceof t||(n=new t(r).setContent(e)),i&&n.setLatLng(i),n}}),iS.include({_initOverlay:function(t,e,i,r){var n=i;return n instanceof t?(_(n,r),n._source=this):(n=e&&!r?e:new t(r,this)).setContent(i),n}});var i9=i7.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,i7.prototype.openOn.call(this,t)},onAdd:function(t){i7.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),!this._source||(this._source.fire("popupopen",{popup:this},!0),this._source instanceof iz||this._source.on("preclick",eR))},onRemove:function(t){i7.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),!this._source||(this._source.fire("popupclose",{popup:this},!0),this._source instanceof iz||this._source.off("preclick",eR))},getEvents:function(){var t=i7.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=ei("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ei("div",t+"-content-wrapper",e);if(this._contentNode=ei("div",t+"-content",i),ez(e),eN(this._contentNode),eE(e,"contextmenu",eR),this._tipContainer=ei("div",t+"-tip-container",e),this._tip=ei("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ei("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',eE(r,"click",function(t){eO(t),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.max(i=Math.min(i,this.options.maxWidth),this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,n=this.options.maxHeight,o="leaflet-popup-scrolled";n&&r>n?(e.height=n+"px",el(t,o)):eh(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();eg(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(ee(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,r=this._containerWidth,n=new F(this._containerLeft,-i-this._containerBottom);n._add(ey(this._container));var o=t.layerPointToContainerPoint(n),a=q(this.options.autoPanPadding),s=q(this.options.autoPanPaddingTopLeft||a),l=q(this.options.autoPanPaddingBottomRight||a),h=t.getSize(),u=0,c=0;o.x+r+l.x>h.x&&(u=o.x+r-h.x+l.x),o.x-u-s.x<0&&(u=o.x-s.x),o.y+i+l.y>h.y&&(c=o.y+i-h.y+l.y),o.y-c-s.y<0&&(c=o.y-s.y),(u||c)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([u,c]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rt=function(t,e){return new i9(t,e)};eG.mergeOptions({closePopupOnClick:!0}),eG.include({openPopup:function(t,e,i){return this._initOverlay(i9,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),iS.include({bindPopup:function(t,e){return this._popup=this._initOverlay(i9,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof iI||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){eD(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof iz)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var re=i7.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){i7.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){i7.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=i7.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ei("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,r=this._map,n=this._container,o=r.latLngToContainerPoint(r.getCenter()),a=r.layerPointToContainerPoint(t),s=this.options.direction,l=n.offsetWidth,h=n.offsetHeight,u=q(this.options.offset),c=this._getAnchor();"top"===s?(e=l/2,i=h):"bottom"===s?(e=l/2,i=0):("center"===s?e=l/2:"right"===s?e=0:"left"===s?e=l:a.x<o.x?(s="right",e=0):(s="left",e=l+(u.x+c.x)*2),i=h/2),t=t.subtract(q(e,i,!0)).add(u).add(c),eh(n,"leaflet-tooltip-right"),eh(n,"leaflet-tooltip-left"),eh(n,"leaflet-tooltip-top"),eh(n,"leaflet-tooltip-bottom"),el(n,"leaflet-tooltip-"+s),eg(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ef(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ri=function(t,e){return new re(t,e)};eG.include({openTooltip:function(t,e,i){return this._initOverlay(re,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),iS.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(re,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof iI||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&(eE(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),eE(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e,i,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(r)}});var rr=iT.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(en(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var r=q(i.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function rn(t){return new rr(t)}iT.Default=iC;var ro=iS.extend({options:{tileSize:256,opacity:1,updateWhenIdle:tj.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){_(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),er(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(eo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ea(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,r=-t(-1/0,1/0),n=0,o=i.length;n<o;n++)e=i[n].style.zIndex,i[n]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tj.ielt9){ef(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var r in this._tiles){var n=this._tiles[r];if(n.current&&n.loaded){var o=Math.min(1,(t-n.loaded)/200);ef(n.el,o),o<1?e=!0:(n.active?i=!0:this._onOpaqueTile(n),n.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(R(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ei("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(er(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var r=this._levels[t],n=this._map;return r||((r=this._levels[t]={}).el=ei("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=n.project(n.unproject(n.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,n.getCenter(),n.getZoom()),m(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)er(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,r){var n=Math.floor(t/2),o=Math.floor(e/2),a=i-1,s=new F(+n,+o);s.z=+a;var l=this._tileCoordsToKey(s),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),a>r&&this._retainParent(n,o,a,r))},_retainChildren:function(t,e,i,r){for(var n=2*t;n<2*t+2;n++)for(var o=2*e;o<2*e+2;o++){var a=new F(n,o);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];if(l&&l.active){l.retain=!0;continue}l&&l.loaded&&(l.retain=!0),i+1<r&&this._retainChildren(n,o,i+1,r)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,r){var n=Math.round(e);n=void 0!==this.options.maxZoom&&n>this.options.maxZoom||void 0!==this.options.minZoom&&n<this.options.minZoom?void 0:this._clampZoom(n);var o=this.options.updateWhenZooming&&n!==this._tileZoom;(!r||o)&&(this._tileZoom=n,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==n&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var r=this._map.getZoomScale(i,t.zoom),n=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,i)).round();tj.any3d?em(t.el,n,r):eg(t.el,n)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),r=this._tileZoom,n=this._map.getPixelWorldBounds(this._tileZoom);n&&(this._globalTileRange=this._pxBoundsToTileRange(n)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(i,this._tileZoom),n=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new V(n.subtract(o),n.add(o))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),n=this._pxBoundsToTileRange(r),o=n.getCenter(),a=[],s=this.options.keepBuffer,l=new V(n.getBottomLeft().subtract([s,-s]),n.getTopRight().add([s,-s]));if(!(isFinite(n.min.x)&&isFinite(n.min.y)&&isFinite(n.max.x)&&isFinite(n.max.y)))throw Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var u=this._tiles[h].coords;u.z===this._tileZoom&&l.contains(new F(u.x,u.y))||(this._tiles[h].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var c=n.min.y;c<=n.max.y;c++)for(var f=n.min.x;f<=n.max.x;f++){var d=new F(f,c);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return G(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),r=t.scaleBy(i),n=r.add(i);return[e.unproject(r,t.z),e.unproject(n,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new Z(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new F(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(er(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){el(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=m,t.onmousemove=m,tj.ielt9&&this.options.opacity<1&&ef(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),n=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(n),this.createTile.length<2&&C(u(this._tileReady,this,t,null,n)),eg(n,i),this._tiles[r]={el:n,coords:t,current:!0},e.appendChild(n),this.fire("tileloadstart",{tile:n,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);(i=this._tiles[r])&&(i.loaded=+new Date,this._map._fadeAnimated?(ef(i.el,0),R(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(el(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tj.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new F(this._wrapX?p(t.x,this._wrapX):t.x,this._wrapY?p(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new V(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ra(t){return new ro(t)}var rs=ro.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=_(this,e)).detectRetina&&tj.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return eE(i,"load",u(this._tileOnLoad,this,e,i)),eE(i,"error",u(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:tj.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return w(this._url,l(e,this.options))},_tileOnLoad:function(t,e){tj.ielt9?setTimeout(u(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,r=this.options.zoomOffset;return i&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=m,e.onerror=m,!e.complete)){e.src=k;var i=this._tiles[t].coords;er(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",k),ro.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==k))return ro.prototype._tileReady.call(this,t,e,i)}});function rl(t,e){return new rs(t,e)}var rh=rs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=l({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var n=(e=_(this,e)).detectRetina&&tj.retina?2:1,o=this.getTileSize();i.width=o.x*n,i.height=o.y*n,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,rs.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,r=U(i.project(e[0]),i.project(e[1])),n=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===iw?[n.y,n.x,o.y,o.x]:[n.x,n.y,o.x,o.y]).join(","),s=rs.prototype.getTileUrl.call(this,t);return s+b(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});function ru(t,e){return new rh(t,e)}rs.WMS=rh,rl.wms=ru;var rc=iS.extend({options:{padding:.1},initialize:function(t){_(this,t),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),el(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),n=this._map.project(this._center,e),o=r.multiplyBy(-i).add(n).subtract(this._map._getNewPixelOrigin(t,e));tj.any3d?em(this._container,o,i):eg(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new V(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rf=rc.extend({options:{tolerance:0},getEvents:function(){var t=rc.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){rc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");eE(t,"mousemove",this._onMouseMove,this),eE(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),eE(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,er(this._container),eP(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){rc.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),r=tj.retina?2:1;eg(e,t.min),e.width=r*i.x,e.height=r*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",tj.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){rc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[f(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,r=e.prev;i?i.prev=r:this._drawLast=r,r?r.next=i:this._drawFirst=i,delete t._order,delete this._layers[f(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,r=t.options.dashArray.split(/[, ]+/),n=[];for(i=0;i<r.length;i++){if(isNaN(e=Number(r[i])))return;n.push(e)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,r,n,o,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(r=0,n=a[i].length;r<n;r++)o=a[i][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,r=Math.max(Math.round(t._radius),1),n=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==n&&(i.save(),i.scale(1,n)),i.beginPath(),i.arc(e.x,e.y/n,r,0,2*Math.PI,!1),1!==n&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,r=this._map.mouseEventToLayerPoint(t),n=this._drawFirst;n;n=n.next)(e=n.layer).options.interactive&&e._containsPoint(r)&&(!("click"===t.type||"preclick"===t.type)||!this._map._draggableMoved(e))&&(i=e);this._fireEvent(!!i&&[i],t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving())&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(eh(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,r,n=this._drawFirst;n;n=n.next)(i=n.layer).options.interactive&&i._containsPoint(e)&&(r=i);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(el(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,r=e.prev;if(!i)return;i.prev=r,r?r.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,r=e.prev;if(!r)return;r.next=i,i?i.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function rd(t){return tj.canvas?new rf(t):null}var rp=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rm={_initContainer:function(){this._container=ei("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(rc.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=rp("shape");el(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=rp("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;er(e),t.removeInteractiveTarget(e),delete this._layers[f(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,r=t.options,n=t._container;n.stroked=!!r.stroke,n.filled=!!r.fill,r.stroke?(e||(e=t._stroke=rp("stroke")),n.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=M(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(n.removeChild(e),t._stroke=null),r.fill?(i||(i=t._fill=rp("fill")),n.appendChild(i),i.color=r.fillColor||r.color,i.opacity=r.fillOpacity):i&&(n.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),r=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){eo(t._container)},_bringToBack:function(t){ea(t._container)}},rg=tj.vml?rp:ti,ry=rc.extend({_initContainer:function(){this._container=rg("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=rg("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){er(this._container),eP(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){rc.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),eg(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=rg("path");t.options.className&&el(e,t.options.className),t.options.interactive&&el(e,"leaflet-interactive"),this._updateStyle(t),this._layers[f(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){er(t._path),t.removeInteractiveTarget(t._path),delete this._layers[f(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,tr(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||i,n="a"+i+","+r+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+-(2*i)+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){eo(t._path)},_bringToBack:function(t){ea(t._path)}});function rv(t){return tj.svg||tj.vml?new ry(t):null}tj.vml&&ry.include(rm),eG.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&rd(t)||rv(t)}});var r_=iV.extend({initialize:function(t,e){iV.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=G(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function rb(t,e){return new r_(t,e)}ry.create=rg,ry.pointsToPath=tr,iZ.geometryToLayer=iG,iZ.coordsToLatLng=iW,iZ.coordsToLatLngs=iX,iZ.latLngToCoords=i$,iZ.latLngsToCoords=iY,iZ.getFeature=iK,iZ.asFeature=iJ,eG.mergeOptions({boxZoom:!0});var rx=e3.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){eE(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){eP(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){er(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),e(),e_(),this._startPoint=this._map.mouseEventToContainerPoint(t),eE(document,{contextmenu:eD,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ei("div","leaflet-zoom-box",this._container),el(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new V(this._point,this._startPoint),i=e.getSize();eg(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(er(this._box),eh(this._container,"leaflet-crosshair")),i(),eb(),eP(document,{contextmenu:eD,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var e=new Z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});eG.addInitHook("addHandler","boxZoom",rx),eG.mergeOptions({doubleClickZoom:!0});var rw=e3.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),r=e.options.zoomDelta,n=t.originalEvent.shiftKey?i-r:i+r;"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}});eG.addInitHook("addHandler","doubleClickZoom",rw),eG.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var rM=e3.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new e5(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}el(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){eh(this._map._container,"leaflet-grab"),eh(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=G(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,r=this._draggable._newPos.x,n=(r-e+i)%t+e-i,o=(r+e+i)%t-e-i,a=Math.abs(n+i)<Math.abs(o+i)?n:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,r=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var n=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=n.multiplyBy(a/o),l=s.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=s.multiplyBy(h/l),c=h/(i.inertiaDeceleration*a),f=u.multiplyBy(-c/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),C(function(){e.panBy(f,{duration:c,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});eG.addInitHook("addHandler","dragging",rM),eG.mergeOptions({keyboard:!0,keyboardPanDelta:80});var rS=e3.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),eE(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),eP(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,r=this._panKeys={},n=this.keyCodes;for(e=0,i=n.left.length;e<i;e++)r[n.left[e]]=[-1*t,0];for(e=0,i=n.right.length;e<i;e++)r[n.right[e]]=[t,0];for(e=0,i=n.down.length;e<i;e++)r[n.down[e]]=[0,t];for(e=0,i=n.up.length;e<i;e++)r[n.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,r=this._zoomKeys={},n=this.keyCodes;for(e=0,i=n.zoomIn.length;e<i;e++)r[n.zoomIn[e]]=t;for(e=0,i=n.zoomOut.length;e<i;e++)r[n.zoomOut[e]]=-t},_addHooks:function(){eE(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){eP(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!t.altKey&&!t.ctrlKey&&!t.metaKey){var e,i=t.keyCode,r=this._map;if(i in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress){if(e=this._panKeys[i],t.shiftKey&&(e=q(e).multiplyBy(3)),r.options.maxBounds&&(e=r._limitOffset(q(e),r.options.maxBounds)),r.options.worldCopyJump){var n=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(e)));r.panTo(n)}else r.panBy(e)}}else if(i in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}eD(t)}}});eG.addInitHook("addHandler","keyboard",rS),eG.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rk=e3.extend({addHooks:function(){eE(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){eP(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=eq(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),r),eD(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var r=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,n=i?Math.ceil(r/i)*i:r,o=t._limitZoom(e+(this._delta>0?n:-n))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});eG.addInitHook("addHandler","scrollWheelZoom",rk);var rE=600;eG.mergeOptions({tapHold:tj.touchNative&&tj.safari&&tj.mobile,tapTolerance:15});var rI=e3.extend({addHooks:function(){eE(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){eP(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new F(e.clientX,e.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(eE(document,"touchend",eO),eE(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),rE),eE(document,"touchend touchcancel contextmenu",this._cancel,this),eE(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){eP(document,"touchend",eO),eP(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),eP(document,"touchend touchcancel contextmenu",this._cancel,this),eP(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new F(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});eG.addInitHook("addHandler","tapHold",rI),eG.mergeOptions({touchZoom:tj.touch,bounceAtZoomLimits:!0});var rP=e3.extend({addHooks:function(){el(this._map._container,"leaflet-touch-zoom"),eE(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){eh(this._map._container,"leaflet-touch-zoom"),eP(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(r)._divideBy(2))),this._startDist=i.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),eE(document,"touchmove",this._onTouchMove,this),eE(document,"touchend touchcancel",this._onTouchEnd,this),eO(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),n=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(n,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&n<1||this._zoom>e.getMaxZoom()&&n>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===n)return}else{var o=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===n&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var a=u(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(a,this,!0),eO(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),eP(document,"touchmove",this._onTouchMove,this),eP(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});eG.addInitHook("addHandler","touchZoom",rP),eG.BoxZoom=rx,eG.DoubleClickZoom=rw,eG.Drag=rM,eG.Keyboard=rS,eG.ScrollWheelZoom=rk,eG.TapHold=rI,eG.TouchZoom=rP,t.Bounds=V,t.Browser=tj,t.CRS=X,t.Canvas=rf,t.Circle=iB,t.CircleMarker=iO,t.Class=z,t.Control=eW,t.DivIcon=rr,t.DivOverlay=i7,t.DomEvent=eU,t.DomUtil=ek,t.Draggable=e5,t.Evented=B,t.FeatureGroup=iI,t.GeoJSON=iZ,t.GridLayer=ro,t.Handler=e3,t.Icon=iT,t.ImageOverlay=i2,t.LatLng=H,t.LatLngBounds=Z,t.Layer=iS,t.LayerGroup=ik,t.LineUtil=iy,t.Map=eG,t.Marker=iR,t.Mixin=e8,t.Path=iz,t.Point=F,t.PolyUtil=ie,t.Polygon=iV,t.Polyline=ij,t.Popup=i9,t.PosAnimation=eZ,t.Projection=ib,t.Rectangle=r_,t.Renderer=rc,t.SVG=ry,t.SVGOverlay=i4,t.TileLayer=rs,t.Tooltip=re,t.Transformation=J,t.Util=N,t.VideoOverlay=i3,t.bind=u,t.bounds=U,t.canvas=rd,t.circle=iF,t.circleMarker=iD,t.control=eX,t.divIcon=rn,t.extend=l,t.featureGroup=iP,t.geoJSON=i0,t.geoJson=i1,t.gridLayer=ra,t.icon=iA,t.imageOverlay=i6,t.latLng=W,t.latLngBounds=G,t.layerGroup=iE,t.map=eH,t.marker=iN,t.point=q,t.polygon=iU,t.polyline=iq,t.popup=rt,t.rectangle=rb,t.setOptions=_,t.stamp=f,t.svg=rv,t.svgOverlay=i5,t.tileLayer=rl,t.tooltip=ri,t.transformation=Q,t.version=s,t.videoOverlay=i8;var rT=window.L;t.noConflict=function(){return window.L=rT,this},window.L=t})}),parcelRegister("lH4m8",function(t,e){function i(t,e,i,r,n,o){return{tag:t,key:e,attrs:i,children:r,text:n,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}i.normalize=function(t){return Array.isArray(t)?i("[",void 0,void 0,i.normalizeChildren(t),void 0,void 0):null==t||"boolean"==typeof t?null:"object"==typeof t?t:i("#",void 0,void 0,String(t),void 0,void 0)},i.normalizeChildren=function(t){var e=[];if(t.length){for(var r=null!=t[0]&&null!=t[0].key,n=1;n<t.length;n++)if((null!=t[n]&&null!=t[n].key)!==r)throw TypeError(r&&(null!=t[n]||"boolean"==typeof t[n])?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var n=0;n<t.length;n++)e[n]=i.normalize(t[n])}return e},t.exports=i}),parcelRegister("dKjnr",function(t,e){var i=parcelRequire("lH4m8");t.exports=function(t){return null==t&&(t=""),i("<",void 0,void 0,t,void 0,void 0)}}),parcelRegister("7vpAc",function(t,e){var i=parcelRequire("lH4m8"),r=parcelRequire("gcs3j");t.exports=function(){var t=r.apply(0,arguments);return t.tag="[",t.children=i.normalizeChildren(t.children),t}}),parcelRegister("gcs3j",function(t,e){var i=parcelRequire("lH4m8");t.exports=function(){var t,e=arguments[this],r=this+1;if(null==e?e={}:("object"!=typeof e||null!=e.tag||Array.isArray(e))&&(e={},r=this),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);return i("",e.key,e,t)}}),parcelRegister("93ebR",function(t,e){var i=function(t){if(!(this instanceof i))throw Error("Promise must be called with 'new'.");if("function"!=typeof t)throw TypeError("executor must be a function.");var e=this,r=[],n=[],o=h(r,!0),a=h(n,!1),s=e._instance={resolvers:r,rejectors:n},l="function"==typeof setImmediate?setImmediate:setTimeout;function h(t,i){return function o(h){var c;try{if(i&&null!=h&&("object"==typeof h||"function"==typeof h)&&"function"==typeof(c=h.then)){if(h===e)throw TypeError("Promise can't be resolved with itself.");u(c.bind(h))}else l(function(){i||0!==t.length||console.error("Possible unhandled promise rejection:",h);for(var e=0;e<t.length;e++)t[e](h);r.length=0,n.length=0,s.state=i,s.retry=function(){o(h)}})}catch(t){a(t)}}}function u(t){var e=0;function i(t){return function(i){e++>0||t(i)}}var r=i(a);try{t(i(o),r)}catch(t){r(t)}}u(t)};i.prototype.then=function(t,e){var r,n,o=this,a=o._instance;function s(t,e,i,o){e.push(function(e){if("function"!=typeof t)i(e);else try{r(t(e))}catch(t){n&&n(t)}}),"function"==typeof a.retry&&o===a.state&&a.retry()}var l=new i(function(t,e){r=t,n=e});return s(t,a.resolvers,r,!0),s(e,a.rejectors,n,!1),l},i.prototype.catch=function(t){return this.then(null,t)},i.prototype.finally=function(t){return this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){return i.reject(e)})})},i.resolve=function(t){return t instanceof i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,i){i(t)})},i.all=function(t){return new i(function(e,i){var r=t.length,n=0,o=[];if(0===t.length)e([]);else for(var a=0;a<t.length;a++)!function(a){function s(t){n++,o[a]=t,n===r&&e(o)}null!=t[a]&&("object"==typeof t[a]||"function"==typeof t[a])&&"function"==typeof t[a].then?t[a].then(s,i):s(t[a])}(a)})},i.race=function(t){return new i(function(e,i){for(var r=0;r<t.length;r++)t[r].then(e,i)})},t.exports=i}),parcelRegister("gUS83",function(t,e){t.exports=parcelRequire("fOecY")("undefined"!=typeof window?window:null)}),parcelRegister("fOecY",function(t,e){var i=parcelRequire("lH4m8");t.exports=function(t){var e,r,n=t&&t.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(t){return t.attrs&&t.attrs.xmlns||o[t.tag]}function s(t,e){if(t.state!==e)throw Error("'vnode.state' must not be modified.")}function l(t){var e=t.state;try{return this.apply(e,arguments)}finally{s(t,e)}}function h(){try{return n.activeElement}catch(t){return null}}function u(t,e,i,r,n,o,a){for(var s=i;s<r;s++){var l=e[s];null!=l&&c(t,l,n,a,o)}}function c(t,e,i,r,n){var o=e.tag;if("string"==typeof o)switch(e.state={},null!=e.attrs&&tt(e.attrs,e,i),o){case"#":f(t,e,n);break;case"<":p(t,e,r,n);break;case"[":m(t,e,i,r,n);break;default:g(t,e,i,r,n)}else v(t,e,i,r,n)}function f(t,e,i){e.dom=n.createTextNode(e.children),R(t,e.dom,i)}var d={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function p(t,e,i,r){var o,a=e.children.match(/^\s*?<(\w+)/im)||[],s=n.createElement(d[a[1]]||"div");"http://www.w3.org/2000/svg"===i?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",s=s.firstChild):s.innerHTML=e.children,e.dom=s.firstChild,e.domSize=s.childNodes.length,e.instance=[];for(var l=n.createDocumentFragment();o=s.firstChild;)e.instance.push(o),l.appendChild(o);R(t,l,r)}function m(t,e,i,r,o){var a=n.createDocumentFragment();if(null!=e.children){var s=e.children;u(a,s,0,s.length,i,null,r)}e.dom=a.firstChild,e.domSize=a.childNodes.length,R(t,a,o)}function g(t,e,i,r,o){var s=e.tag,l=e.attrs,h=l&&l.is,c=(r=a(e)||r)?h?n.createElementNS(r,s,{is:h}):n.createElementNS(r,s):h?n.createElement(s,{is:h}):n.createElement(s);if(e.dom=c,null!=l&&j(e,l,r),R(t,c,o),!N(e)&&null!=e.children){var f=e.children;u(c,f,0,f.length,i,null,r),"select"===e.tag&&null!=l&&U(e,l)}}function y(t,e){var r;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(r=t.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(r=t.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(tt(t.state,t,e),null!=t.attrs&&tt(t.attrs,t,e),t.instance=i.normalize(l.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function v(t,e,i,r,n){y(e,i),null!=e.instance?(c(t,e.instance,i,r,n),e.dom=e.instance.dom,e.domSize=null!=e.dom?e.instance.domSize:0):e.domSize=0}function _(t,e,i,r,n,o){if(e!==i&&(null!=e||null!=i)){if(null==e||0===e.length)u(t,i,0,i.length,r,n,o);else if(null==i||0===i.length)z(t,e,0,e.length);else{var a=null!=e[0]&&null!=e[0].key,s=null!=i[0]&&null!=i[0].key,l=0,h=0;if(!a)for(;h<e.length&&null==e[h];)h++;if(!s)for(;l<i.length&&null==i[l];)l++;if(a!==s)z(t,e,h,e.length),u(t,i,l,i.length,r,n,o);else if(s){for(var f,d,p,m,g,y,v=e.length-1,_=i.length-1;v>=h&&_>=l&&(m=e[v],g=i[_],m.key===g.key);)m!==g&&b(t,m,g,r,n,o),null!=g.dom&&(n=g.dom),v--,_--;for(;v>=h&&_>=l&&(d=e[h],p=i[l],d.key===p.key);)h++,l++,d!==p&&b(t,d,p,r,T(e,h,n),o);for(;v>=h&&_>=l&&l!==_&&d.key===g.key&&m.key===p.key;)A(t,m,y=T(e,h,n)),m!==p&&b(t,m,p,r,y,o),++l<=--_&&A(t,d,n),d!==g&&b(t,d,g,r,n,o),null!=g.dom&&(n=g.dom),h++,m=e[--v],g=i[_],d=e[h],p=i[l];for(;v>=h&&_>=l&&m.key===g.key;)m!==g&&b(t,m,g,r,n,o),null!=g.dom&&(n=g.dom),v--,_--,m=e[v],g=i[_];if(l>_)z(t,e,h,v+1);else if(h>v)u(t,i,l,_+1,r,n,o);else{var f,x,w=n,M=_-l+1,S=Array(M),k=0,I=0,C=2147483647,R=0;for(I=0;I<M;I++)S[I]=-1;for(I=_;I>=l;I--){null==f&&(f=E(e,h,v+1));var N=f[(g=i[I]).key];null!=N&&(C=N<C?N:-1,S[I-l]=N,m=e[N],e[N]=null,m!==g&&b(t,m,g,r,n,o),null!=g.dom&&(n=g.dom),R++)}if(n=w,R!==v-h+1&&z(t,e,h,v+1),0===R)u(t,i,l,_+1,r,n,o);else if(-1===C)for(k=(x=P(S)).length-1,I=_;I>=l;I--)p=i[I],-1===S[I-l]?c(t,p,r,o,n):x[k]===I-l?k--:A(t,p,n),null!=p.dom&&(n=i[I].dom);else for(I=_;I>=l;I--)p=i[I],-1===S[I-l]&&c(t,p,r,o,n),null!=p.dom&&(n=i[I].dom)}}else{var D=e.length<i.length?e.length:i.length;for(l=l<h?l:h;l<D;l++)(d=e[l])!==(p=i[l])&&(null!=d||null!=p)&&(null==d?c(t,p,r,o,T(e,l+1,n)):null==p?O(t,d):b(t,d,p,r,T(e,l+1,n),o));e.length>D&&z(t,e,l,e.length),i.length>D&&u(t,i,l,i.length,r,n,o)}}}}function b(t,e,i,r,n,o){var a=e.tag;if(a===i.tag){if(i.state=e.state,i.events=e.events,ti(i,e))return;if("string"==typeof a)switch(null!=i.attrs&&te(i.attrs,i,r),a){case"#":x(e,i);break;case"<":w(t,e,i,o,n);break;case"[":M(t,e,i,r,n,o);break;default:S(e,i,r,o)}else k(t,e,i,r,n,o)}else O(t,e),c(t,i,r,o,n)}function x(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children),e.dom=t.dom}function w(t,e,i,r,n){e.children!==i.children?(D(t,e),p(t,i,r,n)):(i.dom=e.dom,i.domSize=e.domSize,i.instance=e.instance)}function M(t,e,i,r,n,o){_(t,e.children,i.children,r,n,o);var a=0,s=i.children;if(i.dom=null,null!=s){for(var l=0;l<s.length;l++){var h=s[l];null!=h&&null!=h.dom&&(null==i.dom&&(i.dom=h.dom),a+=h.domSize||1)}1!==a&&(i.domSize=a)}}function S(t,e,i,r){var n=e.dom=t.dom;r=a(e)||r,"textarea"===e.tag&&null==e.attrs&&(e.attrs={}),Z(e,t.attrs,e.attrs,r),N(e)||_(n,t.children,e.children,i,null,r)}function k(t,e,r,n,o,a){if(r.instance=i.normalize(l.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");te(r.state,r,n),null!=r.attrs&&te(r.attrs,r,n),null!=r.instance?(null==e.instance?c(t,r.instance,n,a,o):b(t,e.instance,r.instance,n,o,a),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=e.instance?(O(t,e.instance),r.dom=void 0,r.domSize=0):(r.dom=e.dom,r.domSize=e.domSize)}function E(t,e,i){for(var r=Object.create(null);e<i;e++){var n=t[e];if(null!=n){var o=n.key;null!=o&&(r[o]=e)}}return r}var I=[];function P(t){for(var e=[0],i=0,r=0,n=0,o=I.length=t.length,n=0;n<o;n++)I[n]=t[n];for(var n=0;n<o;++n)if(-1!==t[n]){var a=e[e.length-1];if(t[a]<t[n]){I[n]=a,e.push(n);continue}for(i=0,r=e.length-1;i<r;){var s=(i>>>1)+(r>>>1)+(i&r&1);t[e[s]]<t[n]?i=s+1:r=s}t[n]<t[e[i]]&&(i>0&&(I[n]=e[i-1]),e[i]=n)}for(i=e.length,r=e[i-1];i-- >0;)e[i]=r,r=I[r];return I.length=0,e}function T(t,e,i){for(;e<t.length;e++)if(null!=t[e]&&null!=t[e].dom)return t[e].dom;return i}function A(t,e,i){var r=n.createDocumentFragment();C(t,r,e),R(t,r,i)}function C(t,e,i){for(;null!=i.dom&&i.dom.parentNode===t;){if("string"!=typeof i.tag){if(null!=(i=i.instance))continue}else if("<"===i.tag)for(var r=0;r<i.instance.length;r++)e.appendChild(i.instance[r]);else if("["!==i.tag)e.appendChild(i.dom);else if(1===i.children.length){if(null!=(i=i.children[0]))continue}else for(var r=0;r<i.children.length;r++){var n=i.children[r];null!=n&&C(t,e,n)}break}}function R(t,e,i){null!=i?t.insertBefore(e,i):t.appendChild(e)}function N(t){if(null==t.attrs||null==t.attrs.contenteditable&&null==t.attrs.contentEditable)return!1;var e=t.children;if(null!=e&&1===e.length&&"<"===e[0].tag){var i=e[0].children;t.dom.innerHTML!==i&&(t.dom.innerHTML=i)}else if(null!=e&&0!==e.length)throw Error("Child node of a contenteditable must be trusted.");return!0}function z(t,e,i,r){for(var n=i;n<r;n++){var o=e[n];null!=o&&O(t,o)}}function O(t,e){var i,r,n=0,o=e.state;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove){var a=l.call(e.state.onbeforeremove,e);null!=a&&"function"==typeof a.then&&(n=1,i=a)}if(e.attrs&&"function"==typeof e.attrs.onbeforeremove){var a=l.call(e.attrs.onbeforeremove,e);null!=a&&"function"==typeof a.then&&(n|=2,r=a)}if(s(e,o),n){if(null!=i){var h=function(){!(1&n)||(n&=2)||u()};i.then(h,h)}if(null!=r){var h=function(){!(2&n)||(n&=1)||u()};r.then(h,h)}}else F(e),B(t,e);function u(){s(e,o),F(e),B(t,e)}}function D(t,e){for(var i=0;i<e.instance.length;i++)t.removeChild(e.instance[i])}function B(t,e){for(;null!=e.dom&&e.dom.parentNode===t;){if("string"!=typeof e.tag){if(null!=(e=e.instance))continue}else if("<"===e.tag)D(t,e);else{if("["!==e.tag&&(t.removeChild(e.dom),!Array.isArray(e.children)))break;if(1===e.children.length){if(null!=(e=e.children[0]))continue}else for(var i=0;i<e.children.length;i++){var r=e.children[i];null!=r&&B(t,r)}}break}}function F(t){if("string"!=typeof t.tag&&"function"==typeof t.state.onremove&&l.call(t.state.onremove,t),t.attrs&&"function"==typeof t.attrs.onremove&&l.call(t.attrs.onremove,t),"string"!=typeof t.tag)null!=t.instance&&F(t.instance);else{var e=t.children;if(Array.isArray(e))for(var i=0;i<e.length;i++){var r=e[i];null!=r&&F(r)}}}function j(t,e,i){"input"===t.tag&&null!=e.type&&t.dom.setAttribute("type",e.type);var r=null!=e&&"input"===t.tag&&"file"===e.type;for(var n in e)q(t,n,null,e[n],i,r)}function q(t,e,i,r,n,o){if(!("key"===e||"is"===e||null==r||H(e))&&(i!==r||G(t,e)||"object"==typeof r)&&("type"!==e||"input"!==t.tag)){if("o"===e[0]&&"n"===e[1])return Q(t,e,r);if("xlink:"===e.slice(0,6))t.dom.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(6),r);else if("style"===e)K(t.dom,i,r);else if(W(t,e,n)){if("value"===e){if(("input"===t.tag||"textarea"===t.tag)&&t.dom.value===""+r&&(o||t.dom===h())||"select"===t.tag&&null!==i&&t.dom.value===""+r||"option"===t.tag&&null!==i&&t.dom.value===""+r)return;if(o&&""+r!=""){console.error("`value` is read-only on file inputs!");return}}t.dom[e]=r}else"boolean"==typeof r?r?t.dom.setAttribute(e,""):t.dom.removeAttribute(e):t.dom.setAttribute("className"===e?"class":e,r)}}function V(t,e,i,r){if(!("key"===e||"is"===e||null==i||H(e))){if("o"===e[0]&&"n"===e[1])Q(t,e,void 0);else if("style"===e)K(t.dom,i,null);else if(W(t,e,r)&&"className"!==e&&"title"!==e&&("value"!==e||"option"!==t.tag&&("select"!==t.tag||-1!==t.dom.selectedIndex||t.dom!==h()))&&("input"!==t.tag||"type"!==e))t.dom[e]=null;else{var n=e.indexOf(":");-1!==n&&(e=e.slice(n+1)),!1!==i&&t.dom.removeAttribute("className"===e?"class":e)}}}function U(t,e){if("value"in e){if(null===e.value)-1!==t.dom.selectedIndex&&(t.dom.value=null);else{var i=""+e.value;(t.dom.value!==i||-1===t.dom.selectedIndex)&&(t.dom.value=i)}}"selectedIndex"in e&&q(t,"selectedIndex",null,e.selectedIndex,void 0)}function Z(t,e,i,r){if(e&&e===i&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),null!=i){"input"===t.tag&&null!=i.type&&t.dom.setAttribute("type",i.type);var n,o="input"===t.tag&&"file"===i.type;for(var a in i)q(t,a,e&&e[a],i[a],r,o)}if(null!=e)for(var a in e)null!=(n=e[a])&&(null==i||null==i[a])&&V(t,a,n,r)}function G(t,e){return"value"===e||"checked"===e||"selectedIndex"===e||"selected"===e&&t.dom===h()||"option"===t.tag&&t.dom.parentNode===n.activeElement}function H(t){return"oninit"===t||"oncreate"===t||"onupdate"===t||"onremove"===t||"onbeforeremove"===t||"onbeforeupdate"===t}function W(t,e,i){return void 0===i&&(t.tag.indexOf("-")>-1||null!=t.attrs&&t.attrs.is||"href"!==e&&"list"!==e&&"form"!==e&&"width"!==e&&"height"!==e)&&e in t.dom}var X=/[A-Z]/g;function $(t){return"-"+t.toLowerCase()}function Y(t){return"-"===t[0]&&"-"===t[1]?t:"cssFloat"===t?"float":t.replace(X,$)}function K(t,e,i){if(e===i);else if(null==i)t.style.cssText="";else if("object"!=typeof i)t.style.cssText=i;else if(null==e||"object"!=typeof e)for(var r in t.style.cssText="",i){var n=i[r];null!=n&&t.style.setProperty(Y(r),String(n))}else{for(var r in i){var n=i[r];null!=n&&(n=String(n))!==String(e[r])&&t.style.setProperty(Y(r),n)}for(var r in e)null!=e[r]&&null==i[r]&&t.style.removeProperty(Y(r))}}function J(){this._=e}function Q(t,i,r){null!=t.events?(t.events._=e,t.events[i]!==r&&(null!=r&&("function"==typeof r||"object"==typeof r)?(null==t.events[i]&&t.dom.addEventListener(i.slice(2),t.events,!1),t.events[i]=r):(null!=t.events[i]&&t.dom.removeEventListener(i.slice(2),t.events,!1),t.events[i]=void 0))):null!=r&&("function"==typeof r||"object"==typeof r)&&(t.events=new J,t.dom.addEventListener(i.slice(2),t.events,!1),t.events[i]=r)}function tt(t,e,i){"function"==typeof t.oninit&&l.call(t.oninit,e),"function"==typeof t.oncreate&&i.push(l.bind(t.oncreate,e))}function te(t,e,i){"function"==typeof t.onupdate&&i.push(l.bind(t.onupdate,e))}function ti(t,e){do{if(null!=t.attrs&&"function"==typeof t.attrs.onbeforeupdate){var i=l.call(t.attrs.onbeforeupdate,t,e);if(void 0!==i&&!i)break}if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeupdate){var i=l.call(t.state.onbeforeupdate,t,e);if(void 0!==i&&!i)break}return!1}while(!1)return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,t.attrs=e.attrs,t.children=e.children,t.text=e.text,!0}return J.prototype=Object.create(null),J.prototype.handleEvent=function(t){var e,i=this["on"+t.type];"function"==typeof i?e=i.call(t.currentTarget,t):"function"==typeof i.handleEvent&&i.handleEvent(t),this._&&!1!==t.redraw&&(0,this._)(),!1===e&&(t.preventDefault(),t.stopPropagation())},function(t,n,o){if(!t)throw TypeError("DOM element being rendered to does not exist.");if(null!=r&&t.contains(r))throw TypeError("Node is currently being rendered to and thus is locked.");var a=e,s=r,l=[],u=h(),c=t.namespaceURI;r=t,e="function"==typeof o?o:void 0;try{null==t.vnodes&&(t.textContent=""),n=i.normalizeChildren(Array.isArray(n)?n:[n]),_(t,t.vnodes,n,l,null,"http://www.w3.org/1999/xhtml"===c?void 0:c),t.vnodes=n,null!=u&&h()!==u&&"function"==typeof u.focus&&u.focus();for(var f=0;f<l.length;f++)l[f]()}finally{e=a,r=s}}}}),parcelRegister("asntW",function(t,e){var i=parcelRequire("lH4m8");t.exports=function(t,e,r){var n=[],o=!1,a=-1;function s(){for(a=0;a<n.length;a+=2)try{t(n[a],i(n[a+1]),l)}catch(t){r.error(t)}a=-1}function l(){o||(o=!0,e(function(){o=!1,s()}))}return l.sync=s,{mount:function(e,r){if(null!=r&&null==r.view&&"function"!=typeof r)throw TypeError("m.mount expects a component, not a vnode.");var o=n.indexOf(e);o>=0&&(n.splice(o,2),o<=a&&(a-=2),t(e,[])),null!=r&&(n.push(e,r),t(e,i(r),l))},redraw:l}}}),parcelRegister("fRWCN",function(t,e){var i=parcelRequire("l6H08"),r=parcelRequire("klfle");t.exports=function(t,e,n){var o=0;function a(t){return new e(t)}function s(t){return function(r,o){"string"!=typeof r?(o=r,r=r.url):null==o&&(o={});var s=new e(function(e,n){t(i(r,o.params),o,function(t){if("function"==typeof o.type){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=new o.type(t[i]);else t=new o.type(t)}e(t)},n)});if(!0===o.background)return s;var l=0;function h(){0==--l&&"function"==typeof n&&n()}return u(s);function u(t){var e=t.then;return t.constructor=a,t.then=function(){l++;var i=e.apply(t,arguments);return i.then(h,function(t){if(h(),0===l)throw t}),u(i)},t}}}function l(t,e){for(var i in t.headers)if(r.call(t.headers,i)&&i.toLowerCase()===e)return!0;return!1}return a.prototype=e.prototype,a.__proto__=e,{request:s(function(e,i,n,o){var a,s=null!=i.method?i.method.toUpperCase():"GET",h=i.body,u=(null==i.serialize||i.serialize===JSON.serialize)&&!(h instanceof t.FormData||h instanceof t.URLSearchParams),c=i.responseType||("function"==typeof i.extract?"":"json"),f=new t.XMLHttpRequest,d=!1,p=!1,m=f,g=f.abort;for(var y in f.abort=function(){d=!0,g.call(this)},f.open(s,e,!1!==i.async,"string"==typeof i.user?i.user:void 0,"string"==typeof i.password?i.password:void 0),u&&null!=h&&!l(i,"content-type")&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof i.deserialize||l(i,"accept")||f.setRequestHeader("Accept","application/json, text/*"),i.withCredentials&&(f.withCredentials=i.withCredentials),i.timeout&&(f.timeout=i.timeout),f.responseType=c,i.headers)r.call(i.headers,y)&&f.setRequestHeader(y,i.headers[y]);f.onreadystatechange=function(t){if(!d&&4===t.target.readyState)try{var r,a=t.target.status>=200&&t.target.status<300||304===t.target.status||/^file:\/\//i.test(e),s=t.target.response;if("json"===c){if(!t.target.responseType&&"function"!=typeof i.extract)try{s=JSON.parse(t.target.responseText)}catch(t){s=null}}else c&&"text"!==c||null!=s||(s=t.target.responseText);if("function"==typeof i.extract?(s=i.extract(t.target,i),a=!0):"function"==typeof i.deserialize&&(s=i.deserialize(s)),a)n(s);else{var l=function(){try{r=t.target.responseText}catch(t){r=s}var e=Error(r);e.code=t.target.status,e.response=s,o(e)};0===f.status?setTimeout(function(){p||l()}):l()}}catch(t){o(t)}},f.ontimeout=function(t){p=!0;var e=Error("Request timed out");e.code=t.target.status,o(e)},"function"==typeof i.config&&(f=i.config(f,i,e)||f)!==m&&(a=f.abort,f.abort=function(){d=!0,a.call(this)}),null==h?f.send():"function"==typeof i.serialize?f.send(i.serialize(h)):h instanceof t.FormData||h instanceof t.URLSearchParams?f.send(h):f.send(JSON.stringify(h))}),jsonp:s(function(e,i,r,n){var a=i.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+o++,s=t.document.createElement("script");t[a]=function(e){delete t[a],s.parentNode.removeChild(s),r(e)},s.onerror=function(){delete t[a],s.parentNode.removeChild(s),n(Error("JSONP request failed"))},s.src=e+(0>e.indexOf("?")?"?":"&")+encodeURIComponent(i.callbackKey||"callback")+"="+encodeURIComponent(a),t.document.documentElement.appendChild(s)})}}}),parcelRegister("l6H08",function(t,e){var i=parcelRequire("dX0qb"),r=parcelRequire("hQ2j1");t.exports=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==e)return t;var n=t.indexOf("?"),o=t.indexOf("#"),a=o<0?t.length:o,s=n<0?a:n,l=t.slice(0,s),h={};r(h,e);var u=l.replace(/:([^\/\.-]+)(\.{3})?/g,function(t,i,r){return(delete h[i],null==e[i])?t:r?e[i]:encodeURIComponent(String(e[i]))}),c=u.indexOf("?"),f=u.indexOf("#"),d=f<0?u.length:f,p=c<0?d:c,m=u.slice(0,p);n>=0&&(m+=t.slice(n,a)),c>=0&&(m+=(n<0?"?":"&")+u.slice(c,d));var g=i(h);return g&&(m+=(n<0&&c<0?"?":"&")+g),o>=0&&(m+=t.slice(o)),f>=0&&(m+=(o<0?"":"&")+u.slice(f)),m}}),parcelRegister("dX0qb",function(t,e){t.exports=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return"";var e=[];for(var i in t)r(i,t[i]);return e.join("&");function r(t,i){if(Array.isArray(i))for(var n=0;n<i.length;n++)r(t+"["+n+"]",i[n]);else if("[object Object]"===Object.prototype.toString.call(i))for(var n in i)r(t+"["+n+"]",i[n]);else e.push(encodeURIComponent(t)+(null!=i&&""!==i?"="+encodeURIComponent(i):""))}}}),parcelRegister("hQ2j1",function(t,e){var i=parcelRequire("klfle");t.exports=Object.assign||function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r])}}),parcelRegister("klfle",function(t,e){t.exports=({}).hasOwnProperty}),parcelRegister("jg5Ru",function(t,e){var i=parcelRequire("rrN0s");t.exports=parcelRequire("6y0Vd")("undefined"!=typeof window?window:null,i)}),parcelRegister("rrN0s",function(t,e){var i=parcelRequire("gUS83");t.exports=parcelRequire("asntW")(i,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)}),parcelRegister("6y0Vd",function(t,e){var i=parcelRequire("lH4m8"),r=parcelRequire("9p8hn"),n=parcelRequire("g34Xq"),o=parcelRequire("l6H08"),a=parcelRequire("94aos"),s=parcelRequire("kJJzV"),l=parcelRequire("hQ2j1"),h=parcelRequire("5o6pE"),u={};function c(t){try{return decodeURIComponent(t)}catch(e){return t}}t.exports=function(t,e){var f,d,p,m,g,y,v=null==t?null:"function"==typeof t.setImmediate?t.setImmediate:t.setTimeout,_=n.resolve(),b=!1,x=!1,w=0,M=u,S={onbeforeupdate:function(){return!(!(w=w?2:1)||u===M)},onremove:function(){t.removeEventListener("popstate",I,!1),t.removeEventListener("hashchange",E,!1)},view:function(){if(w&&u!==M){var t=[i(p,m.key,m)];return M&&(t=M.render(t[0])),t}}},k=T.SKIP={};function E(){b=!1;var i=t.location.hash;"#"!==T.prefix[0]&&(i=t.location.search+i,"?"!==T.prefix[0]&&"/"!==(i=t.location.pathname+i)[0]&&(i="/"+i));var r=i.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,c).slice(T.prefix.length),n=a(r);function o(t){console.error(t),P(d,null,{replace:!0})}function s(t){for(;t<f.length;t++)if(f[t].check(n)){var i=f[t].component,a=f[t].route,l=i,h=y=function(o){if(h===y){if(o===k)return s(t+1);p=null!=o&&("function"==typeof o.view||"function"==typeof o)?o:"div",m=n.params,g=r,y=null,M=i.render?i:null,2===w?e.redraw():(w=2,e.redraw.sync())}};i.view||"function"==typeof i?(i={},h(l)):i.onmatch?_.then(function(){return i.onmatch(n.params,r,a)}).then(h,r===d?null:o):h("div");return}if(r===d)throw Error("Could not resolve default route "+d+".");P(d,null,{replace:!0})}l(n.params,t.history.state),s(0)}function I(){b||(b=!0,v(E))}function P(e,i,r){if(e=o(e,i),x){I();var n=r?r.state:null,a=r?r.title:null;r&&r.replace?t.history.replaceState(n,a,T.prefix+e):t.history.pushState(n,a,T.prefix+e)}else t.location.href=T.prefix+e}function T(i,r,n){if(!i)throw TypeError("DOM element being rendered to does not exist.");if(f=Object.keys(n).map(function(t){if("/"!==t[0])throw SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:t,component:n[t],check:s(t)}}),d=r,null!=r){var o=a(r);if(!f.some(function(t){return t.check(o)}))throw ReferenceError("Default route doesn't match any known routes.")}"function"==typeof t.history.pushState?t.addEventListener("popstate",I,!1):"#"===T.prefix[0]&&t.addEventListener("hashchange",E,!1),x=!0,e.mount(i,S),E()}return T.set=function(t,e,i){null!=y&&((i=i||{}).replace=!0),y=null,P(t,e,i)},T.get=function(){return g},T.prefix="#!",T.Link={view:function(t){var e,i,n,a=r(t.attrs.selector||"a",h(t.attrs,["options","params","selector","onclick"]),t.children);return(a.attrs.disabled=!!a.attrs.disabled)?(a.attrs.href=null,a.attrs["aria-disabled"]="true"):(e=t.attrs.options,i=t.attrs.onclick,n=o(a.attrs.href,t.attrs.params),a.attrs.href=T.prefix+n,a.attrs.onclick=function(t){var r;"function"==typeof i?r=i.call(t.currentTarget,t):null==i||"object"!=typeof i||"function"==typeof i.handleEvent&&i.handleEvent(t),!1===r||t.defaultPrevented||0!==t.button&&0!==t.which&&1!==t.which||t.currentTarget.target&&"_self"!==t.currentTarget.target||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||(t.preventDefault(),t.redraw=!1,T.set(n,null,e))}),a}},T.param=function(t){return m&&null!=t?m[t]:m},T}}),parcelRegister("9p8hn",function(t,e){var i=parcelRequire("lH4m8"),r=parcelRequire("gcs3j"),n=parcelRequire("klfle"),o=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,a={};function s(t){for(var e in t)if(n.call(t,e))return!1;return!0}function l(t){for(var e,i="div",r=[],n={};e=o.exec(t);){var s=e[1],l=e[2];if(""===s&&""!==l)i=l;else if("#"===s)n.id=l;else if("."===s)r.push(l);else if("["===e[3][0]){var h=e[6];h&&(h=h.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===e[4]?r.push(h):n[e[4]]=""===h?h:h||!0}}return r.length>0&&(n.className=r.join(" ")),a[t]={tag:i,attrs:n}}function h(t,e){var i=e.attrs,r=n.call(i,"class"),o=r?i.class:i.className;if(e.tag=t.tag,e.attrs={},!s(t.attrs)&&!s(i)){var a={};for(var l in i)n.call(i,l)&&(a[l]=i[l]);i=a}for(var l in t.attrs)n.call(t.attrs,l)&&"className"!==l&&!n.call(i,l)&&(i[l]=t.attrs[l]);for(var l in(null!=o||null!=t.attrs.className)&&(i.className=null!=o?null!=t.attrs.className?String(t.attrs.className)+" "+String(o):o:null!=t.attrs.className?t.attrs.className:null),r&&(i.class=null),i)if(n.call(i,l)&&"key"!==l){e.attrs=i;break}return e}function u(t){if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");var e=r.apply(1,arguments);return"string"==typeof t&&(e.children=i.normalizeChildren(e.children),"["!==t)?h(a[t]||l(t),e):(e.tag=t,e)}t.exports=u}),parcelRegister("g34Xq",function(t,e){var i=parcelRequire("93ebR");"undefined"!=typeof window?(void 0===window.Promise?window.Promise=i:window.Promise.prototype.finally||(window.Promise.prototype.finally=i.prototype.finally),t.exports=window.Promise):void 0!==$parcel$global?(void 0===$parcel$global.Promise?$parcel$global.Promise=i:$parcel$global.Promise.prototype.finally||($parcel$global.Promise.prototype.finally=i.prototype.finally),t.exports=$parcel$global.Promise):t.exports=i}),parcelRegister("94aos",function(t,e){var i=parcelRequire("6XcN1");t.exports=function(t){var e=t.indexOf("?"),r=t.indexOf("#"),n=r<0?t.length:r,o=e<0?n:e,a=t.slice(0,o).replace(/\/{2,}/g,"/");return a?("/"!==a[0]&&(a="/"+a),a.length>1&&"/"===a[a.length-1]&&(a=a.slice(0,-1))):a="/",{path:a,params:e<0?{}:i(t.slice(e+1,n))}}}),parcelRegister("6XcN1",function(t,e){function i(t){try{return decodeURIComponent(t)}catch(e){return t}}t.exports=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var e=t.split("&"),r={},n={},o=0;o<e.length;o++){var a=e[o].split("="),s=i(a[0]),l=2===a.length?i(a[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var h=s.split(/\]\[?|\[/),u=n;s.indexOf("[")>-1&&h.pop();for(var c=0;c<h.length;c++){var f=h[c],d=h[c+1],p=""==d||!isNaN(parseInt(d,10));if(""===f){var s=h.slice(0,c).join();null==r[s]&&(r[s]=Array.isArray(u)?u.length:0),f=r[s]++}else if("__proto__"===f)break;if(c===h.length-1)u[f]=l;else{var m=Object.getOwnPropertyDescriptor(u,f);null!=m&&(m=m.value),null==m&&(u[f]=m=p?[]:{}),u=m}}}return n}}),parcelRegister("kJJzV",function(t,e){var i=parcelRequire("94aos");t.exports=function(t){var e=i(t),r=Object.keys(e.params),n=[],o=RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(t,e,i){return null==e?"\\"+t:(n.push({k:e,r:"..."===i}),"..."===i)?"(.*)":"."===i?"([^/]+)\\.":"([^/]+)"+(i||"")})+"$");return function(t){for(var i=0;i<r.length;i++)if(e.params[r[i]]!==t.params[r[i]])return!1;if(!n.length)return o.test(t.path);var a=o.exec(t.path);if(null==a)return!1;for(var i=0;i<n.length;i++)t.params[n[i].k]=n[i].r?a[i+1]:decodeURIComponent(a[i+1]);return!0}}}),parcelRegister("5o6pE",function(t,e){var i=parcelRequire("klfle"),r=RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");t.exports=function(t,e){var n={};if(null!=e)for(var o in t)i.call(t,o)&&!r.test(o)&&0>e.indexOf(o)&&(n[o]=t[o]);else for(var o in t)i.call(t,o)&&!r.test(o)&&(n[o]=t[o]);return n}}),parcelRegister("1tTyT",function(t,e){!/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.5.2/LICENSE.txt
 */function(e,i){t.exports=i()}(t.exports,function(){var t={},e={};function i(i,r,n){if(e[i]=n,"index"===i){var o="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",a={};return e.shared(a),e.index(t,a),"undefined"!=typeof window&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),t}}return i("shared",["exports"],function(t){let e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v;function _(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((r=r.apply(t,e||[])).next())})}function b(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"function"==typeof SuppressedError&&SuppressedError;var x,w,M,S=k;function k(t,e){this.x=t,this.y=e}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(t){return t instanceof k?t:Array.isArray(t)?new k(t[0],t[1]):t};var E=b(S),I=P;function P(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=r}P.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,r=0;r<8;r++){var n=this.sampleCurveX(i)-t;if(Math.abs(n)<e)return i;var o=this.sampleCurveDerivativeX(i);if(1e-6>Math.abs(o))break;i-=n/o}var a=0,s=1;for(i=t,r=0;r<20&&!(Math.abs((n=this.sampleCurveX(i))-t)<e);r++)t>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var T=b(I);function A(){return null==e&&(e="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),e}function C(){if(null==i&&(i=!1,A())){let t=5,e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let i=0;i<t*t;i++){let r=4*i;e.fillStyle=`rgb(${r},${r+1},${r+2})`,e.fillRect(i%t,Math.floor(i/t),1,1)}let r=e.getImageData(0,0,t,t).data;for(let e=0;e<t*t*4;e++)if(e%4!=3&&r[e]!==e){i=!0;break}}}return i||!1}function R(t,e,i,r){let n=new T(t,e,i,r);return t=>n.solve(t)}let N=R(.25,.1,.25,1);function z(t,e,i){return Math.min(i,Math.max(e,t))}function O(t,e,i){let r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function D(t,...e){for(let i of e)for(let e in i)t[e]=i[e];return t}let B=1;function F(t,e,i){let r={};for(let i in t)r[i]=e.call(this,t[i],i,t);return r}function j(t,e,i){let r={};for(let i in t)e.call(this,t[i],i,t)&&(r[i]=t[i]);return r}function q(t){return Array.isArray(t)?t.map(q):"object"==typeof t&&t?F(t,q):t}let V={};function U(t){V[t]||("undefined"!=typeof console&&console.warn(t),V[t]=!0)}function Z(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function G(t){return"undefined"!=typeof WorkerGlobalScope&&void 0!==t&&t instanceof WorkerGlobalScope}let H=null;function W(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}let X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $(t,e,i,r,n){return _(this,void 0,void 0,function*(){if("undefined"==typeof VideoFrame)throw Error("VideoFrame not supported");let o=new VideoFrame(t,{timestamp:0});try{let a=null==o?void 0:o.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw Error(`Unrecognized format ${a}`);let s=a.startsWith("BGR"),l=new Uint8ClampedArray(r*n*4);if(yield o.copyTo(l,function(t,e,i,r,n){let o=4*Math.max(-e,0),a=(Math.max(0,i)-i)*r*4+o,s=4*r,l=Math.max(0,e),h=Math.max(0,i);return{rect:{x:l,y:h,width:Math.min(t.width,e+r)-l,height:Math.min(t.height,i+n)-h},layout:[{offset:a,stride:s}]}}(t,e,i,r,n)),s)for(let t=0;t<l.length;t+=4){let e=l[t];l[t]=l[t+2],l[t+2]=e}return l}finally{o.close()}})}let Y="AbortError";function K(){return Error(Y)}let J={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Q(t){return J.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))]}let tt="global-dispatcher";class te extends Error{constructor(t,e,i,r){super(`AJAXError: ${e} (${t}): ${i}`),this.status=t,this.statusText=e,this.url=i,this.body=r}}let ti=()=>G(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,tr=function(t,e){var i;if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){let i=Q(t.url);if(i)return i(t,e);if(G(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,targetMapId:tt},e)}if(!(/^file:/.test(i=t.url)||/^file:/.test(ti())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(t,e){return _(this,void 0,void 0,function*(){let i;let r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,cache:t.cache,referrer:ti(),signal:e.signal});"json"!==t.type||r.headers.has("Accept")||r.headers.set("Accept","application/json");let n=yield fetch(r);if(!n.ok){let e=yield n.blob();throw new te(n.status,n.statusText,t.url,e)}i="arrayBuffer"===t.type||"image"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text();let o=yield i;if(e.signal.aborted)throw K();return{data:o,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}})}(t,e);if(G(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,mustQueue:!0,targetMapId:tt},e)}return function(t,e){return new Promise((i,r)=>{var n;let o=new XMLHttpRequest;for(let e in o.open(t.method||"GET",t.url,!0),"arrayBuffer"!==t.type&&"image"!==t.type||(o.responseType="arraybuffer"),t.headers)o.setRequestHeader(e,t.headers[e]);"json"===t.type&&(o.responseType="text",(null===(n=t.headers)||void 0===n?void 0:n.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===t.credentials,o.onerror=()=>{r(Error(o.statusText))},o.onload=()=>{if(!e.signal.aborted){if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let e=o.response;if("json"===t.type)try{e=JSON.parse(o.response)}catch(t){return void r(t)}i({data:e,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{let e=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});r(new te(o.status,o.statusText,t.url,e))}}},e.signal.addEventListener("abort",()=>{o.abort(),r(K())}),o.send(t.body)})}(t,e)};function tn(t){if(!t||0>=t.indexOf("://")||0===t.indexOf("data:image/")||0===t.indexOf("blob:"))return!0;let e=new URL(t),i=window.location;return e.protocol===i.protocol&&e.host===i.host}function to(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function ta(t,e,i){if(i&&i[t]){let r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}class ts{constructor(t,e={}){D(this,e),this.type=t}}class tl extends ts{constructor(t,e={}){super("error",D({error:t},e))}}class th{on(t,e){return this._listeners=this._listeners||{},to(t,e,this._listeners),this}off(t,e){return ta(t,e,this._listeners),ta(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},to(t,e,this._oneTimeListeners),this):new Promise(e=>this.once(t,e))}fire(t,e){"string"==typeof t&&(t=new ts(t,e||{}));let i=t.type;if(this.listens(i)){for(let e of(t.target=this,this._listeners&&this._listeners[i]?this._listeners[i].slice():[]))e.call(this,t);for(let e of this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[])ta(i,e,this._oneTimeListeners),e.call(this,t);let e=this._eventedParent;e&&(D(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),e.fire(t))}else t instanceof tl&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var tu={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let tc=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function tf(t,e){let i={};for(let e in t)"ref"!==e&&(i[e]=t[e]);return tc.forEach(t=>{t in e&&(i[t]=e[t])}),i}function td(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!td(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e||Object.keys(t).length!==Object.keys(e).length)return!1;for(let i in t)if(!td(t[i],e[i]))return!1;return!0}return t===e}function tp(t,e){t.push(e)}function tm(t,e,i){tp(i,{command:"addSource",args:[t,e[t]]})}function tg(t,e,i){tp(e,{command:"removeSource",args:[t]}),i[t]=!0}function ty(t,e,i,r){tg(t,i,r),tm(t,e,i)}function tv(t,e,i){let r;for(r in t[i])if(Object.prototype.hasOwnProperty.call(t[i],r)&&"data"!==r&&!td(t[i][r],e[i][r]))return!1;for(r in e[i])if(Object.prototype.hasOwnProperty.call(e[i],r)&&"data"!==r&&!td(t[i][r],e[i][r]))return!1;return!0}function t_(t,e,i,r,n,o){for(let a in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,a)&&(td(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}));for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(td(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}))}function tb(t){return t.id}function tx(t,e){return t[e.id]=e,t}class tw{constructor(t,e,i,r){this.message=(t?`${t}: `:"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function tM(t,...e){for(let i of e)for(let e in i)t[e]=i[e];return t}class tS extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class tk{constructor(t,e=[]){for(let[i,r]of(this.parent=t,this.bindings={},e))this.bindings[i]=r}concat(t){return new tk(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}let tE={kind:"null"},tI={kind:"number"},tP={kind:"string"},tT={kind:"boolean"},tA={kind:"color"},tC={kind:"object"},tL={kind:"value"},tR={kind:"collator"},tN={kind:"formatted"},tz={kind:"padding"},tO={kind:"resolvedImage"},tD={kind:"variableAnchorOffsetCollection"};function tB(t,e){return{kind:"array",itemType:t,N:e}}function tF(t){if("array"===t.kind){let e=tF(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}let tj=[tE,tI,tP,tT,tA,tN,tC,tB(tL),tz,tO,tD];function tq(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!tq(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind){for(let t of tj)if(!tq(t,e))return null}}return`Expected ${tF(t)} but found ${tF(e)} instead.`}function tV(t,e){return e.some(e=>e.kind===t.kind)}function tU(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}function tZ(t,e){return"array"===t.kind&&"array"===e.kind?t.itemType.kind===e.itemType.kind&&"number"==typeof t.N:t.kind===e.kind}let tG=.96422,tH=.82521,tW=4/29,tX=6/29,t$=6/29*3*(6/29),tY=6/29*(6/29)*(6/29),tK=Math.PI/180,tJ=180/Math.PI;function tQ(t){return(t%=360)<0&&(t+=360),t}function t0([t,e,i,r]){let n,o;let a=t2((.2225045*(t=t1(t))+.7168786*(e=t1(e))+.0606169*(i=t1(i)))/1);t===e&&e===i?n=o=a:(n=t2((.4360747*t+.3850649*e+.1430804*i)/tG),o=t2((.0139322*t+.0971045*e+.7141733*i)/tH));let s=116*a-16;return[s<0?0:s,500*(n-a),200*(a-o),r]}function t1(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function t2(t){return t>tY?Math.pow(t,1/3):t/t$+tW}function t6([t,e,i,r]){let n=(t+16)/116,o=isNaN(e)?n:n+e/500,a=isNaN(i)?n:n-i/200;return n=1*t8(n),[t3(3.1338561*(o=tG*t8(o))-1.6168667*n-.4906146*(a=tH*t8(a))),t3(-.9787684*o+1.9161415*n+.033454*a),t3(.0719453*o-.2289914*n+1.4052427*a),r]}function t3(t){return(t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055)<0?0:t>1?1:t}function t8(t){return t>tX?t*t*t:t$*(t-tW)}function t4(t){return parseInt(t.padEnd(2,t),16)/255}function t5(t,e){return t7(e?t/100:t,0,1)}function t7(t,e,i){return Math.min(Math.max(e,t),i)}function t9(t){return!t.some(Number.isNaN)}let et={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ee{constructor(t,e,i,r=1,n=!0){this.r=t,this.g=e,this.b=i,this.a=r,n||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[t,e,i,r]))}static parse(t){if(t instanceof ee)return t;if("string"!=typeof t)return;let e=function(t){if("transparent"===(t=t.toLowerCase().trim()))return[0,0,0,0];let e=et[t];if(e){let[t,i,r]=e;return[t/255,i/255,r/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){let e=t.length<6?1:2,i=1;return[t4(t.slice(i,i+=e)),t4(t.slice(i,i+=e)),t4(t.slice(i,i+=e)),t4(t.slice(i,i+e)||"ff")]}if(t.startsWith("rgb")){let e=t.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(e){let[t,i,r,n,o,a,s,l,h,u,c,f]=e,d=[n||" ",s||" ",u].join("");if("  "===d||"  /"===d||",,"===d||",,,"===d){let t=[r,a,h].join(""),e="%%%"===t?100:""===t?255:0;if(e){let t=[t7(+i/e,0,1),t7(+o/e,0,1),t7(+l/e,0,1),c?t5(+c,f):1];if(t9(t))return t}}return}}let i=t.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(i){let[t,e,r,n,o,a,s,l,h]=i,u=[r||" ",o||" ",s].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){let t=[+e,t7(+n,0,100),t7(+a,0,100),l?t5(+l,h):1];if(t9(t))return function([t,e,i,r]){function n(r){let n=(r+t/30)%12,o=e*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(n-3,9-n,1))}return t=tQ(t),e/=100,i/=100,[n(0),n(8),n(4),r]}(t)}}}(t);return e?new ee(...e,!1):void 0}get rgb(){let{r:t,g:e,b:i,a:r}=this,n=r||1/0;return this.overwriteGetter("rgb",[t/n,e/n,i/n,r])}get hcl(){return this.overwriteGetter("hcl",function(t){let[e,i,r,n]=t0(t),o=Math.sqrt(i*i+r*r);return[Math.round(1e4*o)?tQ(Math.atan2(r,i)*tJ):NaN,o,e,n]}(this.rgb))}get lab(){return this.overwriteGetter("lab",t0(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){let[t,e,i,r]=this.rgb;return`rgba(${[t,e,i].map(t=>Math.round(255*t)).join(",")},${r})`}}ee.black=new ee(0,0,0,1),ee.white=new ee(1,1,1,1),ee.transparent=new ee(0,0,0,0),ee.red=new ee(1,0,0,1);class ei{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class er{constructor(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n}}class en{constructor(t){this.sections=t}static fromString(t){return new en([new er(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof en?t:en.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}}class eo{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof eo)return t;if("number"==typeof t)return new eo([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(let e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new eo(t)}}toString(){return JSON.stringify(this.values)}}let ea=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class es{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof es)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let e=0;e<t.length;e+=2){let i=t[e],r=t[e+1];if("string"!=typeof i||!ea.has(i)||!Array.isArray(r)||2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])return}return new es(t)}}toString(){return JSON.stringify(this.values)}}class el{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new el({name:t,available:!1}):null}}function eh(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,i,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eu(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof ee||t instanceof ei||t instanceof en||t instanceof eo||t instanceof es||t instanceof el)return!0;if(Array.isArray(t)){for(let e of t)if(!eu(e))return!1;return!0}if("object"==typeof t){for(let e in t)if(!eu(t[e]))return!1;return!0}return!1}function ec(t){if(null===t)return tE;if("string"==typeof t)return tP;if("boolean"==typeof t)return tT;if("number"==typeof t)return tI;if(t instanceof ee)return tA;if(t instanceof ei)return tR;if(t instanceof en)return tN;if(t instanceof eo)return tz;if(t instanceof es)return tD;if(t instanceof el)return tO;if(Array.isArray(t)){let e;let i=t.length;for(let i of t){let t=ec(i);if(e){if(e===t)continue;e=tL;break}e=t}return tB(e||tL,i)}return tC}function ef(t){let e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof ee||t instanceof en||t instanceof eo||t instanceof es||t instanceof el?t.toString():JSON.stringify(t)}class ed{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!eu(t[1]))return e.error("invalid value");let i=t[1],r=ec(i),n=e.expectedType;return"array"===r.kind&&0===r.N&&n&&"array"===n.kind&&("number"!=typeof n.N||0===n.N)&&(r=n),new ed(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ep{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}let em={string:tP,number:tI,boolean:tT,object:tC};class eg{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,r=1,n=t[0];if("array"===n){let n,o;if(t.length>2){let i=t[1];if("string"!=typeof i||!(i in em)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=em[i],r++}else n=tL;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}i=tB(n,o)}else{if(!em[n])throw Error(`Types doesn't contain name = ${n}`);i=em[n]}let o=[];for(;r<t.length;r++){let i=e.parse(t[r],r,tL);if(!i)return null;o.push(i)}return new eg(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){let i=this.args[e].evaluate(t);if(!tq(this.type,ec(i)))return i;if(e===this.args.length-1)throw new ep(`Expected value to be of type ${tF(this.type)}, but found ${tF(ec(i))} instead.`)}throw Error()}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}let ey={"to-boolean":tT,"to-color":tA,"to-number":tI,"to-string":tP};class ev{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i=t[0];if(!ey[i])throw Error(`Can't parse ${i} as it is not part of the known types`);if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");let r=ey[i],n=[];for(let i=1;i<t.length;i++){let r=e.parse(t[i],i,tL);if(!r)return null;n.push(r)}return new ev(r,n)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let e,i;for(let r of this.args){if(e=r.evaluate(t),i=null,e instanceof ee)return e;if("string"==typeof e){let i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:eh(e[0],e[1],e[2],e[3])))return new ee(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ep(i||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"padding":{let e;for(let i of this.args){e=i.evaluate(t);let r=eo.parse(e);if(r)return r}throw new ep(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"variableAnchorOffsetCollection":{let e;for(let i of this.args){e=i.evaluate(t);let r=es.parse(e);if(r)return r}throw new ep(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"number":{let e=null;for(let i of this.args){if(null===(e=i.evaluate(t)))return 0;let r=Number(e);if(!isNaN(r))return r}throw new ep(`Could not convert ${JSON.stringify(e)} to number.`)}case"formatted":return en.fromString(ef(this.args[0].evaluate(t)));case"resolvedImage":return el.fromString(ef(this.args[0].evaluate(t)));default:return ef(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}let e_=["Unknown","Point","LineString","Polygon"];class eb{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?e_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=ee.parse(t)),e}}class ex{constructor(t,e,i=[],r,n=new tk,o=[]){this.registry=t,this.path=i,this.key=i.map(t=>`[${t}]`).join(""),this.scope=n,this.errors=o,this.expectedType=r,this._isConstant=e}parse(t,e,i,r,n={}){return e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)}_parse(t,e){function i(t,e,i){return"assert"===i?new eg(e,[t]):"coerce"===i?new ev(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let n=this.registry[r];if(n){let r=n.parse(t,this);if(!r)return null;if(this.expectedType){let t=this.expectedType,n=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==n.kind){if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==n.kind&&"string"!==n.kind){if("padding"!==t.kind||"value"!==n.kind&&"number"!==n.kind&&"array"!==n.kind){if("variableAnchorOffsetCollection"!==t.kind||"value"!==n.kind&&"array"!==n.kind){if(this.checkSubtype(t,n))return null}else r=i(r,t,e.typeAnnotation||"coerce")}else r=i(r,t,e.typeAnnotation||"coerce")}else r=i(r,t,e.typeAnnotation||"coerce")}else r=i(r,t,e.typeAnnotation||"assert")}if(!(r instanceof ed)&&"resolvedImage"!==r.type.kind&&this._isConstant(r)){let t=new eb;try{r=new ed(r.type,r.evaluate(t))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){let r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new ex(this.registry,this._isConstant,r,e||null,n,this.errors)}error(t,...e){let i=`${this.key}${e.map(t=>`[${t}]`).join("")}`;this.errors.push(new tS(i,t))}checkSubtype(t,e){let i=tq(t,e);return i&&this.error(i),i}}class ew{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(let e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);let i=[];for(let r=1;r<t.length-1;r+=2){let n=t[r];if("string"!=typeof n)return e.error(`Expected string, but found ${typeof n} instead.`,r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);let o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}let r=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return r?new ew(i,r):null}outputDefined(){return this.result.outputDefined()}}class eM{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");let i=t[1];return e.scope.has(i)?new eM(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class eS{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let i=e.parse(t[1],1,tI),r=e.parse(t[2],2,tB(e.expectedType||tL));return i&&r?new eS(r.type.itemType,i,r):null}evaluate(t){let e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ep(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new ep(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new ep(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class ek{constructor(t,e){this.type=tT,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let i=e.parse(t[1],1,tL),r=e.parse(t[2],2,tL);return i&&r?tV(i.type,[tT,tP,tI,tE,tL])?new ek(i,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${tF(i.type)} instead`):null}evaluate(t){let e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!tU(e,["boolean","string","number","null"]))throw new ep(`Expected first argument to be of type boolean, string, number or null, but found ${tF(ec(e))} instead.`);if(!tU(i,["string","array"]))throw new ep(`Expected second argument to be of type array or string, but found ${tF(ec(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class eE{constructor(t,e,i){this.type=tI,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);let i=e.parse(t[1],1,tL),r=e.parse(t[2],2,tL);if(!i||!r)return null;if(!tV(i.type,[tT,tP,tI,tE,tL]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${tF(i.type)} instead`);if(4===t.length){let n=e.parse(t[3],3,tI);return n?new eE(i,r,n):null}return new eE(i,r)}evaluate(t){let e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!tU(e,["boolean","string","number","null"]))throw new ep(`Expected first argument to be of type boolean, string, number or null, but found ${tF(ec(e))} instead.`);if(!tU(i,["string","array"]))throw new ep(`Expected second argument to be of type array or string, but found ${tF(ec(i))} instead.`);if(this.fromIndex){let r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class eI{constructor(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o}static parse(t,e){let i,r;if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);let n={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);let h=e.concat(a);if(0===s.length)return h.error("Expected at least one branch label.");for(let t of s){if("number"!=typeof t&&"string"!=typeof t)return h.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,ec(t)))return null}else i=ec(t);if(void 0!==n[String(t)])return h.error("Branch labels must be unique.");n[String(t)]=o.length}let u=e.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}let a=e.parse(t[1],1,tL);if(!a)return null;let s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(i,a.type)?null:new eI(i,r,a,n,o,s):null}evaluate(t){let e=this.input.evaluate(t);return(ec(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class eP{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){let i;if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);let r=[];for(let n=1;n<t.length-1;n+=2){let o=e.parse(t[n],n,tT);if(!o)return null;let a=e.parse(t[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}let n=e.parse(t[t.length-1],t.length-1,i);if(!n)return null;if(!i)throw Error("Can't infer output type");return new eP(i,r,n)}evaluate(t){for(let[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(let[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}}class eT{constructor(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);let i=e.parse(t[1],1,tL),r=e.parse(t[2],2,tI);if(!i||!r)return null;if(!tV(i.type,[tB(tL),tP,tL]))return e.error(`Expected first argument to be of type array or string, but found ${tF(i.type)} instead`);if(4===t.length){let n=e.parse(t[3],3,tI);return n?new eT(i.type,i,r,n):null}return new eT(i.type,i,r)}evaluate(t){let e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!tU(e,["string","array"]))throw new ep(`Expected first argument to be of type array or string, but found ${tF(ec(e))} instead.`);if(this.endIndex){let r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function eA(t,e){let i=t.length-1,r,n,o=0,a=i,s=0;for(;o<=a;)if(r=t[s=Math.floor((o+a)/2)],n=t[s+1],r<=e){if(s===i||e<n)return s;o=s+1}else{if(!(r>e))throw new ep("Input is not a number.");a=s-1}return 0}class eC{constructor(t,e,i){for(let[r,n]of(this.type=t,this.input=e,this.labels=[],this.outputs=[],i))this.labels.push(r),this.outputs.push(n)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");let i=e.parse(t[1],1,tI);if(!i)return null;let r=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(let i=1;i<t.length;i+=2){let o=1===i?-1/0:t[i],a=t[i+1],s=i,l=i+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);let h=e.parse(a,l,n);if(!h)return null;n=n||h.type,r.push([o,h])}return new eC(n,i,r)}evaluate(t){let e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);let r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);let n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[eA(e,r)].evaluate(t)}eachChild(t){for(let e of(t(this.input),this.outputs))t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function eL(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eR=eN;function eN(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=r}eN.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,r=0;r<8;r++){var n=this.sampleCurveX(i)-t;if(Math.abs(n)<e)return i;var o=this.sampleCurveDerivativeX(i);if(1e-6>Math.abs(o))break;i-=n/o}var a=0,s=1;for(i=t,r=0;r<20&&!(Math.abs((n=this.sampleCurveX(i))-t)<e);r++)t>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var ez=eL(eR);function eO(t,e,i){return t+i*(e-t)}function eD(t,e,i){return t.map((t,r)=>eO(t,e[r],i))}let eB={number:eO,color:function(t,e,i,r="rgb"){switch(r){case"rgb":{let[r,n,o,a]=eD(t.rgb,e.rgb,i);return new ee(r,n,o,a,!1)}case"hcl":{let r,n;let[o,a,s,l]=t.hcl,[h,u,c,f]=e.hcl;if(isNaN(o)||isNaN(h))isNaN(o)?isNaN(h)?r=NaN:(r=h,1!==s&&0!==s||(n=u)):(r=o,1!==c&&0!==c||(n=a));else{let t=h-o;h>o&&t>180?t-=360:h<o&&o-h>180&&(t+=360),r=o+i*t}let[d,p,m,g]=function([t,e,i,r]){return t6([i,Math.cos(t=isNaN(t)?0:t*tK)*e,Math.sin(t)*e,r])}([r,null!=n?n:eO(a,u,i),eO(s,c,i),eO(l,f,i)]);return new ee(d,p,m,g,!1)}case"lab":{let[r,n,o,a]=t6(eD(t.lab,e.lab,i));return new ee(r,n,o,a,!1)}}},array:eD,padding:function(t,e,i){return new eo(eD(t.values,e.values,i))},variableAnchorOffsetCollection:function(t,e,i){let r=t.values,n=e.values;if(r.length!==n.length)throw new ep(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${e.toString()}`);let o=[];for(let t=0;t<r.length;t+=2){if(r[t]!==n[t])throw new ep(`Cannot interpolate values containing mismatched anchors. from[${t}]: ${r[t]}, to[${t}]: ${n[t]}`);o.push(r[t]);let[e,a]=r[t+1],[s,l]=n[t+1];o.push([eO(e,s,i),eO(a,l,i)])}return new es(o)}};class eF{constructor(t,e,i,r,n){for(let[o,a]of(this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[],n))this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,i,r){let n=0;if("exponential"===t.name)n=ej(e,t.base,i,r);else if("linear"===t.name)n=ej(e,1,i,r);else if("cubic-bezier"===t.name){let o=t.controlPoints;n=new ez(o[0],o[1],o[2],o[3]).solve(ej(e,1,i,r))}return n}static parse(t,e){let[i,r,n,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){let t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{let t=r.slice(1);if(4!==t.length||t.some(t=>"number"!=typeof t||t<0||t>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,tI)))return null;let a=[],s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=tA:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){let i=o[t],r=o[t+1],n=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);let h=e.parse(r,l,s);if(!h)return null;s=s||h.type,a.push([i,h])}return tZ(s,tI)||tZ(s,tA)||tZ(s,tz)||tZ(s,tD)||tZ(s,tB(tI))?new eF(s,i,r,n,a):e.error(`Type ${tF(s)} is not interpolatable.`)}evaluate(t){let e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);let r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);let n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);let o=eA(e,r),a=eF.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);switch(this.operator){case"interpolate":return eB[this.type.kind](s,l,a);case"interpolate-hcl":return eB.color(s,l,a,"hcl");case"interpolate-lab":return eB.color(s,l,a,"lab")}}eachChild(t){for(let e of(t(this.input),this.outputs))t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function ej(t,e,i,r){let n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}class eq{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);let n=[];for(let r of t.slice(1)){let t=e.parse(r,1+n.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,n.push(t)}if(!i)throw Error("No output type");return new eq(r&&n.some(t=>tq(r,t.type))?tL:i,n)}evaluate(t){let e,i=null,r=0;for(let n of this.args)if(r++,(i=n.evaluate(t))&&i instanceof el&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function eV(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function eU(t,e,i,r){return 0===r.compare(e,i)}function eZ(t,e,i){let r="=="!==t&&"!="!==t;return class n{constructor(t,e,i){this.type=tT,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");let i=t[0],o=e.parse(t[1],1,tL);if(!o)return null;if(!eV(i,o.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${tF(o.type)}'.`);let a=e.parse(t[2],2,tL);if(!a)return null;if(!eV(i,a.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${tF(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${tF(o.type)}' and '${tF(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new eg(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new eg(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,tR)))return null}return new n(o,a,s)}evaluate(n){let o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){let e=ec(o),i=ec(a);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new ep(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){let t=ec(o),i=ec(a);if("string"!==t.kind||"string"!==i.kind)return e(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):e(n,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}let eG=eZ("==",function(t,e,i){return e===i},eU),eH=eZ("!=",function(t,e,i){return e!==i},function(t,e,i,r){return!eU(0,e,i,r)}),eW=eZ("<",function(t,e,i){return e<i},function(t,e,i,r){return 0>r.compare(e,i)}),eX=eZ(">",function(t,e,i){return e>i},function(t,e,i,r){return r.compare(e,i)>0}),e$=eZ("<=",function(t,e,i){return e<=i},function(t,e,i,r){return 0>=r.compare(e,i)}),eY=eZ(">=",function(t,e,i){return e>=i},function(t,e,i,r){return r.compare(e,i)>=0});class eK{constructor(t,e,i){this.type=tR,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");let i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");let r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,tT);if(!r)return null;let n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,tT);if(!n)return null;let o=null;return!i.locale||(o=e.parse(i.locale,1,tP))?new eK(r,n,o):null}evaluate(t){return new ei(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class eJ{constructor(t,e,i,r,n){this.type=tP,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");let i=e.parse(t[1],1,tI);if(!i)return null;let r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&!(n=e.parse(r.locale,1,tP)))return null;let o=null;if(r.currency&&!(o=e.parse(r.currency,1,tP)))return null;let a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,tI)))return null;let s=null;return!r["max-fraction-digits"]||(s=e.parse(r["max-fraction-digits"],1,tI))?new eJ(i,n,o,a,s):null}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class eQ{constructor(t){this.type=tN,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");let r=[],n=!1;for(let i=1;i<=t.length-1;++i){let o=t[i];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;let t=null;if(o["font-scale"]&&!(t=e.parse(o["font-scale"],1,tI)))return null;let i=null;if(o["text-font"]&&!(i=e.parse(o["text-font"],1,tB(tP))))return null;let a=null;if(o["text-color"]&&!(a=e.parse(o["text-color"],1,tA)))return null;let s=r[r.length-1];s.scale=t,s.font=i,s.textColor=a}else{let o=e.parse(t[i],1,tL);if(!o)return null;let a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new eQ(r)}evaluate(t){return new en(this.sections.map(e=>{let i=e.content.evaluate(t);return ec(i)===tO?new er("",i,null,null,null):new er(ef(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(let e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class e0{constructor(t){this.type=tO,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");let i=e.parse(t[1],1,tP);return i?new e0(i):e.error("No image name provided.")}evaluate(t){let e=this.input.evaluate(t),i=el.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}}class e1{constructor(t){this.type=tI,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);let i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${tF(i.type)} instead.`):new e1(i):null}evaluate(t){let e=this.input.evaluate(t);if("string"==typeof e||Array.isArray(e))return e.length;throw new ep(`Expected value to be of type string or array, but found ${tF(ec(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}let e2=8192;function e6(t,e){let i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*e2),Math.round(r*n*e2)]}function e3(t,e){let i=Math.pow(2,e.z);return[360*((t[0]/e2+e.x)/i)-180,360/Math.PI*Math.atan(Math.exp((180-360*((t[1]/e2+e.y)/i))*Math.PI/180))-90]}function e8(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function e4(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function e5(t,e,i){let r=t[0]-e[0],n=t[1]-e[1],o=t[0]-i[0],a=t[1]-i[1];return r*a-o*n==0&&r*o<=0&&n*a<=0}function e7(t,e,i,r){var n,o;return 0!=(n=[r[0]-i[0],r[1]-i[1]])[0]*(o=[e[0]-t[0],e[1]-t[1]])[1]-n[1]*o[0]&&!(!io(t,e,i,r)||!io(i,r,t,e))}function e9(t,e,i){for(let r of i)for(let i=0;i<r.length-1;++i)if(e7(t,e,r[i],r[i+1]))return!0;return!1}function it(t,e,i=!1){var r,n,o;let a=!1;for(let s of e)for(let e=0;e<s.length-1;e++){if(e5(t,s[e],s[e+1]))return i;(n=s[e])[1]>(r=t)[1]!=(o=s[e+1])[1]>r[1]&&r[0]<(o[0]-n[0])*(r[1]-n[1])/(o[1]-n[1])+n[0]&&(a=!a)}return a}function ie(t,e){for(let i of e)if(it(t,i))return!0;return!1}function ii(t,e){for(let i of t)if(!it(i,e))return!1;for(let i=0;i<t.length-1;++i)if(e9(t[i],t[i+1],e))return!1;return!0}function ir(t,e){for(let i of e)if(ii(t,i))return!0;return!1}function io(t,e,i,r){let n=r[0]-i[0],o=r[1]-i[1],a=(t[0]-i[0])*o-n*(t[1]-i[1]),s=(e[0]-i[0])*o-n*(e[1]-i[1]);return a>0&&s<0||a<0&&s>0}function ia(t,e,i){let r=[];for(let n=0;n<t.length;n++){let o=[];for(let r=0;r<t[n].length;r++){let a=e6(t[n][r],i);e8(e,a),o.push(a)}r.push(o)}return r}function is(t,e,i){let r=[];for(let n=0;n<t.length;n++){let o=ia(t[n],e,i);r.push(o)}return r}function il(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){let e=.5*r,n=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===n&&(n=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=n}e8(e,t)}function ih(t,e,i,r){let n=Math.pow(2,r.z)*e2,o=[r.x*e2,r.y*e2],a=[];for(let r of t)for(let t of r){let r=[t.x+o[0],t.y+o[1]];il(r,e,i,n),a.push(r)}return a}function iu(t,e,i,r){var n;let o=Math.pow(2,r.z)*e2,a=[r.x*e2,r.y*e2],s=[];for(let i of t){let t=[];for(let r of i){let i=[r.x+a[0],r.y+a[1]];e8(e,i),t.push(i)}s.push(t)}if(e[2]-e[0]<=o/2)for(let t of((n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0,s))for(let r of t)il(r,e,i,o);return s}class ic{constructor(t,e){this.type=tT,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(eu(t[1])){let e=t[1];if("FeatureCollection"===e.type){let t=[];for(let i of e.features){let{type:e,coordinates:r}=i.geometry;"Polygon"===e&&t.push(r),"MultiPolygon"===e&&t.push(...r)}if(t.length)return new ic(e,{type:"MultiPolygon",coordinates:t})}else if("Feature"===e.type){let t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ic(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ic(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){let i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){let o=ia(e.coordinates,r,n),a=ih(t.geometry(),i,r,n);if(!e4(i,r))return!1;for(let t of a)if(!it(t,o))return!1}if("MultiPolygon"===e.type){let o=is(e.coordinates,r,n),a=ih(t.geometry(),i,r,n);if(!e4(i,r))return!1;for(let t of a)if(!ie(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){let i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){let o=ia(e.coordinates,r,n),a=iu(t.geometry(),i,r,n);if(!e4(i,r))return!1;for(let t of a)if(!ii(t,o))return!1}if("MultiPolygon"===e.type){let o=is(e.coordinates,r,n),a=iu(t.geometry(),i,r,n);if(!e4(i,r))return!1;for(let t of a)if(!ir(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let id=class{constructor(t=[],e=ip){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;let t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:e,compare:i}=this,r=e[t];for(;t>0;){let n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}_down(t){let{data:e,compare:i}=this,r=this.length>>1,n=e[t];for(;t<r;){let r=1+(t<<1),o=e[r],a=r+1;if(a<this.length&&0>i(e[a],o)&&(r=a,o=e[a]),i(o,n)>=0)break;e[t]=o,t=r}e[t]=n}};function ip(t,e){return t<e?-1:t>e?1:0}function im(t,e,i,r,n){ig(t,e,i,r||t.length-1,n||iv)}function ig(t,e,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,a=e-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ig(t,e,Math.max(i,Math.floor(e-a*l/o+h)),Math.min(r,Math.floor(e+(o-a)*l/o+h)),n)}var u=t[e],c=i,f=r;for(iy(t,i,e),n(t[r],u)>0&&iy(t,i,r);c<f;){for(iy(t,c,f),c++,f--;0>n(t[c],u);)c++;for(;n(t[f],u)>0;)f--}0===n(t[i],u)?iy(t,i,f):iy(t,++f,r),f<=e&&(i=f+1),e<=f&&(r=f-1)}}function iy(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function iv(t,e){return t<e?-1:t>e?1:0}function i_(t,e){let i,r;if(t.length<=1)return[t];let n=[];for(let e of t){let t=ix(e);0!==t&&(e.area=Math.abs(t),void 0===r&&(r=t<0),r===t<0?(i&&n.push(i),i=[e]):i.push(e))}if(i&&n.push(i),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(im(n[t],e,1,n[t].length-1,ib),n[t]=n[t].slice(0,e));return n}function ib(t,e){return e.area-t.area}function ix(t){let e=0;for(let i,r,n=0,o=t.length,a=o-1;n<o;a=n++)i=t[n],e+=((r=t[a]).x-i.x)*(i.y+r.y);return e}let iw=1/298.257223563*(2-1/298.257223563),iM=Math.PI/180;class iS{constructor(t){let e=6378.137*iM*1e3,i=Math.cos(t*iM),r=1/(1-iw*(1-i*i)),n=Math.sqrt(r);this.kx=e*n*i,this.ky=e*n*r*(1-iw)}distance(t,e){let i=this.wrap(t[0]-e[0])*this.kx,r=(t[1]-e[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(t,e){let i,r,n,o,a=1/0;for(let s=0;s<t.length-1;s++){let l=t[s][0],h=t[s][1],u=this.wrap(t[s+1][0]-l)*this.kx,c=(t[s+1][1]-h)*this.ky,f=0;0===u&&0===c||((f=(this.wrap(e[0]-l)*this.kx*u+(e[1]-h)*this.ky*c)/(u*u+c*c))>1?(l=t[s+1][0],h=t[s+1][1]):f>0&&(l+=u/this.kx*f,h+=c/this.ky*f));let d=(u=this.wrap(e[0]-l)*this.kx)*u+(c=(e[1]-h)*this.ky)*c;d<a&&(a=d,i=l,r=h,n=s,o=f)}return{point:[i,r],index:n,t:Math.max(0,Math.min(1,o))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function ik(t,e){return e[0]-t[0]}function iE(t){return t[1]-t[0]+1}function iI(t,e){return t[1]>=t[0]&&t[1]<e}function iP(t,e){if(t[0]>t[1])return[null,null];let i=iE(t);if(e){if(2===i)return[t,null];let e=Math.floor(i/2);return[[t[0],t[0]+e],[t[0]+e,t[1]]]}if(1===i)return[t,null];let r=Math.floor(i/2)-1;return[[t[0],t[0]+r],[t[0]+r+1,t[1]]]}function iT(t,e){if(!iI(e,t.length))return[1/0,1/0,-1/0,-1/0];let i=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)e8(i,t[r]);return i}function iA(t){let e=[1/0,1/0,-1/0,-1/0];for(let i of t)for(let t of i)e8(e,t);return e}function iC(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function iL(t,e,i){if(!iC(t)||!iC(e))return NaN;let r=0,n=0;return t[2]<e[0]&&(r=e[0]-t[2]),t[0]>e[2]&&(r=t[0]-e[2]),t[1]>e[3]&&(n=t[1]-e[3]),t[3]<e[1]&&(n=e[1]-t[3]),i.distance([0,0],[r,n])}function iR(t,e,i){let r=i.pointOnLine(e,t);return i.distance(t,r.point)}function iN(t,e,i,r,n){return Math.min(Math.min(iR(t,[i,r],n),iR(e,[i,r],n)),Math.min(iR(i,[t,e],n),iR(r,[t,e],n)))}function iz(t,e,i,r,n){if(!iI(e,t.length)||!iI(r,i.length))return 1/0;let o=1/0;for(let a=e[0];a<e[1];++a){let e=t[a],s=t[a+1];for(let t=r[0];t<r[1];++t){let r=i[t],a=i[t+1];if(e7(e,s,r,a))return 0;o=Math.min(o,iN(e,s,r,a,n))}}return o}function iO(t,e,i,r,n){if(!iI(e,t.length)||!iI(r,i.length))return NaN;let o=1/0;for(let a=e[0];a<=e[1];++a)for(let e=r[0];e<=r[1];++e)if(0===(o=Math.min(o,n.distance(t[a],i[e]))))return o;return o}function iD(t,e,i){if(it(t,e,!0))return 0;let r=1/0;for(let n of e){let e=n[0],o=n[n.length-1];if(e!==o&&0===(r=Math.min(r,iR(t,[o,e],i))))break;let a=i.pointOnLine(n,t);if(0===(r=Math.min(r,i.distance(t,a.point))))break}return r}function iB(t,e,i,r){if(!iI(e,t.length))return NaN;for(let r=e[0];r<=e[1];++r)if(it(t[r],i,!0))return 0;let n=1/0;for(let o=e[0];o<e[1];++o){let e=t[o],a=t[o+1];for(let t of i)for(let i=0,o=t.length,s=o-1;i<o;s=i++){let o=t[s],l=t[i];if(e7(e,a,o,l))return 0;n=Math.min(n,iN(e,a,o,l,r))}}return n}function iF(t,e){for(let i of t)for(let t of i)if(it(t,e,!0))return!0;return!1}function ij(t,e,i,r=1/0){let n=iA(t),o=iA(e);if(r!==1/0&&iL(n,o,i)>=r)return r;if(e4(n,o)){if(iF(t,e))return 0}else if(iF(e,t))return 0;let a=1/0;for(let r of t)for(let t=0,n=r.length,o=n-1;t<n;o=t++){let n=r[o],s=r[t];for(let t of e)for(let e=0,r=t.length,o=r-1;e<r;o=e++){let r=t[o],l=t[e];if(e7(n,s,r,l))return 0;a=Math.min(a,iN(n,s,r,l,i))}}return a}function iq(t,e,i,r,n,o){if(!o)return;let a=iL(iT(r,o),n,i);a<e&&t.push([a,o,[0,0]])}function iV(t,e,i,r,n,o,a){if(!o||!a)return;let s=iL(iT(r,o),iT(n,a),i);s<e&&t.push([s,o,a])}function iU(t,e,i,r,n=1/0){let o=Math.min(r.distance(t[0],i[0][0]),n);if(0===o)return o;let a=new id([[0,[0,t.length-1],[0,0]]],ik),s=iA(i);for(;a.length>0;){let n=a.pop();if(n[0]>=o)continue;let l=n[1],h=e?50:100;if(iE(l)<=h){if(!iI(l,t.length))return NaN;if(e){let e=iB(t,l,i,r);if(isNaN(e)||0===e)return e;o=Math.min(o,e)}else for(let e=l[0];e<=l[1];++e)if(0===(o=Math.min(o,iD(t[e],i,r))))return 0}else{let i=iP(l,e);iq(a,o,r,t,s,i[0]),iq(a,o,r,t,s,i[1])}}return o}function iZ(t,e,i,r,n,o=1/0){let a=Math.min(o,n.distance(t[0],i[0]));if(0===a)return a;let s=new id([[0,[0,t.length-1],[0,i.length-1]]],ik);for(;s.length>0;){let o=s.pop();if(o[0]>=a)continue;let l=o[1],h=o[2],u=e?50:100,c=r?50:100;if(iE(l)<=u&&iE(h)<=c){let o;if(!iI(l,t.length)&&iI(h,i.length))return NaN;if(e&&r)a=Math.min(a,o=iz(t,l,i,h,n));else if(e&&!r){let e=t.slice(l[0],l[1]+1);for(let t=h[0];t<=h[1];++t)if(0===(a=Math.min(a,o=iR(i[t],e,n))))return a}else if(!e&&r){let e=i.slice(h[0],h[1]+1);for(let i=l[0];i<=l[1];++i)if(0===(a=Math.min(a,o=iR(t[i],e,n))))return a}else a=Math.min(a,o=iO(t,l,i,h,n))}else{let o=iP(l,e),u=iP(h,r);iV(s,a,n,t,i,o[0],u[0]),iV(s,a,n,t,i,o[0],u[1]),iV(s,a,n,t,i,o[1],u[0]),iV(s,a,n,t,i,o[1],u[1])}}return a}function iG(t){return"MultiPolygon"===t.type?t.coordinates.map(t=>({type:"Polygon",coordinates:t})):"MultiLineString"===t.type?t.coordinates.map(t=>({type:"LineString",coordinates:t})):"MultiPoint"===t.type?t.coordinates.map(t=>({type:"Point",coordinates:t})):[t]}class iH{constructor(t,e){this.type=tI,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(eu(t[1])){let e=t[1];if("FeatureCollection"===e.type)return new iH(e,e.features.map(t=>iG(t.geometry)).flat());if("Feature"===e.type)return new iH(e,iG(e.geometry));if("type"in e&&"coordinates"in e)return new iH(e,iG(e))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){let i=t.geometry(),r=i.flat().map(e=>e3([e.x,e.y],t.canonical));if(0===i.length)return NaN;let n=new iS(r[0][1]),o=1/0;for(let t of e){switch(t.type){case"Point":o=Math.min(o,iZ(r,!1,[t.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,iZ(r,!1,t.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,iU(r,!1,t.coordinates,n,o))}if(0===o)break}return o}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){let i=t.geometry(),r=i.flat().map(e=>e3([e.x,e.y],t.canonical));if(0===i.length)return NaN;let n=new iS(r[0][1]),o=1/0;for(let t of e){switch(t.type){case"Point":o=Math.min(o,iZ(r,!0,[t.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,iZ(r,!0,t.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,iU(r,!0,t.coordinates,n,o))}if(0===o)break}return o}(t,this.geometries);if("Polygon"===t.geometryType())return function(t,e){let i=t.geometry();if(0===i.length||0===i[0].length)return NaN;let r=i_(i,0).map(e=>e.map(e=>e.map(e=>e3([e.x,e.y],t.canonical)))),n=new iS(r[0][0][0][1]),o=1/0;for(let t of e)for(let e of r){switch(t.type){case"Point":o=Math.min(o,iU([t.coordinates],!1,e,n,o));break;case"LineString":o=Math.min(o,iU(t.coordinates,!0,e,n,o));break;case"Polygon":o=Math.min(o,ij(e,t.coordinates,n,o))}if(0===o)return o}return o}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let iW={"==":eG,"!=":eH,">":eX,"<":eW,">=":eY,"<=":e$,array:eg,at:eS,boolean:eg,case:eP,coalesce:eq,collator:eK,format:eQ,image:e0,in:ek,"index-of":eE,interpolate:eF,"interpolate-hcl":eF,"interpolate-lab":eF,length:e1,let:ew,literal:ed,match:eI,number:eg,"number-format":eJ,object:eg,slice:eT,step:eC,string:eg,"to-boolean":ev,"to-color":ev,"to-number":ev,"to-string":ev,var:eM,within:ic,distance:iH};class iX{constructor(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){let i=t[0],r=iX.definitions[i];if(!r)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);let n=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([e])=>!Array.isArray(e)||e.length===t.length-1),s=null;for(let[r,o]of a){s=new ex(e.registry,iQ,e.path,null,e.scope);let a=[],l=!1;for(let e=1;e<t.length;e++){let i=t[e],n=Array.isArray(r)?r[e-1]:r.type,o=s.parse(i,1+a.length,n);if(!o){l=!0;break}a.push(o)}if(!l){if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){let e=Array.isArray(r)?r[t]:r.type,i=a[t];s.concat(t+1).checkSubtype(e,i.type)}if(0===s.errors.length)return new iX(i,n,o,a)}}}if(1===a.length)e.errors.push(...s.errors);else{let i=(a.length?a:o).map(([t])=>{var e;return Array.isArray(e=t)?`(${e.map(tF).join(", ")})`:`(${tF(e.type)}...)`}).join(" | "),r=[];for(let i=1;i<t.length;i++){let n=e.parse(t[i],1+r.length);if(!n)return null;r.push(tF(n.type))}e.error(`Expected arguments of type ${i}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){for(let i in iX.definitions=e,e)t[i]=iX}}function i$(t,[e,i,r,n]){e=e.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);let o=n?n.evaluate(t):1,a=eh(e,i,r,o);if(a)throw new ep(a);return new ee(e/255,i/255,r/255,o,!1)}function iY(t,e){return t in e}function iK(t,e){let i=e[t];return void 0===i?null:i}function iJ(t){return{type:t}}function iQ(t){if(t instanceof eM)return iQ(t.boundExpression);if(t instanceof iX&&"error"===t.name||t instanceof eK||t instanceof ic||t instanceof iH)return!1;let e=t instanceof ev||t instanceof eg,i=!0;return t.eachChild(t=>{i=e?i&&iQ(t):i&&t instanceof ed}),!!i&&i0(t)&&i2(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function i0(t){if(t instanceof iX&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name))||t instanceof ic||t instanceof iH)return!1;let e=!0;return t.eachChild(t=>{e&&!i0(t)&&(e=!1)}),e}function i1(t){if(t instanceof iX&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(t=>{e&&!i1(t)&&(e=!1)}),e}function i2(t,e){if(t instanceof iX&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild(t=>{i&&!i2(t,e)&&(i=!1)}),i}function i6(t){return{result:"success",value:t}}function i3(t){return{result:"error",value:t}}function i8(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function i4(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function i5(t){return!!t.expression&&t.expression.interpolated}function i7(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function i9(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function rt(t){return t}function re(t,e){var i;let r,n,o;let a="color"===e.type,s=t.stops&&"object"==typeof t.stops[0][0],l=s||!(s||void 0!==t.property),h=t.type||(i5(e)?"exponential":"interval");if(a||"padding"===e.type){let i=a?ee.parse:eo.parse;(t=tM({},t)).stops&&(t.stops=t.stops.map(t=>[t[0],i(t[1])])),t.default=i(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==(i=t.colorSpace)&&"hcl"!==i&&"lab"!==i)throw Error(`Unknown color space: "${t.colorSpace}"`);if("exponential"===h)r=ro;else if("interval"===h)r=rn;else if("categorical"===h){for(let e of(r=rr,n=Object.create(null),t.stops))n[e[0]]=e[1];o=typeof t.stops[0][0]}else{if("identity"!==h)throw Error(`Unknown function type "${h}"`);r=ra}if(s){let i={},r=[];for(let e=0;e<t.stops.length;e++){let n=t.stops[e],o=n[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),i[o].stops.push([n[0].value,n[1]])}let n=[];for(let t of r)n.push([i[t].zoom,re(i[t],e)]);let o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:eF.interpolationFactor.bind(void 0,o),zoomStops:n.map(t=>t[0]),evaluate:({zoom:i},r)=>ro({stops:n,base:t.base},e,i).evaluate(i,r)}}if(l){let i="exponential"===h?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:eF.interpolationFactor.bind(void 0,i),zoomStops:t.stops.map(t=>t[0]),evaluate:({zoom:i})=>r(t,e,i,n,o)}}return{kind:"source",evaluate(i,a){let s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?ri(t.default,e.default):r(t,e,s,n,o)}}}function ri(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function rr(t,e,i,r,n){return ri(typeof i===n?r[i]:void 0,t.default,e.default)}function rn(t,e,i){if("number"!==i7(i))return ri(t.default,e.default);let r=t.stops.length;if(1===r||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];let n=eA(t.stops.map(t=>t[0]),i);return t.stops[n][1]}function ro(t,e,i){let r=void 0!==t.base?t.base:1;if("number"!==i7(i))return ri(t.default,e.default);let n=t.stops.length;if(1===n||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];let o=eA(t.stops.map(t=>t[0]),i),a=function(t,e,i,r){let n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],h=eB[e.type]||rt;return"function"==typeof s.evaluate?{evaluate(...e){let i=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==r)return h(i,r,a,t.colorSpace)}}:h(s,l,a,t.colorSpace)}function ra(t,e,i){switch(e.type){case"color":i=ee.parse(i);break;case"formatted":i=en.fromString(i.toString());break;case"resolvedImage":i=el.fromString(i.toString());break;case"padding":i=eo.parse(i);break;default:i7(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0)}return ri(i,t.default,e.default)}iX.register(iW,{error:[{kind:"error"},[tP],(t,[e])=>{throw new ep(e.evaluate(t))}],typeof:[tP,[tL],(t,[e])=>tF(ec(e.evaluate(t)))],"to-rgba":[tB(tI,4),[tA],(t,[e])=>{let[i,r,n,o]=e.evaluate(t).rgb;return[255*i,255*r,255*n,o]}],rgb:[tA,[tI,tI,tI],i$],rgba:[tA,[tI,tI,tI,tI],i$],has:{type:tT,overloads:[[[tP],(t,[e])=>iY(e.evaluate(t),t.properties())],[[tP,tC],(t,[e,i])=>iY(e.evaluate(t),i.evaluate(t))]]},get:{type:tL,overloads:[[[tP],(t,[e])=>iK(e.evaluate(t),t.properties())],[[tP,tC],(t,[e,i])=>iK(e.evaluate(t),i.evaluate(t))]]},"feature-state":[tL,[tP],(t,[e])=>iK(e.evaluate(t),t.featureState||{})],properties:[tC,[],t=>t.properties()],"geometry-type":[tP,[],t=>t.geometryType()],id:[tL,[],t=>t.id()],zoom:[tI,[],t=>t.globals.zoom],"heatmap-density":[tI,[],t=>t.globals.heatmapDensity||0],"line-progress":[tI,[],t=>t.globals.lineProgress||0],accumulated:[tL,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[tI,iJ(tI),(t,e)=>{let i=0;for(let r of e)i+=r.evaluate(t);return i}],"*":[tI,iJ(tI),(t,e)=>{let i=1;for(let r of e)i*=r.evaluate(t);return i}],"-":{type:tI,overloads:[[[tI,tI],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[tI],(t,[e])=>-e.evaluate(t)]]},"/":[tI,[tI,tI],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[tI,[tI,tI],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[tI,[],()=>Math.LN2],pi:[tI,[],()=>Math.PI],e:[tI,[],()=>Math.E],"^":[tI,[tI,tI],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[tI,[tI],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[tI,[tI],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[tI,[tI],(t,[e])=>Math.log(e.evaluate(t))],log2:[tI,[tI],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[tI,[tI],(t,[e])=>Math.sin(e.evaluate(t))],cos:[tI,[tI],(t,[e])=>Math.cos(e.evaluate(t))],tan:[tI,[tI],(t,[e])=>Math.tan(e.evaluate(t))],asin:[tI,[tI],(t,[e])=>Math.asin(e.evaluate(t))],acos:[tI,[tI],(t,[e])=>Math.acos(e.evaluate(t))],atan:[tI,[tI],(t,[e])=>Math.atan(e.evaluate(t))],min:[tI,iJ(tI),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[tI,iJ(tI),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[tI,[tI],(t,[e])=>Math.abs(e.evaluate(t))],round:[tI,[tI],(t,[e])=>{let i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[tI,[tI],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[tI,[tI],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[tT,[tP,tL],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[tT,[tL],(t,[e])=>t.id()===e.value],"filter-type-==":[tT,[tP],(t,[e])=>t.geometryType()===e.value],"filter-<":[tT,[tP,tL],(t,[e,i])=>{let r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<n}],"filter-id-<":[tT,[tL],(t,[e])=>{let i=t.id(),r=e.value;return typeof i==typeof r&&i<r}],"filter->":[tT,[tP,tL],(t,[e,i])=>{let r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>n}],"filter-id->":[tT,[tL],(t,[e])=>{let i=t.id(),r=e.value;return typeof i==typeof r&&i>r}],"filter-<=":[tT,[tP,tL],(t,[e,i])=>{let r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[tT,[tL],(t,[e])=>{let i=t.id(),r=e.value;return typeof i==typeof r&&i<=r}],"filter->=":[tT,[tP,tL],(t,[e,i])=>{let r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[tT,[tL],(t,[e])=>{let i=t.id(),r=e.value;return typeof i==typeof r&&i>=r}],"filter-has":[tT,[tL],(t,[e])=>e.value in t.properties()],"filter-has-id":[tT,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[tT,[tB(tP)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[tT,[tB(tL)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[tT,[tP,tB(tL)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[tT,[tP,tB(tL)],(t,[e,i])=>(function(t,e,i,r){for(;i<=r;){let n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1})(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:tT,overloads:[[[tT,tT],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[iJ(tT),(t,e)=>{for(let i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:tT,overloads:[[[tT,tT],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[iJ(tT),(t,e)=>{for(let i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[tT,[tT],(t,[e])=>!e.evaluate(t)],"is-supported-script":[tT,[tP],(t,[e])=>{let i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[tP,[tP],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[tP,[tP],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[tP,iJ(tL),(t,e)=>e.map(e=>ef(e.evaluate(t))).join("")],"resolved-locale":[tP,[tR],(t,[e])=>e.evaluate(t).resolvedLocale()]});class rs{constructor(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new eb,this._defaultValue=e?"color"===(i=e).type&&i9(i.default)?new ee(0,0,0,0):"color"===i.type?ee.parse(i.default)||null:"padding"===i.type?eo.parse(i.default)||null:"variableAnchorOffsetCollection"===i.type?es.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,r,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{let t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ep(`Expected value to be one of ${Object.keys(this._enumValues).map(t=>JSON.stringify(t)).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function rl(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in iW}function rh(t,e){let i=new ex(iW,iQ,[],e?function(t){let e={color:tA,string:tP,number:tI,enum:tP,boolean:tT,formatted:tN,padding:tz,resolvedImage:tO,variableAnchorOffsetCollection:tD};return"array"===t.type?tB(e[t.value]||tL,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?i6(new rs(r,e)):i3(i.errors)}class ru{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!i1(e.expression)}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)}evaluate(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)}}class rc{constructor(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!i1(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,o)}evaluate(t,e,i,r,n,o){return this._styleExpression.evaluate(t,e,i,r,n,o)}interpolationFactor(t,e,i){return this.interpolationType?eF.interpolationFactor(this.interpolationType,t,e,i):0}}function rf(t,e){let i=rh(t,e);if("error"===i.result)return i;let r=i.value.expression,n=i0(r);if(!n&&!i8(e))return i3([new tS("","data expressions not supported")]);let o=i2(r,["zoom"]);if(!o&&!i4(e))return i3([new tS("","zoom expressions not supported")]);let a=rp(r);return a||o?a instanceof tS?i3([a]):a instanceof eF&&!i5(e)?i3([new tS("",'"interpolate" expressions cannot be used with this property')]):i6(a?new rc(n?"camera":"composite",i.value,a.labels,a instanceof eF?a.interpolation:void 0):new ru(n?"constant":"source",i.value)):i3([new tS("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rd{constructor(t,e){this._parameters=t,this._specification=e,tM(this,re(this._parameters,this._specification))}static deserialize(t){return new rd(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function rp(t){let e=null;if(t instanceof ew)e=rp(t.result);else if(t instanceof eq){for(let i of t.args)if(e=rp(i))break}else(t instanceof eC||t instanceof eF)&&t.input instanceof iX&&"zoom"===t.input.name&&(e=t);return e instanceof tS||t.eachChild(t=>{let i=rp(t);i instanceof tS?e=i:!e&&i?e=new tS("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new tS("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function rm(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(let e of t.slice(1))if(!rm(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}let rg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ry(t){if(null==t)return{filter:()=>!0,needGeometry:!1};rm(t)||(t=rb(t));let e=rh(t,rg);if("error"===e.result)throw Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));return{filter:(t,i,r)=>e.value.evaluate(t,i,{},r),needGeometry:r_(t)}}function rv(t,e){return t<e?-1:t>e?1:0}function r_(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(let e=1;e<t.length;e++)if(r_(t[e]))return!0;return!1}function rb(t){if(!t)return!0;let e=t[0];return t.length<=1?"any"!==e:"=="===e?rx(t[1],t[2],"=="):"!="===e?rS(rx(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?rx(t[1],t[2],e):"any"===e?["any"].concat(t.slice(1).map(rb)):"all"===e?["all"].concat(t.slice(1).map(rb)):"none"===e?["all"].concat(t.slice(1).map(rb).map(rS)):"in"===e?rw(t[1],t.slice(2)):"!in"===e?rS(rw(t[1],t.slice(2))):"has"===e?rM(t[1]):"!has"!==e||rS(rM(t[1]))}function rx(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function rw(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",t,["literal",e.sort(rv)]]:["filter-in-small",t,["literal",e]]}}function rM(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function rS(t){return["!",t]}function rk(t){let e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){let e="[";for(let i of t)e+=`${rk(i)},`;return`${e}]`}let i=Object.keys(t).sort(),r="{";for(let e=0;e<i.length;e++)r+=`${JSON.stringify(i[e])}:${rk(t[i[e]])},`;return`${r}}`}function rE(t){let e="";for(let i of tc)e+=`/${rk(t[i])}`;return e}function rI(t){let e=t.value;return e?[new tw(t.key,e,"constants have been deprecated as of v8")]:[]}function rP(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function rT(t){if(Array.isArray(t))return t.map(rT);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){let e={};for(let i in t)e[i]=rT(t[i]);return e}return rP(t)}function rA(t){let e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=t.validateSpec,l=[],h=i7(i);if("object"!==h)return[new tw(e,i,`object expected, ${h} found`)];for(let t in i){let h;let u=t.split(".")[0],c=r[u]||r["*"];if(n[u])h=n[u];else if(r[u])h=s;else if(n["*"])h=n["*"];else{if(!r["*"]){l.push(new tw(e,i[t],`unknown property "${t}"`));continue}h=s}l=l.concat(h({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:c,style:o,styleSpec:a,object:i,objectKey:t,validateSpec:s},i))}for(let t in r)n[t]||r[t].required&&void 0===r[t].default&&void 0===i[t]&&l.push(new tw(e,i,`missing required property "${t}"`));return l}function rC(t){let e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||t.validateSpec;if("array"!==i7(e))return[new tw(o,e,`array expected, ${i7(e)} found`)];if(i.length&&e.length!==i.length)return[new tw(o,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new tw(o,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===i7(i.value)&&(s=i.value);let l=[];for(let i=0;i<e.length;i++)l=l.concat(a({array:e,arrayIndex:i,value:e[i],valueSpec:s,validateSpec:t.validateSpec,style:r,styleSpec:n,key:`${o}[${i}]`}));return l}function rL(t){let e=t.key,i=t.value,r=t.valueSpec,n=i7(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new tw(e,i,`number expected, ${n} found`)]:"minimum"in r&&i<r.minimum?[new tw(e,i,`${i} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&i>r.maximum?[new tw(e,i,`${i} is greater than the maximum value ${r.maximum}`)]:[]}function rR(t){let e=t.valueSpec,i=rP(t.value.type),r,n,o,a={},s="categorical"!==i&&void 0===t.value.property,l=!s,h="array"===i7(t.value.stops)&&"array"===i7(t.value.stops[0])&&"object"===i7(t.value.stops[0][0]),u=rA({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new tw(t.key,t.value,'identity function may not have a "stops" property')];let e=[],r=t.value;return e=e.concat(rC({key:t.key,value:r,valueSpec:t.valueSpec,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===i7(r)&&0===r.length&&e.push(new tw(t.key,r,"array must have at least one stop")),e},default:function(t){return t.validateSpec({key:t.key,value:t.value,valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&u.push(new tw(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new tw(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!i5(t.valueSpec)&&u.push(new tw(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!i8(t.valueSpec)?u.push(new tw(t.key,t.value,"property functions not supported")):s&&!i4(t.valueSpec)&&u.push(new tw(t.key,t.value,"zoom functions not supported"))),("categorical"===i||h)&&void 0===t.value.property&&u.push(new tw(t.key,t.value,'"property" property is required')),u;function c(t){let i=[],r=t.value,s=t.key;if("array"!==i7(r))return[new tw(s,r,`array expected, ${i7(r)} found`)];if(2!==r.length)return[new tw(s,r,`array length 2 expected, length ${r.length} found`)];if(h){if("object"!==i7(r[0]))return[new tw(s,r,`object expected, ${i7(r[0])} found`)];if(void 0===r[0].zoom)return[new tw(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new tw(s,r,"object stop key must have value")];if(o&&o>rP(r[0].zoom))return[new tw(s,r[0].zoom,"stop zoom values must appear in ascending order")];rP(r[0].zoom)!==o&&(o=rP(r[0].zoom),n=void 0,a={}),i=i.concat(rA({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:rL,value:f}}))}else i=i.concat(f({key:`${s}[0]`,value:r[0],valueSpec:{},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec},r));return rl(rT(r[1]))?i.concat([new tw(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):i.concat(t.validateSpec({key:`${s}[1]`,value:r[1],valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec}))}function f(t,o){let s=i7(t.value),l=rP(t.value),h=null!==t.value?t.value:o;if(r){if(s!==r)return[new tw(t.key,h,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new tw(t.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let r=`number expected, ${s} found`;return i8(e)&&void 0===i&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tw(t.key,h,r)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==n&&l<n?[new tw(t.key,h,"stop domain values must appear in ascending order")]:(n=l,"categorical"===i&&l in a?[new tw(t.key,h,"stop domain values must be unique")]:(a[l]=!0,[])):[new tw(t.key,h,`integer expected, found ${l}`)]}}function rN(t){let e=("property"===t.expressionContext?rf:rh)(rT(t.value),t.valueSpec);if("error"===e.result)return e.value.map(e=>new tw(`${t.key}${e.key}`,t.value,e.message));let i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new tw(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!i1(i))return[new tw(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!i1(i))return[new tw(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!i2(i,["zoom","feature-state"]))return[new tw(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!i0(i))return[new tw(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rz(t){let e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(rP(i))&&n.push(new tw(e,i,`expected one of [${r.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(r.values).indexOf(rP(i))&&n.push(new tw(e,i,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(i)} found`)),n}function rO(t){return rm(rT(t.value))?rN(tM({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rD(t)}function rD(t){let e=t.value,i=t.key;if("array"!==i7(e))return[new tw(i,e,`array expected, ${i7(e)} found`)];let r=t.styleSpec,n,o=[];if(e.length<1)return[new tw(i,e,"filter array must have at least 1 element")];switch(o=o.concat(rz({key:`${i}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),rP(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===rP(e[1])&&o.push(new tw(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new tw(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&"string"!==(n=i7(e[1]))&&o.push(new tw(`${i}[1]`,e[1],`string expected, ${n} found`));for(let a=2;a<e.length;a++)n=i7(e[a]),"$type"===rP(e[1])?o=o.concat(rz({key:`${i}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new tw(`${i}[${a}]`,e[a],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(rD({key:`${i}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=i7(e[1]),2!==e.length?o.push(new tw(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==n&&o.push(new tw(`${i}[1]`,e[1],`string expected, ${n} found`))}return o}function rB(t,e){let i;let r=t.key,n=t.validateSpec,o=t.style,a=t.styleSpec,s=t.value,l=t.objectKey,h=a[`${e}_${t.layerType}`];if(!h)return[];let u=l.match(/^(.*)-transition$/);if("paint"===e&&u&&h[u[1]]&&h[u[1]].transition)return n({key:r,value:s,valueSpec:a.transition,style:o,styleSpec:a});let c=t.valueSpec||h[l];if(!c)return[new tw(r,s,`unknown property "${l}"`)];if("string"===i7(s)&&i8(c)&&!c.tokens&&(i=/^{([^}]+)}$/.exec(s)))return[new tw(r,s,`"${l}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(i[1])} }\`.`)];let f=[];return"symbol"===t.layerType&&("text-field"===l&&o&&!o.glyphs&&f.push(new tw(r,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&i9(rT(s))&&"identity"===rP(s.type)&&f.push(new tw(r,s,'"text-font" does not support identity functions'))),f.concat(n({key:t.key,value:s,valueSpec:c,style:o,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:l}))}function rF(t){return rB(t,"paint")}function rj(t){return rB(t,"layout")}function rq(t){let e=[],i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new tw(r,i,'either "type" or "ref" is required'));let a=rP(i.type),s=rP(i.ref);if(i.id){let o=rP(i.id);for(let a=0;a<t.arrayIndex;a++){let t=n.layers[a];rP(t.id)===o&&e.push(new tw(r,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach(t=>{t in i&&e.push(new tw(r,i[t],`"${t}" is prohibited for ref layers`))}),n.layers.forEach(e=>{rP(e.id)===s&&(t=e)}),t?t.ref?e.push(new tw(r,i.ref,"ref cannot reference another ref layer")):a=rP(t.type):e.push(new tw(r,i.ref,`ref layer "${s}" not found`))}else if("background"!==a){if(i.source){let t=n.sources&&n.sources[i.source],o=t&&rP(t.type);t?"vector"===o&&"raster"===a?e.push(new tw(r,i.source,`layer "${i.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===a?e.push(new tw(r,i.source,`layer "${i.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==a?e.push(new tw(r,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new tw(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===a&&i.paint&&i.paint["line-gradient"]&&("geojson"!==o||!t.lineMetrics)&&e.push(new tw(r,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new tw(r,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new tw(r,i.source,`source "${i.source}" not found`))}else e.push(new tw(r,i,'missing required property "source"'))}return e=e.concat(rA({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":()=>[],type:()=>t.validateSpec({key:`${r}.type`,value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:i,objectKey:"type"}),filter:rO,layout:t=>rA({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>rj(tM({layerType:a},t))}}),paint:t=>rA({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>rF(tM({layerType:a},t))}})}}))}function rV(t){let e=t.value,i=t.key,r=i7(e);return"string"!==r?[new tw(i,e,`string expected, ${r} found`)]:[]}let rU={promoteId:function({key:t,value:e}){if("string"===i7(e))return rV({key:t,value:e});{let i=[];for(let r in e)i.push(...rV({key:`${t}.${r}`,value:e[r]}));return i}}};function rZ(t){let e;let i=t.value,r=t.key,n=t.styleSpec,o=t.style,a=t.validateSpec;if(!i.type)return[new tw(r,i,'"type" is required')];let s=rP(i.type);switch(s){case"vector":case"raster":return rA({key:r,value:i,valueSpec:n[`source_${s.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:rU,validateSpec:a});case"raster-dem":return function(t){var e;let i=null!==(e=t.sourceName)&&void 0!==e?e:"",r=t.value,n=t.styleSpec,o=n.source_raster_dem,a=t.style,s=[],l=i7(r);if(void 0===r)return s;if("object"!==l)return s.push(new tw("source_raster_dem",r,`object expected, ${l} found`)),s;let h="custom"===rP(r.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],c=t.value.encoding?`"${t.value.encoding}"`:"Default";for(let e in r)!h&&u.includes(e)?s.push(new tw(e,r[e],`In "${i}": "${e}" is only valid when "encoding" is set to "custom". ${c} encoding found`)):o[e]?s=s.concat(t.validateSpec({key:e,value:r[e],valueSpec:o[e],validateSpec:t.validateSpec,style:a,styleSpec:n})):s.push(new tw(e,r[e],`unknown property "${e}"`));return s}({sourceName:r,value:i,style:t.style,styleSpec:n,validateSpec:a});case"geojson":if(e=rA({key:r,value:i,valueSpec:n.source_geojson,style:o,styleSpec:n,validateSpec:a,objectElementValidators:rU}),i.cluster)for(let t in i.clusterProperties){let[n,o]=i.clusterProperties[t],s="string"==typeof n?[n,["accumulated"],["get",t]]:n;e.push(...rN({key:`${r}.${t}.map`,value:o,validateSpec:a,expressionContext:"cluster-map"})),e.push(...rN({key:`${r}.${t}.reduce`,value:s,validateSpec:a,expressionContext:"cluster-reduce"}))}return e;case"video":return rA({key:r,value:i,valueSpec:n.source_video,style:o,validateSpec:a,styleSpec:n});case"image":return rA({key:r,value:i,valueSpec:n.source_image,style:o,validateSpec:a,styleSpec:n});case"canvas":return[new tw(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rz({key:`${r}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:o,validateSpec:a,styleSpec:n})}}function rG(t){let e=t.value,i=t.styleSpec,r=i.light,n=t.style,o=[],a=i7(e);if(void 0===e)return o;if("object"!==a)return o.concat([new tw("light",e,`object expected, ${a} found`)]);for(let a in e){let s=a.match(/^(.*)-transition$/);o=o.concat(s&&r[s[1]]&&r[s[1]].transition?t.validateSpec({key:a,value:e[a],valueSpec:i.transition,validateSpec:t.validateSpec,style:n,styleSpec:i}):r[a]?t.validateSpec({key:a,value:e[a],valueSpec:r[a],validateSpec:t.validateSpec,style:n,styleSpec:i}):[new tw(a,e[a],`unknown property "${a}"`)])}return o}function rH(t){let e=t.value,i=t.styleSpec,r=i.sky,n=t.style,o=i7(e);if(void 0===e)return[];if("object"!==o)return[new tw("sky",e,`object expected, ${o} found`)];let a=[];for(let o in e)a=a.concat(r[o]?t.validateSpec({key:o,value:e[o],valueSpec:r[o],style:n,styleSpec:i}):[new tw(o,e[o],`unknown property "${o}"`)]);return a}function rW(t){let e=t.value,i=t.styleSpec,r=i.terrain,n=t.style,o=[],a=i7(e);if(void 0===e)return o;if("object"!==a)return o.concat([new tw("terrain",e,`object expected, ${a} found`)]);for(let a in e)o=o.concat(r[a]?t.validateSpec({key:a,value:e[a],valueSpec:r[a],validateSpec:t.validateSpec,style:n,styleSpec:i}):[new tw(a,e[a],`unknown property "${a}"`)]);return o}function rX(t){let e=[],i=t.value,r=t.key;if(Array.isArray(i)){let n=[],o=[];for(let a in i)i[a].id&&n.includes(i[a].id)&&e.push(new tw(r,i,`all the sprites' ids must be unique, but ${i[a].id} is duplicated`)),n.push(i[a].id),i[a].url&&o.includes(i[a].url)&&e.push(new tw(r,i,`all the sprites' URLs must be unique, but ${i[a].url} is duplicated`)),o.push(i[a].url),e=e.concat(rA({key:`${r}[${a}]`,value:i[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:t.validateSpec}));return e}return rV({key:r,value:i})}let r$={"*":()=>[],array:rC,boolean:function(t){let e=t.value,i=t.key,r=i7(e);return"boolean"!==r?[new tw(i,e,`boolean expected, ${r} found`)]:[]},number:rL,color:function(t){let e=t.key,i=t.value,r=i7(i);return"string"!==r?[new tw(e,i,`color expected, ${r} found`)]:ee.parse(String(i))?[]:[new tw(e,i,`color expected, "${i}" found`)]},constants:rI,enum:rz,filter:rO,function:rR,layer:rq,object:rA,source:rZ,light:rG,sky:rH,terrain:rW,projection:function(t){let e=t.value,i=t.styleSpec,r=i.projection,n=t.style,o=i7(e);if(void 0===e)return[];if("object"!==o)return[new tw("projection",e,`object expected, ${o} found`)];let a=[];for(let o in e)a=a.concat(r[o]?t.validateSpec({key:o,value:e[o],valueSpec:r[o],style:n,styleSpec:i}):[new tw(o,e[o],`unknown property "${o}"`)]);return a},string:rV,formatted:function(t){return 0===rV(t).length?[]:rN(t)},resolvedImage:function(t){return 0===rV(t).length?[]:rN(t)},padding:function(t){let e=t.key,i=t.value;if("array"===i7(i)){if(i.length<1||i.length>4)return[new tw(e,i,`padding requires 1 to 4 values; ${i.length} values found`)];let r={type:"number"},n=[];for(let o=0;o<i.length;o++)n=n.concat(t.validateSpec({key:`${e}[${o}]`,value:i[o],validateSpec:t.validateSpec,valueSpec:r}));return n}return rL({key:e,value:i,valueSpec:{}})},variableAnchorOffsetCollection:function(t){let e=t.key,i=t.value,r=i7(i),n=t.styleSpec;if("array"!==r||i.length<1||i.length%2!=0)return[new tw(e,i,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let r=0;r<i.length;r+=2)o=(o=o.concat(rz({key:`${e}[${r}]`,value:i[r],valueSpec:n.layout_symbol["text-anchor"]}))).concat(rC({key:`${e}[${r+1}]`,value:i[r+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:n}));return o},sprite:rX};function rY(t){let e=t.value,i=t.valueSpec,r=t.styleSpec;return t.validateSpec=rY,i.expression&&i9(rP(e))?rR(t):i.expression&&rl(rT(e))?rN(t):i.type&&r$[i.type]?r$[i.type](t):rA(tM({},t,{valueSpec:i.type?r[i.type]:i}))}function rK(t){let e=t.value,i=t.key,r=rV(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new tw(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new tw(i,e,'"glyphs" url must include a "{range}" token'))),r}function rJ(t,e=tu){let i=[];return i=i.concat(rY({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:rY,objectElementValidators:{glyphs:rK,"*":()=>[]}})),t.constants&&(i=i.concat(rI({key:"constants",value:t.constants,style:t,styleSpec:e,validateSpec:rY}))),r0(i)}function rQ(t){return function(e){return t({...e,validateSpec:rY})}}function r0(t){return[].concat(t).sort((t,e)=>t.line-e.line)}function r1(t){return function(...e){return r0(t.apply(this,e))}}rJ.source=r1(rQ(rZ)),rJ.sprite=r1(rQ(rX)),rJ.glyphs=r1(rQ(rK)),rJ.light=r1(rQ(rG)),rJ.sky=r1(rQ(rH)),rJ.terrain=r1(rQ(rW)),rJ.layer=r1(rQ(rq)),rJ.filter=r1(rQ(rO)),rJ.paintProperty=r1(rQ(rF)),rJ.layoutProperty=r1(rQ(rj));let r2=rJ,r6=r2.light,r3=r2.sky,r8=r2.paintProperty,r4=r2.layoutProperty;function r5(t,e){let i=!1;if(e&&e.length)for(let r of e)t.fire(new tl(Error(r.message))),i=!0;return i}class r7{constructor(t,e,i){let r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;let n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(let t=0;t<this.d*this.d;t++){let e=n[3+t],i=n[3+t+1];r.push(e===i?null:n.subarray(e,i))}let o=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*i;for(let t=0;t<this.d*this.d;t++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;let n=i/e*t;this.min=-n,this.max=t+n}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}_insertReadonly(){throw Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,i,r,n,o){this.cells[n].push(o)}query(t,e,i,r,n){let o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);{let o=[];return this._forEachCell(t,e,i,r,this._queryCell,o,{},n),o}}_queryCell(t,e,i,r,n,o,a,s){let l=this.cells[n];if(null!==l){let n=this.keys,h=this.bboxes;for(let u=0;u<l.length;u++){let c=l[u];if(void 0===a[c]){let l=4*c;(s?s(h[l+0],h[l+1],h[l+2],h[l+3]):t<=h[l+2]&&e<=h[l+3]&&i>=h[l+0]&&r>=h[l+1])?(a[c]=!0,o.push(n[c])):a[c]=!1}}}}_forEachCell(t,e,i,r,n,o,a,s){let l=this._convertToCellCoord(t),h=this._convertToCellCoord(e),u=this._convertToCellCoord(i),c=this._convertToCellCoord(r);for(let f=l;f<=u;f++)for(let l=h;l<=c;l++){let h=this.d*l+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(l),this._convertFromCellCoord(f+1),this._convertFromCellCoord(l+1)))&&n.call(this,t,e,i,r,h,o,a,s))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let t=this.cells,e=3+this.cells.length+1+1,i=0;for(let t=0;t<this.cells.length;t++)i+=this.cells[t].length;let r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let n=e;for(let e=0;e<t.length;e++){let i=t[e];r[3+e]=n,r.set(i,n),n+=i.length}return r[3+t.length]=n,r.set(this.keys,n),n+=this.keys.length,r[3+t.length+1]=n,r.set(this.bboxes,n),n+=this.bboxes.length,r.buffer}static serialize(t,e){let i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}}static deserialize(t){return new r7(t.buffer)}}let r9={};function nt(t,e,i={}){if(r9[t])throw Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),r9[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(let t in nt("Object",Object),nt("TransferableGridIndex",r7),nt("Color",ee),nt("Error",Error),nt("AJAXError",te),nt("ResolvedImage",el),nt("StylePropertyFunction",rd),nt("StyleExpression",rs,{omit:["_evaluator"]}),nt("ZoomDependentExpression",rc),nt("ZoomConstantExpression",ru),nt("CompoundExpression",iX,{omit:["_evaluate"]}),iW)iW[t]._classRegistryKey||nt(`Expression_${t}`,iW[t]);function ne(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function ni(t){return t.$name||t.constructor._classRegistryKey}function nr(t){return!function(t){if(null===t||"object"!=typeof t)return!1;let e=ni(t);return!(!e||"Object"===e)}(t)&&(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||t instanceof Error||ne(t)||W(t)||ArrayBuffer.isView(t)||t instanceof ImageData)}function nn(t,e){if(nr(t))return(ne(t)||W(t))&&e&&e.push(t),ArrayBuffer.isView(t)&&e&&e.push(t.buffer),t instanceof ImageData&&e&&e.push(t.data.buffer),t;if(Array.isArray(t)){let i=[];for(let r of t)i.push(nn(r,e));return i}if("object"!=typeof t)throw Error("can't serialize object of type "+typeof t);let i=ni(t);if(!i)throw Error(`can't serialize object of unregistered class ${t.constructor.name}`);if(!r9[i])throw Error(`${i} is not registered.`);let{klass:r}=r9[i],n=r.serialize?r.serialize(t,e):{};if(r.serialize){if(e&&n===e[e.length-1])throw Error("statically serialized object won't survive transfer of $name property")}else{for(let r in t){if(!t.hasOwnProperty(r)||r9[i].omit.indexOf(r)>=0)continue;let o=t[r];n[r]=r9[i].shallow.indexOf(r)>=0?o:nn(o,e)}t instanceof Error&&(n.message=t.message)}if(n.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(n.$name=i),n}function no(t){if(nr(t))return t;if(Array.isArray(t))return t.map(no);if("object"!=typeof t)throw Error("can't deserialize object of type "+typeof t);let e=ni(t)||"Object";if(!r9[e])throw Error(`can't deserialize unregistered class ${e}`);let{klass:i}=r9[e];if(!i)throw Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(t);let r=Object.create(i.prototype);for(let i of Object.keys(t)){if("$name"===i)continue;let n=t[i];r[i]=r9[e].shallow.indexOf(i)>=0?n:no(n)}return r}class na{constructor(){this.first=!0}update(t,e){let i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}let ns={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function nl(t){for(let e of t)if(nc(e.charCodeAt(0)))return!0;return!1}function nh(t){for(let e of t)if(!nu(e.charCodeAt(0)))return!1;return!0}function nu(t){return!(ns.Arabic(t)||ns["Arabic Supplement"](t)||ns["Arabic Extended-A"](t)||ns["Arabic Presentation Forms-A"](t)||ns["Arabic Presentation Forms-B"](t))}function nc(t){return!(746!==t&&747!==t&&(t<4352||!(ns["Bopomofo Extended"](t)||ns.Bopomofo(t)||ns["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ns["CJK Compatibility Ideographs"](t)||ns["CJK Compatibility"](t)||ns["CJK Radicals Supplement"](t)||ns["CJK Strokes"](t)||!(!ns["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ns["CJK Unified Ideographs Extension A"](t)||ns["CJK Unified Ideographs"](t)||ns["Enclosed CJK Letters and Months"](t)||ns["Hangul Compatibility Jamo"](t)||ns["Hangul Jamo Extended-A"](t)||ns["Hangul Jamo Extended-B"](t)||ns["Hangul Jamo"](t)||ns["Hangul Syllables"](t)||ns.Hiragana(t)||ns["Ideographic Description Characters"](t)||ns.Kanbun(t)||ns["Kangxi Radicals"](t)||ns["Katakana Phonetic Extensions"](t)||ns.Katakana(t)&&12540!==t||!(!ns["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ns["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ns["Unified Canadian Aboriginal Syllabics"](t)||ns["Unified Canadian Aboriginal Syllabics Extended"](t)||ns["Vertical Forms"](t)||ns["Yijing Hexagram Symbols"](t)||ns["Yi Syllables"](t)||ns["Yi Radicals"](t))))}function nf(t){return!(nc(t)||function(t){return!!(ns["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||ns["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||ns["Letterlike Symbols"](t)||ns["Number Forms"](t)||ns["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||ns["Control Pictures"](t)&&9251!==t||ns["Optical Character Recognition"](t)||ns["Enclosed Alphanumerics"](t)||ns["Geometric Shapes"](t)||ns["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ns["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ns["CJK Symbols and Punctuation"](t)||ns.Katakana(t)||ns["Private Use Area"](t)||ns["CJK Compatibility Forms"](t)||ns["Small Form Variants"](t)||ns["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function nd(t){return t>=1424&&t<=2303||ns["Arabic Presentation Forms-A"](t)||ns["Arabic Presentation Forms-B"](t)}function np(t,e){return!(!e&&nd(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||ns.Khmer(t))}function nm(t){for(let e of t)if(nd(e.charCodeAt(0)))return!0;return!1}let ng=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(t){this.pluginStatus=t.pluginStatus,this.pluginURL=t.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(t){this.applyArabicShaping=t.applyArabicShaping,this.processBidirectionalText=t.processBidirectionalText,this.processStyledBidirectionalText=t.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ny{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new na,this.transition={})}isSupportedScript(t){return function(t,e){for(let i of t)if(!np(i.charCodeAt(0),e))return!1;return!0}(t,"loaded"===ng.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class nv{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(i9(t))return new rd(t,e);if(rl(t)){let i=rf(t,e);if("error"===i.result)throw Error(i.value.map(t=>`${t.key}: ${t.message}`).join(", "));return i.value}{let i=t;return"color"===e.type&&"string"==typeof t?i=ee.parse(t):"padding"===e.type&&("number"==typeof t||Array.isArray(t))?i=eo.parse(t):"variableAnchorOffsetCollection"===e.type&&Array.isArray(t)&&(i=es.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class n_{constructor(t){this.property=t,this.value=new nv(t,void 0)}transitioned(t,e){return new nx(this.property,this.value,e,D({},t.transition,this.transition),t.now)}untransitioned(){return new nx(this.property,this.value,null,{},0)}}class nb{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return q(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new n_(this._values[t].property)),this._values[t].value=new nv(this._values[t].property,null===e?void 0:q(e))}getTransition(t){return q(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new n_(this._values[t].property)),this._values[t].transition=q(e)||void 0}serialize(){let t={};for(let e of Object.keys(this._values)){let i=this.getValue(e);void 0!==i&&(t[e]=i);let r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){let i=new nw(this._properties);for(let r of Object.keys(this._values))i._values[r]=this._values[r].transitioned(t,e._values[r]);return i}untransitioned(){let t=new nw(this._properties);for(let e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class nx{constructor(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){let r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(r>this.end||this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(t,e,i);{let a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;let e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(a))}}return n}}class nw{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){let r=new nk(this._properties);for(let n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}hasTransition(){for(let t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class nM{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return void 0!==this._values[t].value}getValue(t){return q(this._values[t].value)}setValue(t,e){this._values[t]=new nv(this._values[t].property,null===e?void 0:q(e))}serialize(){let t={};for(let e of Object.keys(this._values)){let i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){let r=new nk(this._properties);for(let n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}}class nS{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)}}class nk{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class nE{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,i){let r=eB[this.specification.type];return r?r(t,e,i):t}}class nI{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,r){return new nS(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new nS(this,{kind:"constant",value:void 0},t.parameters);let r=eB[this.specification.type];return r?new nS(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,r,n,o){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,o)}}class nP extends nI{possiblyEvaluate(t,e,i,r){if(void 0===t.value)return new nS(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){let n=t.expression.evaluate(e,null,{},i,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n;return new nS(this,{kind:"constant",value:this._calculate(o,o,o,e)},e)}return"camera"===t.expression.kind?new nS(this,{kind:"constant",value:this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e)},e):new nS(this,t.expression,e)}evaluate(t,e,i,r,n,o){if("source"===t.kind){let a=t.evaluate(e,i,r,n,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class nT{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){let n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new ny(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ny(Math.floor(e.zoom),e)),t.expression.evaluate(new ny(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class nA{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)}interpolate(){return!1}}class nC{constructor(t){for(let e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){let i=t[e];i.specification.overridable&&this.overridableProperties.push(e);let r=this.defaultPropertyValues[e]=new nv(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new n_(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}nt("DataDrivenProperty",nI),nt("DataConstantProperty",nE),nt("CrossFadedDataDrivenProperty",nP),nt("CrossFadedProperty",nT),nt("ColorRampProperty",nA);let nL="-transition";class nR extends th{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new nM(e.layout)),e.paint)){for(let i in this._transitionablePaint=new nb(e.paint),t.paint)this.setPaintProperty(i,t.paint[i],{validate:!1});for(let e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nk(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(r4,`layers.${this.id}.layout.${t}`,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(nL)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(r8,`layers.${this.id}.paint.${t}`,t,e,i))return!1;if(t.endsWith(nL))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{let i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],n=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);let a=this._transitionablePaint._values[t].value;return a.isDataDriven()||n||r||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){let t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),j(t,(t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length))}_validate(t,e,i,r,n={}){return(!n||!1!==n.validate)&&r5(this,t.call(r2,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:tu,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let t in this.paint._values){let e=this.paint.get(t);if(e instanceof nS&&i8(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}let nN={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class nz{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nO{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){let e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function nD(t,e=1){let i=0,r=0;return{members:t.map(t=>{let n=nN[t.type].BYTES_PER_ELEMENT,o=i=nB(i,Math.max(e,n)),a=t.components||1;return r=Math.max(r,n),i+=n*a,{name:t.name,type:t.type,components:a,offset:o}}),size:nB(i,Math.max(r,e)),alignment:e}}function nB(t,e){return Math.ceil(t/e)*e}class nF extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){let i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){let r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t}}nF.prototype.bytesPerElement=4,nt("StructArrayLayout2i4",nF);class nj extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){let r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){let n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t}}nj.prototype.bytesPerElement=6,nt("StructArrayLayout3i6",nj);class nq extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r){let n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){let o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,t}}nq.prototype.bytesPerElement=8,nt("StructArrayLayout4i8",nq);class nV extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){let a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){let s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t}}nV.prototype.bytesPerElement=12,nt("StructArrayLayout2i4i12",nV);class nU extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){let a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){let s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=n,this.uint8[l+6]=o,this.uint8[l+7]=a,t}}nU.prototype.bytesPerElement=8,nt("StructArrayLayout2i4ub8",nU);class nZ extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){let i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){let r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t}}nZ.prototype.bytesPerElement=8,nt("StructArrayLayout2f8",nZ);class nG extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,h){let u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,r,n,o,a,s,l,h)}emplace(t,e,i,r,n,o,a,s,l,h,u){let c=10*t;return this.uint16[c+0]=e,this.uint16[c+1]=i,this.uint16[c+2]=r,this.uint16[c+3]=n,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,this.uint16[c+8]=h,this.uint16[c+9]=u,t}}nG.prototype.bytesPerElement=20,nt("StructArrayLayout10ui20",nG);class nH extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,h,u,c){let f=this.length;return this.resize(f+1),this.emplace(f,t,e,i,r,n,o,a,s,l,h,u,c)}emplace(t,e,i,r,n,o,a,s,l,h,u,c,f){let d=12*t;return this.int16[d+0]=e,this.int16[d+1]=i,this.int16[d+2]=r,this.int16[d+3]=n,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=h,this.int16[d+9]=u,this.int16[d+10]=c,this.int16[d+11]=f,t}}nH.prototype.bytesPerElement=24,nt("StructArrayLayout4i4ui4i24",nH);class nW extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){let r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){let n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t}}nW.prototype.bytesPerElement=12,nt("StructArrayLayout3f12",nW);class nX extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){let e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}nX.prototype.bytesPerElement=4,nt("StructArrayLayout1ul4",nX);class n$ extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l){let h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,o,a,s,l)}emplace(t,e,i,r,n,o,a,s,l,h){let u=10*t,c=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=r,this.int16[u+3]=n,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[c+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=h,t}}n$.prototype.bytesPerElement=20,nt("StructArrayLayout6i1ul2ui20",n$);class nY extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){let a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){let s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t}}nY.prototype.bytesPerElement=12,nt("StructArrayLayout2i2i2i12",nY);class nK extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n){let o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n)}emplace(t,e,i,r,n,o){let a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,t}}nK.prototype.bytesPerElement=16,nt("StructArrayLayout2f1f2i16",nK);class nJ extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o){let a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,o)}emplace(t,e,i,r,n,o,a){let s=16*t,l=4*t,h=8*t;return this.uint8[s+0]=e,this.uint8[s+1]=i,this.float32[l+1]=r,this.float32[l+2]=n,this.int16[h+6]=o,this.int16[h+7]=a,t}}nJ.prototype.bytesPerElement=16,nt("StructArrayLayout2ub2f2i16",nJ);class nQ extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){let r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){let n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t}}nQ.prototype.bytesPerElement=6,nt("StructArrayLayout3ui6",nQ);class n0 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g){let y=this.length;return this.resize(y+1),this.emplace(y,t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g)}emplace(t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y){let v=24*t,_=12*t,b=48*t;return this.int16[v+0]=e,this.int16[v+1]=i,this.uint16[v+2]=r,this.uint16[v+3]=n,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=h,this.uint16[v+12]=u,this.float32[_+7]=c,this.float32[_+8]=f,this.uint8[b+36]=d,this.uint8[b+37]=p,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,t}}n0.prototype.bytesPerElement=48,nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",n0);class n1 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b,x,w,M,S,k,E,I){let P=this.length;return this.resize(P+1),this.emplace(P,t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b,x,w,M,S,k,E,I)}emplace(t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b,x,w,M,S,k,E,I,P){let T=32*t,A=16*t;return this.int16[T+0]=e,this.int16[T+1]=i,this.int16[T+2]=r,this.int16[T+3]=n,this.int16[T+4]=o,this.int16[T+5]=a,this.int16[T+6]=s,this.int16[T+7]=l,this.uint16[T+8]=h,this.uint16[T+9]=u,this.uint16[T+10]=c,this.uint16[T+11]=f,this.uint16[T+12]=d,this.uint16[T+13]=p,this.uint16[T+14]=m,this.uint16[T+15]=g,this.uint16[T+16]=y,this.uint16[T+17]=v,this.uint16[T+18]=_,this.uint16[T+19]=b,this.uint16[T+20]=x,this.uint16[T+21]=w,this.uint16[T+22]=M,this.uint32[A+12]=S,this.float32[A+13]=k,this.float32[A+14]=E,this.uint16[T+30]=I,this.uint16[T+31]=P,t}}n1.prototype.bytesPerElement=64,nt("StructArrayLayout8i15ui1ul2f2ui64",n1);class n2 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){let e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}n2.prototype.bytesPerElement=4,nt("StructArrayLayout1f4",n2);class n6 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){let r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){let n=3*t;return this.uint16[6*t+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t}}n6.prototype.bytesPerElement=12,nt("StructArrayLayout1ui2f12",n6);class n3 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){let r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){let n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t}}n3.prototype.bytesPerElement=8,nt("StructArrayLayout1ul2ui8",n3);class n8 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){let i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){let r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t}}n8.prototype.bytesPerElement=4,nt("StructArrayLayout2ui4",n8);class n4 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){let e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}n4.prototype.bytesPerElement=2,nt("StructArrayLayout1ui2",n4);class n5 extends nO{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r){let n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){let o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,t}}n5.prototype.bytesPerElement=16,nt("StructArrayLayout4f16",n5);class n7 extends nz{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}n7.prototype.size=20;class n9 extends n${get(t){return new n7(this,t)}}nt("CollisionBoxArray",n9);class ot extends nz{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ot.prototype.size=48;class oe extends n0{get(t){return new ot(this,t)}}nt("PlacedSymbolArray",oe);class oi extends nz{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}oi.prototype.size=64;class or extends n1{get(t){return new oi(this,t)}}nt("SymbolInstanceArray",or);class on extends n2{getoffsetX(t){return this.float32[1*t+0]}}nt("GlyphOffsetArray",on);class oo extends nj{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}nt("SymbolLineVertexArray",oo);class oa extends nz{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}oa.prototype.size=12;class os extends n6{get(t){return new oa(this,t)}}nt("TextAnchorOffsetArray",os);class ol extends nz{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ol.prototype.size=8;class oh extends n3{get(t){return new ol(this,t)}}nt("FeatureIndexArray",oh);class ou extends nF{}class oc extends nF{}class of extends nF{}class od extends nV{}class op extends nU{}class om extends nZ{}class og extends nG{}class oy extends nH{}class ov extends nW{}class o_ extends nX{}class ob extends nY{}class ox extends nJ{}class ow extends nQ{}class oM extends n8{}let{members:oS}=nD([{name:"a_pos",components:2,type:"Int16"}],4);class ok{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,r){let n=this.segments[this.segments.length-1];return t>ok.MAX_VERTEX_ARRAY_LENGTH&&U(`Max vertices per segment is ${ok.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!n||n.vertexLength+t>ok.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n}get(){return this.segments}destroy(){for(let t of this.segments)for(let e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,r){return new ok([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}function oE(t,e){return 256*(t=z(Math.floor(t),0,255))+z(Math.floor(e),0,255)}ok.MAX_VERTEX_ARRAY_LENGTH=65535,nt("SegmentVector",ok);let oI=nD([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var oP={exports:{}},oT={exports:{}};oT.exports=function(t,e){var i,r,n,o,a,s,l,h;for(r=t.length-(i=3&t.length),n=e,a=3432918353,s=461845907,h=0;h<r;)l=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(h+2))<<16;case 2:l^=(255&t.charCodeAt(h+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(h)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0};var oA=oT.exports,oC={exports:{}};oC.exports=function(t,e){for(var i,r=t.length,n=e^r,o=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0};var oL=oA,oR=oC.exports;oP.exports=oL,oP.exports.murmur3=oL,oP.exports.murmur2=oR;var oN=b(oP.exports);class oz{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,r){this.ids.push(oO(t)),this.positions.push(e,i,r)}getPositions(t){if(!this.indexed)throw Error("Trying to get index, but feature positions are not indexed");let e=oO(t),i=0,r=this.ids.length-1;for(;i<r;){let t=i+r>>1;this.ids[t]>=e?r=t:i=t+1}let n=[];for(;this.ids[i]===e;)n.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return n}static serialize(t,e){let i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return oD(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}}static deserialize(t){let e=new oz;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function oO(t){let e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:oN(String(t))}function oD(t,e,i,r){for(;i<r;){let n=t[i+r>>1],o=i-1,a=r+1;for(;;){do o++;while(t[o]<n)do a--;while(t[a]>n)if(o>=a)break;oB(t,o,a),oB(e,3*o,3*a),oB(e,3*o+1,3*a+1),oB(e,3*o+2,3*a+2)}a-i<r-a?(oD(t,e,i,a),i=a+1):(oD(t,e,a+1,r),r=a)}}function oB(t,e,i){let r=t[e];t[e]=t[i],t[i]=r}nt("FeaturePositionMap",oz);class oF{constructor(t,e){this.gl=t.gl,this.location=e}}class oj extends oF{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class oq extends oF{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class oV extends oF{constructor(t,e){super(t,e),this.current=ee.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}let oU=new Float32Array(16);function oZ(t){return[oE(255*t.r,255*t.g),oE(255*t.b,255*t.a)]}class oG{constructor(t,e,i){this.value=t,this.uniformNames=e.map(t=>`u_${t}`),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new oV(t,e):new oj(t,e)}}class oH{constructor(t,e){this.uniformNames=e.map(t=>`u_${t}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,r){let n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new oq(t,e):new oj(t,e)}}class oW{constructor(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map(t=>({name:`a_${t}`,type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new r}populatePaintArray(t,e,i,r,n){let o=this.paintVertexArray.length,a=this.expression.evaluate(new ny(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,i,r){let n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)}_setPaintValue(t,e,i){if("color"===this.type){let r=oZ(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oX{constructor(t,e,i,r,n,o){this.expression=t,this.uniformNames=e.map(t=>`u_${t}_t`),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map(t=>({name:`a_${t}`,type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(t,e,i,r,n){let o=this.expression.evaluate(new ny(this.zoom),e,{},r,[],n),a=this.expression.evaluate(new ny(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,i,r){let n=this.expression.evaluate({zoom:this.zoom},i,r),o=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,o)}_setPaintValue(t,e,i,r){if("color"===this.type){let n=oZ(i),o=oZ(r);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1],o[0],o[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){let i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=z(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,i){return new oj(t,e)}}class o${constructor(t,e,i,r,n,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}populatePaintArray(t,e,i){let r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)}_setPaintValues(t,e,i,r){if(!r||!i)return;let{min:n,mid:o,max:a}=i,s=r[n],l=r[o],h=r[a];if(s&&l&&h)for(let i=t;i<e;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],l.pixelRatio,h.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,oI.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,oI.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class oY{constructor(t,e,i){this.binders={},this._buffers=[];let r=[];for(let n in t.paint._values){if(!i(n))continue;let o=t.paint.get(n);if(!(o instanceof nS&&i8(o.property.specification)))continue;let a=oJ(n,t.type),s=o.value,l=o.property.specification.type,h=o.property.useIntegerZoom,u=o.property.specification["property-type"],c="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[n]=c?new oH(s.value,a):new oG(s.value,a,l),r.push(`/u_${n}`);else if("source"===s.kind||c){let i=oQ(n,l,"source");this.binders[n]=c?new o$(s,l,h,e,i,t.id):new oW(s,a,l,i),r.push(`/a_${n}`)}else{let t=oQ(n,l,"composite");this.binders[n]=new oX(s,a,l,h,e,t),r.push(`/z_${n}`)}}this.cacheKey=r.sort().join("")}getMaxValue(t){let e=this.binders[t];return e instanceof oW||e instanceof oX?e.maxValue:0}populatePaintArrays(t,e,i,r,n){for(let o in this.binders){let a=this.binders[o];(a instanceof oW||a instanceof oX||a instanceof o$)&&a.populatePaintArray(t,e,i,r,n)}}setConstantPatternPositions(t,e){for(let i in this.binders){let r=this.binders[i];r instanceof oH&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,r,n){let o=!1;for(let a in t)for(let s of e.getPositions(a)){let e=i.feature(s.index);for(let i in this.binders){let l=this.binders[i];if((l instanceof oW||l instanceof oX||l instanceof o$)&&!0===l.expression.isStateDependent){let h=r.paint.get(i);l.expression=h.value,l.updatePaintArray(s.start,s.end,e,t[a],n),o=!0}}}return o}defines(){let t=[];for(let e in this.binders){let i=this.binders[e];(i instanceof oG||i instanceof oH)&&t.push(...i.uniformNames.map(t=>`#define HAS_UNIFORM_${t}`))}return t}getBinderAttributes(){let t=[];for(let e in this.binders){let i=this.binders[e];if(i instanceof oW||i instanceof oX)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof o$)for(let e=0;e<oI.members.length;e++)t.push(oI.members[e].name)}return t}getBinderUniforms(){let t=[];for(let e in this.binders){let i=this.binders[e];if(i instanceof oG||i instanceof oH||i instanceof oX)for(let e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){let i=[];for(let r in this.binders){let n=this.binders[r];if(n instanceof oG||n instanceof oH||n instanceof oX){for(let o of n.uniformNames)if(e[o]){let a=n.getBinding(t,e[o],o);i.push({name:o,property:r,binding:a})}}}return i}setUniforms(t,e,i,r){for(let{name:t,property:n,binding:o}of e)this.binders[n].setUniform(o,r,i.get(n),t)}updatePaintBuffers(t){for(let e in this._buffers=[],this.binders){let i=this.binders[e];if(t&&i instanceof o$){let e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof oW||i instanceof oX)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(let e in this.binders){let i=this.binders[e];(i instanceof oW||i instanceof oX||i instanceof o$)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(let t in this.binders){let e=this.binders[t];(e instanceof oW||e instanceof oX||e instanceof o$)&&e.destroy()}}}class oK{constructor(t,e,i=()=>!0){for(let r of(this.programConfigurations={},t))this.programConfigurations[r.id]=new oY(r,e,i);this.needsUpload=!1,this._featureMap=new oz,this._bufferOffset=0}populatePaintArrays(t,e,i,r,n,o){for(let i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,r,n,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,r){for(let n of i)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(t,this._featureMap,e,n,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(let e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(let t in this.programConfigurations)this.programConfigurations[t].destroy()}}function oJ(t,e){return({"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]})[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function oQ(t,e,i){let r={color:{source:nZ,composite:n5},number:{source:n2,composite:nZ}},n=function(t){return({"line-pattern":{source:og,composite:og},"fill-pattern":{source:og,composite:og},"fill-extrusion-pattern":{source:og,composite:og}})[t]}(t);return n&&n[i]||r[e][i]}nt("ConstantBinder",oG),nt("CrossFadedConstantBinder",oH),nt("SourceExpressionBinder",oW),nt("CrossFadedCompositeBinder",o$),nt("CompositeExpressionBinder",oX),nt("ProgramConfiguration",oY,{omit:["_buffers"]}),nt("ProgramConfigurationSet",oK);let o0=8192,o1=16383,o2=-16383-1;function o6(t){let e=o0/t.extent,i=t.loadGeometry();for(let t=0;t<i.length;t++){let r=i[t];for(let t=0;t<r.length;t++){let i=r[t],n=Math.round(i.x*e),o=Math.round(i.y*e);i.x=z(n,o2,o1),i.y=z(o,o2,o1),(n<i.x||n>i.x+1||o<i.y||o>i.y+1)&&U("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function o3(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?o6(t):[]}}function o8(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}class o4{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new oc,this.indexArray=new ow,this.segments=new ok,this.programConfigurations=new oK(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){let r=this.layers[0],n=[],o=null,a=!1;for(let{feature:e,id:s,index:l,sourceLayerIndex:h}of("circle"===r.type&&(a=!(o=r.layout.get("circle-sort-key")).isConstant()),t)){let t=this.layers[0]._featureFilter.needGeometry,r=o3(e,t);if(!this.layers[0]._featureFilter.filter(new ny(this.zoom),r,i))continue;let u=a?o.evaluate(r,{},i):void 0,c={id:s,properties:e.properties,type:e.type,sourceLayerIndex:h,index:l,geometry:t?r.geometry:o6(e),patterns:{},sortKey:u};n.push(c)}for(let r of(a&&n.sort((t,e)=>t.sortKey-e.sortKey),n)){let{geometry:n,index:o,sourceLayerIndex:a}=r,s=t[o].feature;this.addFeature(r,n,o,i),e.featureIndex.insert(s,n,o,a,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,oS),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,r){for(let i of e)for(let e of i){let i=e.x,r=e.y;if(i<0||i>=o0||r<0||r>=o0)continue;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=n.vertexLength;o8(this.layoutVertexArray,i,r,-1,-1),o8(this.layoutVertexArray,i,r,1,-1),o8(this.layoutVertexArray,i,r,1,1),o8(this.layoutVertexArray,i,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)}}function o5(t,e){for(let i=0;i<t.length;i++)if(aa(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(aa(t,e[i]))return!0;return!!ae(t,e)}function o7(t,e,i){return!!aa(t,e)||!!ar(e,t,i)}function o9(t,e){if(1===t.length)return ao(e,t[0]);for(let i=0;i<e.length;i++){let r=e[i];for(let e=0;e<r.length;e++)if(aa(t,r[e]))return!0}for(let i=0;i<t.length;i++)if(ao(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(ae(t,e[i]))return!0;return!1}function at(t,e,i){if(t.length>1){if(ae(t,e))return!0;for(let r=0;r<e.length;r++)if(ar(e[r],t,i))return!0}for(let r=0;r<t.length;r++)if(ar(t[r],e,i))return!0;return!1}function ae(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){let r=t[i],n=t[i+1];for(let t=0;t<e.length-1;t++)if(ai(r,n,e[t],e[t+1]))return!0}return!1}function ai(t,e,i,r){return Z(t,i,r)!==Z(e,i,r)&&Z(t,e,i)!==Z(t,e,r)}function ar(t,e,i){let r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(an(t,e[i-1],e[i])<r)return!0;return!1}function an(t,e,i){let r=e.distSqr(i);if(0===r)return t.distSqr(e);let n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function ao(t,e){let i,r,n,o=!1;for(let a=0;a<t.length;a++){i=t[a];for(let t=0,a=i.length-1;t<i.length;a=t++)r=i[t],n=i[a],r.y>e.y!=n.y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o)}return o}function aa(t,e){let i=!1;for(let r=0,n=t.length-1;r<t.length;n=r++){let o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function as(t,e,i){let r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;let o=Z(t,e,i[0]);return o!==Z(t,e,i[1])||o!==Z(t,e,i[2])||o!==Z(t,e,i[3])}function al(t,e,i){let r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function ah(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function au(t,e,i,r,n){if(!e[0]&&!e[1])return t;let o=E.convert(e)._mult(n);"viewport"===i&&o._rotate(-r);let a=[];for(let e=0;e<t.length;e++)a.push(t[e].sub(o));return a}nt("CircleBucket",o4,{omit:["layers"]});var ac={get paint(){return a=a||new nC({"circle-radius":new nI(tu.paint_circle["circle-radius"]),"circle-color":new nI(tu.paint_circle["circle-color"]),"circle-blur":new nI(tu.paint_circle["circle-blur"]),"circle-opacity":new nI(tu.paint_circle["circle-opacity"]),"circle-translate":new nE(tu.paint_circle["circle-translate"]),"circle-translate-anchor":new nE(tu.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nE(tu.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nE(tu.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nI(tu.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nI(tu.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nI(tu.paint_circle["circle-stroke-opacity"])})},get layout(){return o=o||new nC({"circle-sort-key":new nI(tu.layout_circle["circle-sort-key"])})}},af=1e-6,ad="undefined"!=typeof Float32Array?Float32Array:Array;function ap(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function am(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],h=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=i[0],b=i[1],x=i[2],w=i[3];return t[0]=_*r+b*s+x*c+w*m,t[1]=_*n+b*l+x*f+w*g,t[2]=_*o+b*h+x*d+w*y,t[3]=_*a+b*u+x*p+w*v,t[4]=(_=i[4])*r+(b=i[5])*s+(x=i[6])*c+(w=i[7])*m,t[5]=_*n+b*l+x*f+w*g,t[6]=_*o+b*h+x*d+w*y,t[7]=_*a+b*u+x*p+w*v,t[8]=(_=i[8])*r+(b=i[9])*s+(x=i[10])*c+(w=i[11])*m,t[9]=_*n+b*l+x*f+w*g,t[10]=_*o+b*h+x*d+w*y,t[11]=_*a+b*u+x*p+w*v,t[12]=(_=i[12])*r+(b=i[13])*s+(x=i[14])*c+(w=i[15])*m,t[13]=_*n+b*l+x*f+w*g,t[14]=_*o+b*h+x*d+w*y,t[15]=_*a+b*u+x*p+w*v,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ag,ay=am;function av(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}ag=new ad(4),ad!=Float32Array&&(ag[0]=0,ag[1]=0,ag[2]=0,ag[3]=0);class a_ extends nR{constructor(t){super(t,ac)}createBucket(t){return new o4(t)}queryRadius(t){let e=t;return al("circle-radius",this,e)+al("circle-stroke-width",this,e)+ah(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,r,n,o,a,s){let l=au(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),h=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),c=u?l:function(t,e){return t.map(t=>ab(t,e))}(l,s),f=u?h*a:h;for(let t of r)for(let e of t){let t=u?e:ab(e,s),i=f,r=av([],[e.x,e.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?i*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(i*=o.cameraToCenterDistance/r[3]),o7(c,t,i))return!0}return!1}}function ab(t,e){let i=av([],[t.x,t.y,0,1],e);return new E(i[0]/i[3],i[1]/i[3])}class ax extends o4{}nt("HeatmapBucket",ax,{omit:["layers"]});var aw={get paint(){return s=s||new nC({"heatmap-radius":new nI(tu.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nI(tu.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nE(tu.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nA(tu.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nE(tu.paint_heatmap["heatmap-opacity"])})}};function aM(t,{width:e,height:i},r,n){if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==e*i*r)throw RangeError(`mismatched image size. expected: ${n.length} but got: ${e*i*r}`)}else n=new Uint8Array(e*i*r);return t.width=e,t.height=i,t.data=n,t}function aS(t,{width:e,height:i},r){if(e===t.width&&i===t.height)return;let n=aM({},{width:e,height:i},r);ak(t,n,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},r),t.width=e,t.height=i,t.data=n.data}function ak(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw RangeError("out of range destination coordinates for image copy");let a=t.data,s=e.data;if(a===s)throw Error("srcData equals dstData, so image is already copied");for(let l=0;l<n.height;l++){let h=((i.y+l)*t.width+i.x)*o,u=((r.y+l)*e.width+r.x)*o;for(let t=0;t<n.width*o;t++)s[u+t]=a[h+t]}return e}class aE{constructor(t,e){aM(this,t,1,e)}resize(t){aS(this,t,1)}clone(){return new aE({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){ak(t,e,i,r,n,1)}}class aI{constructor(t,e){aM(this,t,4,e)}resize(t){aS(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new aI({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){ak(t,e,i,r,n,4)}}function aP(t){let e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new aI({width:i,height:r});if(Math.log(i)/Math.LN2%1!=0)throw Error(`width is not a power of 2 - ${i}`);let o=(i,r,o)=>{e[t.evaluationKey]=o;let a=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*a.r/a.a),n.data[i+r+1]=Math.floor(255*a.g/a.a),n.data[i+r+2]=Math.floor(255*a.b/a.a),n.data[i+r+3]=Math.floor(255*a.a)};if(t.clips)for(let e=0,n=0;e<r;++e,n+=4*i)for(let r=0,a=0;r<i;r++,a+=4){let s=r/(i-1),{start:l,end:h}=t.clips[e];o(n,a,l*(1-s)+h*s)}else for(let t=0,e=0;t<i;t++,e+=4)o(0,e,t/(i-1));return n}nt("AlphaImage",aE),nt("RGBAImage",aI);class aT extends nR{createBucket(t){return new ax(t)}constructor(t){super(t,aw),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=aP({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}var aA={get paint(){return l=l||new nC({"hillshade-illumination-direction":new nE(tu.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nE(tu.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nE(tu.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nE(tu.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nE(tu.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nE(tu.paint_hillshade["hillshade-accent-color"])})}};class aC extends nR{constructor(t){super(t,aA)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}let{members:aL}=nD([{name:"a_pos",components:2,type:"Int16"}],4);function aR(t,e,i=2){let r,n,o;let a=e&&e.length,s=a?e[0]*i:t.length,l=aN(t,0,s,i,!0),h=[];if(!l||l.next===l.prev)return h;if(a&&(l=function(t,e,i,r){let n=[];for(let i=0,o=e.length;i<o;i++){let a=aN(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1);a===a.next&&(a.steiner=!0),n.push(aG(a))}n.sort(aq);for(let t=0;t<n.length;t++)i=aV(n[t],i);return i}(t,e,l,i)),t.length>80*i){r=1/0,n=1/0;let e=-1/0,a=-1/0;for(let o=i;o<s;o+=i){let i=t[o],s=t[o+1];i<r&&(r=i),s<n&&(n=s),i>e&&(e=i),s>a&&(a=s)}o=0!==(o=Math.max(e-r,a-n))?32767/o:0}return aO(l,h,i,r,n,o,0),h}function aN(t,e,i,r,n){let o;if(n===function(t,e,i,r){let n=0;for(let o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}(t,e,i,r)>0)for(let n=e;n<i;n+=r)o=a1(n/r|0,t[n],t[n+1],o);else for(let n=i-r;n>=e;n-=r)o=a1(n/r|0,t[n],t[n+1],o);return o&&a$(o,o.next)&&(a2(o),o=o.next),o}function az(t,e){if(!t)return t;e||(e=t);let i,r=t;do if(i=!1,r.steiner||!a$(r,r.next)&&0!==aX(r.prev,r,r.next))r=r.next;else{if(a2(r),(r=e=r.prev)===r.next)break;i=!0}while(i||r!==e)return e}function aO(t,e,i,r,n,o,a){if(!t)return;!a&&o&&function(t,e,i,r){let n=t;do 0===n.z&&(n.z=aZ(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t)n.prevZ.nextZ=null,n.prevZ=null,function(t){let e,i=1;do{let r,n=t;t=null;let o=null;for(e=0;n;){e++;let a=n,s=0;for(let t=0;t<i&&(s++,a=a.nextZ);t++);let l=i;for(;s>0||l>0&&a;)0!==s&&(0===l||!a||n.z<=a.z)?(r=n,n=n.nextZ,s--):(r=a,a=a.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=a}o.nextZ=null,i*=2}while(e>1)}(n)}(t,r,n,o);let s=t;for(;t.prev!==t.next;){let l=t.prev,h=t.next;if(o?aB(t,r,n,o):aD(t))e.push(l.i,t.i,h.i),a2(t),t=h.next,s=h.next;else if((t=h)===s){a?1===a?aO(t=aF(az(t),e),e,i,r,n,o,2):2===a&&aj(t,e,i,r,n,o):aO(az(t),e,i,r,n,o,1);break}}}function aD(t){let e=t.prev,i=t,r=t.next;if(aX(e,i,r)>=0)return!1;let n=e.x,o=i.x,a=r.x,s=e.y,l=i.y,h=r.y,u=n<o?n<a?n:a:o<a?o:a,c=s<l?s<h?s:h:l<h?l:h,f=n>o?n>a?n:a:o>a?o:a,d=s>l?s>h?s:h:l>h?l:h,p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=f&&p.y>=c&&p.y<=d&&aH(n,s,o,l,a,h,p.x,p.y)&&aX(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function aB(t,e,i,r){let n=t.prev,o=t,a=t.next;if(aX(n,o,a)>=0)return!1;let s=n.x,l=o.x,h=a.x,u=n.y,c=o.y,f=a.y,d=s<l?s<h?s:h:l<h?l:h,p=u<c?u<f?u:f:c<f?c:f,m=s>l?s>h?s:h:l>h?l:h,g=u>c?u>f?u:f:c>f?c:f,y=aZ(d,p,e,i,r),v=aZ(m,g,e,i,r),_=t.prevZ,b=t.nextZ;for(;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==n&&_!==a&&aH(s,u,l,c,h,f,_.x,_.y)&&aX(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==a&&aH(s,u,l,c,h,f,b.x,b.y)&&aX(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==n&&_!==a&&aH(s,u,l,c,h,f,_.x,_.y)&&aX(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==a&&aH(s,u,l,c,h,f,b.x,b.y)&&aX(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function aF(t,e){let i=t;do{let r=i.prev,n=i.next.next;!a$(r,n)&&aY(r,i,i.next,n)&&aQ(r,n)&&aQ(n,r)&&(e.push(r.i,i.i,n.i),a2(i),a2(i.next),i=t=n),i=i.next}while(i!==t)return az(i)}function aj(t,e,i,r,n,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&aW(a,t)){let s=a0(a,t);return a=az(a,a.next),s=az(s,s.next),aO(a,e,i,r,n,o,0),void aO(s,e,i,r,n,o,0)}t=t.next}a=a.next}while(a!==t)}function aq(t,e){return t.x-e.x}function aV(t,e){let i=function(t,e){let i=e,r=t.x,n=t.y,o,a=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){let t=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=r&&t>a&&(a=t,o=i.x<i.next.x?i:i.next,t===r))return o}i=i.next}while(i!==e)if(!o)return null;let s=o,l=o.x,h=o.y,u=1/0;i=o;do{if(r>=i.x&&i.x>=l&&r!==i.x&&aH(n<h?r:a,n,l,h,n<h?a:r,n,i.x,i.y)){let e=Math.abs(n-i.y)/(r-i.x);aQ(i,t)&&(e<u||e===u&&(i.x>o.x||i.x===o.x&&aU(o,i)))&&(o=i,u=e)}i=i.next}while(i!==s)return o}(t,e);if(!i)return e;let r=a0(i,t);return az(r,r.next),az(i,i.next)}function aU(t,e){return 0>aX(t.prev,t,e.prev)&&0>aX(e.next,t,t.next)}function aZ(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function aG(t){let e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t)return i}function aH(t,e,i,r,n,o,a,s){return(n-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(i-a)*(e-s)&&(i-a)*(o-s)>=(n-a)*(r-s)}function aW(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&aY(i,i.next,t,e))return!0;i=i.next}while(i!==t)return!1}(t,e)&&(aQ(t,e)&&aQ(e,t)&&function(t,e){let i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t)return r}(t,e)&&(aX(t.prev,t,e.prev)||aX(t,e.prev,e))||a$(t,e)&&aX(t.prev,t,t.next)>0&&aX(e.prev,e,e.next)>0)}function aX(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function a$(t,e){return t.x===e.x&&t.y===e.y}function aY(t,e,i,r){let n=aJ(aX(t,e,i)),o=aJ(aX(t,e,r)),a=aJ(aX(i,r,t)),s=aJ(aX(i,r,e));return n!==o&&a!==s||!(0!==n||!aK(t,i,e))||!(0!==o||!aK(t,r,e))||!(0!==a||!aK(i,t,r))||!(0!==s||!aK(i,e,r))}function aK(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function aJ(t){return t>0?1:t<0?-1:0}function aQ(t,e){return 0>aX(t.prev,t,t.next)?aX(t,e,t.next)>=0&&aX(t,t.prev,e)>=0:0>aX(t,e,t.prev)||0>aX(t,t.next,e)}function a0(t,e){let i=a6(t.i,t.x,t.y),r=a6(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function a1(t,e,i,r){let n=a6(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function a2(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function a6(t,e,i){return{i:t,x:e,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function a3(t,e,i){let r=i.patternDependencies,n=!1;for(let i of e){let e=i.paint.get(`${t}-pattern`);e.isConstant()||(n=!0);let o=e.constantOr(null);o&&(n=!0,r[o.to]=!0,r[o.from]=!0)}return n}function a8(t,e,i,r,n){let o=n.patternDependencies;for(let a of e){let e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},i,{},n.availableImages),s=e.evaluate({zoom:r},i,{},n.availableImages),l=e.evaluate({zoom:r+1},i,{},n.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,i.patterns[a.id]={min:t,mid:s,max:l}}}return i}class a4{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new of,this.indexArray=new ow,this.indexArray2=new oM,this.programConfigurations=new oK(t.layers,t.zoom),this.segments=new ok,this.segments2=new ok,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){this.hasPattern=a3("fill",this.layers,e);let r=this.layers[0].layout.get("fill-sort-key"),n=!r.isConstant(),o=[];for(let{feature:a,id:s,index:l,sourceLayerIndex:h}of t){let t=this.layers[0]._featureFilter.needGeometry,u=o3(a,t);if(!this.layers[0]._featureFilter.filter(new ny(this.zoom),u,i))continue;let c=n?r.evaluate(u,{},i,e.availableImages):void 0,f={id:s,properties:a.properties,type:a.type,sourceLayerIndex:h,index:l,geometry:t?u.geometry:o6(a),patterns:{},sortKey:c};o.push(f)}for(let r of(n&&o.sort((t,e)=>t.sortKey-e.sortKey),o)){let{geometry:n,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){let t=a8("fill",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,n,o,i,{});e.featureIndex.insert(t[o].feature,n,o,a,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(let t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,aL),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,r,n){for(let t of i_(e,500)){let e=0;for(let i of t)e+=i.length;let i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=i.vertexLength,n=[],o=[];for(let e of t){if(0===e.length)continue;e!==t[0]&&o.push(n.length/2);let i=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),r=i.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(r+e.length-1,r),n.push(e[0].x),n.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(r+t-1,r+t),n.push(e[t].x),n.push(e[t].y);i.vertexLength+=e.length,i.primitiveLength+=e.length}let a=aR(n,o);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(r+a[t],r+a[t+1],r+a[t+2]);i.vertexLength+=e,i.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}nt("FillBucket",a4,{omit:["layers","patternFeatures"]});var a5={get paint(){return u=u||new nC({"fill-antialias":new nE(tu.paint_fill["fill-antialias"]),"fill-opacity":new nI(tu.paint_fill["fill-opacity"]),"fill-color":new nI(tu.paint_fill["fill-color"]),"fill-outline-color":new nI(tu.paint_fill["fill-outline-color"]),"fill-translate":new nE(tu.paint_fill["fill-translate"]),"fill-translate-anchor":new nE(tu.paint_fill["fill-translate-anchor"]),"fill-pattern":new nP(tu.paint_fill["fill-pattern"])})},get layout(){return h=h||new nC({"fill-sort-key":new nI(tu.layout_fill["fill-sort-key"])})}};class a7 extends nR{constructor(t){super(t,a5)}recalculate(t,e){super.recalculate(t,e);let i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new a4(t)}queryRadius(){return ah(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,r,n,o,a){return o9(au(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}isTileClipped(){return!0}}let a9=nD([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),st=nD([{name:"a_centroid",components:2,type:"Int16"}],4),{members:se}=a9;var si={},sr=S,sn=so;function so(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(sa,this,e)}function sa(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function ss(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)r+=((i=t[a]).x-(e=t[n]).x)*(e.y+i.y);return r}so.types=["Unknown","Point","LineString","Polygon"],so.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=[];t.pos<i;){if(n<=0){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new sr(o,a));else{if(7!==r)throw Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},so.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,h=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<l&&(l=o),o>h&&(h=o);else if(7!==i)throw Error("unknown command "+i)}return[a,l,s,h]},so.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),h=so.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(r=0;r<l.length;r++)c[r]=l[r][0];u(l=c);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=ss(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)u(l[r][n])}1===l.length?l=l[0]:h="Multi"+h;var f={type:"Feature",geometry:{type:h,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var sl=sn,sh=su;function su(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(sc,this,e),this.length=this._features.length}function sc(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}su.prototype.feature=function(t){if(t<0||t>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new sl(this._pbf,e,this.extent,this._keys,this._values)};var sf=sh;function sd(t,e,i){if(3===t){var r=new sf(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}si.VectorTile=function(t,e){this.layers=t.readFields(sd,{},e)},si.VectorTileFeature=sn,si.VectorTileLayer=sh;let sp=si.VectorTileFeature.types,sm=8192;function sg(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*sm)+a,n*sm*2,o*sm*2,Math.round(s))}class sy{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new od,this.centroidVertexArray=new ou,this.indexArray=new ow,this.programConfigurations=new oK(t.layers,t.zoom),this.segments=new ok,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){for(let{feature:r,id:n,index:o,sourceLayerIndex:a}of(this.features=[],this.hasPattern=a3("fill-extrusion",this.layers,e),t)){let t=this.layers[0]._featureFilter.needGeometry,s=o3(r,t);if(!this.layers[0]._featureFilter.filter(new ny(this.zoom),s,i))continue;let l={id:n,sourceLayerIndex:a,index:o,geometry:t?s.geometry:o6(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(a8("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,i,{}),e.featureIndex.insert(r,l.geometry,o,a,this.index,!0)}}addFeatures(t,e,i){for(let t of this.features){let{geometry:r}=t;this.addFeature(t,r,t.index,e,i)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,se),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,st.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,i,r,n){for(let i of i_(e,500)){let e={x:0,y:0,vertexCount:0},r=0;for(let t of i)r+=t.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let t of i){if(0===t.length||s_(t))continue;let i=0;for(let r=0;r<t.length;r++){let o=t[r];if(r>=1){let a=t[r-1];if(!sv(o,a)){n.vertexLength+4>ok.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let t=o.sub(a)._perp()._unit(),r=a.dist(o);i+r>32768&&(i=0),sg(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,0,i),sg(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,1,i),e.x+=2*o.x,e.y+=2*o.y,e.vertexCount+=2,i+=r,sg(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,0,i),sg(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,1,i),e.x+=2*a.x,e.y+=2*a.y,e.vertexCount+=2;let s=n.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+r>ok.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(r,this.layoutVertexArray,this.indexArray)),"Polygon"!==sp[t.type])continue;let o=[],a=[],s=n.vertexLength;for(let t of i)if(0!==t.length){t!==i[0]&&a.push(o.length/2);for(let i=0;i<t.length;i++){let r=t[i];sg(this.layoutVertexArray,r.x,r.y,0,0,1,1,0),e.x+=r.x,e.y+=r.y,e.vertexCount+=1,o.push(r.x),o.push(r.y)}}let l=aR(o,a);for(let t=0;t<l.length;t+=3)this.indexArray.emplaceBack(s+l[t],s+l[t+2],s+l[t+1]);n.primitiveLength+=l.length/3,n.vertexLength+=r;for(let t=0;t<e.vertexCount;t++){let t=Math.floor(e.x/e.vertexCount),i=Math.floor(e.y/e.vertexCount);this.centroidVertexArray.emplaceBack(t,i)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}function sv(t,e){return t.x===e.x&&(t.x<0||t.x>o0)||t.y===e.y&&(t.y<0||t.y>o0)}function s_(t){return t.every(t=>t.x<0)||t.every(t=>t.x>o0)||t.every(t=>t.y<0)||t.every(t=>t.y>o0)}nt("FillExtrusionBucket",sy,{omit:["layers","features"]});var sb={get paint(){return c=c||new nC({"fill-extrusion-opacity":new nE(tu["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nI(tu["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nE(tu["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nE(tu["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nP(tu["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nI(tu["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nI(tu["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nE(tu["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class sx extends nR{constructor(t){super(t,sb)}createBucket(t){return new sy(t)}queryRadius(){return ah(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,i,r,n,o,a,s){let l=au(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),h=this.paint.get("fill-extrusion-height").evaluate(e,i),u=this.paint.get("fill-extrusion-base").evaluate(e,i),c=function(t,e,i,r){let n=[];for(let i of t){let t=[i.x,i.y,0,1];av(t,t,e),n.push(new E(t[0]/t[3],t[1]/t[3]))}return n}(l,s),f=function(t,e,i,r){let n=[],o=[],a=r[8]*e,s=r[9]*e,l=r[10]*e,h=r[11]*e,u=r[8]*i,c=r[9]*i,f=r[10]*i,d=r[11]*i;for(let e of t){let t=[],i=[];for(let n of e){let e=n.x,o=n.y,p=r[0]*e+r[4]*o+r[12],m=r[1]*e+r[5]*o+r[13],g=r[2]*e+r[6]*o+r[14],y=r[3]*e+r[7]*o+r[15],v=g+l,_=y+h,b=p+u,x=m+c,w=g+f,M=y+d,S=new E((p+a)/_,(m+s)/_);S.z=v/_,t.push(S);let k=new E(b/M,x/M);k.z=w/M,i.push(k)}n.push(t),o.push(i)}return[n,o]}(r,u,h,s);return function(t,e,i){let r=1/0;o9(i,e)&&(r=sM(i,e[0]));for(let n=0;n<e.length;n++){let o=e[n],a=t[n];for(let t=0;t<o.length-1;t++){let e=o[t],n=[e,o[t+1],a[t+1],a[t],e];o5(i,n)&&(r=Math.min(r,sM(i,n)))}}return r!==1/0&&r}(f[0],f[1],c)}}function sw(t,e){return t.x*e.x+t.y*e.y}function sM(t,e){if(1===t.length){let i,r=0,n=e[r++];for(;!i||n.equals(i);)if(!(i=e[r++]))return 1/0;for(;r<e.length;r++){let o=e[r],a=t[0],s=i.sub(n),l=o.sub(n),h=a.sub(n),u=sw(s,s),c=sw(s,l),f=sw(l,l),d=sw(h,s),p=sw(h,l),m=u*f-c*c,g=(f*d-c*p)/m,y=(u*p-c*d)/m,v=n.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(let i of e)t=Math.min(t,i.z);return t}}let{members:sS}=nD([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sk}=nD([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),sE=si.VectorTileFeature.types,sI=Math.cos(Math.PI/180*37.5),sP=32768;class sT{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(t=>{this.gradients[t.id]={}}),this.layoutVertexArray=new op,this.layoutVertexArray2=new om,this.indexArray=new ow,this.programConfigurations=new oK(t.layers,t.zoom),this.segments=new ok,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){this.hasPattern=a3("line",this.layers,e);let r=this.layers[0].layout.get("line-sort-key"),n=!r.isConstant(),o=[];for(let{feature:e,id:a,index:s,sourceLayerIndex:l}of t){let t=this.layers[0]._featureFilter.needGeometry,h=o3(e,t);if(!this.layers[0]._featureFilter.filter(new ny(this.zoom),h,i))continue;let u=n?r.evaluate(h,{},i):void 0,c={id:a,properties:e.properties,type:e.type,sourceLayerIndex:l,index:s,geometry:t?h.geometry:o6(e),patterns:{},sortKey:u};o.push(c)}for(let r of(n&&o.sort((t,e)=>t.sortKey-e.sortKey),o)){let{geometry:n,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){let t=a8("line",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,n,o,i,{});e.featureIndex.insert(t[o].feature,n,o,a,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(let t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,sk)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sS),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,r,n){let o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),h=o.get("line-round-limit");for(let i of(this.lineClips=this.lineFeatureClips(t),e))this.addLine(i,t,a,s,l,h);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}addLine(t,e,i,r,n,o){let a,s,l,h,u;if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let c="Polygon"===sE[e.type],f=t.length;for(;f>=2&&t[f-1].equals(t[f-2]);)f--;let d=0;for(;d<f-1&&t[d].equals(t[d+1]);)d++;if(f<(c?3:2))return;"bevel"===i&&(n=1.05);let p=this.overscaling<=16?15*o0/(512*this.overscaling):0,m=this.segments.prepareSegment(10*f,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,c&&(a=t[f-2],u=t[d].sub(a)._unit()._perp());for(let e=d;e<f;e++){if((l=e===f-1?c?t[d+1]:void 0:t[e+1])&&t[e].equals(l))continue;u&&(h=u),a&&(s=a),a=t[e],u=l?l.sub(a)._unit()._perp():h;let g=(h=h||u).add(u);0===g.x&&0===g.y||g._unit();let y=h.x*u.x+h.y*u.y,v=g.x*u.x+g.y*u.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<sI&&s&&l,w=h.x*u.y-h.y*u.x>0;if(x&&e>d){let t=a.dist(s);if(t>2*p){let e=a.sub(a.sub(s)._mult(p/t)._round());this.updateDistance(s,e),this.addCurrentVertex(e,h,0,0,m),s=e}}let M=s&&l,S=M?i:c?"butt":r;if(M&&"round"===S&&(_<o?S="miter":_<=2&&(S="fakeround")),"miter"===S&&_>n&&(S="bevel"),"bevel"===S&&(_>2&&(S="flipbevel"),_<n&&(S="miter")),s&&this.updateDistance(s,a),"miter"===S)g._mult(_),this.addCurrentVertex(a,g,0,0,m);else if("flipbevel"===S){if(_>100)g=u.mult(-1);else{let t=_*h.add(u).mag()/h.sub(u).mag();g._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(a,g,0,0,m),this.addCurrentVertex(a,g.mult(-1),0,0,m)}else if("bevel"===S||"fakeround"===S){let t=-Math.sqrt(_*_-1),e=w?t:0,i=w?0:t;if(s&&this.addCurrentVertex(a,h,e,i,m),"fakeround"===S){let t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){let t=i-.5;i+=i*t*(i-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}let r=u.sub(h)._mult(i)._add(h)._unit()._mult(w?-1:1);this.addHalfVertex(a,r.x,r.y,!1,w,0,m)}}l&&this.addCurrentVertex(a,u,-e,-i,m)}else if("butt"===S)this.addCurrentVertex(a,g,0,0,m);else if("square"===S){let t=s?1:-1;this.addCurrentVertex(a,g,t,t,m)}else"round"===S&&(s&&(this.addCurrentVertex(a,h,0,0,m),this.addCurrentVertex(a,h,1,1,m,!0)),l&&(this.addCurrentVertex(a,u,-1,-1,m,!0),this.addCurrentVertex(a,u,0,0,m)));if(x&&e<f-1){let t=a.dist(l);if(t>2*p){let e=a.add(l.sub(a)._mult(p/t)._round());this.updateDistance(a,e),this.addCurrentVertex(e,u,0,0,m),a=e}}}}addCurrentVertex(t,e,i,r,n,o=!1){let a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,n),this.addHalfVertex(t,a,s,o,!0,-r,n),this.distance>sP/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,e,i,r,n,o))}addHalfVertex({x:t,y:e},i,r,n,o,a,s){let l=.5*(this.lineClips?this.scaledDistance*(sP-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(n?1:0),(e<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let h=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,h),s.primitiveLength++),o?this.e2=h:this.e1=h}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}nt("LineBucket",sT,{omit:["layers","patternFeatures"]});var sA={get paint(){return d=d||new nC({"line-opacity":new nI(tu.paint_line["line-opacity"]),"line-color":new nI(tu.paint_line["line-color"]),"line-translate":new nE(tu.paint_line["line-translate"]),"line-translate-anchor":new nE(tu.paint_line["line-translate-anchor"]),"line-width":new nI(tu.paint_line["line-width"]),"line-gap-width":new nI(tu.paint_line["line-gap-width"]),"line-offset":new nI(tu.paint_line["line-offset"]),"line-blur":new nI(tu.paint_line["line-blur"]),"line-dasharray":new nT(tu.paint_line["line-dasharray"]),"line-pattern":new nP(tu.paint_line["line-pattern"]),"line-gradient":new nA(tu.paint_line["line-gradient"])})},get layout(){return f=f||new nC({"line-cap":new nE(tu.layout_line["line-cap"]),"line-join":new nI(tu.layout_line["line-join"]),"line-miter-limit":new nE(tu.layout_line["line-miter-limit"]),"line-round-limit":new nE(tu.layout_line["line-round-limit"]),"line-sort-key":new nI(tu.layout_line["line-sort-key"])})}};class sC extends nI{possiblyEvaluate(t,e){return e=new ny(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,r){return e=D({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,r)}}class sL extends nR{constructor(t){super(t,sA),this.gradientVersion=0,p||((p=new sC(sA.paint.properties["line-width"].specification)).useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){let t=this.gradientExpression();this.stepInterpolant=!!function(t){return void 0!==t._styleExpression}(t)&&t._styleExpression.expression instanceof eC,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=p.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new sT(t)}queryRadius(t){let e=t;return sR(al("line-width",this,e),al("line-gap-width",this,e))/2+Math.abs(al("line-offset",this,e))+ah(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,r,n,o,a){let s=au(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*sR(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),h=this.paint.get("line-offset").evaluate(e,i);return h&&(r=function(t,e){let i=[];for(let r=0;r<t.length;r++){let n=t[r],o=[];for(let t=0;t<n.length;t++){let i=n[t-1],r=n[t],a=n[t+1],s=0===t?new E(0,0):r.sub(i)._unit()._perp(),l=t===n.length-1?new E(0,0):a.sub(r)._unit()._perp(),h=s._add(l)._unit(),u=h.x*l.x+h.y*l.y;0!==u&&h._mult(1/u),o.push(h._mult(e)._add(r))}i.push(o)}return i}(r,h*a)),function(t,e,i){for(let r=0;r<e.length;r++){let n=e[r];if(t.length>=3){for(let e=0;e<n.length;e++)if(aa(t,n[e]))return!0}if(at(t,n,i))return!0}return!1}(s,r,l)}isTileClipped(){return!0}}function sR(t,e){return e>0?e+2*t:t}let sN=nD([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sz=nD([{name:"a_projected_pos",components:3,type:"Float32"}],4);nD([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let sO=nD([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);nD([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let sD=nD([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),sB=nD([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sF(t,e,i){return t.sections.forEach(t=>{t.text=function(t,e,i){let r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),ng.applyArabicShaping&&(t=ng.applyArabicShaping(t)),t}(t.text,e,i)}),t}nD([{name:"triangle",components:3,type:"Uint16"}]),nD([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),nD([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),nD([{type:"Float32",name:"offsetX"}]),nD([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),nD([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let sj={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var sq=24,sV=sG,sU=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,h=l>>1,u=-7,c=i?n-1:0,f=i?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+c],c+=f,u-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=h}return(d?-1:1)*a*Math.pow(2,o-r)},sZ=function(t,e,i,r,n,o){var a,s,l,h=8*o-n-1,u=(1<<h)-1,c=u>>1,f=23===n?5960464477539062e-23:0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(a++,l/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*l-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&s,d+=p,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;t[i+d]=255&a,d+=p,a/=256,h-=8);t[i+d-p]|=128*m};function sG(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}sG.Varint=0,sG.Fixed64=1,sG.Bytes=2,sG.Fixed32=5;var sH=4294967296,sW=23283064365386963e-26,sX="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function s$(t){return t.type===sG.Bytes?t.readVarint()+t.pos:t.pos+1}function sY(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function sK(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function sJ(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function sQ(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function s0(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function s1(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function s2(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function s6(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function s3(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function s8(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function s4(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function s5(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function s7(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function s9(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}sG.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=s5(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=s9(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=s5(this.buf,this.pos)+s5(this.buf,this.pos+4)*sH;return this.pos+=8,t},readSFixed64:function(){var t=s5(this.buf,this.pos)+s9(this.buf,this.pos+4)*sH;return this.pos+=8,t},readFloat:function(){var t=sU(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=sU(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128||(r|=(127&(n=o[i.pos++]))<<3,n<128)||(r|=(127&(n=o[i.pos++]))<<10,n<128)||(r|=(127&(n=o[i.pos++]))<<17,n<128)||(r|=(127&(n=o[i.pos++]))<<24,n<128)||(r|=(1&(n=o[i.pos++]))<<31,n<128))return sY(t,r,e);throw Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?-((t+1)/2):t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&sX?function(t,e,i){return sX.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,l=t[n],h=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(h=l):2===u?128==(192&(o=t[n+1]))&&(h=(31&l)<<6|63&o)<=127&&(h=null):3===u?(a=t[n+2],128==(192&(o=t[n+1]))&&128==(192&a)&&((h=(15&l)<<12|(63&o)<<6|63&a)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(a=t[n+2],s=t[n+3],128==(192&(o=t[n+1]))&&128==(192&a)&&128==(192&s)&&((h=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),n+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==sG.Bytes)return t.push(this.readVarint(e));var i=s$(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==sG.Bytes)return t.push(this.readSVarint());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==sG.Bytes)return t.push(this.readBoolean());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==sG.Bytes)return t.push(this.readFloat());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==sG.Bytes)return t.push(this.readDouble());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==sG.Bytes)return t.push(this.readFixed32());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==sG.Bytes)return t.push(this.readSFixed32());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==sG.Bytes)return t.push(this.readFixed64());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==sG.Bytes)return t.push(this.readSFixed64());var e=s$(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===sG.Varint)for(;this.buf[this.pos++]>127;);else if(e===sG.Bytes)this.pos=this.readVarint()+this.pos;else if(e===sG.Fixed32)this.pos+=4;else{if(e!==sG.Fixed64)throw Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),s7(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),s7(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),s7(this.buf,-1&t,this.pos),s7(this.buf,Math.floor(t*sW),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),s7(this.buf,-1&t,this.pos),s7(this.buf,Math.floor(t*sW),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?-(2*t)-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&sK(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),sZ(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),sZ(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&sK(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,sG.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,sJ,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,sQ,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,s2,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,s0,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,s1,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,s6,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,s3,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,s8,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,s4,e)},writeBytesField:function(t,e){this.writeTag(t,sG.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,sG.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,sG.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,sG.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,sG.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,sG.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,sG.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,sG.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,sG.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,sG.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};var lt=b(sV);let le=3;function li(t,e,i){1===t&&i.readMessage(lr,e)}function lr(t,e,i){if(3===t){let{id:t,bitmap:r,width:n,height:o,left:a,top:s,advance:l}=i.readMessage(ln,{});e.push({id:t,bitmap:new aE({width:n+2*le,height:o+2*le},r),metrics:{width:n,height:o,left:a,top:s,advance:l}})}}function ln(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}let lo=3;function la(t){let e=0,i=0;for(let r of t)e+=r.w*r.h,i=Math.max(i,r.w);t.sort((t,e)=>e.h-t.h);let r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],n=0,o=0;for(let e of t)for(let t=r.length-1;t>=0;t--){let i=r[t];if(!(e.w>i.w||e.h>i.h)){if(e.x=i.x,e.y=i.y,o=Math.max(o,e.y+e.h),n=Math.max(n,e.x+e.w),e.w===i.w&&e.h===i.h){let e=r.pop();t<r.length&&(r[t]=e)}else e.h===i.h?(i.x+=e.w,i.w-=e.w):(e.w===i.w||r.push({x:i.x+e.w,y:i.y,w:i.w-e.w,h:e.h}),i.y+=e.h,i.h-=e.h);break}}return{w:n,h:o,fill:e/(n*o)||0}}let ls=1;class ll{constructor(t,{pixelRatio:e,version:i,stretchX:r,stretchY:n,content:o,textFitWidth:a,textFitHeight:s}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=n,this.content=o,this.version=i,this.textFitWidth=a,this.textFitHeight=s}get tl(){return[this.paddedRect.x+ls,this.paddedRect.y+ls]}get br(){return[this.paddedRect.x+this.paddedRect.w-ls,this.paddedRect.y+this.paddedRect.h-ls]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ls)/this.pixelRatio,(this.paddedRect.h-2*ls)/this.pixelRatio]}}class lh{constructor(t,e){let i={},r={};this.haveRenderCallbacks=[];let n=[];this.addImages(t,i,n),this.addImages(e,r,n);let{w:o,h:a}=la(n),s=new aI({width:o||1,height:a||1});for(let e in t){let r=t[e],n=i[e].paddedRect;aI.copy(r.data,s,{x:0,y:0},{x:n.x+ls,y:n.y+ls},r.data)}for(let t in e){let i=e[t],n=r[t].paddedRect,o=n.x+ls,a=n.y+ls,l=i.data.width,h=i.data.height;aI.copy(i.data,s,{x:0,y:0},{x:o,y:a},i.data),aI.copy(i.data,s,{x:0,y:h-1},{x:o,y:a-1},{width:l,height:1}),aI.copy(i.data,s,{x:0,y:0},{x:o,y:a+h},{width:l,height:1}),aI.copy(i.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:h}),aI.copy(i.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:h})}this.image=s,this.iconPositions=i,this.patternPositions=r}addImages(t,e,i){for(let r in t){let n=t[r],o={x:0,y:0,w:n.data.width+2*ls,h:n.data.height+2*ls};i.push(o),e[r]=new ll(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){for(let i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e||t.version===e.version)return;t.version=e.version;let[r,n]=t.tl;i.update(e.data,void 0,{x:r,y:n})}}nt("ImagePosition",ll),nt("ImageAtlas",lh),t.ai=void 0,(x=t.ai||(t.ai={}))[x.none=0]="none",x[x.horizontal=1]="horizontal",x[x.vertical=2]="vertical",x[x.horizontalOnly=3]="horizontalOnly";let lu=-17;class lc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){let i=new lc;return i.scale=t||1,i.fontStack=e,i}static forImage(t){let e=new lc;return e.imageName=t,e}}class lf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){let i=new lf;for(let r=0;r<t.sections.length;r++){let n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){let r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&nf(r)&&!sj[t[i+1]]||n&&nf(n)&&!sj[t[i-1]]||!sj[t[i]]?t[i]:sj[t[i]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&lp[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&lp[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){let i=new lf;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,e)=>Math.max(t,this.sections[e].scale),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(lc.forText(t.scale,t.fontStack||e));let i=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(i)}addImageSection(t){let e=t.image?t.image.name:"";if(0===e.length)return void U("Can't add FormattedSection with an empty image.");let i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(lc.forImage(e)),this.sectionIndex.push(this.sections.length-1)):U("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ld(e,i,r,n,o,a,s,l,h,u,c,f,d,p,m){let g;let y=lf.fromFeature(e,o);f===t.ai.vertical&&y.verticalizePunctuation();let{processBidirectionalText:v,processStyledBidirectionalText:_}=ng;if(v&&1===y.sections.length)for(let t of(g=[],v(y.toString(),lw(y,u,a,i,n,p)))){let e=new lf;e.text=t,e.sections=y.sections;for(let i=0;i<t.length;i++)e.sectionIndex.push(0);g.push(e)}else if(_)for(let t of(g=[],_(y.text,y.sectionIndex,lw(y,u,a,i,n,p)))){let e=new lf;e.text=t[0],e.sectionIndex=t[1],e.sections=y.sections,g.push(e)}else g=function(t,e){let i=[],r=t.text,n=0;for(let r of e)i.push(t.substring(n,r)),n=r;return n<r.length&&i.push(t.substring(n,r.length)),i}(y,lw(y,u,a,i,n,p));let b=[],x={positionedLines:b,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(e,i,r,n,o,a,s,l,h,u,c,f){var d;let p=0,m=lu,g=0,y=0,v="right"===l?1:"left"===l?0:.5,_=0;for(let s of o){s.trim();let o=s.getMaxScale(),l=(o-1)*sq,b={positionedGlyphs:[],lineOffset:0};e.positionedLines[_]=b;let x=b.positionedGlyphs,w=0;if(!s.length()){m+=a,++_;continue}for(let a=0;a<s.length();a++){let g=s.getSection(a),y=s.getSectionIndex(a),v=s.getCharCode(a),_=0,b=null,M=null,S=null,k=sq,E=!(h===t.ai.horizontal||!c&&!nc(v)||c&&(lp[v]||(d=v,ns.Arabic(d)||ns["Arabic Supplement"](d)||ns["Arabic Extended-A"](d)||ns["Arabic Presentation Forms-A"](d)||ns["Arabic Presentation Forms-B"](d))));if(g.imageName){let t=n[g.imageName];if(!t)continue;S=g.imageName,e.iconsInText=e.iconsInText||!0,M=t.paddedRect;let i=t.displaySize;g.scale=g.scale*sq/f,b={width:i[0],height:i[1],left:ls,top:-lo,advance:E?i[1]:i[0]},_=l+(sq-i[1]*g.scale),k=b.advance;let r=E?i[0]*g.scale-sq*o:i[1]*g.scale-sq*o;r>0&&r>w&&(w=r)}else{let t=r[g.fontStack],e=t&&t[v];if(e&&e.rect)M=e.rect,b=e.metrics;else{let t=i[g.fontStack],e=t&&t[v];if(!e)continue;b=e.metrics}_=(o-g.scale)*sq}E?(e.verticalizable=!0,x.push({glyph:v,imageName:S,x:p,y:m+_,vertical:E,scale:g.scale,fontStack:g.fontStack,sectionIndex:y,metrics:b,rect:M}),p+=k*g.scale+u):(x.push({glyph:v,imageName:S,x:p,y:m+_,vertical:E,scale:g.scale,fontStack:g.fontStack,sectionIndex:y,metrics:b,rect:M}),p+=b.advance*g.scale+u)}0!==x.length&&(g=Math.max(p-u,g),lS(x,0,x.length-1,v,w)),p=0;let M=a*o+w;b.lineOffset=Math.max(w,l),m+=M,y=Math.max(M,y),++_}let b=m-lu,{horizontalAlign:x,verticalAlign:w}=lM(s);(function(t,e,i,r,n,o,a,s,l){let h=(e-i)*n,u=0;for(let e of(u=o!==a?-s*r-lu:(-r*l+.5)*a,t))for(let t of e.positionedGlyphs)t.x+=h,t.y+=u})(e.positionedLines,v,x,w,g,y,a,b,o.length),e.top+=-w*b,e.bottom=e.top+b,e.left+=-x*g,e.right=e.left+g}(x,i,r,n,g,s,l,h,f,u,d,m),!function(t){for(let e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&x}let lp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lm={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},lg={40:!0};function ly(t,e,i,r,n,o){if(e.imageName){let t=r[e.imageName];return t?t.displaySize[0]*e.scale*sq/o+n:0}{let r=i[e.fontStack],o=r&&r[t];return o?o.metrics.advance*e.scale+n:0}}function lv(t,e,i,r){let n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function l_(t,e,i){let r=0;return 10===t&&(r-=1e4),i&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function lb(t,e,i,r,n,o){let a=null,s=lv(e,i,n,o);for(let t of r){let r=lv(e-t.x,i,n,o)+t.badness;r<=s&&(a=t,s=r)}return{index:t,x:e,priorBreak:a,badness:s}}function lx(t){return t?lx(t.priorBreak).concat(t.index):[]}function lw(t,e,i,r,n,o){var a;if(!t)return[];let s=[],l=function(t,e,i,r,n,o){let a=0;for(let i=0;i<t.length();i++){let s=t.getSection(i);a+=ly(t.getCharCode(i),s,r,n,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,r,n,o),h=t.text.indexOf("​")>=0,u=0;for(let i=0;i<t.length();i++){let c=t.getSection(i),f=t.getCharCode(i);if(lp[f]||(u+=ly(f,c,r,n,e,o)),i<t.length()-1){let e=!((a=f)<11904||!(ns["Bopomofo Extended"](a)||ns.Bopomofo(a)||ns["CJK Compatibility Forms"](a)||ns["CJK Compatibility Ideographs"](a)||ns["CJK Compatibility"](a)||ns["CJK Radicals Supplement"](a)||ns["CJK Strokes"](a)||ns["CJK Symbols and Punctuation"](a)||ns["CJK Unified Ideographs Extension A"](a)||ns["CJK Unified Ideographs"](a)||ns["Enclosed CJK Letters and Months"](a)||ns["Halfwidth and Fullwidth Forms"](a)||ns.Hiragana(a)||ns["Ideographic Description Characters"](a)||ns["Kangxi Radicals"](a)||ns["Katakana Phonetic Extensions"](a)||ns.Katakana(a)||ns["Vertical Forms"](a)||ns["Yi Radicals"](a)||ns["Yi Syllables"](a)));(lm[f]||e||c.imageName||i!==t.length()-2&&lg[t.getCharCode(i+1)])&&s.push(lb(i+1,u,l,s,l_(f,t.getCharCode(i+1),e&&h),!1))}}return lx(lb(t.length(),u,l,s,0,!0))}function lM(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function lS(t,e,i,r,n){if(!r&&!n)return;let o=t[i],a=(t[i].x+o.metrics.advance*o.scale)*r;for(let r=e;r<=i;r++)t[r].x-=a,t[r].y+=n}function lk(t,e,i){let{horizontalAlign:r,verticalAlign:n}=lM(i),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*n;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function lE(t){var e,i;let r=t.left,n=t.top,o=t.right-r,a=t.bottom-n,s=null!==(e=t.image.textFitWidth)&&void 0!==e?e:"stretchOrShrink",l=null!==(i=t.image.textFitHeight)&&void 0!==i?i:"stretchOrShrink",h=(t.image.content[2]-t.image.content[0])/(t.image.content[3]-t.image.content[1]);if("proportional"===l){if("stretchOnly"===s&&o/a<h||"proportional"===s){let t=Math.ceil(a*h);r*=t/o,o=t}}else if("proportional"===s&&"stretchOnly"===l&&0!==h&&o/a>h){let t=Math.ceil(o/h);n*=t/a,a=t}return{x1:r,y1:n,x2:r+o,y2:n+a}}function lI(t,e,i,r,n,o){let a,s,l,h,u;let c=t.image;if(c.content){let t=c.content,e=c.pixelRatio||1;a=[t[0]/e,t[1]/e,c.displaySize[0]-t[2]/e,c.displaySize[1]-t[3]/e]}let f=e.left*o,d=e.right*o;"width"===i||"both"===i?(u=n[0]+f-r[3],l=n[0]+d+r[1]):l=(u=n[0]+(f+d-c.displaySize[0])/2)+c.displaySize[0];let p=e.top*o,m=e.bottom*o;return"height"===i||"both"===i?(s=n[1]+p-r[0],h=n[1]+m+r[2]):h=(s=n[1]+(p+m-c.displaySize[1])/2)+c.displaySize[1],{image:c,top:s,right:l,bottom:h,left:u,collisionPadding:a}}let lP=255,lT=128,lA=32640;function lC(t,e){let{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new ny(t+1))};if("source"===i.kind)return{kind:"source"};{let{zoomStops:e,interpolationType:r}=i,n=0;for(;n<e.length&&e[n]<=t;)n++;let o=n=Math.max(0,n-1);for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);let a=e[n],s=e[o];return"composite"===i.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:i.evaluate(new ny(a)),maxSize:i.evaluate(new ny(s)),interpolationType:r}}}function lL(t,e,i){let r="never",n=t.get(e);return n?r=n:t.get(i)&&(r="always"),r}let lR=si.VectorTileFeature.types,lN=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lz(t,e,i,r,n,o,a,s,l,h,u,c,f){let d=s?Math.min(lA,Math.round(s[0])):0,p=s?Math.min(lA,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),o,a,(d<<1)+(l?1:0),p,16*h,16*u,256*c,256*f)}function lO(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function lD(t){for(let e of t.sections)if(nm(e.text))return!0;return!1}class lB{constructor(t){this.layoutVertexArray=new oy,this.indexArray=new ow,this.programConfigurations=t,this.segments=new ok,this.dynamicLayoutVertexArray=new ov,this.opacityVertexArray=new o_,this.hasVisibleVertices=!1,this.placedSymbolArray=new oe}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sN.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,sz.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,lN,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}nt("SymbolBuffers",lB);class lF{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new ok,this.collisionVertexArray=new ox}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,sO.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}nt("CollisionBuffers",lF);class lj{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(t=>t.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ap([]),this.placementViewportMatrix=ap([]);let i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lC(this.zoom,i["text-size"]),this.iconSizeData=lC(this.zoom,i["icon-size"]);let r=this.layers[0].layout,n=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==lL(r,"text-overlap","text-allow-overlap")||"never"!==lL(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!n.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map(e=>t.ai[e])),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id),this.sourceID=e.sourceID}createArrays(){this.text=new lB(new oK(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new lB(new oK(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new on,this.lineVertexArray=new oo,this.symbolInstances=new or,this.textAnchorOffsets=new os}calculateGlyphDependencies(t,e,i,r,n){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||r)&&n){let i=sj[t.charAt(o)];i&&(e[i.charCodeAt(0)]=!0)}}populate(e,i,r){let n=this.layers[0],o=n.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),h=("constant"!==s.value.kind||s.value.value instanceof en&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,c=o.get("symbol-sort-key");if(this.features=[],!h&&!u)return;let f=i.iconDependencies,d=i.glyphDependencies,p=i.availableImages,m=new ny(this.zoom);for(let{feature:i,id:s,index:l,sourceLayerIndex:g}of e){let e,y;let v=n._featureFilter.needGeometry,_=o3(i,v);if(!n._featureFilter.filter(m,_,r))continue;if(v||(_.geometry=o6(i)),h){let t=n.getValueAndResolveTokens("text-field",_,r,p),i=en.factory(t),o=this.hasRTLText=this.hasRTLText||lD(i);(!o||"unavailable"===ng.getRTLTextPluginStatus()||o&&ng.isParsed())&&(e=sF(i,n,_))}if(u){let t=n.getValueAndResolveTokens("icon-image",_,r,p);y=t instanceof el?t:el.fromString(t)}if(!e&&!y)continue;let b=this.sortFeaturesByKey?c.evaluate(_,{},r):void 0;if(this.features.push({id:s,text:e,icon:y,index:l,sourceLayerIndex:g,geometry:_.geometry,properties:i.properties,type:lR[i.type],sortKey:b}),y&&(f[y.name]=!0),e){let i=a.evaluate(_,{},r).join(","),n="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");for(let r of(this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.ai.vertical)>=0,e.sections))if(r.image)f[r.image.name]=!0;else{let t=nl(e.toString()),o=r.fontStack||i,a=d[o]=d[o]||{};this.calculateGlyphDependencies(r.text,a,n,this.allowVerticalPlacement,t)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){let e={},i={},r=[],n=0;function o(e){r.push(t[e]),n++}function a(t,e,n){let o=i[t];return delete i[t],i[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(t,i,n){let o=e[i];return delete e[i],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function l(t,e,i){let r=i?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let h=0;h<t.length;h++){let u=t[h],c=u.geometry,f=u.text?u.text.toString():null;if(!f){o(h);continue}let d=l(f,c),p=l(f,c,!0);if(d in i&&p in e&&i[d]!==e[p]){let t=s(d,p,c),n=a(d,p,r[t].geometry);delete e[d],delete i[p],i[l(f,r[n].geometry,!0)]=n,r[t].geometry=null}else d in i?a(d,p,c):p in e?s(d,p,c):(o(h),e[d]=n-1,i[p]=n-1)}return r.filter(t=>t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((t,e)=>t.sortKey-e.sortKey)}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){let i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),n={};for(let r=t.segment+1;r<e.length;r++)n[r]={x:e[r].x,y:e[r].y,tileUnitDistanceFromAnchor:i},r<e.length-1&&(i+=e[r+1].dist(e[r]));for(let i=t.segment||0;i>=0;i--)n[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:r},i>0&&(r+=e[i-1].dist(e[i]));for(let t=0;t<e.length;t++){let e=n[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,i,r,n,o,a,s,l,h,u,c,f){let d=e.indexArray,p=e.layoutVertexArray,m=e.segments.prepareSegment(4*i.length,p,d,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&s===t.ai.vertical?Math.PI/2:0,_=a.text&&a.text.sections;for(let t=0;t<i.length;t++){let{tl:n,tr:o,bl:s,br:h,tex:u,pixelOffsetTL:c,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:b,glyphOffset:x,isSDF:w,sectionIndex:M}=i[t],S=m.vertexLength,k=x[1];lz(p,l.x,l.y,n.x,k+n.y,u.x,u.y,r,w,c.x,c.y,y,b),lz(p,l.x,l.y,o.x,k+o.y,u.x+u.w,u.y,r,w,g.x,c.y,y,b),lz(p,l.x,l.y,s.x,k+s.y,u.x,u.y+u.h,r,w,c.x,g.y,y,b),lz(p,l.x,l.y,h.x,k+h.y,u.x+u.w,u.y+u.h,r,w,g.x,g.y,y,b),lO(e.dynamicLayoutVertexArray,l,v),d.emplaceBack(S,S+1,S+2),d.emplaceBack(S+1,S+2,S+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),t!==i.length-1&&M===i[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(p.length,a,a.index,{},f,_&&_[M])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,h,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],s,0,!1,0,c)}_addCollisionDebugVertex(t,e,i,r,n,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,i,r,n,o,a){let s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,h=n.layoutVertexArray,u=n.collisionVertexArray,c=a.anchorX,f=a.anchorY;this._addCollisionDebugVertex(h,u,o,c,f,new E(t,e)),this._addCollisionDebugVertex(h,u,o,c,f,new E(i,e)),this._addCollisionDebugVertex(h,u,o,c,f,new E(i,r)),this._addCollisionDebugVertex(h,u,o,c,f,new E(t,r)),s.vertexLength+=4;let d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(t,e,i,r){for(let n=t;n<e;n++){let t=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,r?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,i)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lF(ob,sD.members,oM),this.iconCollisionBox=new lF(ob,sD.members,oM);for(let t=0;t<this.symbolInstances.length;t++){let e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,i,r,n,o,a,s,l){let h={};for(let r=e;r<i;r++){let e=t.get(r);h.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},h.textFeatureIndex=e.featureIndex;break}for(let e=r;e<n;e++){let i=t.get(e);h.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.verticalTextFeatureIndex=i.featureIndex;break}for(let e=o;e<a;e++){let i=t.get(e);h.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.iconFeatureIndex=i.featureIndex;break}for(let e=s;e<l;e++){let i=t.get(e);h.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},h.verticalIconFeatureIndex=i.featureIndex;break}return h}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){let i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){let i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs;for(let e=i.vertexStartIndex;e<r;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;let e=Math.sin(t),i=Math.cos(t),r=[],n=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);let a=this.symbolInstances.get(t);r.push(0|Math.round(e*a.anchorX+i*a.anchorY)),n.push(a.featureIndex)}return o.sort((t,e)=>r[t]-r[e]||n[e]-n[t]),o}addToSortKeyRanges(t,e){let i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){for(let e of(this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[],this.symbolInstanceIndexes)){let t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}nt("SymbolBucket",lj,{omit:["layers","collisionBoxArray","features","compareText"]}),lj.MAX_GLYPHS=65535,lj.addDynamicAttributes=lO;var lq={get paint(){return g=g||new nC({"icon-opacity":new nI(tu.paint_symbol["icon-opacity"]),"icon-color":new nI(tu.paint_symbol["icon-color"]),"icon-halo-color":new nI(tu.paint_symbol["icon-halo-color"]),"icon-halo-width":new nI(tu.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nI(tu.paint_symbol["icon-halo-blur"]),"icon-translate":new nE(tu.paint_symbol["icon-translate"]),"icon-translate-anchor":new nE(tu.paint_symbol["icon-translate-anchor"]),"text-opacity":new nI(tu.paint_symbol["text-opacity"]),"text-color":new nI(tu.paint_symbol["text-color"],{runtimeType:tA,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new nI(tu.paint_symbol["text-halo-color"]),"text-halo-width":new nI(tu.paint_symbol["text-halo-width"]),"text-halo-blur":new nI(tu.paint_symbol["text-halo-blur"]),"text-translate":new nE(tu.paint_symbol["text-translate"]),"text-translate-anchor":new nE(tu.paint_symbol["text-translate-anchor"])})},get layout(){return m=m||new nC({"symbol-placement":new nE(tu.layout_symbol["symbol-placement"]),"symbol-spacing":new nE(tu.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nE(tu.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nI(tu.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nE(tu.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nE(tu.layout_symbol["icon-allow-overlap"]),"icon-overlap":new nE(tu.layout_symbol["icon-overlap"]),"icon-ignore-placement":new nE(tu.layout_symbol["icon-ignore-placement"]),"icon-optional":new nE(tu.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nE(tu.layout_symbol["icon-rotation-alignment"]),"icon-size":new nI(tu.layout_symbol["icon-size"]),"icon-text-fit":new nE(tu.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nE(tu.layout_symbol["icon-text-fit-padding"]),"icon-image":new nI(tu.layout_symbol["icon-image"]),"icon-rotate":new nI(tu.layout_symbol["icon-rotate"]),"icon-padding":new nI(tu.layout_symbol["icon-padding"]),"icon-keep-upright":new nE(tu.layout_symbol["icon-keep-upright"]),"icon-offset":new nI(tu.layout_symbol["icon-offset"]),"icon-anchor":new nI(tu.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nE(tu.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nE(tu.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nE(tu.layout_symbol["text-rotation-alignment"]),"text-field":new nI(tu.layout_symbol["text-field"]),"text-font":new nI(tu.layout_symbol["text-font"]),"text-size":new nI(tu.layout_symbol["text-size"]),"text-max-width":new nI(tu.layout_symbol["text-max-width"]),"text-line-height":new nE(tu.layout_symbol["text-line-height"]),"text-letter-spacing":new nI(tu.layout_symbol["text-letter-spacing"]),"text-justify":new nI(tu.layout_symbol["text-justify"]),"text-radial-offset":new nI(tu.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nE(tu.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new nI(tu.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new nI(tu.layout_symbol["text-anchor"]),"text-max-angle":new nE(tu.layout_symbol["text-max-angle"]),"text-writing-mode":new nE(tu.layout_symbol["text-writing-mode"]),"text-rotate":new nI(tu.layout_symbol["text-rotate"]),"text-padding":new nE(tu.layout_symbol["text-padding"]),"text-keep-upright":new nE(tu.layout_symbol["text-keep-upright"]),"text-transform":new nI(tu.layout_symbol["text-transform"]),"text-offset":new nI(tu.layout_symbol["text-offset"]),"text-allow-overlap":new nE(tu.layout_symbol["text-allow-overlap"]),"text-overlap":new nE(tu.layout_symbol["text-overlap"]),"text-ignore-placement":new nE(tu.layout_symbol["text-ignore-placement"]),"text-optional":new nE(tu.layout_symbol["text-optional"])})}};class lV{constructor(t){if(void 0===t.property.overrides)throw Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:tE,this.defaultValue=t}evaluate(t){if(t.formattedSection){let e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nt("FormatSectionOverride",lV,{omit:["defaultValue"]});class lU extends nR{constructor(t){super(t,lq)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){let t=this.layout.get("text-writing-mode");if(t){let e=[];for(let i of t)0>e.indexOf(i)&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,r){let n=this.layout.get(t).evaluate(e,{},i,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||rl(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(e,i)=>t&&i in t?String(t[i]):"")}(e.properties,n)}createBucket(t){return new lj(t)}queryRadius(){return 0}queryIntersectsFeature(){throw Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let t of lq.paint.overridableProperties){if(!lU.hasPaintOverride(this.layout,t))continue;let e=this.paint.get(t),i=new rs(new lV(e),e.property.specification),r=null;r="constant"===e.value.kind||"source"===e.value.kind?new ru("source",i):new rc("composite",i,e.value.zoomStops),this.paint._values[t]=new nS(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&lU.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){let i=t.get("text-field"),r=lq.paint.properties[e],n=!1,o=t=>{for(let e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof en)o(i.value.value.sections);else if("source"===i.value.kind){let t=e=>{n||(e instanceof ed&&ec(e.value)===tN?o(e.value.sections):e instanceof eQ?o(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return n}}var lZ={get paint(){return y=y||new nC({"background-color":new nE(tu.paint_background["background-color"]),"background-pattern":new nT(tu.paint_background["background-pattern"]),"background-opacity":new nE(tu.paint_background["background-opacity"])})}};class lG extends nR{constructor(t){super(t,lZ)}}var lH={get paint(){return v=v||new nC({"raster-opacity":new nE(tu.paint_raster["raster-opacity"]),"raster-hue-rotate":new nE(tu.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nE(tu.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nE(tu.paint_raster["raster-brightness-max"]),"raster-saturation":new nE(tu.paint_raster["raster-saturation"]),"raster-contrast":new nE(tu.paint_raster["raster-contrast"]),"raster-resampling":new nE(tu.paint_raster["raster-resampling"]),"raster-fade-duration":new nE(tu.paint_raster["raster-fade-duration"])})}};class lW extends nR{constructor(t){super(t,lH)}}class lX extends nR{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw Error("Custom layers cannot be serialized")}}class l${constructor(t){this._methodToThrottle=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let lY=6371008.8;class lK{constructor(t,e){if(isNaN(t)||isNaN(e))throw Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new lK(O(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){let e=Math.PI/180,i=this.lat*e,r=t.lat*e;return lY*Math.acos(Math.min(Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e),1))}static convert(t){if(t instanceof lK)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new lK(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new lK(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let lJ=2*Math.PI*lY;function lQ(t){return lJ*Math.cos(t*Math.PI/180)}function l0(t){return(180+t)/360}function l1(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function l2(t,e){return t/lQ(e)}function l6(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class l3{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){let i=lK.convert(t);return new l3(l0(i.lng),l1(i.lat),l2(e,i.lat))}toLngLat(){return new lK(360*this.x-180,l6(this.y))}toAltitude(){return this.z*lQ(l6(this.y))}meterInMercatorCoordinateUnits(){return 1/lJ*(1/Math.cos(l6(this.y)*Math.PI/180))}}function l8(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class l4{constructor(t,e,i){if(t<0||t>25||i<0||i>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))throw Error(`x=${e}, y=${i}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=i,this.key=l9(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,i){var r,n,o,a,s;let l=(n=this.y,o=this.z,a=l8(256*(r=this.x),256*(n=Math.pow(2,o)-n-1),o),s=l8(256*(r+1),256*(n+1),o),a[0]+","+a[1]+","+s[0]+","+s[1]),h=function(t,e,i){let r,n="";for(let o=t;o>0;o--)n+=(e&(r=1<<o-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,h).replace(/{bbox-epsg-3857}/g,l)}isChildOf(t){let e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){let e=Math.pow(2,this.z);return new E((t.x*e-this.x)*o0,(t.y*e-this.y)*o0)}toString(){return`${this.z}/${this.x}/${this.y}`}}class l5{constructor(t,e){this.wrap=t,this.canonical=e,this.key=l9(t,e.z,e.z,e.x,e.y)}}class l7{constructor(t,e,i,r,n){if(t<i)throw Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${i}`);this.overscaledZ=t,this.wrap=e,this.canonical=new l4(i,+r,+n),this.key=l9(e,t,i,r,n)}clone(){return new l7(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let e=this.canonical.z-t;return t>this.canonical.z?new l7(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new l7(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let i=this.canonical.z-t;return t>this.canonical.z?l9(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):l9(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(t){if(t.wrap!==this.wrap)return!1;let e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new l7(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new l7(e,this.wrap,e,i,r),new l7(e,this.wrap,e,i+1,r),new l7(e,this.wrap,e,i,r+1),new l7(e,this.wrap,e,i+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new l7(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new l7(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new l5(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new l3(t.x-this.wrap,t.y))}}function l9(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);let o=1<<i;return(o*o*t+o*n+r).toString(36)+i.toString(36)+e.toString(36)}nt("CanonicalTileID",l4),nt("OverscaledTileID",l7,{omit:["posMatrix"]});class ht{constructor(t,e,i,r=1,n=1,o=1,a=0){if(this.uid=t,e.height!==e.width)throw RangeError("DEM tiles must be square");if(i&&!["mapbox","terrarium","custom"].includes(i))return void U(`"${i}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=e.height;let s=this.dim=e.height-2;switch(this.data=new Uint32Array(e.data.buffer),i){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=r,this.greenFactor=n,this.blueFactor=o,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let t=0;t<s;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(s,t)]=this.data[this._idx(s-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,s)]=this.data[this._idx(t,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let t=0;t<s;t++)for(let e=0;e<s;e++){let i=this.get(t,e);i>this.max&&(this.max=i),i<this.min&&(this.min=i)}}get(t,e){let i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return this.unpack(i[r],i[r+1],i[r+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}unpack(t,e,i){return t*this.redFactor+e*this.greenFactor+i*this.blueFactor-this.baseShift}getPixels(){return new aI({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw Error("dem dimension mismatch");let r=e*this.dim,n=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case -1:r=n-1;break;case 1:n=r+1}switch(i){case -1:o=a-1;break;case 1:a=o+1}let s=-e*this.dim,l=-i*this.dim;for(let e=o;e<a;e++)for(let i=r;i<n;i++)this.data[this._idx(i,e)]=t.data[this._idx(i+s,e+l)]}}nt("DEMData",ht);class he{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){let i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class hi{constructor(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){let t={geometry:this.geometry};for(let e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class hr{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new r7(o0,16,0),this.grid3D=new r7(o0,16,0),this.featureIndexArray=new oh,this.promoteId=e}insert(t,e,i,r,n,o){let a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);let s=o?this.grid3D:this.grid;for(let t=0;t<e.length;t++){let i=e[t],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<i.length;t++){let e=i[t];r[0]=Math.min(r[0],e.x),r[1]=Math.min(r[1],e.y),r[2]=Math.max(r[2],e.x),r[3]=Math.max(r[3],e.y)}r[0]<o0&&r[1]<o0&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new si.VectorTile(new lt(this.rawTileData)).layers,this.sourceLayerCoder=new he(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,r){let n;this.loadVTLayers();let o=t.params||{},a=o0/t.tileSize/t.scale,s=ry(o.filter),l=t.queryGeometry,h=t.queryPadding*a,u=ho(l),c=this.grid.query(u.minX-h,u.minY-h,u.maxX+h,u.maxY+h),f=ho(t.cameraQueryGeometry);for(let e of this.grid3D.query(f.minX-h,f.minY-h,f.maxX+h,f.maxY+h,(e,i,r,n)=>(function(t,e,i,r,n){for(let o of t)if(e<=o.x&&i<=o.y&&r>=o.x&&n>=o.y)return!0;let o=[new E(e,i),new E(e,n),new E(r,n),new E(r,i)];if(t.length>2){for(let e of o)if(aa(t,e))return!0}for(let e=0;e<t.length-1;e++)if(as(t[e],t[e+1],o))return!0;return!1})(t.cameraQueryGeometry,e-h,i-h,r+h,n+h)))c.push(e);c.sort(ha);let d={};for(let h=0;h<c.length;h++){let u=c[h];if(u===n)continue;n=u;let f=this.featureIndexArray.get(u),p=null;this.loadMatchingFeature(d,f.bucketIndex,f.sourceLayerIndex,f.featureIndex,s,o.layers,o.availableImages,e,i,r,(e,i,r)=>(p||(p=o6(e)),i.queryIntersectsFeature(l,e,r,p,this.z,t.transform,a,t.pixelPosMatrix)))}return d}loadMatchingFeature(t,e,i,r,n,o,a,s,l,h,u){let c=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,c))return;let f=this.sourceLayerCoder.decode(i),d=this.vtLayers[f].feature(r);if(n.needGeometry){let t=o3(d,!0);if(!n.filter(new ny(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new ny(this.tileID.overscaledZ),d))return;let p=this.getId(d,f);for(let e=0;e<c.length;e++){let i=c[e];if(o&&0>o.indexOf(i))continue;let n=s[i];if(!n)continue;let f={};p&&h&&(f=h.getState(n.sourceLayer||"_geojsonTileLayer",p));let m=D({},l[i]);m.paint=hn(m.paint,n.paint,d,f,a),m.layout=hn(m.layout,n.layout,d,f,a);let g=!u||u(d,n,f);if(!g)continue;let y=new hi(d,this.z,this.x,this.y,p);y.layer=m;let v=t[i];void 0===v&&(v=t[i]=[]),v.push({featureIndex:r,feature:y,intersectionZ:g})}}lookupSymbolFeatures(t,e,i,r,n,o,a,s){let l={};this.loadVTLayers();let h=ry(n);for(let n of t)this.loadMatchingFeature(l,i,r,n,h,o,a,s,e);return l}hasLayer(t){for(let e of this.bucketLayerIDs)for(let i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i}}function hn(t,e,i,r,n){return F(t,(t,o)=>{let a=e instanceof nk?e.get(o):null;return a&&a.evaluate?a.evaluate(i,r,n):a})}function ho(t){let e=1/0,i=1/0,r=-1/0,n=-1/0;for(let o of t)e=Math.min(e,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return{minX:e,minY:i,maxX:r,maxY:n}}function ha(t,e){return e-t}function hs(t,e,i,r,n){let o=[];for(let a=0;a<t.length;a++){let s;let l=t[a];for(let t=0;t<l.length-1;t++){let a=l[t],h=l[t+1];a.x<e&&h.x<e||(a.x<e?a=new E(e,a.y+(e-a.x)/(h.x-a.x)*(h.y-a.y))._round():h.x<e&&(h=new E(e,a.y+(e-a.x)/(h.x-a.x)*(h.y-a.y))._round()),a.y<i&&h.y<i||(a.y<i?a=new E(a.x+(i-a.y)/(h.y-a.y)*(h.x-a.x),i)._round():h.y<i&&(h=new E(a.x+(i-a.y)/(h.y-a.y)*(h.x-a.x),i)._round()),a.x>=r&&h.x>=r||(a.x>=r?a=new E(r,a.y+(r-a.x)/(h.x-a.x)*(h.y-a.y))._round():h.x>=r&&(h=new E(r,a.y+(r-a.x)/(h.x-a.x)*(h.y-a.y))._round()),a.y>=n&&h.y>=n||(a.y>=n?a=new E(a.x+(n-a.y)/(h.y-a.y)*(h.x-a.x),n)._round():h.y>=n&&(h=new E(a.x+(n-a.y)/(h.y-a.y)*(h.x-a.x),n)._round()),s&&a.equals(s[s.length-1])||(s=[a],o.push(s)),s.push(h)))))}}return o}nt("FeatureIndex",hr,{omit:["rawTileData","sourceLayerCoder"]});class hl extends E{constructor(t,e,i,r){super(t,e),this.angle=i,void 0!==r&&(this.segment=r)}clone(){return new hl(this.x,this.y,this.angle,this.segment)}}function hh(t,e,i,r,n){if(void 0===e.segment||0===i)return!0;let o=e,a=e.segment+1,s=0;for(;s>-i/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;let l=[],h=0;for(;s<i/2;){let e=t[a],i=t[a+1];if(!i)return!1;let o=t[a-1].angleTo(e)-e.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),h+=o;s-l[0].distance>r;)h-=l.shift().angleDelta;if(h>n)return!1;a++,s+=e.dist(i)}return!0}function hu(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function hc(t,e,i){return t?.6*e*i:0}function hf(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function hd(t,e,i,r,n,o){let a=hc(i,n,o),s=hf(i,r)*o,l=0,h=hu(t)/2;for(let i=0;i<t.length-1;i++){let r=t[i],n=t[i+1],o=r.dist(n);if(l+o>h){let u=(h-l)/o,c=new hl(eB.number(r.x,n.x,u),eB.number(r.y,n.y,u),n.angleTo(r),i);return c._round(),!a||hh(t,c,s,a,e)?c:void 0}l+=o}}function hp(t,e,i,r,n,o,a,s,l){let h=hc(r,o,a),u=hf(r,n),c=u*a,f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-c<e/4&&(e=c+e/4),hm(t,f?e/2*s%e:(u/2+2*o)*a*s%e,e,h,i,c,f,!1,l)}function hm(t,e,i,r,n,o,a,s,l){let h=o/2,u=hu(t),c=0,f=e-i,d=[];for(let e=0;e<t.length-1;e++){let a=t[e],s=t[e+1],p=a.dist(s),m=s.angleTo(a);for(;f+i<c+p;){let g=((f+=i)-c)/p,y=eB.number(a.x,s.x,g),v=eB.number(a.y,s.y,g);if(y>=0&&y<l&&v>=0&&v<l&&f-h>=0&&f+h<=u){let i=new hl(y,v,m,e);i._round(),r&&!hh(t,i,o,r,n)||d.push(i)}}c+=p}return s||d.length||a||(d=hm(t,c/2,i,r,n,o,a,!0,l)),d}nt("Anchor",hl);let hg=ls;function hy(t,e,i,r){let n=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*hg,l=o.paddedRect.h-2*hg,h={x1:t.left,y1:t.top,x2:t.right,y2:t.bottom},u=o.stretchX||[[0,s]],c=o.stretchY||[[0,l]],f=(t,e)=>t+e[1]-e[0],d=u.reduce(f,0),p=c.reduce(f,0),m=s-d,g=l-p,y=0,v=d,_=0,b=p,x=0,w=m,M=0,S=g;if(o.content&&r){let e=o.content,i=e[2]-e[0],r=e[3]-e[1];(o.textFitWidth||o.textFitHeight)&&(h=lE(t)),y=hv(u,0,e[0]),_=hv(c,0,e[1]),v=hv(u,e[0],e[2]),b=hv(c,e[1],e[3]),x=e[0]-y,M=e[1]-_,w=i-v,S=r-b}let k=h.x1,I=h.y1,P=h.x2-k,T=h.y2-I,A=(t,r,n,s)=>{let l=hb(t.stretch-y,v,P,k),h=hx(t.fixed-x,w,t.stretch,d),u=hb(r.stretch-_,b,T,I),c=hx(r.fixed-M,S,r.stretch,p),f=hb(n.stretch-y,v,P,k),m=hx(n.fixed-x,w,n.stretch,d),g=hb(s.stretch-_,b,T,I),A=hx(s.fixed-M,S,s.stretch,p),C=new E(l,u),R=new E(f,u),N=new E(f,g),z=new E(l,g),O=new E(h/a,c/a),D=new E(m/a,A/a),B=e*Math.PI/180;if(B){let t=Math.sin(B),e=Math.cos(B),i=[e,-t,t,e];C._matMult(i),R._matMult(i),z._matMult(i),N._matMult(i)}let F=t.stretch+t.fixed,j=r.stretch+r.fixed;return{tl:C,tr:R,bl:z,br:N,tex:{x:o.paddedRect.x+hg+F,y:o.paddedRect.y+hg+j,w:n.stretch+n.fixed-F,h:s.stretch+s.fixed-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:D,minFontScaleX:w/a/P,minFontScaleY:S/a/T,isSDF:i}};if(r&&(o.stretchX||o.stretchY)){let t=h_(u,m,d),e=h_(c,g,p);for(let i=0;i<t.length-1;i++){let r=t[i],o=t[i+1];for(let t=0;t<e.length-1;t++)n.push(A(r,e[t],o,e[t+1]))}}else n.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return n}function hv(t,e,i){let r=0;for(let n of t)r+=Math.max(e,Math.min(i,n[1]))-Math.max(e,Math.min(i,n[0]));return r}function h_(t,e,i){let r=[{fixed:-hg,stretch:0}];for(let[e,i]of t){let t=r[r.length-1];r.push({fixed:e-t.stretch,stretch:t.stretch}),r.push({fixed:e-t.stretch,stretch:t.stretch+(i-e)})}return r.push({fixed:e+hg,stretch:i}),r}function hb(t,e,i,r){return t/e*i+r}function hx(t,e,i,r){return t-e*i/r}class hw{constructor(t,e,i,r,n,o,a,s,l,h){var u;if(this.boxStartIndex=t.length,l){let t=o.top,e=o.bottom,i=o.collisionPadding;i&&(t-=i[1],e+=i[3]);let r=e-t;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=(null===(u=o.image)||void 0===u?void 0:u.content)&&(o.image.textFitWidth||o.image.textFitHeight)?lE(o):{x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};l.y1=l.y1*a-s[0],l.y2=l.y2*a+s[2],l.x1=l.x1*a-s[3],l.x2=l.x2*a+s[1];let c=o.collisionPadding;if(c&&(l.x1-=c[0]*a,l.y1-=c[1]*a,l.x2+=c[2]*a,l.y2+=c[3]*a),h){let t=new E(l.x1,l.y1),e=new E(l.x2,l.y1),i=new E(l.x1,l.y2),r=new E(l.x2,l.y2),n=h*Math.PI/180;t._rotate(n),e._rotate(n),i._rotate(n),r._rotate(n),l.x1=Math.min(t.x,e.x,i.x,r.x),l.x2=Math.max(t.x,e.x,i.x,r.x),l.y1=Math.min(t.y,e.y,i.y,r.y),l.y2=Math.max(t.y,e.y,i.y,r.y)}t.emplaceBack(e.x,e.y,l.x1,l.y1,l.x2,l.y2,i,r,n)}this.boxEndIndex=t.length}}class hM{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(0===this.length)return;let t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:e,compare:i}=this,r=e[t];for(;t>0;){let n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}_down(t){let{data:e,compare:i}=this,r=this.length>>1,n=e[t];for(;t<r;){let r=1+(t<<1),o=r+1;if(o<this.length&&0>i(e[o],e[r])&&(r=o),i(e[r],n)>=0)break;e[t]=e[r],t=r}e[t]=n}}function hS(t,e=1,i=!1){let r=1/0,n=1/0,o=-1/0,a=-1/0,s=t[0];for(let t=0;t<s.length;t++){let e=s[t];(!t||e.x<r)&&(r=e.x),(!t||e.y<n)&&(n=e.y),(!t||e.x>o)&&(o=e.x),(!t||e.y>a)&&(a=e.y)}let l=Math.min(o-r,a-n),h=l/2,u=new hM([],hk);if(0===l)return new E(r,n);for(let e=r;e<o;e+=l)for(let i=n;i<a;i+=l)u.push(new hE(e+h,i+h,h,t));let c=function(t){let e=0,i=0,r=0,n=t[0];for(let t=0,o=n.length,a=o-1;t<o;a=t++){let o=n[t],s=n[a],l=o.x*s.y-s.x*o.y;i+=(o.x+s.x)*l,r+=(o.y+s.y)*l,e+=3*l}return new hE(i/e,r/e,0,t)}(t),f=u.length;for(;u.length;){let r=u.pop();(r.d>c.d||!c.d)&&(c=r,i&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,f)),r.max-c.d<=e||(h=r.h/2,u.push(new hE(r.p.x-h,r.p.y-h,h,t)),u.push(new hE(r.p.x+h,r.p.y-h,h,t)),u.push(new hE(r.p.x-h,r.p.y+h,h,t)),u.push(new hE(r.p.x+h,r.p.y+h,h,t)),f+=4)}return i&&(console.log(`num probes: ${f}`),console.log(`best distance: ${c.d}`)),c.p}function hk(t,e){return e.max-t.max}function hE(t,e,i,r){this.p=new E(t,e),this.h=i,this.d=function(t,e){let i=!1,r=1/0;for(let n=0;n<e.length;n++){let o=e[n];for(let e=0,n=o.length,a=n-1;e<n;a=e++){let n=o[e],s=o[a];n.y>t.y!=s.y>t.y&&t.x<(s.x-n.x)*(t.y-n.y)/(s.y-n.y)+n.x&&(i=!i),r=Math.min(r,an(t,n,s))}}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}t.ar=void 0,(w=t.ar||(t.ar={}))[w.center=1]="center",w[w.left=2]="left",w[w.right=3]="right",w[w.top=4]="top",w[w.bottom=5]="bottom",w[w["top-left"]=6]="top-left",w[w["top-right"]=7]="top-right",w[w["bottom-left"]=8]="bottom-left",w[w["bottom-right"]=9]="bottom-right";let hI=7,hP=Number.POSITIVE_INFINITY;function hT(t,e){return e[1]!==hP?function(t,e,i){let r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-hI;break;case"bottom-right":case"bottom-left":case"bottom":n=-i+hI}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){let i=0,r=0;e<0&&(e=0);let n=e/Math.SQRT2;switch(t){case"top-right":case"top-left":r=n-hI;break;case"bottom-right":case"bottom-left":r=-n+hI;break;case"bottom":r=-e+hI;break;case"top":r=e-hI}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function hA(t,e,i){var r;let n=t.layout,o=null===(r=n.get("text-variable-anchor-offset"))||void 0===r?void 0:r.evaluate(e,{},i);if(o){let t=o.values,e=[];for(let i=0;i<t.length;i+=2){let r=e[i]=t[i],n=t[i+1].map(t=>t*sq);r.startsWith("top")?n[1]-=hI:r.startsWith("bottom")&&(n[1]+=hI),e[i+1]=n}return new es(e)}let a=n.get("text-variable-anchor");if(a){let r;r=void 0!==t._unevaluatedLayout.getValue("text-radial-offset")?[n.get("text-radial-offset").evaluate(e,{},i)*sq,hP]:n.get("text-offset").evaluate(e,{},i).map(t=>t*sq);let o=[];for(let t of a)o.push(t,hT(t,r));return new es(o)}return null}function hC(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hL(e,i,r,n,o,a,s,l,h,u,c){let f,d=a.textMaxSize.evaluate(i,{});void 0===d&&(d=s);let p=e.layers[0].layout,m=p.get("icon-offset").evaluate(i,{},c),g=hN(r.horizontal),y=s/24,v=e.tilePixelRatio*y,_=e.tilePixelRatio*d/24,b=e.tilePixelRatio*l,x=e.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*e.tilePixelRatio,M=function(t,e,i,r=1){let n=t.get("icon-padding").evaluate(e,{},i),o=n&&n.values;return[o[0]*r,o[1]*r,o[2]*r,o[3]*r]}(p,i,c,e.tilePixelRatio),S=p.get("text-max-angle")/180*Math.PI,k="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),I=p.get("symbol-placement"),P=x/2,T=p.get("icon-text-fit");n&&"none"!==T&&(e.allowVerticalPlacement&&r.vertical&&(f=lI(n,r.vertical,T,p.get("icon-text-fit-padding"),m,y)),g&&(n=lI(n,g,T,p.get("icon-text-fit-padding"),m,y)));let A=(l,d)=>{d.x<0||d.x>=o0||d.y<0||d.y>=o0||function(e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b,x,w,M,S,k){let E=e.addToLineVertexArray(i,r),I,P,T,A,C=0,R=0,N=0,z=0,O=-1,D=-1,B={},F=oN("");if(e.allowVerticalPlacement&&n.vertical){let t=l.layout.get("text-rotate").evaluate(x,{},S)+90;T=new hw(h,i,u,c,f,n.vertical,d,p,m,t),s&&(A=new hw(h,i,u,c,f,s,y,v,m,t))}if(o){let r=l.layout.get("icon-rotate").evaluate(x,{}),n="none"!==l.layout.get("icon-text-fit"),a=hy(o,r,M,n),d=s?hy(s,r,M,n):void 0;P=new hw(h,i,u,c,f,o,y,v,!1,r),C=4*a.length;let p=e.iconSizeData,m=null;"source"===p.kind?(m=[lT*l.layout.get("icon-size").evaluate(x,{})])[0]>lA&&U(`${e.layerIds[0]}: Value for "icon-size" is >= ${lP}. Reduce your "icon-size".`):"composite"===p.kind&&((m=[lT*w.compositeIconSizes[0].evaluate(x,{},S),lT*w.compositeIconSizes[1].evaluate(x,{},S)])[0]>lA||m[1]>lA)&&U(`${e.layerIds[0]}: Value for "icon-size" is >= ${lP}. Reduce your "icon-size".`),e.addSymbols(e.icon,a,m,b,_,x,t.ai.none,i,E.lineStartIndex,E.lineLength,-1,S),O=e.icon.placedSymbolArray.length-1,d&&(R=4*d.length,e.addSymbols(e.icon,d,m,b,_,x,t.ai.vertical,i,E.lineStartIndex,E.lineLength,-1,S),D=e.icon.placedSymbolArray.length-1)}let j=Object.keys(n.horizontal);for(let r of j){let o=n.horizontal[r];!I&&(F=oN(o.text),I=new hw(h,i,u,c,f,o,d,p,m,l.layout.get("text-rotate").evaluate(x,{},S)));let s=1===o.positionedLines.length;if(N+=hR(e,i,o,a,l,m,x,g,E,n.vertical?t.ai.horizontal:t.ai.horizontalOnly,s?j:[r],B,O,w,S),s)break}n.vertical&&(z+=hR(e,i,n.vertical,a,l,m,x,g,E,t.ai.vertical,["vertical"],B,D,w,S));let q=I?I.boxStartIndex:e.collisionBoxArray.length,V=I?I.boxEndIndex:e.collisionBoxArray.length,Z=T?T.boxStartIndex:e.collisionBoxArray.length,G=T?T.boxEndIndex:e.collisionBoxArray.length,H=P?P.boxStartIndex:e.collisionBoxArray.length,W=P?P.boxEndIndex:e.collisionBoxArray.length,X=A?A.boxStartIndex:e.collisionBoxArray.length,$=A?A.boxEndIndex:e.collisionBoxArray.length,Y=-1,K=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;Y=K(I,-1),Y=K(T,Y),Y=K(P,Y);let J=(Y=K(A,Y))>-1?1:0;J&&(Y*=k/sq),e.glyphOffsetArray.length>=lj.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey);let Q=hA(l,x,S),[tt,te]=function(e,i){let r=e.length,n=null==i?void 0:i.values;if((null==n?void 0:n.length)>0)for(let i=0;i<n.length;i+=2){let r=n[i+1];e.emplaceBack(t.ar[n[i]],r[0],r[1])}return[r,e.length]}(e.textAnchorOffsets,Q);e.symbolInstances.emplaceBack(i.x,i.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical||-1,O,D,F,q,V,Z,G,H,W,X,$,u,N,z,C,R,J,0,d,Y,tt,te)}(e,d,l,r,n,o,f,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,v,[w,w,w,w],k,h,b,M,E,m,i,a,u,c,s)};if("line"===I)for(let t of hs(i.geometry,0,0,o0,o0))for(let i of hp(t,x,S,r.vertical||g,n,24,_,e.overscaling,o0))g&&hz(e,g.text,P,i)||A(t,i);else if("line-center"===I){for(let t of i.geometry)if(t.length>1){let e=hd(t,S,r.vertical||g,n,24,_);e&&A(t,e)}}else if("Polygon"===i.type)for(let t of i_(i.geometry,0)){let e=hS(t,16);A(t[0],new hl(e.x,e.y,0))}else if("LineString"===i.type)for(let t of i.geometry)A(t,new hl(t[0].x,t[0].y,0));else if("Point"===i.type)for(let t of i.geometry)for(let e of t)A([e],new hl(e.x,e.y,0))}function hR(t,e,i,r,n,o,a,s,l,h,u,c,f,d,p){let m=function(t,e,i,r,n,o,a,s){let l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,h=[];for(let t of e.positionedLines)for(let r of t.positionedGlyphs){if(!r.rect)continue;let o=r.rect||{},u=lo+1,c=!0,f=1,d=0,p=(n||s)&&r.vertical,m=r.metrics.advance*r.scale/2;if(s&&e.verticalizable&&(d=t.lineOffset/2-(r.imageName?-(sq-r.metrics.width*r.scale)/2:(r.scale-1)*sq)),r.imageName){let t=a[r.imageName];c=t.sdf,u=ls/(f=t.pixelRatio)}let g=n?[r.x+m,r.y]:[0,0],y=n?[0,0]:[r.x+m+i[0],r.y+i[1]-d],v=[0,0];p&&(v=y,y=[0,0]);let _=r.metrics.isDoubleResolution?2:1,b=(r.metrics.left-u)*r.scale-m+y[0],x=(-r.metrics.top-u)*r.scale+y[1],w=b+o.w/_*r.scale/f,M=x+o.h/_*r.scale/f,S=new E(b,x),k=new E(w,x),I=new E(b,M),P=new E(w,M);if(p){let t=new E(-m,m-lu),e=-Math.PI/2,i=sq/2-m,n=new E(5-lu-i,-(r.imageName?i:0)),o=new E(...v);S._rotateAround(e,t)._add(n)._add(o),k._rotateAround(e,t)._add(n)._add(o),I._rotateAround(e,t)._add(n)._add(o),P._rotateAround(e,t)._add(n)._add(o)}if(l){let t=Math.sin(l),e=Math.cos(l),i=[e,-t,t,e];S._matMult(i),k._matMult(i),I._matMult(i),P._matMult(i)}let T=new E(0,0),A=new E(0,0);h.push({tl:S,tr:k,bl:I,br:P,tex:o,writingMode:e.writingMode,glyphOffset:g,sectionIndex:r.sectionIndex,isSDF:c,pixelOffsetTL:T,pixelOffsetBR:A,minFontScaleX:0,minFontScaleY:0})}return h}(0,i,s,n,o,a,r,t.allowVerticalPlacement),g=t.textSizeData,y=null;for(let i of("source"===g.kind?(y=[lT*n.layout.get("text-size").evaluate(a,{})])[0]>lA&&U(`${t.layerIds[0]}: Value for "text-size" is >= ${lP}. Reduce your "text-size".`):"composite"===g.kind&&((y=[lT*d.compositeTextSizes[0].evaluate(a,{},p),lT*d.compositeTextSizes[1].evaluate(a,{},p)])[0]>lA||y[1]>lA)&&U(`${t.layerIds[0]}: Value for "text-size" is >= ${lP}. Reduce your "text-size".`),t.addSymbols(t.text,m,y,s,o,a,h,e,l.lineStartIndex,l.lineLength,f,p),u))c[i]=t.text.placedSymbolArray.length-1;return 4*m.length}function hN(t){for(let e in t)return t[e];return null}function hz(t,e,i,r){let n=t.compareText;if(e in n){let t=n[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<i)return!0}else n[e]=[];return n[e].push(r),!1}let hO=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hD{static from(t){if(!(t instanceof ArrayBuffer))throw Error("Data must be an instance of ArrayBuffer.");let[e,i]=new Uint8Array(t,0,2);if(219!==e)throw Error("Data does not appear to be in a KDBush format.");let r=i>>4;if(1!==r)throw Error(`Got v${r} data when expected v1.`);let n=hO[15&i];if(!n)throw Error("Unrecognized array type.");let[o]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new hD(a,o,n,t)}constructor(t,e=64,i=Float64Array,r){if(isNaN(t)||t<0)throw Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;let n=hO.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(n<0)throw Error(`Unexpected typed array class: ${i}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){let i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=e,i}finish(){let t=this._pos>>1;if(t!==this.numItems)throw Error(`Added ${t} items when expected ${this.numItems}.`);return hB(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,i,r){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:n,coords:o,nodeSize:a}=this,s=[0,n.length-1,0],l=[];for(;s.length;){let h=s.pop()||0,u=s.pop()||0,c=s.pop()||0;if(u-c<=a){for(let a=c;a<=u;a++){let s=o[2*a],h=o[2*a+1];s>=t&&s<=i&&h>=e&&h<=r&&l.push(n[a])}continue}let f=c+u>>1,d=o[2*f],p=o[2*f+1];d>=t&&d<=i&&p>=e&&p<=r&&l.push(n[f]),(0===h?t<=d:e<=p)&&(s.push(c),s.push(f-1),s.push(1-h)),(0===h?i>=d:r>=p)&&(s.push(f+1),s.push(u),s.push(1-h))}return l}within(t,e,i){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:r,coords:n,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=i*i;for(;a.length;){let h=a.pop()||0,u=a.pop()||0,c=a.pop()||0;if(u-c<=o){for(let i=c;i<=u;i++)hV(n[2*i],n[2*i+1],t,e)<=l&&s.push(r[i]);continue}let f=c+u>>1,d=n[2*f],p=n[2*f+1];hV(d,p,t,e)<=l&&s.push(r[f]),(0===h?t-i<=d:e-i<=p)&&(a.push(c),a.push(f-1),a.push(1-h)),(0===h?t+i>=d:e+i>=p)&&(a.push(f+1),a.push(u),a.push(1-h))}return s}}function hB(t,e,i,r,n,o){if(n-r<=i)return;let a=r+n>>1;hF(t,e,a,r,n,o),hB(t,e,i,r,a-1,1-o),hB(t,e,i,a+1,n,1-o)}function hF(t,e,i,r,n,o){for(;n>r;){if(n-r>600){let a=n-r+1,s=i-r+1,l=Math.log(a),h=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*h*(a-h)/a)*(s-a/2<0?-1:1);hF(t,e,i,Math.max(r,Math.floor(i-s*h/a+u)),Math.min(n,Math.floor(i+(a-s)*h/a+u)),o)}let a=e[2*i+o],s=r,l=n;for(hj(t,e,r,i),e[2*n+o]>a&&hj(t,e,r,n);s<l;){for(hj(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?hj(t,e,r,l):hj(t,e,++l,n),l<=i&&(r=l+1),i<=l&&(n=l-1)}}function hj(t,e,i,r){hq(t,i,r),hq(e,2*i,2*r),hq(e,2*i+1,2*r+1)}function hq(t,e,i){let r=t[e];t[e]=t[i],t[i]=r}function hV(t,e,i,r){let n=t-i,o=e-r;return n*n+o*o}t.bf=void 0,(M=t.bf||(t.bf={})).create="create",M.load="load",M.fullLoad="fullLoad";let hU=null,hZ=[],hG=1e3/60,hH="loadTime",hW="fullLoadTime",hX={mark(t){performance.mark(t)},frame(t){let e=t;null!=hU&&hZ.push(e-hU),hU=e},clearMetrics(){for(let e in hU=null,hZ=[],performance.clearMeasures(hH),performance.clearMeasures(hW),t.bf)performance.clearMarks(t.bf[e])},getPerformanceMetrics(){performance.measure(hH,t.bf.create,t.bf.load),performance.measure(hW,t.bf.create,t.bf.fullLoad);let e=performance.getEntriesByName(hH)[0].duration,i=performance.getEntriesByName(hW)[0].duration,r=hZ.length,n=1/(hZ.reduce((t,e)=>t+e,0)/r/1e3),o=hZ.filter(t=>t>hG).reduce((t,e)=>t+(e-hG)/hG,0);return{loadTime:e,fullLoadTime:i,fps:n,percentDroppedFrames:o/(r+o)*100,totalFrames:r}}};t.$=class extends nq{},t.A=ad,t.B=r3,t.C=function(t){if(null==H){let e=t.navigator?t.navigator.userAgent:null;H=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return H},t.D=nE,t.E=th,t.F=class{constructor(t,e){this.target=t,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new l$(()=>this.process()),this.subscription=function(t,e,i,r){return t.addEventListener(e,i,!1),{unsubscribe:()=>{t.removeEventListener(e,i,!1)}}}(this.target,"message",t=>this.receive(t)),this.globalScope=G(self)?t:window}registerMessageHandler(t,e){this.messageHandlers[t]=e}sendAsync(t,e){return new Promise((i,r)=>{let n=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[n]={resolve:i,reject:r},e&&e.signal.addEventListener("abort",()=>{delete this.resolveRejects[n];let e={id:n,type:"<cancel>",origin:location.origin,targetMapId:t.targetMapId,sourceMapId:this.mapId};this.target.postMessage(e)},{once:!0});let o=[],a=Object.assign(Object.assign({},t),{id:n,sourceMapId:this.mapId,origin:location.origin,data:nn(t.data,o)});this.target.postMessage(a,{transfer:o})})}receive(t){let e=t.data,i=e.id;if(!("file://"!==e.origin&&"file://"!==location.origin&&"resource://android"!==e.origin&&"resource://android"!==location.origin&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if("<cancel>"===e.type){delete this.tasks[i];let t=this.abortControllers[i];return delete this.abortControllers[i],void(t&&t.abort())}if(G(self)||e.mustQueue)return this.tasks[i]=e,this.taskQueue.push(i),void this.invoker.trigger();this.processTask(i,e)}}process(){if(0===this.taskQueue.length)return;let t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){return _(this,void 0,void 0,function*(){if("<response>"===e.type){let i=this.resolveRejects[t];if(delete this.resolveRejects[t],!i)return;return void(e.error?i.reject(no(e.error)):i.resolve(no(e.data)))}if(!this.messageHandlers[e.type])return void this.completeTask(t,Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let i=no(e.data),r=new AbortController;this.abortControllers[t]=r;try{let n=yield this.messageHandlers[e.type](e.sourceMapId,i,r);this.completeTask(t,null,n)}catch(e){this.completeTask(t,e)}})}completeTask(t,e,i){let r=[];delete this.abortControllers[t];let n={id:t,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?nn(e):null,data:nn(i,r)};this.target.postMessage(n,{transfer:r})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},t.G=tt,t.H=function(){var t=new ad(16);return ad!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.I=ll,t.J=function(t,e,i){var r,n,o,a,s,l,h,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],h=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],t[0]=r=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=h,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=r*m+s*g+c*y+e[12],t[13]=n*m+l*g+f*y+e[13],t[14]=o*m+h*g+d*y+e[14],t[15]=a*m+u*g+p*y+e[15]),t},t.K=function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.L=am,t.M=function(t,e){let i={};for(let r=0;r<e.length;r++){let n=e[r];n in t&&(i[n]=t[n])}return i},t.N=lK,t.O=l0,t.P=E,t.Q=l1,t.R=aI,t.S=l7,t.T=nb,t.U=A,t.V=C,t.W=$,t.X=o0,t.Y=nD,t.Z=l3,t._=_,t.a=J,t.a$=function(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],h=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=e[0],_=e[1],b=e[2],x=e[3],w=e[4],M=e[5],S=e[6],k=e[7],E=e[8],I=e[9],P=e[10],T=e[11],A=e[12],C=e[13],R=e[14],N=e[15];return Math.abs(i-v)<=af*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-_)<=af*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-b)<=af*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-x)<=af*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=af*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-M)<=af*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-S)<=af*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-k)<=af*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(u-E)<=af*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-I)<=af*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-P)<=af*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-T)<=af*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-A)<=af*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-C)<=af*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(g-R)<=af*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-N)<=af*Math.max(1,Math.abs(y),Math.abs(N))},t.a0=ok,t.a1=l4,t.a2=tw,t.a3=t=>{let e=window.document.createElement("video");return e.muted=!0,new Promise(i=>{for(let r of(e.onloadstart=()=>{i(e)},t)){let t=window.document.createElement("source");tn(r)||(e.crossOrigin="Anonymous"),t.src=r,e.appendChild(t)}})},t.a4=function(){return B++},t.a5=n9,t.a6=lj,t.a7=ry,t.a8=o3,t.a9=ny,t.aA=function(t){t=t.slice();let e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=tf(t[i],e[t[i].ref]));return t},t.aB=function(t){if("custom"===t.type)return new lX(t);switch(t.type){case"background":return new lG(t);case"circle":return new a_(t);case"fill":return new a7(t);case"fill-extrusion":return new sx(t);case"heatmap":return new aT(t);case"hillshade":return new aC(t);case"line":return new sL(t);case"raster":return new lW(t);case"symbol":return new lU(t)}},t.aC=q,t.aD=function(t,e){if(!t)return[{command:"setStyle",args:[e]}];let i=[];try{if(!td(t.version,e.version))return[{command:"setStyle",args:[e]}];td(t.center,e.center)||i.push({command:"setCenter",args:[e.center]}),td(t.zoom,e.zoom)||i.push({command:"setZoom",args:[e.zoom]}),td(t.bearing,e.bearing)||i.push({command:"setBearing",args:[e.bearing]}),td(t.pitch,e.pitch)||i.push({command:"setPitch",args:[e.pitch]}),td(t.sprite,e.sprite)||i.push({command:"setSprite",args:[e.sprite]}),td(t.glyphs,e.glyphs)||i.push({command:"setGlyphs",args:[e.glyphs]}),td(t.transition,e.transition)||i.push({command:"setTransition",args:[e.transition]}),td(t.light,e.light)||i.push({command:"setLight",args:[e.light]}),td(t.terrain,e.terrain)||i.push({command:"setTerrain",args:[e.terrain]}),td(t.sky,e.sky)||i.push({command:"setSky",args:[e.sky]}),td(t.projection,e.projection)||i.push({command:"setProjection",args:[e.projection]});let r={},n=[];!function(t,e,i,r){let n;for(n in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)||tg(n,i,r));for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(Object.prototype.hasOwnProperty.call(t,n)?td(t[n],e[n])||("geojson"===t[n].type&&"geojson"===e[n].type&&tv(t,e,n)?tp(i,{command:"setGeoJSONSourceData",args:[n,e[n].data]}):ty(n,e,i,r)):tm(n,e,i))}(t.sources,e.sources,n,r);let o=[];t.layers&&t.layers.forEach(t=>{"source"in t&&r[t.source]?i.push({command:"removeLayer",args:[t.id]}):o.push(t)}),i=i.concat(n),function(t,e,i){let r,n,o,a,s;e=e||[];let l=(t=t||[]).map(tb),h=e.map(tb),u=t.reduce(tx,{}),c=e.reduce(tx,{}),f=l.slice(),d=Object.create(null);for(let t=0,e=0;t<l.length;t++)r=l[t],Object.prototype.hasOwnProperty.call(c,r)?e++:(tp(i,{command:"removeLayer",args:[r]}),f.splice(f.indexOf(r,e),1));for(let t=0,e=0;t<h.length;t++)r=h[h.length-1-t],f[f.length-1-t]!==r&&(Object.prototype.hasOwnProperty.call(u,r)?(tp(i,{command:"removeLayer",args:[r]}),f.splice(f.lastIndexOf(r,f.length-e),1)):e++,a=f[f.length-t],tp(i,{command:"addLayer",args:[c[r],a]}),f.splice(f.length-t,0,r),d[r]=!0);for(let t=0;t<h.length;t++)if(n=u[r=h[t]],o=c[r],!d[r]&&!td(n,o)){if(td(n.source,o.source)&&td(n["source-layer"],o["source-layer"])&&td(n.type,o.type)){for(s in t_(n.layout,o.layout,i,r,null,"setLayoutProperty"),t_(n.paint,o.paint,i,r,null,"setPaintProperty"),td(n.filter,o.filter)||tp(i,{command:"setFilter",args:[r,o.filter]}),td(n.minzoom,o.minzoom)&&td(n.maxzoom,o.maxzoom)||tp(i,{command:"setLayerZoomRange",args:[r,o.minzoom,o.maxzoom]}),n)Object.prototype.hasOwnProperty.call(n,s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?t_(n[s],o[s],i,r,s.slice(6),"setPaintProperty"):td(n[s],o[s])||tp(i,{command:"setLayerProperty",args:[r,s,o[s]]}));for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&!Object.prototype.hasOwnProperty.call(n,s)&&"layout"!==s&&"paint"!==s&&"filter"!==s&&"metadata"!==s&&"minzoom"!==s&&"maxzoom"!==s&&(0===s.indexOf("paint.")?t_(n[s],o[s],i,r,s.slice(6),"setPaintProperty"):td(n[s],o[s])||tp(i,{command:"setLayerProperty",args:[r,s,o[s]]}))}else tp(i,{command:"removeLayer",args:[r]}),a=f[f.lastIndexOf(r)+1],tp(i,{command:"addLayer",args:[o,a]})}}(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:"setStyle",args:[e]}]}return i},t.aE=function(t){let e=[],i=t.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${i}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},t.aF=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i||Object.keys(e).length!==Object.keys(i).length)return!1;for(let r in e)if(!t(e[r],i[r]))return!1;return!0}return e===i},t.aG=F,t.aH=j,t.aI=class extends oF{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.aJ=oj,t.aK=class extends oF{constructor(t,e){super(t,e),this.current=oU}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.aL=oq,t.aM=oV,t.aN=ee,t.aO=class extends oF{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.aP=class extends oF{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.aQ=function(t,e,i,r,n,o,a){var s=1/(e-i),l=1/(r-n),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*l,t[14]=(a+o)*h,t[15]=1,t},t.aR=ay,t.aS=class extends nK{},t.aT=sB,t.aU=class extends nQ{},t.aV=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.aW=aP,t.aX=ou,t.aY=ow,t.aZ=class extends n4{},t.a_=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},t.aa=hi,t.ab=function(t){let e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(t,i,r,n)=>{let o=r||n;return e[i]=!o||o.toLowerCase(),""}),e["max-age"]){let t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e},t.ac=function(t,e){let i=[];for(let r in t)r in e||i.push(r);return i},t.ad=z,t.ae=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],h=e[4],u=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+h*r,t[1]=a*n+u*r,t[2]=s*n+c*r,t[3]=l*n+f*r,t[4]=h*n-o*r,t[5]=u*n-a*r,t[6]=c*n-s*r,t[7]=f*n-l*r,t},t.af=function(t){var e=new ad(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.ag=av,t.ah=function(t,e){let i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){let{interpolationType:n,minZoom:o,maxZoom:a}=t,s=n?z(eF.interpolationFactor(n,e,o,a),0,1):0;"camera"===t.kind?r=eB.number(t.minSize,t.maxSize,s):i=s}return{uSizeT:i,uSize:r}},t.aj=function(t,{uSize:e,uSizeT:i},{lowerSize:r,upperSize:n}){return"source"===t.kind?r/lT:"composite"===t.kind?eB.number(r/lT,n/lT,i):e},t.ak=lO,t.al=function(t,e,i,r){let n=e.y-t.y,o=e.x-t.x,a=r.y-i.y,s=r.x-i.x,l=a*o-s*n;if(0===l)return null;let h=(s*(t.y-i.y)-a*(t.x-i.x))/l;return new E(t.x+h*o,t.y+h*n)},t.am=hs,t.an=o5,t.ao=ap,t.ap=function(t){let e=1/0,i=1/0,r=-1/0,n=-1/0;for(let o of t)e=Math.min(e,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return[e,i,r,n]},t.aq=sq,t.as=lL,t.at=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],h=e[7],u=e[8],c=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=i*s-r*a,_=i*l-n*a,b=i*h-o*a,x=r*l-n*s,w=r*h-o*s,M=n*h-o*l,S=u*m-c*p,k=u*g-f*p,E=u*y-d*p,I=c*g-f*m,P=c*y-d*m,T=f*y-d*g,A=v*T-_*P+b*I+x*E-w*k+M*S;return A?(t[0]=(s*T-l*P+h*I)*(A=1/A),t[1]=(n*P-r*T-o*I)*A,t[2]=(m*M-g*w+y*x)*A,t[3]=(f*w-c*M-d*x)*A,t[4]=(l*E-a*T-h*k)*A,t[5]=(i*T-n*E+o*k)*A,t[6]=(g*b-p*M-y*_)*A,t[7]=(u*M-f*b+d*_)*A,t[8]=(a*P-s*E+h*S)*A,t[9]=(r*E-i*P-o*S)*A,t[10]=(p*w-m*b+y*v)*A,t[11]=(c*b-u*w-d*v)*A,t[12]=(s*k-a*I-l*S)*A,t[13]=(i*I-r*k+n*S)*A,t[14]=(m*_-p*x-g*v)*A,t[15]=(u*x-c*_+f*v)*A,t):null},t.au=hC,t.av=lM,t.aw=hD,t.ax=function(){let t={},e=tu.$version;for(let i in tu.$root){let r=tu.$root[i];if(r.required){let n=null;null!=(n="version"===i?e:"array"===r.type?[]:{})&&(t[i]=n)}}return t},t.ay=na,t.az=ti,t.b=W,t.b0=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.b1=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},t.b2=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.b3=O,t.b4=l5,t.b5=l2,t.b6=function(t,e,i,r,n){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(o=1/(r-n)),t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t},t.b7=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],h=e[8],u=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+h*r,t[5]=a*n+u*r,t[6]=s*n+c*r,t[7]=l*n+f*r,t[8]=h*n-o*r,t[9]=u*n-a*r,t[10]=c*n-s*r,t[11]=f*n-l*r,t},t.b8=R,t.b9=N,t.bA=function(t){return t.message===Y},t.bB=rh,t.bC=ng,t.ba=function(t){return t*Math.PI/180},t.bb=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.bc=class extends nj{},t.bd=lY,t.be=hX,t.bg=te,t.bh=function(t,e){J.REGISTERED_PROTOCOLS[t]=e},t.bi=function(t){delete J.REGISTERED_PROTOCOLS[t]},t.bj=function(t,e){let i={};for(let r=0;r<t.length;r++){let n=e&&e[t[r].id]||rE(t[r]);e&&(e[t[r].id]=n);let o=i[n];o||(o=i[n]=[]),o.push(t[r])}let r=[];for(let t in i)r.push(i[t]);return r},t.bk=nt,t.bl=he,t.bm=hr,t.bn=lh,t.bo=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=o0/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;let i=e.bucket.layers[0],r=i.layout,n=i._unevaluatedLayout._values,o={layoutIconSize:n["icon-size"].possiblyEvaluate(new ny(e.bucket.zoom+1),e.canonical),layoutTextSize:n["text-size"].possiblyEvaluate(new ny(e.bucket.zoom+1),e.canonical),textMaxSize:n["text-size"].possiblyEvaluate(new ny(18))};if("composite"===e.bucket.textSizeData.kind){let{minZoom:t,maxZoom:i}=e.bucket.textSizeData;o.compositeTextSizes=[n["text-size"].possiblyEvaluate(new ny(t),e.canonical),n["text-size"].possiblyEvaluate(new ny(i),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){let{minZoom:t,maxZoom:i}=e.bucket.iconSizeData;o.compositeIconSizes=[n["icon-size"].possiblyEvaluate(new ny(t),e.canonical),n["icon-size"].possiblyEvaluate(new ny(i),e.canonical)]}let a=r.get("text-line-height")*sq,s="viewport"!==r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),l=r.get("text-keep-upright"),h=r.get("text-size");for(let n of e.bucket.features){let u=r.get("text-font").evaluate(n,{},e.canonical).join(","),c=h.evaluate(n,{},e.canonical),f=o.layoutTextSize.evaluate(n,{},e.canonical),d=o.layoutIconSize.evaluate(n,{},e.canonical),p={horizontal:{},vertical:void 0},m=n.text,g,y=[0,0];if(m){let o=m.toString(),h=r.get("text-letter-spacing").evaluate(n,{},e.canonical)*sq,d=nh(o)?h:0,g=r.get("text-anchor").evaluate(n,{},e.canonical),v=hA(i,n,e.canonical);if(!v){let t=r.get("text-radial-offset").evaluate(n,{},e.canonical);y=t?hT(g,[t*sq,hP]):r.get("text-offset").evaluate(n,{},e.canonical).map(t=>t*sq)}let _=s?"center":r.get("text-justify").evaluate(n,{},e.canonical),b="point"===r.get("symbol-placement")?r.get("text-max-width").evaluate(n,{},e.canonical)*sq:1/0,x=()=>{e.bucket.allowVerticalPlacement&&nl(o)&&(p.vertical=ld(m,e.glyphMap,e.glyphPositions,e.imagePositions,u,b,a,g,"left",d,y,t.ai.vertical,!0,f,c))};if(!s&&v){let i=new Set;if("auto"===_)for(let t=0;t<v.values.length;t+=2)i.add(hC(v.values[t]));else i.add(_);let r=!1;for(let n of i)if(!p.horizontal[n]){if(r)p.horizontal[n]=p.horizontal[0];else{let i=ld(m,e.glyphMap,e.glyphPositions,e.imagePositions,u,b,a,"center",n,d,y,t.ai.horizontal,!1,f,c);i&&(p.horizontal[n]=i,r=1===i.positionedLines.length)}}x()}else{"auto"===_&&(_=hC(g));let i=ld(m,e.glyphMap,e.glyphPositions,e.imagePositions,u,b,a,g,_,d,y,t.ai.horizontal,!1,f,c);i&&(p.horizontal[_]=i),x(),nl(o)&&s&&l&&(p.vertical=ld(m,e.glyphMap,e.glyphPositions,e.imagePositions,u,b,a,g,_,d,y,t.ai.vertical,!1,f,c))}}let v=!1;if(n.icon&&n.icon.name){let t=e.imageMap[n.icon.name];t&&(g=lk(e.imagePositions[n.icon.name],r.get("icon-offset").evaluate(n,{},e.canonical),r.get("icon-anchor").evaluate(n,{},e.canonical)),v=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=v:e.bucket.sdfIcons!==v&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==r.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}let _=hN(p.horizontal)||p.vertical;e.bucket.iconsInText=!!_&&_.iconsInText,(_||g)&&hL(e.bucket,n,p,g,e.imageMap,o,f,d,y,v,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.bp=sT,t.bq=a4,t.br=sy,t.bs=si,t.bt=lt,t.bu=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.bv=function(t,e,i,o,a){return _(this,void 0,void 0,function*(){if(C())try{return yield $(t,e,i,o,a)}catch(t){}return function(t,e,i,o,a){let s=t.width,l=t.height;r&&n||(n=(r=new OffscreenCanvas(s,l)).getContext("2d",{willReadFrequently:!0})),r.width=s,r.height=l,n.drawImage(t,0,0,s,l);let h=n.getImageData(e,i,o,a);return n.clearRect(0,0,s,l),h.data}(t,e,i,o,a)})},t.bw=ht,t.bx=b,t.by=S,t.bz=sV,t.c=K,t.d=t=>_(void 0,void 0,void 0,function*(){if(0===t.byteLength)return createImageBitmap(new ImageData(1,1));let e=new Blob([new Uint8Array(t)],{type:"image/png"});try{return createImageBitmap(e)}catch(t){throw Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),t.e=D,t.f=t=>new Promise((e,i)=>{let r=new Image;r.onload=()=>{e(r),URL.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(()=>{r.src=X})},r.onerror=()=>i(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let n=new Blob([new Uint8Array(t)],{type:"image/png"});r.src=t.byteLength?URL.createObjectURL(n):X}),t.g=Q,t.h=(t,e)=>tr(D(t,{type:"json"}),e),t.i=G,t.j=tl,t.k=ts,t.l=(t,e)=>tr(D(t,{type:"arrayBuffer"}),e),t.m=tr,t.n=function(t){return new lt(t).readFields(li,[])},t.o=aE,t.p=la,t.q=nC,t.r=r6,t.s=tn,t.t=r5,t.u=ns,t.v=tu,t.w=U,t.x=r2,t.y=function([t,e,i]){return e+=90,{x:t*Math.cos(e*=Math.PI/180)*Math.sin(i*=Math.PI/180),y:t*Math.sin(e)*Math.sin(i),z:t*Math.cos(i)}},t.z=eB}),i("worker",["./shared"],function(t){class e{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(let i of e){this._layerConfigs[i.id]=i;let e=this._layers[i.id]=t.aB(i);e._featureFilter=t.a7(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(let t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];for(let e of(this.familiesBySource={},t.bj(Object.values(this._layerConfigs),this.keyCache))){let t=e.map(t=>this._layers[t.id]),i=t[0];if("none"===i.visibility)continue;let r=i.source||"",n=this.familiesBySource[r];n||(n=this.familiesBySource[r]={});let o=i.sourceLayer||"_geojsonTileLayer",a=n[o];a||(a=n[o]=[]),a.push(t)}}}class i{constructor(e){let i={},r=[];for(let t in e){let n=e[t],o=i[t]={};for(let t in n){let e=n[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;let i={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};r.push(i),o[t]={rect:i,metrics:e.metrics}}}let{w:n,h:o}=t.p(r),a=new t.o({width:n||1,height:o||1});for(let r in e){let n=e[r];for(let e in n){let o=n[+e];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;let s=i[r][e].rect;t.o.copy(o.bitmap,a,{x:0,y:0},{x:s.x+1,y:s.y+1},o.bitmap)}}this.image=a,this.positions=i}}t.bk("GlyphAtlas",i);class r{constructor(e){this.tileID=new t.S(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.inFlightDependencies=[]}parse(e,r,o,a){return t._(this,void 0,void 0,function*(){this.status="parsing",this.data=e,this.collisionBoxArray=new t.a5;let s=new t.bl(Object.keys(e.layers).sort()),l=new t.bm(this.tileID,this.promoteId);l.bucketLayerIDs=[];let h={},u={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},c=r.familiesBySource[this.source];for(let i in c){let r=e.layers[i];if(!r)continue;1===r.version&&t.w(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let a=s.encode(i),f=[];for(let t=0;t<r.length;t++){let e=r.feature(t),n=l.getId(e,i);f.push({feature:e,id:n,index:t,sourceLayerIndex:a})}for(let e of c[i]){let i=e[0];i.source!==this.source&&t.w(`layer.source = ${i.source} does not equal this.source = ${this.source}`),i.minzoom&&this.zoom<Math.floor(i.minzoom)||i.maxzoom&&this.zoom>=i.maxzoom||"none"!==i.visibility&&(n(e,this.zoom,o),(h[i.id]=i.createBucket({index:l.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(f,u,this.tileID.canonical),l.bucketLayerIDs.push(e.map(t=>t.id)))}}let f=t.aG(u.glyphDependencies,t=>Object.keys(t).map(Number));this.inFlightDependencies.forEach(t=>null==t?void 0:t.abort()),this.inFlightDependencies=[];let d=Promise.resolve({});if(Object.keys(f).length){let t=new AbortController;this.inFlightDependencies.push(t),d=a.sendAsync({type:"GG",data:{stacks:f,source:this.source,tileID:this.tileID,type:"glyphs"}},t)}let p=Object.keys(u.iconDependencies),m=Promise.resolve({});if(p.length){let t=new AbortController;this.inFlightDependencies.push(t),m=a.sendAsync({type:"GI",data:{icons:p,source:this.source,tileID:this.tileID,type:"icons"}},t)}let g=Object.keys(u.patternDependencies),y=Promise.resolve({});if(g.length){let t=new AbortController;this.inFlightDependencies.push(t),y=a.sendAsync({type:"GI",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},t)}let[v,_,b]=yield Promise.all([d,m,y]),x=new i(v),w=new t.bn(_,b);for(let e in h){let i=h[e];i instanceof t.a6?(n(i.layers,this.zoom,o),t.bo({bucket:i,glyphMap:v,glyphPositions:x.positions,imageMap:_,imagePositions:w.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):i.hasPattern&&(i instanceof t.bp||i instanceof t.bq||i instanceof t.br)&&(n(i.layers,this.zoom,o),i.addFeatures(u,this.tileID.canonical,w.patternPositions))}return this.status="done",{buckets:Object.values(h).filter(t=>!t.isEmpty()),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:x.image,imageAtlas:w,glyphMap:this.returnDependencies?v:null,iconMap:this.returnDependencies?_:null,glyphPositions:this.returnDependencies?x.positions:null}})}}function n(e,i,r){let n=new t.a9(i);for(let t of e)t.recalculate(n,r)}class o{constructor(t,e,i){this.actor=t,this.layerIndex=e,this.availableImages=i,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(e,i){return t._(this,void 0,void 0,function*(){let r=yield t.l(e.request,i);try{return{vectorTile:new t.bs.VectorTile(new t.bt(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires}}catch(n){let t=new Uint8Array(r.data),i=`Unable to parse the tile at ${e.request.url}, `;throw Error(i+=31===t[0]&&139===t[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${n.message}`)}})}loadTile(e){return t._(this,void 0,void 0,function*(){let i=e.uid,n=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bu(e.request),o=new r(e);this.loading[i]=o;let a=new AbortController;o.abort=a;try{let r=yield this.loadVectorTile(e,a);if(delete this.loading[i],!r)return null;let s=r.rawData,l={};r.expires&&(l.expires=r.expires),r.cacheControl&&(l.cacheControl=r.cacheControl);let h={};if(n){let t=n.finish();t&&(h.resourceTiming=JSON.parse(JSON.stringify(t)))}o.vectorTile=r.vectorTile;let u=o.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[i]=o,this.fetching[i]={rawTileData:s,cacheControl:l,resourceTiming:h};try{let e=yield u;return t.e({rawTileData:s.slice(0)},e,l,h)}finally{delete this.fetching[i]}}catch(t){throw delete this.loading[i],o.status="done",this.loaded[i]=o,t}})}reloadTile(e){return t._(this,void 0,void 0,function*(){let i=e.uid;if(!this.loaded||!this.loaded[i])throw Error("Should not be trying to reload a tile that was never loaded or has been removed");let r=this.loaded[i];if(r.showCollisionBoxes=e.showCollisionBoxes,"parsing"===r.status){let e;let n=yield r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor);if(this.fetching[i]){let{rawTileData:r,cacheControl:o,resourceTiming:a}=this.fetching[i];delete this.fetching[i],e=t.e({rawTileData:r.slice(0)},n,o,a)}else e=n;return e}if("done"===r.status&&r.vectorTile)return r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(e){return t._(this,void 0,void 0,function*(){let t=this.loading,i=e.uid;t&&t[i]&&t[i].abort&&(t[i].abort.abort(),delete t[i])})}removeTile(e){return t._(this,void 0,void 0,function*(){this.loaded&&this.loaded[e.uid]&&delete this.loaded[e.uid]})}}class a{constructor(){this.loaded={}}loadTile(e){return t._(this,void 0,void 0,function*(){let{uid:i,encoding:r,rawImageData:n,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=e,h=n.width+2,u=n.height+2,c=t.b(n)?new t.R({width:h,height:u},(yield t.bv(n,-1,-1,h,u))):n,f=new t.bw(i,c,r,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[i]=f,f})}removeTile(t){let e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]}}function s(t,e){if(0!==t.length){l(t[0],e);for(var i=1;i<t.length;i++)l(t[i],!e)}}function l(t,e){for(var i=0,r=0,n=0,o=t.length,a=o-1;n<o;a=n++){var s=(t[n][0]-t[a][0])*(t[a][1]+t[n][1]),l=i+s;r+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+r>=0!=!!e&&t.reverse()}var h,u=t.bx(function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)s(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)s(e.coordinates[r],i);return e});let c=t.bs.VectorTileFeature.prototype.toGeoJSON;var f={exports:{}},d=t.by,p=t.bs.VectorTileFeature,m=g;function g(t,e){this.options=e||{},this.features=t,this.length=t.length}function y(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}g.prototype.feature=function(t){return new y(this.features[t],this.options.extent)},y.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],r=[],n=0;n<i.length;n++)r.push(new d(i[n][0],i[n][1]));this.geometry.push(r)}return this.geometry},y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[e,r,i,n]},y.prototype.toGeoJSON=p.prototype.toGeoJSON;var v=t.bz,_=m;function b(t){var e=new v;return function(t,e){for(var i in t.layers)e.writeMessage(3,x,t.layers[i])}(t,e),e.finish()}function x(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i,r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,w,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var o=r.values;for(i=0;i<o.length;i++)e.writeMessage(4,I,o[i])}function w(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,M,t),e.writeVarintField(3,i.type),e.writeMessage(4,E,i)}function M(t,e){var i=t.feature,r=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=i.properties[s],h=o[s];if(null!==l){void 0===h&&(r.push(s),o[s]=h=r.length-1),e.writeVarint(h);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var c=u+":"+l,f=a[c];void 0===f&&(n.push(l),a[c]=f=n.length-1),e.writeVarint(f)}}}function S(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function E(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],h=1;1===r&&(h=l.length),e.writeVarint(S(1,h));for(var u=3===r?l.length-1:l.length,c=0;c<u;c++){1===c&&1!==r&&e.writeVarint(S(2,u-1));var f=l[c].x-n,d=l[c].y-o;e.writeVarint(k(f)),e.writeVarint(k(d)),n+=f,o+=d}3===r&&e.writeVarint(S(7,1))}}function I(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}f.exports=b,f.exports.fromVectorTileJs=b,f.exports.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new _(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return b({layers:i})},f.exports.GeoJSONWrapper=_;var P=t.bx(f.exports);let T={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},A=Math.fround||(h=new Float32Array(1),t=>(h[0]=+t,h[0])),C=3,R=5,N=6;class z{constructor(t){this.options=Object.assign(Object.create(T),t),this.trees=Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){let{log:e,minZoom:i,maxZoom:r}=this.options;e&&console.time("total time");let n=`prepare ${t.length} points`;e&&console.time(n),this.points=t;let o=[];for(let e=0;e<t.length;e++){let i=t[e];if(!i.geometry)continue;let[r,n]=i.geometry.coordinates,a=A(B(r)),s=A(F(n));o.push(a,s,1/0,e,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);e&&console.timeEnd(n);for(let t=r;t>=i;t--){let i=+Date.now();a=this.trees[t]=this._createTree(this._cluster(a,t)),e&&console.log("z%d: %d clusters in %dms",t,a.numItems,+Date.now()-i)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,n=180;else if(i>n){let t=this.getClusters([i,r,180,o],e),a=this.getClusters([-180,r,n,o],e);return t.concat(a)}let a=this.trees[this._limitZoom(e)],s=a.range(B(i),F(o),B(n),F(r)),l=a.data,h=[];for(let t of s){let e=this.stride*t;h.push(l[e+R]>1?O(l,e,this.clusterProps):this.points[l[e+C]])}return h}getChildren(t){let e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw Error(r);let o=n.data;if(e*this.stride>=o.length)throw Error(r);let a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=n.within(o[e*this.stride],o[e*this.stride+1],a),l=[];for(let e of s){let i=e*this.stride;o[i+4]===t&&l.push(o[i+R]>1?O(o,i,this.clusterProps):this.points[o[i+C]])}if(0===l.length)throw Error(r);return l}getLeaves(t,e,i){let r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r}getTile(t,e,i){let r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(i-s)/n,h=(i+1+s)/n,u={features:[]};return this._addTileFeatures(r.range((e-s)/n,l,(e+1+s)/n,h),r.data,e,i,n,u),0===e&&this._addTileFeatures(r.range(1-s/n,l,1,h),r.data,n,i,n,u),e===n-1&&this._addTileFeatures(r.range(0,l,s/n,h),r.data,-1,i,n,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){let i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,r,n){for(let o of this.getChildren(e)){let e=o.properties;if(e&&e.cluster?n+e.point_count<=r?n+=e.point_count:n=this._appendLeaves(t,e.cluster_id,i,r,n):n<r?n++:t.push(o),t.length===i)break}return n}_createTree(e){let i=new t.aw(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)i.add(e[t],e[t+1]);return i.finish(),i.data=e,i}_addTileFeatures(t,e,i,r,n,o){for(let a of t){let t,s,l,h;let u=a*this.stride,c=e[u+R]>1;if(c)t=D(e,u,this.clusterProps),s=e[u],l=e[u+1];else{let i=this.points[e[u+C]];t=i.properties;let[r,n]=i.geometry.coordinates;s=B(r),l=F(n)}let f={type:1,geometry:[[Math.round(this.options.extent*(s*n-i)),Math.round(this.options.extent*(l*n-r))]],tags:t};void 0!==(h=c||this.options.generateId?e[u+C]:this.points[e[u+C]].id)&&(f.id=h),o.features.push(f)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){let{radius:i,extent:r,reduce:n,minPoints:o}=this.options,a=i/(r*Math.pow(2,e)),s=t.data,l=[],h=this.stride;for(let i=0;i<s.length;i+=h){if(s[i+2]<=e)continue;s[i+2]=e;let r=s[i],u=s[i+1],c=t.within(s[i],s[i+1],a),f=s[i+R],d=f;for(let t of c){let i=t*h;s[i+2]>e&&(d+=s[i+R])}if(d>f&&d>=o){let t,o=r*f,a=u*f,p=-1,m=((i/h|0)<<5)+(e+1)+this.points.length;for(let r of c){let l=r*h;if(s[l+2]<=e)continue;s[l+2]=e;let u=s[l+R];o+=s[l]*u,a+=s[l+1]*u,s[l+4]=m,n&&(t||(t=this._map(s,i,!0),p=this.clusterProps.length,this.clusterProps.push(t)),n(t,this._map(s,l)))}s[i+4]=m,l.push(o/d,a/d,1/0,m,-1,d),n&&l.push(p)}else{for(let t=0;t<h;t++)l.push(s[i+t]);if(d>1)for(let t of c){let i=t*h;if(!(s[i+2]<=e)){s[i+2]=e;for(let t=0;t<h;t++)l.push(s[i+t])}}}}return l}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,i){if(t[e+R]>1){let r=this.clusterProps[t[e+N]];return i?Object.assign({},r):r}let r=this.points[t[e+C]].properties,n=this.options.map(r);return i&&n===r?Object.assign({},n):n}}function O(t,e,i){return{type:"Feature",id:t[e+C],properties:D(t,e,i),geometry:{type:"Point",coordinates:[360*(t[e]-.5),j(t[e+1])]}}}function D(t,e,i){let r=t[e+R],n=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+N];return Object.assign(-1===o?{}:Object.assign({},i[o]),{cluster:!0,cluster_id:t[e+C],point_count:r,point_count_abbreviated:n})}function B(t){return t/360+.5}function F(t){let e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function j(t){return 360*Math.atan(Math.exp((180-360*t)*Math.PI/180))/Math.PI-90}function q(t,e,i,r){let n=r,o=e+(i-e>>1),a,s=i-e,l=t[e],h=t[e+1],u=t[i],c=t[i+1];for(let r=e+3;r<i;r+=3){let e=V(t[r],t[r+1],l,h,u,c);if(e>n)a=r,n=e;else if(e===n){let t=Math.abs(r-o);t<s&&(a=r,s=t)}}n>r&&(a-e>3&&q(t,e,a,r),t[a+2]=n,i-a>3&&q(t,a,i,r))}function V(t,e,i,r,n,o){let a=n-i,s=o-r;if(0!==a||0!==s){let l=((t-i)*a+(e-r)*s)/(a*a+s*s);l>1?(i=n,r=o):l>0&&(i+=a*l,r+=s*l)}return(a=t-i)*a+(s=e-r)*s}function U(t,e,i,r){let n={id:null==t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===e||"MultiPoint"===e||"LineString"===e)Z(n,i);else if("Polygon"===e)Z(n,i[0]);else if("MultiLineString"===e)for(let t of i)Z(n,t);else if("MultiPolygon"===e)for(let t of i)Z(n,t[0]);return n}function Z(t,e){for(let i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function G(t,e,i,r){if(!e.geometry)return;let n=e.geometry.coordinates;if(n&&0===n.length)return;let o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===o)H(n,s);else if("MultiPoint"===o)for(let t of n)H(t,s);else if("LineString"===o)W(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(let i of n)W(i,s=[],a,!1),t.push(U(l,"LineString",s,e.properties));return}X(n,s,a,!1)}else if("Polygon"===o)X(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(let n of e.geometry.geometries)G(t,{id:l,geometry:n,properties:e.properties},i,r);return}throw Error("Input data is not a valid GeoJSON object.")}for(let t of n){let e=[];X(t,e,a,!0),s.push(e)}}t.push(U(l,o,s,e.properties))}function H(t,e){e.push($(t[0]),Y(t[1]),0)}function W(t,e,i,r){let n,o,a=0;for(let i=0;i<t.length;i++){let s=$(t[i][0]),l=Y(t[i][1]);e.push(s,l,0),i>0&&(a+=r?(n*l-s*o)/2:Math.sqrt(Math.pow(s-n,2)+Math.pow(l-o,2))),n=s,o=l}let s=e.length-3;e[2]=1,q(e,0,s,i),e[s+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function X(t,e,i,r){for(let n=0;n<t.length;n++){let o=[];W(t[n],o,i,r),e.push(o)}}function $(t){return t/360+.5}function Y(t){let e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function K(t,e,i,r,n,o,a,s){if(r/=e,o>=(i/=e)&&a<r)return t;if(a<i||o>=r)return null;let l=[];for(let e of t){let t=e.geometry,o=e.type,a=0===n?e.minX:e.minY,h=0===n?e.maxX:e.maxY;if(a>=i&&h<r){l.push(e);continue}if(h<i||a>=r)continue;let u=[];if("Point"===o||"MultiPoint"===o)J(t,u,i,r,n);else if("LineString"===o)Q(t,u,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===o)te(t,u,i,r,n,!1);else if("Polygon"===o)te(t,u,i,r,n,!0);else if("MultiPolygon"===o)for(let e of t){let t=[];te(e,t,i,r,n,!0),t.length&&u.push(t)}if(u.length){if(s.lineMetrics&&"LineString"===o){for(let t of u)l.push(U(e.id,o,t,e.tags));continue}"LineString"!==o&&"MultiLineString"!==o||(1===u.length?(o="LineString",u=u[0]):o="MultiLineString"),"Point"!==o&&"MultiPoint"!==o||(o=3===u.length?"Point":"MultiPoint"),l.push(U(e.id,o,u,e.tags))}}return l.length?l:null}function J(t,e,i,r,n){for(let o=0;o<t.length;o+=3){let a=t[o+n];a>=i&&a<=r&&ti(e,t[o],t[o+1],t[o+2])}}function Q(t,e,i,r,n,o,a){let s=tt(t),l=0===n?tr:tn,h,u,c=t.start;for(let f=0;f<t.length-3;f+=3){let d=t[f],p=t[f+1],m=t[f+2],g=t[f+3],y=t[f+4],v=0===n?d:p,_=0===n?g:y,b=!1;a&&(h=Math.sqrt(Math.pow(d-g,2)+Math.pow(p-y,2))),v<i?_>i&&(u=l(s,d,p,g,y,i),a&&(s.start=c+h*u)):v>r?_<r&&(u=l(s,d,p,g,y,r),a&&(s.start=c+h*u)):ti(s,d,p,m),_<i&&v>=i&&(u=l(s,d,p,g,y,i),b=!0),_>r&&v<=r&&(u=l(s,d,p,g,y,r),b=!0),!o&&b&&(a&&(s.end=c+h*u),e.push(s),s=tt(t)),a&&(c+=h)}let f=t.length-3,d=t[f],p=t[f+1],m=0===n?d:p;m>=i&&m<=r&&ti(s,d,p,t[f+2]),f=s.length-3,o&&f>=3&&(s[f]!==s[0]||s[f+1]!==s[1])&&ti(s,s[0],s[1],s[2]),s.length&&e.push(s)}function tt(t){let e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function te(t,e,i,r,n,o){for(let a of t)Q(a,e,i,r,n,o,!1)}function ti(t,e,i,r){t.push(e,i,r)}function tr(t,e,i,r,n,o){let a=(o-e)/(r-e);return ti(t,o,i+(n-i)*a,1),a}function tn(t,e,i,r,n,o){let a=(o-i)/(n-i);return ti(t,e+(r-e)*a,o,1),a}function to(t,e){let i=[];for(let r=0;r<t.length;r++){let n;let o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=ta(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a)for(let t of(n=[],o.geometry))n.push(ta(t,e));else if("MultiPolygon"===a)for(let t of(n=[],o.geometry)){let i=[];for(let r of t)i.push(ta(r,e));n.push(i)}i.push(U(o.id,a,n,o.tags))}return i}function ta(t,e){let i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(let r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function ts(t,e){if(t.transformed)return t;let i=1<<t.z,r=t.x,n=t.y;for(let o of t.features){let t=o.geometry,a=o.type;if(o.geometry=[],1===a)for(let a=0;a<t.length;a+=2)o.geometry.push(tl(t[a],t[a+1],e,i,r,n));else for(let a=0;a<t.length;a++){let s=[];for(let o=0;o<t[a].length;o+=2)s.push(tl(t[a][o],t[a][o+1],e,i,r,n));o.geometry.push(s)}}return t.transformed=!0,t}function tl(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}function th(t,e,i,r,n){let o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:t.length,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let e of t)tu(a,e,o,n);return a}function tu(t,e,i,r){let n=e.geometry,o=e.type,a=[];if(t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),"Point"===o||"MultiPoint"===o)for(let e=0;e<n.length;e+=3)a.push(n[e],n[e+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)tc(a,n,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let e=0;e<n.length;e++)tc(a,n[e],t,i,"Polygon"===o,0===e);else if("MultiPolygon"===o)for(let e=0;e<n.length;e++){let r=n[e];for(let e=0;e<r.length;e++)tc(a,r[e],t,i,!0,0===e)}if(a.length){let i=e.tags||null;if("LineString"===o&&r.lineMetrics){for(let t in i={},e.tags)i[t]=e.tags[t];i.mapbox_clip_start=n.start/n.size,i.mapbox_clip_end=n.end/n.size}let s={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:i};null!==e.id&&(s.id=e.id),t.features.push(s)}}function tc(t,e,i,r,n,o){let a=r*r;if(r>0&&e.size<(n?a:r))return void(i.numPoints+=e.length/3);let s=[];for(let t=0;t<e.length;t+=3)(0===r||e[t+2]>a)&&(i.numSimplified++,s.push(e[t],e[t+1])),i.numPoints++;n&&function(t,e){let i=0;for(let e=0,r=t.length,n=r-2;e<r;n=e,e+=2)i+=(t[e]-t[n])*(t[e+1]+t[n+1]);if(i>0===e)for(let e=0,i=t.length;e<i/2;e+=2){let r=t[e],n=t[e+1];t[e]=t[i-2-e],t[e+1]=t[i-1-e],t[i-2-e]=r,t[i-1-e]=n}}(s,o),t.push(s)}let tf={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class td{constructor(t,e){let i=(e=this.options=function(t,e){for(let i in e)t[i]=e[i];return t}(Object.create(tf),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw Error("promoteId and generateId cannot be used together.");let r=function(t,e){let i=[];if("FeatureCollection"===t.type)for(let r=0;r<t.features.length;r++)G(i,t.features[r],e,r);else G(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){let i=e.buffer/e.extent,r=t,n=K(t,1,-1-i,i,0,-1,2,e),o=K(t,1,1-i,2+i,0,-1,2,e);return(n||o)&&(r=K(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=to(n,1).concat(r)),o&&(r=r.concat(to(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(t,e,i,r,n,o,a){let s=[t,e,i,r],l=this.options,h=l.debug;for(;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();let u=1<<e,c=tp(e,i,r),f=this.tiles[c];if(!f&&(h>1&&console.time("creation"),f=this.tiles[c]=th(t,e,i,r,l),this.tileCoords.push({z:e,x:i,y:r}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));let t=`z${e}`;this.stats[t]=(this.stats[t]||0)+1,this.total++}if(f.source=t,null==n){if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue}else{if(e===l.maxZoom||e===n)continue;if(null!=n){let t=n-e;if(i!==o>>t||r!==a>>t)continue}}if(f.source=null,0===t.length)continue;h>1&&console.time("clipping");let d=.5*l.buffer/l.extent,p=.5-d,m=.5+d,g=1+d,y=null,v=null,_=null,b=null,x=K(t,u,i-d,i+m,0,f.minX,f.maxX,l),w=K(t,u,i+p,i+g,0,f.minX,f.maxX,l);t=null,x&&(y=K(x,u,r-d,r+m,1,f.minY,f.maxY,l),v=K(x,u,r+p,r+g,1,f.minY,f.maxY,l),x=null),w&&(_=K(w,u,r-d,r+m,1,f.minY,f.maxY,l),b=K(w,u,r+p,r+g,1,f.minY,f.maxY,l),w=null),h>1&&console.timeEnd("clipping"),s.push(y||[],e+1,2*i,2*r),s.push(v||[],e+1,2*i,2*r+1),s.push(_||[],e+1,2*i+1,2*r),s.push(b||[],e+1,2*i+1,2*r+1)}}getTile(t,e,i){t=+t,e=+e,i=+i;let{extent:r,debug:n}=this.options;if(t<0||t>24)return null;let o=1<<t,a=tp(t,e=e+o&o-1,i);if(this.tiles[a])return ts(this.tiles[a],r);n>1&&console.log("drilling down to z%d-%d-%d",t,e,i);let s,l=t,h=e,u=i;for(;!s&&l>0;)l--,h>>=1,u>>=1,s=this.tiles[tp(l,h,u)];return s&&s.source?(n>1&&(console.log("found parent tile z%d-%d-%d",l,h,u),console.time("drilling down")),this.splitTile(s.source,l,h,u,t,e,i),n>1&&console.timeEnd("drilling down"),this.tiles[a]?ts(this.tiles[a],r):null):null}}function tp(t,e,i){return 32*((1<<t)*i+e)+t}function tm(t,e){return e?t.properties[e]:t.id}function tg(t,e){if(null==t)return!0;if("Feature"===t.type)return null!=tm(t,e);if("FeatureCollection"===t.type){let i=new Set;for(let r of t.features){let t=tm(r,e);if(null==t||i.has(t))return!1;i.add(t)}return!0}return!1}function ty(t,e){let i=new Map;if(null==t);else if("Feature"===t.type)i.set(tm(t,e),t);else for(let r of t.features)i.set(tm(r,e),r);return i}class tv extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(e,i){return t._(this,void 0,void 0,function*(){let i=e.tileID.canonical;if(!this._geoJSONIndex)throw Error("Unable to parse the data into a cluster or geojson");let r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return null;let n=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.X,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.X,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){let e=[];for(let i of this._feature.geometry)e.push([new t.P(i[0],i[1])]);return e}{let e=[];for(let i of this._feature.geometry){let r=[];for(let e of i)r.push(new t.P(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,i){return c.call(this,t,e,i)}}(this._features[e])}}(r.features),o=P(n);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:n,rawData:o.buffer}})}loadData(e){return t._(this,void 0,void 0,function*(){var i,r;null===(i=this._pendingRequest)||void 0===i||i.abort();let n=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bu(e.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(e,this._pendingRequest),this._geoJSONIndex=e.cluster?new z(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;let r={},n={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(i);for(let e of s){let[o,a]=i[e],s=t.bB(a),l=t.bB("string"==typeof o?[o,["accumulated"],["get",e]]:o);r[e]=s.value,n[e]=l.value}return e.map=t=>{a.properties=t;let e={};for(let t of s)e[t]=r[t].evaluate(o,a);return e},e.reduce=(t,e)=>{for(let i of(a.properties=e,s))o.accumulated=t[i],t[i]=n[i].evaluate(o,a)},e}(e)).load((yield this._pendingData).features):(r=yield this._pendingData,new td(r,e.geojsonVtOptions)),this.loaded={};let i={};if(n){let t=n.finish();t&&(i.resourceTiming={},i.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}return i}catch(e){if(delete this._pendingRequest,t.bA(e))return{abandoned:!0};throw e}})}getData(){return t._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(t){let e=this.loaded;return e&&e[t.uid]?super.reloadTile(t):this.loadTile(t)}loadAndProcessGeoJSON(e,i){return t._(this,void 0,void 0,function*(){let r=yield this.loadGeoJSON(e,i);if(delete this._pendingRequest,"object"!=typeof r)throw Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`);if(u(r,!0),e.filter){let i=t.bB(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw Error(i.value.map(t=>`${t.key}: ${t.message}`).join(", "));r={type:"FeatureCollection",features:r.features.filter(t=>i.value.evaluate({zoom:0},t))}}return r})}loadGeoJSON(e,i){return t._(this,void 0,void 0,function*(){let{promoteId:r}=e;if(e.request){let n=yield t.h(e.request,i);return this._dataUpdateable=tg(n.data,r)?ty(n.data,r):void 0,n.data}if("string"==typeof e.data)try{let t=JSON.parse(e.data);return this._dataUpdateable=tg(t,r)?ty(t,r):void 0,t}catch(t){throw Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`)}if(!e.dataDiff)throw Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw Error(`Cannot update existing geojson data in ${e.source}`);return function(t,e,i){var r,n,o,a;if(e.removeAll&&t.clear(),e.remove)for(let i of e.remove)t.delete(i);if(e.add)for(let r of e.add){let e=tm(r,i);null!=e&&t.set(e,r)}if(e.update)for(let i of e.update){let e=t.get(i.id);if(null==e)continue;let s=!i.removeAllProperties&&((null===(r=i.removeProperties)||void 0===r?void 0:r.length)>0||(null===(n=i.addOrUpdateProperties)||void 0===n?void 0:n.length)>0);if((i.newGeometry||i.removeAllProperties||s)&&(e=Object.assign({},e),t.set(i.id,e),s&&(e.properties=Object.assign({},e.properties))),i.newGeometry&&(e.geometry=i.newGeometry),i.removeAllProperties)e.properties={};else if((null===(o=i.removeProperties)||void 0===o?void 0:o.length)>0)for(let t of i.removeProperties)Object.prototype.hasOwnProperty.call(e.properties,t)&&delete e.properties[t];if((null===(a=i.addOrUpdateProperties)||void 0===a?void 0:a.length)>0)for(let{key:t,value:r}of i.addOrUpdateProperties)e.properties[t]=r}}(this._dataUpdateable,e.dataDiff,r),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(e){return t._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(t){return this._geoJSONIndex.getClusterExpansionZoom(t.clusterId)}getClusterChildren(t){return this._geoJSONIndex.getChildren(t.clusterId)}getClusterLeaves(t){return this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset)}}class t_{constructor(e){this.self=e,this.actor=new t.F(e),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(t,e)=>{if(this.externalWorkerSourceTypes[t])throw Error(`Worker source with name "${t}" already registered.`);this.externalWorkerSourceTypes[t]=e},this.self.addProtocol=t.bh,this.self.removeProtocol=t.bi,this.self.registerRTLTextPlugin=e=>{if(t.bC.isParsed())throw Error("RTL text plugin already registered.");t.bC.setMethods(e)},this.actor.registerMessageHandler("LDT",(t,e)=>this._getDEMWorkerSource(t,e.source).loadTile(e)),this.actor.registerMessageHandler("RDT",(e,i)=>t._(this,void 0,void 0,function*(){this._getDEMWorkerSource(e,i.source).removeTile(i)})),this.actor.registerMessageHandler("GCEZ",(e,i)=>t._(this,void 0,void 0,function*(){return this._getWorkerSource(e,i.type,i.source).getClusterExpansionZoom(i)})),this.actor.registerMessageHandler("GCC",(e,i)=>t._(this,void 0,void 0,function*(){return this._getWorkerSource(e,i.type,i.source).getClusterChildren(i)})),this.actor.registerMessageHandler("GCL",(e,i)=>t._(this,void 0,void 0,function*(){return this._getWorkerSource(e,i.type,i.source).getClusterLeaves(i)})),this.actor.registerMessageHandler("LD",(t,e)=>this._getWorkerSource(t,e.type,e.source).loadData(e)),this.actor.registerMessageHandler("GD",(t,e)=>this._getWorkerSource(t,e.type,e.source).getData()),this.actor.registerMessageHandler("LT",(t,e)=>this._getWorkerSource(t,e.type,e.source).loadTile(e)),this.actor.registerMessageHandler("RT",(t,e)=>this._getWorkerSource(t,e.type,e.source).reloadTile(e)),this.actor.registerMessageHandler("AT",(t,e)=>this._getWorkerSource(t,e.type,e.source).abortTile(e)),this.actor.registerMessageHandler("RMT",(t,e)=>this._getWorkerSource(t,e.type,e.source).removeTile(e)),this.actor.registerMessageHandler("RS",(e,i)=>t._(this,void 0,void 0,function*(){if(!this.workerSources[e]||!this.workerSources[e][i.type]||!this.workerSources[e][i.type][i.source])return;let t=this.workerSources[e][i.type][i.source];delete this.workerSources[e][i.type][i.source],void 0!==t.removeSource&&t.removeSource(i)})),this.actor.registerMessageHandler("RM",e=>t._(this,void 0,void 0,function*(){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e]})),this.actor.registerMessageHandler("SR",(e,i)=>t._(this,void 0,void 0,function*(){this.referrer=i})),this.actor.registerMessageHandler("SRPS",(t,e)=>this._syncRTLPluginState(t,e)),this.actor.registerMessageHandler("IS",(e,i)=>t._(this,void 0,void 0,function*(){this.self.importScripts(i)})),this.actor.registerMessageHandler("SI",(t,e)=>this._setImages(t,e)),this.actor.registerMessageHandler("UL",(e,i)=>t._(this,void 0,void 0,function*(){this._getLayerIndex(e).update(i.layers,i.removedIds)})),this.actor.registerMessageHandler("SL",(e,i)=>t._(this,void 0,void 0,function*(){this._getLayerIndex(e).replace(i)}))}_setImages(e,i){return t._(this,void 0,void 0,function*(){for(let t in this.availableImages[e]=i,this.workerSources[e]){let r=this.workerSources[e][t];for(let t in r)r[t].availableImages=i}})}_syncRTLPluginState(e,i){return t._(this,void 0,void 0,function*(){if(t.bC.isParsed())return t.bC.getState();if("loading"!==i.pluginStatus)return t.bC.setState(i),i;let e=i.pluginURL;if(this.self.importScripts(e),t.bC.isParsed()){let i={pluginStatus:"loaded",pluginURL:e};return t.bC.setState(i),i}throw t.bC.setState({pluginStatus:"error",pluginURL:""}),Error(`RTL Text Plugin failed to import scripts from ${e}`)})}_getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}_getLayerIndex(t){let i=this.layerIndexes[t];return i||(i=this.layerIndexes[t]=new e),i}_getWorkerSource(t,e,i){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][i]){let r={sendAsync:(e,i)=>(e.targetMapId=t,this.actor.sendAsync(e,i))};switch(e){case"vector":this.workerSources[t][e][i]=new o(r,this._getLayerIndex(t),this._getAvailableImages(t));break;case"geojson":this.workerSources[t][e][i]=new tv(r,this._getLayerIndex(t),this._getAvailableImages(t));break;default:this.workerSources[t][e][i]=new this.externalWorkerSourceTypes[e](r,this._getLayerIndex(t),this._getAvailableImages(t))}}return this.workerSources[t][e][i]}_getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new a),this.demWorkerSources[t][e]}}return t.i(self)&&(self.worker=new t_(self)),t_}),i("index",["exports","./shared"],function(t,e){let i,r,n,o,a,s,l;var h="4.5.2";let u={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:t=>new Promise((i,r)=>{let n=requestAnimationFrame(i);t.signal.addEventListener("abort",()=>{cancelAnimationFrame(n),r(e.c())})}),getImageData(t,e=0){return this.getImageCanvasContext(t).getImageData(-e,-e,t.width+2*e,t.height+2*e)},getImageCanvasContext(t){let e=window.document.createElement("canvas"),i=e.getContext("2d",{willReadFrequently:!0});if(!i)throw Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height),i},resolveURL:t=>(i||(i=document.createElement("a")),i.href=t,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==r&&(r=matchMedia("(prefers-reduced-motion: reduce)")),r.matches)}};class c{static testProp(t){if(!c.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in c.docStyle)return t[e];return t[0]}static create(t,e,i){let r=window.document.createElement(t);return void 0!==e&&(r.className=e),i&&i.appendChild(r),r}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){c.docStyle&&c.selectProp&&(c.userSelect=c.docStyle[c.selectProp],c.docStyle[c.selectProp]="none")}static enableDrag(){c.docStyle&&c.selectProp&&(c.docStyle[c.selectProp]=c.userSelect)}static setTransform(t,e){t.style[c.transformProp]=e}static addEventListener(t,e,i,r={}){t.addEventListener(e,i,"passive"in r?r:r.capture)}static removeEventListener(t,e,i,r={}){t.removeEventListener(e,i,"passive"in r?r:r.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",c.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",c.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",c.suppressClickInternal,!0)},0)}static getScale(t){let e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}static getPoint(t,i,r){let n=i.boundingClientRect;return new e.P((r.clientX-n.left)/i.x-t.clientLeft,(r.clientY-n.top)/i.y-t.clientTop)}static mousePos(t,e){let i=c.getScale(t);return c.getPoint(t,i,e)}static touchPos(t,e){let i=[],r=c.getScale(t);for(let n=0;n<e.length;n++)i.push(c.getPoint(t,r,e[n]));return i}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}c.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,c.selectProp=c.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),c.transformProp=c.testProp(["transform","WebkitTransform"]);let f={supported:!1,testSupport:function(t){!m&&p&&(g?y(t):d=t)}},d,p,m=!1,g=!1;function y(t){let e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,p),t.isContextLost())return;f.supported=!0}catch(t){}t.deleteTexture(e),m=!0}"undefined"!=typeof document&&((p=document.createElement("img")).onload=()=>{d&&y(d),d=null,g=!0},p.onerror=()=>{m=!0,d=null},p.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(t){let i,r,n,o;t.resetRequestQueue=()=>{i=[],r=0,n=0,o={}},t.addThrottleControl=t=>{let e=n++;return o[e]=t,e},t.removeThrottleControl=t=>{delete o[t],s()},t.getImage=(t,r,n=!0)=>new Promise((o,a)=>{f.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),e.e(t,{type:"image"}),i.push({abortController:r,requestParameters:t,supportImageRefresh:n,state:"queued",onError:t=>{a(t)},onSuccess:t=>{o(t)}}),s()});let a=t=>e._(this,void 0,void 0,function*(){var i;t.state="running";let{requestParameters:n,supportImageRefresh:o,onError:a,onSuccess:h,abortController:u}=t,c=!1===o&&!e.i(self)&&!e.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce((t,e)=>t&&"accept"===e,!0));r++;let f=c?l(n,u):e.m(n,u);try{let r=yield f;delete t.abortController,t.state="completed",r.data instanceof HTMLImageElement||e.b(r.data)?h(r):r.data&&h({data:yield(i=r.data,"function"==typeof createImageBitmap?e.d(i):e.f(i)),cacheControl:r.cacheControl,expires:r.expires})}catch(e){delete t.abortController,a(e)}finally{r--,s()}}),s=()=>{let t=(()=>{for(let t of Object.keys(o))if(o[t]())return!0;return!1})()?e.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:e.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let e=r;e<t&&i.length>0;e++){let t=i.shift();t.abortController.signal.aborted?e--:a(t)}},l=(t,i)=>new Promise((r,n)=>{let o=new Image,a=t.url,s=t.credentials;s&&"include"===s?o.crossOrigin="use-credentials":(s&&"same-origin"===s||!e.s(a))&&(o.crossOrigin="anonymous"),i.signal.addEventListener("abort",()=>{o.src="",n(e.c())}),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,r({data:o})},o.onerror=()=>{o.onerror=o.onload=null,i.signal.aborted||n(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=a})}(b||(b={})),b.resetRequestQueue();class v{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function _(t){var i=new e.A(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i}var b,x,w=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t};x=new e.A(3),e.A!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0);var M=function(t){var e=t[0],i=t[1];return e*e+i*i};function S(t){let e=[];if("string"==typeof t)e.push({id:"default",url:t});else if(t&&t.length>0){let i=[];for(let{id:r,url:n}of t){let t=`${r}${n}`;-1===i.indexOf(t)&&(i.push(t),e.push({id:r,url:n}))}}return e}function k(t,e,i){let r=t.split("?");return r[0]+=`${e}${i}`,r.join("?")}!function(){var t=new e.A(2);e.A!=Float32Array&&(t[0]=0,t[1]=0)}();class E{constructor(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,i,r){let{width:n,height:o}=t,a=!(this.size&&this.size[0]===n&&this.size[1]===o||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=!!(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),a)this.size=[n,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.b(t)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,n,o,0,this.format,l.UNSIGNED_BYTE,t.data);else{let{x:i,y:a}=r||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.b(t)?l.texSubImage2D(l.TEXTURE_2D,0,i,a,l.RGBA,l.UNSIGNED_BYTE,t):l.texSubImage2D(l.TEXTURE_2D,0,i,a,n,o,l.RGBA,l.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,i){let{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function I(t){let{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class P extends e.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(let{ids:t,promiseResolve:e}of this.requestors)e(this._getImagesForIds(t));this.requestors=[]}}getImage(t){let i=this.images[t];if(i&&!i.data&&i.spriteData){let t=i.spriteData;i.data=new e.R({width:t.width,height:t.height},t.context.getImageData(t.x,t.y,t.width,t.height).data),i.spriteData=null}return i}addImage(t,e){if(this.images[t])throw Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,e)&&(this.images[t]=e)}_validate(t,i){let r=!0,n=i.data||i.spriteData;return this._validateStretch(i.stretchX,n&&n.width)||(this.fire(new e.j(Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(i.stretchY,n&&n.height)||(this.fire(new e.j(Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(i.content,i)||(this.fire(new e.j(Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let i=0;for(let r of t){if(r[0]<i||r[1]<r[0]||e<r[1])return!1;i=r[1]}return!0}_validateContent(t,e){if(!t)return!0;if(4!==t.length)return!1;let i=e.spriteData,r=i&&i.width||e.data.width,n=i&&i.height||e.data.height;return!(t[0]<0||r<t[0]||t[1]<0||n<t[1]||t[2]<0||r<t[2]||t[3]<0||n<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,e,i=!0){let r=this.getImage(t);if(i&&(r.data.width!==e.data.width||r.data.height!==e.data.height))throw Error(`size mismatch between old image (${r.data.width}x${r.data.height}) and new image (${e.data.width}x${e.data.height}).`);e.version=r.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){let e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((e,i)=>{let r=!0;if(!this.isLoaded())for(let e of t)this.images[e]||(r=!1);this.isLoaded()||r?e(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:e})})}_getImagesForIds(t){let i={};for(let r of t){let t=this.getImage(r);t||(this.fire(new e.k("styleimagemissing",{id:r})),t=this.getImage(r)),t?i[r]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,textFitWidth:t.textFitWidth,textFitHeight:t.textFitHeight,hasRenderCallback:!!(t.userImage&&t.userImage.render)}:e.w(`Image "${r}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return i}getPixelSize(){let{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(t){let i=this.patterns[t],r=this.getImage(t);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{let i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},n=new e.I(i,r);this.patterns[t]={bin:i,position:n}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){let e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){let t=[];for(let e in this.patterns)t.push(this.patterns[e].bin);let{w:i,h:r}=e.p(t),n=this.atlasImage;for(let t in n.resize({width:i||1,height:r||1}),this.patterns){let{bin:i}=this.patterns[t],r=i.x+1,o=i.y+1,a=this.getImage(t).data,s=a.width,l=a.height;e.R.copy(a,n,{x:0,y:0},{x:r,y:o},{width:s,height:l}),e.R.copy(a,n,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),e.R.copy(a,n,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),e.R.copy(a,n,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),e.R.copy(a,n,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(let i of t){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;let t=this.getImage(i);t||e.w(`Image with ID: "${i}" was not found`),I(t)&&this.updateImage(i,t)}}}let T=1e20;function A(t,e,i,r,n,o,a,s,l){for(let h=e;h<e+r;h++)C(t,i*o+h,o,n,a,s,l);for(let h=i;h<i+n;h++)C(t,h*o+e,1,r,a,s,l)}function C(t,e,i,r,n,o,a){o[0]=0,a[0]=-T,a[1]=T,n[0]=t[e];for(let s=1,l=0,h=0;s<r;s++){n[s]=t[e+s*i];let r=s*s;do{let t=o[l];h=(n[s]-n[t]+r-t*t)/(s-t)/2}while(h<=a[l]&&--l>-1)o[++l]=s,a[l]=h,a[l+1]=T}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;let r=o[l],h=s-r;t[e+s*i]=n[r]+h*h}}class R{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return e._(this,void 0,void 0,function*(){let e=[];for(let i in t)for(let r of t[i])e.push(this._getAndCacheGlyphsPromise(i,r));let i=yield Promise.all(e),r={};for(let{stack:t,id:e,glyph:n}of i)r[t]||(r[t]={}),r[t][e]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics};return r})}_getAndCacheGlyphsPromise(t,i){return e._(this,void 0,void 0,function*(){let e=this.entries[t];e||(e=this.entries[t]={glyphs:{},requests:{},ranges:{}});let r=e.glyphs[i];if(void 0!==r)return{stack:t,id:i,glyph:r};if(r=this._tinySDF(e,t,i))return e.glyphs[i]=r,{stack:t,id:i,glyph:r};let n=Math.floor(i/256);if(256*n>65535)throw Error("glyphs > 65535 not supported");if(e.ranges[n])return{stack:t,id:i,glyph:r};if(!this.url)throw Error("glyphsUrl is not set");if(!e.requests[n]){let i=R.loadGlyphRange(t,n,this.url,this.requestManager);e.requests[n]=i}let o=yield e.requests[n];for(let t in o)this._doesCharSupportLocalGlyph(+t)||(e.glyphs[+t]=o[+t]);return e.ranges[n]=!0,{stack:t,id:i,glyph:o[i]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(e.u["CJK Unified Ideographs"](t)||e.u["Hangul Syllables"](t)||e.u.Hiragana(t)||e.u.Katakana(t))}_tinySDF(t,i,r){let n=this.localIdeographFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let o=t.tinySDF;if(!o){let e="400";/bold/i.test(i)?e="900":/medium/i.test(i)?e="500":/light/i.test(i)&&(e="200"),o=t.tinySDF=new R.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:n,fontWeight:e})}let a=o.draw(String.fromCharCode(r));return{id:r,bitmap:new e.o({width:a.width||60,height:a.height||60},a.data),metrics:{width:a.glyphWidth/2||24,height:a.glyphHeight/2||24,left:a.glyphLeft/2+.5||0,top:a.glyphTop/2-27.5||-8,advance:a.glyphAdvance/2||24,isDoubleResolution:!0}}}}R.loadGlyphRange=function(t,i,r,n){return e._(this,void 0,void 0,function*(){let o=256*i,a=o+255,s=n.transformRequest(r.replace("{fontstack}",t).replace("{range}",`${o}-${a}`),"Glyphs"),l=yield e.l(s,new AbortController);if(!l||!l.data)throw Error(`Could not load glyph range. range: ${i}, ${o}-${a}`);let h={};for(let t of e.n(l.data))h[t.id]=t;return h})},R.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:i=8,cutoff:r=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=e,this.cutoff=r,this.radius=i;let s=this.size=t+4*e,l=this._createCanvas(s),h=this.ctx=l.getContext("2d",{willReadFrequently:!0});h.font=`${a} ${o} ${t}px ${n}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){let e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){let{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(i),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-n))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),h=s+2*this.buffer,u=l+2*this.buffer,c=Math.max(h*u,0),f=new Uint8ClampedArray(c),d={data:f,width:h,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return d;let{ctx:p,buffer:m,gridInner:g,gridOuter:y}=this;p.clearRect(m,m,s,l),p.fillText(t,m,m+a);let v=p.getImageData(m,m,s,l);y.fill(T,0,c),g.fill(0,0,c);for(let t=0;t<l;t++)for(let e=0;e<s;e++){let i=v.data[4*(t*s+e)+3]/255;if(0===i)continue;let r=(t+m)*h+e+m;if(1===i)y[r]=0,g[r]=T;else{let t=.5-i;y[r]=t>0?t*t:0,g[r]=t<0?t*t:0}}A(y,0,0,h,u,h,this.f,this.v,this.z),A(g,m,m,s,l,h,this.f,this.v,this.z);for(let t=0;t<c;t++){let e=Math.sqrt(y[t])-Math.sqrt(g[t]);f[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return d}};class N{constructor(){this.specification=e.v.light.position}possiblyEvaluate(t,i){return e.y(t.expression.evaluate(i))}interpolate(t,i,r){return{x:e.z.number(t.x,i.x,r),y:e.z.number(t.y,i.y,r),z:e.z.number(t.z,i.z,r)}}}class z extends e.E{constructor(t){super(),n=n||new e.q({anchor:new e.D(e.v.light.anchor),position:new N,color:new e.D(e.v.light.color),intensity:new e.D(e.v.light.intensity)}),this._transitionable=new e.T(n),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,i={}){if(!this._validate(e.r,t,i))for(let e in t){let i=t[e];e.endsWith("-transition")?this._transitionable.setTransition(e.slice(0,-11),i):this._transitionable.setValue(e,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,i,r){return(!r||!1!==r.validate)&&e.t(this,t.call(e.x,{value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.v}))}}let O=new e.q({"sky-color":new e.D(e.v.sky["sky-color"]),"horizon-color":new e.D(e.v.sky["horizon-color"]),"fog-color":new e.D(e.v.sky["fog-color"]),"fog-ground-blend":new e.D(e.v.sky["fog-ground-blend"]),"horizon-fog-blend":new e.D(e.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new e.D(e.v.sky["sky-horizon-blend"]),"atmosphere-blend":new e.D(e.v.sky["atmosphere-blend"])});class D extends e.E{constructor(t){super(),this._transitionable=new e.T(O),this.setSky(t),this._transitioning=this._transitionable.untransitioned()}setSky(t,i={}){if(!this._validate(e.B,t,i))for(let e in t){let i=t[e];e.endsWith("-transition")?this._transitionable.setTransition(e.slice(0,-11),i):this._transitionable.setValue(e,i)}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,i,r={}){return!1!==(null==r?void 0:r.validate)&&e.t(this,t.call(e.x,e.e({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class B{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){let i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){let r=[],n=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let e=1;e<t.length;e++){a=!a;let l=t[e];n=s*i,s+=l,o=s*i,r.push({left:n,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(t,e,i){let r=e/2;for(let e=-i;e<=i;e++){let n=this.width*(this.nextRow+i+e),o=0,a=t[0];for(let s=0;s<this.width;s++){let l;s/a.right>1&&(a=t[++o]);let h=Math.min(Math.abs(s-a.left),Math.abs(s-a.right)),u=e/i*(r+1);if(a.isDash){let t=r-Math.abs(u);l=Math.sqrt(h*h+t*t)}else l=r-Math.sqrt(h*h+u*u);this.data[n+s]=Math.max(0,Math.min(255,l+128))}}}addRegularDash(t){for(let e=t.length-1;e>=0;--e){let i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}let e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);let r=this.width*this.nextRow,n=0,o=t[0];for(let e=0;e<this.width;e++){e/o.right>1&&(o=t[++n]);let i=Math.min(Math.abs(e-o.left),Math.abs(e-o.right));this.data[r+e]=Math.max(0,Math.min(255,(o.isDash?i:-i)+128))}}addDash(t,i){let r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return e.w("LineAtlas out of space"),null;let o=0;for(let e=0;e<t.length;e++)o+=t[e];if(0!==o){let e=this.width/o,n=this.getDashRanges(t,this.width,e);i?this.addRoundDash(n,e,r):this.addRegularDash(n)}let a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=n,this.dirty=!0,a}bind(t){let e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}let F="maplibre_preloaded_worker_pool";class j{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<j.workerCount;)this.workers.push(new Worker(e.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(t=>{t.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[F]}numActive(){return Object.keys(this.active).length}}let q=Math.floor(u.hardwareConcurrency/2);function V(){return o||(o=new j),o}j.workerCount=e.C(globalThis)?Math.max(Math.min(q,3),1):1;class U{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=i;let r=this.workerPool.acquire(i);for(let t=0;t<r.length;t++){let n=new e.F(r[t],i);n.name=`Worker ${t}`,this.actors.push(n)}if(!this.actors.length)throw Error("No actors found")}broadcast(t,e){let i=[];for(let r of this.actors)i.push(r.sendAsync({type:t,data:e}));return Promise.all(i)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(t=>{t.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,e){for(let i of this.actors)i.registerMessageHandler(t,e)}}function Z(){return a||(a=new U(V(),e.G)).registerMessageHandler("GR",(t,i,r)=>e.m(i,r)),a}function G(t,i){let r=e.H();return e.J(r,r,[1,1,0]),e.K(r,r,[.5*t.width,.5*t.height,1]),e.L(r,r,t.calculatePosMatrix(i.toUnwrapped()))}function H(t,e,i,r,n,o){let a=function(t,e,i){if(t)for(let r of t){let t=e[r];if(t&&t.source===i&&"fill-extrusion"===t.type)return!0}else for(let t in e){let r=e[t];if(r.source===i&&"fill-extrusion"===r.type)return!0}return!1}(n&&n.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(r,s,a);l.sort(W);let h=[];for(let r of l)h.push({wrappedTileID:r.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(e,i,t._state,r.queryGeometry,r.cameraQueryGeometry,r.scale,n,o,s,G(t.transform,r.tileID))});let u=function(t){let e={},i={};for(let r of t){let t=r.queryResults,n=r.wrappedTileID,o=i[n]=i[n]||{};for(let i in t){let r=t[i],n=o[i]=o[i]||{},a=e[i]=e[i]||[];for(let t of r)n[t.featureIndex]||(n[t.featureIndex]=!0,a.push(t))}}return e}(h);for(let e in u)u[e].forEach(e=>{let i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r});return u}function W(t,e){let i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}function X(t,i,r){return e._(this,void 0,void 0,function*(){let n=t;if(t.url?n=(yield e.h(i.transformRequest(t.url,"Source"),r)).data:yield u.frameAsync(r),!n)return null;let o=e.M(e.e(n,t),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in n&&n.vector_layers&&(o.vectorLayerIds=n.vector_layers.map(t=>t.id)),o})}class ${constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):Array.isArray(t)&&(4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof e.N?new e.N(t.lng,t.lat):e.N.convert(t),this}setSouthWest(t){return this._sw=t instanceof e.N?new e.N(t.lng,t.lat):e.N.convert(t),this}extend(t){let i,r;let n=this._sw,o=this._ne;if(t instanceof e.N)i=t,r=t;else{if(!(t instanceof $))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend($.convert(t)):this.extend(e.N.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(e.N.convert(t)):this;if(i=t._sw,r=t._ne,!i||!r)return this}return n||o?(n.lng=Math.min(i.lng,n.lng),n.lat=Math.min(i.lat,n.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this._sw=new e.N(i.lng,i.lat),this._ne=new e.N(r.lng,r.lat)),this}getCenter(){return new e.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new e.N(this.getWest(),this.getNorth())}getSouthEast(){return new e.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){let{lng:i,lat:r}=e.N.convert(t),n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(t){return t instanceof $?t:t?new $(t):t}static fromLngLat(t,i=0){let r=360*i/40075017,n=r/Math.cos(Math.PI/180*t.lat);return new $(new e.N(t.lng-n,t.lat-r),new e.N(t.lng+n,t.lat+r))}}class Y{constructor(t,e,i){this.bounds=$.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){let i=Math.pow(2,t.z),r=Math.floor(e.O(this.bounds.getWest())*i),n=Math.floor(e.Q(this.bounds.getNorth())*i),o=Math.ceil(e.O(this.bounds.getEast())*i),a=Math.ceil(e.Q(this.bounds.getSouth())*i);return t.x>=r&&t.x<o&&t.y>=n&&t.y<a}}class K extends e.E{constructor(t,i,r,n){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.e(this,e.M(i,["url","scheme","tileSize","promoteId"])),this._options=e.e({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}load(){return e._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=yield X(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(e.e(this,t),t.bounds&&(this.tileBounds=new Y(t.bounds,this.minzoom,this.maxzoom)),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new e.j(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return e.e({},this._options)}loadTile(t){return e._(this,void 0,void 0,function*(){let e=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(e,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request.collectResourceTiming=this._collectResourceTiming;let r="RT";if(t.actor&&"expired"!==t.state){if("loading"===t.state)return new Promise((e,i)=>{t.reloadPromise={resolve:e,reject:i}})}else t.actor=this.dispatcher.getActor(),r="LT";t.abortController=new AbortController;try{let e=yield t.actor.sendAsync({type:r,data:i},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,e)}catch(e){if(delete t.abortController,t.aborted)return;if(e&&404!==e.status)throw e;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,e){if(e&&e.resourceTiming&&(t.resourceTiming=e.resourceTiming),e&&this.map._refreshExpiredTiles&&t.setExpiryData(e),t.loadVectorData(e,this.map.painter),t.reloadPromise){let e=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(e.resolve).catch(e.reject)}}abortTile(t){return e._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return e._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class J extends e.E{constructor(t,i,r,n){super(),this.id=t,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.e({type:"raster"},i),e.e(this,e.M(i,["url","scheme","tileSize"]))}load(){return e._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=yield X(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(e.e(this,t),t.bounds&&(this.tileBounds=new Y(t.bounds,this.minzoom,this.maxzoom)),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new e.j(t))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return e.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return e._(this,void 0,void 0,function*(){let e=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{let i=yield b.getImage(this.map._requestManager.transformRequest(e,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(i&&i.data){this.map._refreshExpiredTiles&&i.cacheControl&&i.expires&&t.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});let e=this.map.painter.context,r=e.gl,n=i.data;t.texture=this.map.painter.getTileTexture(n.width),t.texture?t.texture.update(n,{useMipmap:!0}):(t.texture=new E(e,n,r.RGBA,{useMipmap:!0}),t.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(e){if(delete t.abortController,t.aborted)t.state="unloaded";else if(e)throw t.state="errored",e}})}abortTile(t){return e._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return e._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class Q extends J{constructor(t,i,r,n){super(t,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=e.e({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox",this.redFactor=i.redFactor,this.greenFactor=i.greenFactor,this.blueFactor=i.blueFactor,this.baseShift=i.baseShift}loadTile(t){return e._(this,void 0,void 0,function*(){let i=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r=this.map._requestManager.transformRequest(i,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{let i=yield b.getImage(r,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(i&&i.data){let r=i.data;this.map._refreshExpiredTiles&&i.cacheControl&&i.expires&&t.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});let n=e.b(r)&&e.U()?r:yield this.readImageNow(r),o={type:this.type,uid:t.uid,source:this.id,rawImageData:n,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||"expired"===t.state){t.actor=this.dispatcher.getActor();let e=yield t.actor.sendAsync({type:"LDT",data:o});t.dem=e,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(e){if(delete t.abortController,t.aborted)t.state="unloaded";else if(e)throw t.state="errored",e}})}readImageNow(t){return e._(this,void 0,void 0,function*(){if("undefined"!=typeof VideoFrame&&e.V()){let i=t.width+2,r=t.height+2;try{return new e.R({width:i,height:r},(yield e.W(t,-1,-1,i,r)))}catch(t){}}return u.getImageData(t,1)})}_getNeighboringTiles(t){let i=t.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,o=0===i.x?t.wrap-1:t.wrap,a=(i.x+1+r)%r,s=i.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.S(t.overscaledZ,o,i.z,n,i.y).key]={backfilled:!1},l[new e.S(t.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new e.S(t.overscaledZ,o,i.z,n,i.y-1).key]={backfilled:!1},l[new e.S(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.S(t.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new e.S(t.overscaledZ,o,i.z,n,i.y+1).key]={backfilled:!1},l[new e.S(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.S(t.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l}unloadTile(t){return e._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class tt extends e.E{constructor(t,i,r,n){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=e.e({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;let o=e.X/this.tileSize;this.workerOptions=e.e({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:e.X,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.X,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return e._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return e._(this,void 0,void 0,function*(){let t=e.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(void 0!==t.clusterRadius&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),void 0!==t.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,e,i){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:e,offset:i}})}_updateWorkerData(t){return e._(this,void 0,void 0,function*(){let i=e.e({type:this.type},this.workerOptions);t?i.dataDiff=t:"string"==typeof this._data?(i.request=this.map._requestManager.transformRequest(u.resolveURL(this._data),"Source"),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new e.k("dataloading",{dataType:"source"}));try{let t=yield this.actor.sendAsync({type:"LD",data:i});if(this._pendingLoads--,this._removed||t.abandoned)return void this.fire(new e.k("dataabort",{dataType:"source"}));let r=null;t.resourceTiming&&t.resourceTiming[this.id]&&(r=t.resourceTiming[this.id].slice(0));let n={dataType:"source"};this._collectResourceTiming&&r&&r.length>0&&e.e(n,{resourceTiming:r}),this.fire(new e.k("data",Object.assign(Object.assign({},n),{sourceDataType:"metadata"}))),this.fire(new e.k("data",Object.assign(Object.assign({},n),{sourceDataType:"content"})))}catch(t){if(this._pendingLoads--,this._removed)return void this.fire(new e.k("dataabort",{dataType:"source"}));this.fire(new e.j(t))}})}loaded(){return 0===this._pendingLoads}loadTile(t){return e._(this,void 0,void 0,function*(){let e=t.actor?"RT":"LT";t.actor=this.actor;let i={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;let r=yield this.actor.sendAsync({type:e,data:i},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(r,this.map.painter,"RT"===e)})}abortTile(t){return e._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return e._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return e.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var te=e.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ti extends e.E{constructor(t,e,i,r){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(t){return e._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let e=yield b.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,e&&e.data&&(this.image=e.data,t&&(this.coordinates=t),this._finishLoading())}catch(t){this._request=null,this._loaded=!0,this.fire(new e.j(t))}})}loaded(){return this._loaded}updateImage(t){return t.url&&(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null})),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;let i=t.map(e.Z.fromLngLat);this.tileID=function(t){let i=1/0,r=1/0,n=-1/0,o=-1/0;for(let e of t)i=Math.min(i,e.x),r=Math.min(r,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y);let a=Math.max(0,Math.floor(-Math.log(Math.max(n-i,o-r))/Math.LN2)),s=Math.pow(2,a);return new e.a1(a,Math.floor((i+n)/2*s),Math.floor((r+o)/2*s))}(i),this.minzoom=this.maxzoom=this.tileID.z;let r=i.map(t=>this.tileID.getTilePoint(t)._round());return this._boundsArray=new e.$,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,e.X,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,e.X),this._boundsArray.emplaceBack(r[2].x,r[2].y,e.X,e.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;let t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=e.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let r=!1;for(let t in this.tiles){let e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return e._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class tr extends ti{constructor(t,e,i,r){super(t,e,i,r),this.roundZoom=!0,this.type="video",this.options=e}load(){return e._(this,void 0,void 0,function*(){this._loaded=!1;let t=this.options;for(let e of(this.urls=[],t.urls))this.urls.push(this.map._requestManager.transformRequest(e,"Source").url);try{let t=yield e.a3(this.urls);if(this._loaded=!0,!t)return;this.video=t,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(t){this.fire(new e.j(t))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){let i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.j(new e.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;let t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=e.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new E(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let r=!1;for(let t in this.tiles){let e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tn extends ti{constructor(t,i,r,n){super(t,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(t=>!Array.isArray(t)||2!==t.length||t.some(t=>"number"!=typeof t))||this.fire(new e.j(new e.a2(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.j(new e.a2(`sources.${t}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.j(new e.a2(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new e.j(new e.a2(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.j(new e.a2(`sources.${t}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){return e._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.j(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;let i=this.map.painter.context,r=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=e.a0.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E(i,this.canvas,r.RGBA,{premultiply:!0});let n=!1;for(let t in this.tiles){let e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,n=!0)}n&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}let to={},ta=t=>{switch(t){case"geojson":return tt;case"image":return ti;case"raster":return J;case"raster-dem":return Q;case"vector":return K;case"video":return tr;case"canvas":return tn}return to[t]},ts="RTLPluginLoaded";class tl extends e.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Z()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(t=>{throw this.status="error",t})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return e._(this,arguments,void 0,function*(t,e=!1){if(this.url)throw Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=u.resolveURL(t),!this.url)throw Error(`requested url ${t} is invalid`);if("unavailable"===this.status){if(!e)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()})}_requestImport(){return e._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new e.k(ts))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let th=null;function tu(){return th||(th=new tl),th}class tc{constructor(t,i){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=e.a4(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){let e=t+this.timeAdded;e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,i,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(let n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){let i={};if(!e)return i;for(let r of t){let t=r.layerIds.map(t=>e.getLayer(t)).filter(Boolean);if(0!==t.length)for(let e of(r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(e=>t.filter(t=>t.id===e)[0])),t))i[e.id]=r}return i}(t.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){let t=this.buckets[n];if(t instanceof e.a6){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let t in this.buckets){let i=this.buckets[t];if(i instanceof e.a6&&i.hasRTLText){this.hasRTLText=!0,tu().lazyLoad();break}}for(let t in this.queryPadding=0,this.buckets){let e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(t).queryRadius(e))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.a5}unloadVectorData(){for(let t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(let e in this.buckets){let i=this.buckets[e];i.uploadPending()&&i.upload(t)}let e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new E(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new E(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,r,n,o,a,s,l,h){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:h,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,i):{}}querySourceFeatures(t,i){let r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;let n=r.loadVTLayers(),o=i&&i.sourceLayer?i.sourceLayer:"",a=n._geojsonTileLayer||n[o];if(!a)return;let s=e.a7(i&&i.filter),{z:l,x:h,y:u}=this.tileID.canonical,c={z:l,x:h,y:u};for(let i=0;i<a.length;i++){let n=a.feature(i);if(s.needGeometry){let t=e.a8(n,!0);if(!s.filter(new e.a9(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new e.a9(this.tileID.overscaledZ),n))continue;let f=r.getId(n,o),d=new e.aa(n,l,h,u,f);d.tile=c,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){let i=this.expirationTime;if(t.cacheControl){let i=e.ab(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){let t=Date.now(),e=!1;if(this.expirationTime>t)e=!1;else if(i){if(this.expirationTime<i)e=!0;else{let r=this.expirationTime-i;r?this.expirationTime=t+Math.max(r,3e4):e=!0}}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),2147483647)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;let i=this.latestFeatureIndex.loadVTLayers();for(let r in this.buckets){if(!e.style.hasLayer(r))continue;let n=this.buckets[r],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});let l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=u.now()+t}setDependencies(t,e){let i={};for(let t of e)i[t]=!0;this.dependencies[t]=i}hasDependency(t,e){for(let i of t){let t=this.dependencies[i];if(t){for(let i of e)if(t[i])return!0}}return!1}}class tf{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(let t in this.data)for(let e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){let r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);let n={value:e,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout(()=>{this.remove(t,n)},i)),this.data[r].push(n),this.order.push(r),this.order.length>this.max){let t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){let e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){let e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;let i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){let t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){let e=[];for(let i in this.data)for(let r of this.data[i])t(r.value)||e.push(r);for(let t of e)this.remove(t.value.tileID,t)}}class td{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,i,r){let n=String(i);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},e.e(this.stateChanges[t][n],r),null===this.deletedStates[t])for(let e in this.deletedStates[t]={},this.state[t])e!==n&&(this.deletedStates[t][e]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(let e in this.deletedStates[t][n]={},this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null);else for(let e in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;let r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e){if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null}else this.deletedStates[t]=null}getState(t,i){let r=String(i),n=e.e({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){let e=this.deletedStates[t][i];if(null===e)return{};for(let t in e)delete n[t]}return n}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,i){let r={};for(let t in this.stateChanges){this.state[t]=this.state[t]||{};let i={};for(let r in this.stateChanges[t])this.state[t][r]||(this.state[t][r]={}),e.e(this.state[t][r],this.stateChanges[t][r]),i[r]=this.state[t][r];r[t]=i}for(let t in this.deletedStates){this.state[t]=this.state[t]||{};let i={};if(null===this.deletedStates[t])for(let e in this.state[t])i[e]={},this.state[t][e]={};else for(let e in this.deletedStates[t]){if(null===this.deletedStates[t][e])this.state[t][e]={};else for(let i of Object.keys(this.deletedStates[t][e]))delete this.state[t][e][i];i[e]=this.state[t][e]}r[t]=r[t]||{},e.e(r[t],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(let e in t)t[e].setFeatureState(r,i)}}class tp extends e.E{constructor(t,e,i){super(),this.id=t,this.dispatcher=i,this.on("data",t=>this._dataHandler(t)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((t,e,i,r)=>{let n=new(ta(e.type))(t,e,i,r);if(n.id!==t)throw Error(`Expected Source id to be ${t} instead of ${n.id}`);return n})(t,e,i,this),this._tiles={},this._cache=new tf(0,t=>this._unloadTile(t)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new td,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let t in this._tiles){let e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,i,r){return e._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,i,r)}catch(i){t.state="errored",404!==i.status?this._source.fire(new e.j(i,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new e.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){for(let e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){let i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(tm).map(t=>t.key)}getRenderableIds(t){let i=[];for(let e in this._tiles)this._isIdRenderable(e,t)&&i.push(this._tiles[e]);return t?i.sort((t,i)=>{let r=t.tileID,n=i.tileID,o=new e.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new e.P(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x}).map(t=>t.tileID.key):i.map(t=>t.tileID).sort(tm).map(t=>t.key)}hasRenderableParent(t){let e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else for(let t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}_reloadTile(t,i){return e._(this,void 0,void 0,function*(){let e=this._tiles[t];e&&("loading"!==e.state&&(e.state=i),yield this._loadTile(e,t,i))})}_tileLoaded(t,i,r){t.timeAdded=u.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new e.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){let e=this.getRenderableIds();for(let r=0;r<e.length;r++){let n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){let e=this.getTileByID(n);i(t,e),i(e,t)}}function i(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,r){for(let n in this._tiles){let o=this._tiles[n];if(r[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){let t=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[t.key])&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(t[(s=s.scaledTo(s.overscaledZ-1)).key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){let i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){let e=t.scaledTo(i),r=this._getLoadedTile(e);if(r)return r}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){let e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){let i=Math.floor((Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1)*(null===this._maxTileCacheZoomLevels?e.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(r)}handleWrapJump(t){let e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){let t={};for(let i in this._tiles){let r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}for(let e in this._tiles=t,this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(let t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(t,e,i,r,n,o){let a={},s={},l=Object.keys(t),h=u.now();for(let i of l){let r=t[i],n=this._tiles[i];if(!n||0!==n.fadeEndTime&&n.fadeEndTime<=h)continue;let o=this.findLoadedParent(r,e),l=this.findLoadedSibling(r),u=o||l||null;u&&(this._addTile(u.tileID),a[u.tileID.key]=u.tileID),s[i]=r}for(let e in this._retainLoadedChildren(s,r,i,t),a)t[e]||(this._coveredTiles[e]=!0,t[e]=a[e]);if(o){let e={},i={};for(let t of n)this._tiles[t.key].hasData()?e[t.key]=t:i[t.key]=t;for(let r in i){let n=i[r].children(this._source.maxzoom);this._tiles[n[0].key]&&this._tiles[n[1].key]&&this._tiles[n[2].key]&&this._tiles[n[3].key]&&(e[n[0].key]=t[n[0].key]=n[0],e[n[1].key]=t[n[1].key]=n[1],e[n[2].key]=t[n[2].key]=n[2],e[n[3].key]=t[n[3].key]=n[3],delete i[r])}for(let r in i){let n=i[r],o=this.findLoadedParent(n,this._source.minzoom),a=this.findLoadedSibling(n),s=o||a||null;if(s)for(let i in e[s.tileID.key]=t[s.tileID.key]=s.tileID,e)e[i].isChildOf(s.tileID)&&delete e[i]}for(let t in this._tiles)e[t]||(this._coveredTiles[t]=!0)}}update(t,i){let r;if(!this._sourceLoaded||this._paused)return;this.transform=t,this.terrain=i,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(t=>new e.S(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)):(r=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i}),this._source.hasTile&&(r=r.filter(t=>this._source.hasTile(t)))):r=[];let n=t.coveringZoomLevel(this._source),o=Math.max(n-tp.maxOverzooming,this._source.minzoom),a=Math.max(n+tp.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let t={};for(let e of r)if(e.canonical.z>this._source.minzoom){let i=e.scaledTo(e.canonical.z-1);t[i.key]=i;let r=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[r.key]=r}r=r.concat(Object.values(t))}let s=0===r.length&&!this._updated&&this._didEmitContent;this._updated=!0,s&&this.fire(new e.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let l=this._updateRetainedTiles(r,n);for(let t in tg(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,a,n,r,i),l)this._tiles[t].clearFadeHold();for(let t of e.ac(this._tiles,l)){let e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){var i;let r={},n={},o=Math.max(e-tp.maxOverzooming,this._source.minzoom),a=Math.max(e+tp.maxUnderzooming,this._source.minzoom),s={};for(let i of t){let t=this._addTile(i);r[i.key]=i,t.hasData()||e<this._source.maxzoom&&(s[i.key]=i)}for(let l of(this._retainLoadedChildren(s,e,a,r),t)){let t=this._tiles[l.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){let t=l.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){r[t.key]=t;continue}}else{let t=l.children(this._source.maxzoom);if(r[t[0].key]&&r[t[1].key]&&r[t[2].key]&&r[t[3].key])continue}let a=t.wasRequested();for(let e=l.overscaledZ-1;e>=o;--e){let o=l.scaledTo(e);if(n[o.key])break;if(n[o.key]=!0,(t=this.getTile(o))||!a||(t=this._addTile(o)),t){let e=t.hasData();if((e||!(null===(i=this.map)||void 0===i?void 0:i.cancelPendingTileRequestsWhileZooming)||a)&&(r[o.key]=o),a=t.wasRequested(),e)break}}}return r}_updateLoadedParentTileCache(){for(let t in this._loadedParentTiles={},this._tiles){let e=[],i,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);let t=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(t))break;r=t}for(let t of e)this._loadedParentTiles[t]=i}}_updateLoadedSiblingTileCache(){for(let t in this._loadedSiblingTiles={},this._tiles){let e=this._tiles[t].tileID,i=this._getLoadedTile(e);this._loadedSiblingTiles[e.key]=i}}_addTile(t){let i=this._tiles[t.key];if(i)return i;(i=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));let r=i;return i||(i=new tc(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(i,t.key,i.state)),i.uses++,this._tiles[t.key]=i,r||this._source.fire(new e.k("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);let i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},i))}_removeTile(t){let e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}_dataHandler(t){let e=t.sourceDataType;"source"===t.dataType&&"metadata"===e&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===e&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){for(let t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,i,r){let n=[],o=this.transform;if(!o)return n;let a=r?o.getCameraQueryGeometry(t):t,s=t.map(t=>o.pointCoordinate(t,this.terrain)),l=a.map(t=>o.pointCoordinate(t,this.terrain)),h=this.getIds(),u=1/0,c=1/0,f=-1/0,d=-1/0;for(let t of l)u=Math.min(u,t.x),c=Math.min(c,t.y),f=Math.max(f,t.x),d=Math.max(d,t.y);for(let t=0;t<h.length;t++){let r=this._tiles[h[t]];if(r.holdingForFade())continue;let a=r.tileID,p=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=i*r.queryPadding*e.X/r.tileSize/p,g=[a.getTilePoint(new e.Z(u,c)),a.getTilePoint(new e.Z(f,d))];if(g[0].x-m<e.X&&g[0].y-m<e.X&&g[1].x+m>=0&&g[1].y+m>=0){let t=s.map(t=>a.getTilePoint(t)),e=l.map(t=>a.getTilePoint(t));n.push({tile:r,tileID:a,queryGeometry:t,cameraQueryGeometry:e,scale:p})}}return n}getVisibleCoordinates(t){let e=this.getRenderableIds(t).map(t=>this._tiles[t].tileID);for(let t of e)t.posMatrix=this.transform.calculatePosMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(tg(this._source.type)){let t=u.now();for(let e in this._tiles)if(this._tiles[e].fadeEndTime>=t)return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){let r=this._tiles[t];r&&r.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(let i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter(i=>!i.hasDependency(t,e))}}function tm(t,e){let i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function tg(t){return"raster"===t||"image"===t||"video"===t}tp.maxOverzooming=10,tp.maxUnderzooming=3;class ty{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.ad(t,0,1);let i=1,r=this._distances[i],n=t*this.paddedLength+this.padding;for(;r<n&&i<this._distances.length;)r=this._distances[++i];let o=i-1,a=this._distances[o],s=r-a,l=s>0?(n-a)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}function tv(t,e){let i=!0;return"always"===t||"never"!==t&&"never"!==e||(i=!1),i}class t_{constructor(t,e,i){let r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let t=0;t<this.xCellCount*this.yCellCount;t++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}insertCircle(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)}_insertBoxCell(t,e,i,r,n,o){this.boxCells[n].push(o)}_insertCircleCell(t,e,i,r,n,o){this.circleCells[n].push(o)}_query(t,e,i,r,n,o,a){if(i<0||t>this.width||r<0||e>this.height)return[];let s=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return[{key:null,x1:t,y1:e,x2:i,y2:r}];for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){let e=this.circles[3*t],i=this.circles[3*t+1],r=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-r,y1:i-r,x2:e+r,y2:i+r})}}else this._forEachCell(t,e,i,r,this._queryCell,s,{hitTest:n,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(t,e,i,r){return this._query(t,e,i,r,!1,null)}hitTest(t,e,i,r,n,o){return this._query(t,e,i,r,!0,n,o).length>0}hitTestCircle(t,e,i,r,n){let o=t-i,a=t+i,s=e-i,l=e+i;if(a<0||o>this.width||l<0||s>this.height)return!1;let h=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,h,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),h.length>0}_queryCell(t,e,i,r,n,o,a,s){let{seenUids:l,hitTest:h,overlapMode:u}=a,c=this.boxCells[n];if(null!==c){let n=this.bboxes;for(let a of c)if(!l.box[a]){l.box[a]=!0;let c=4*a,f=this.boxKeys[a];if(t<=n[c+2]&&e<=n[c+3]&&i>=n[c+0]&&r>=n[c+1]&&(!s||s(f))&&(!h||!tv(u,f.overlapMode))&&(o.push({key:f,x1:n[c],y1:n[c+1],x2:n[c+2],y2:n[c+3]}),h))return!0}}let f=this.circleCells[n];if(null!==f){let n=this.circles;for(let a of f)if(!l.circle[a]){l.circle[a]=!0;let c=3*a,f=this.circleKeys[a];if(this._circleAndRectCollide(n[c],n[c+1],n[c+2],t,e,i,r)&&(!s||s(f))&&(!h||!tv(u,f.overlapMode))){let t=n[c],e=n[c+1],i=n[c+2];if(o.push({key:f,x1:t-i,y1:e-i,x2:t+i,y2:e+i}),h)return!0}}}return!1}_queryCellCircle(t,e,i,r,n,o,a,s){let{circle:l,seenUids:h,overlapMode:u}=a,c=this.boxCells[n];if(null!==c){let t=this.bboxes;for(let e of c)if(!h.box[e]){h.box[e]=!0;let i=4*e,r=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!s||s(r))&&!tv(u,r.overlapMode))return o.push(!0),!0}}let f=this.circleCells[n];if(null!==f){let t=this.circles;for(let e of f)if(!h.circle[e]){h.circle[e]=!0;let i=3*e,r=this.circleKeys[e];if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!s||s(r))&&!tv(u,r.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,i,r,n,o,a,s){let l=this._convertToXCellCoord(t),h=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),c=this._convertToYCellCoord(r);for(let f=l;f<=u;f++)for(let l=h;l<=c;l++)if(n.call(this,t,e,i,r,this.xCellCount*l+f,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,r,n,o){let a=r-t,s=n-e,l=i+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,i,r,n,o,a){let s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+i)return!1;let h=(a-n)/2,u=Math.abs(e-(n+h));if(u>h+i)return!1;if(l<=s||u<=h)return!0;let c=l-s,f=u-h;return c*c+f*f<=i*i}}function tb(t,i,r,n,o){let a=e.H();return i?(e.K(a,a,[1/o,1/o,1]),r||e.ae(a,a,n.angle)):e.L(a,n.labelPlaneMatrix,t),a}function tx(t,i,r,n,o){if(i){let i=e.af(t);return e.K(i,i,[o,o,1]),r||e.ae(i,i,-n.angle),i}return n.glCoordMatrix}function tw(t,i,r){let n;r?(n=[t.x,t.y,r(t.x,t.y),1],e.ag(n,n,i)):function(t,e,i){let r=e[0],n=e[1];t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15]}(n=[t.x,t.y,0,1],n,i);let o=n[3];return{point:new e.P(n[0]/o,n[1]/o),signedDistanceFromCamera:o,isOccluded:!1}}function tM(t,e){return .5+t/e*.5}function tS(t,e){return t.x>=-e[0]&&t.x<=e[0]&&t.y>=-e[1]&&t.y<=e[1]}function tk(t,i,r,n,o,a,s,l,h,u,c,f,d,p,m){let g=n?t.textSizeData:t.iconSizeData,y=e.ah(g,r.transform.zoom),v=[256/r.width*2+1,256/r.height*2+1],_=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;_.clear();let b=t.lineVertexArray,x=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,w=r.transform.width/r.transform.height,M=!1;for(let n=0;n<x.length;n++){let S=x.get(n);if(S.hidden||S.writingMode===e.ai.vertical&&!M){tO(S.numGlyphs,_);continue}M=!1;let k=tw(new e.P(S.anchorX,S.anchorY),i,m);if(!tS(k.point,v)){tO(S.numGlyphs,_);continue}let E=tM(r.transform.cameraToCenterDistance,k.signedDistanceFromCamera),I=e.aj(g,y,S),P=s?I/E:I*E,T={getElevation:m,labelPlaneMatrix:o,lineVertexArray:b,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:u,tileAnchorPoint:new e.P(S.anchorX,S.anchorY),unwrappedTileID:c,width:f,height:d,translation:p},A=tP(T,S,P,!1,l,i,a,t.glyphOffsetArray,_,w,h);M=A.useVertical,(A.notEnoughRoom||M||A.needsFlipping&&tP(T,S,P,!0,l,i,a,t.glyphOffsetArray,_,w,h).notEnoughRoom)&&tO(S.numGlyphs,_)}n?t.text.dynamicLayoutVertexBuffer.updateData(_):t.icon.dynamicLayoutVertexBuffer.updateData(_)}function tE(t,e,i,r,n,o,a,s){let l=o.glyphStartIndex+o.numGlyphs,h=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,c=e.getoffsetX(o.glyphStartIndex),f=e.getoffsetX(l-1),d=tN(t*c,i,r,n,o.segment,h,u,s,a);if(!d)return null;let p=tN(t*f,i,r,n,o.segment,h,u,s,a);return p?s.projectionCache.anyProjectionOccluded?null:{first:d,last:p}:null}function tI(t,i,r,n){return t===e.ai.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(t===e.ai.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function tP(t,i,r,n,o,a,s,l,h,u,c){let f;let d=r/24,p=i.lineOffsetX*d,m=i.lineOffsetY*d;if(i.numGlyphs>1){let e=i.glyphStartIndex+i.numGlyphs,r=i.lineStartIndex,a=i.lineStartIndex+i.lineLength,h=tE(d,l,p,m,n,i,c,t);if(!h)return{notEnoughRoom:!0};let g=tw(h.first.point,s,t.getElevation).point,y=tw(h.last.point,s,t.getElevation).point;if(o&&!n){let t=tI(i.writingMode,g,y,u);if(t)return t}f=[h.first];for(let o=i.glyphStartIndex+1;o<e-1;o++)f.push(tN(d*l.getoffsetX(o),p,m,n,i.segment,r,a,t,c));f.push(h.last)}else{if(o&&!n){let r=tw(t.tileAnchorPoint,a,t.getElevation).point,n=i.lineStartIndex+i.segment+1,o=new e.P(t.lineVertexArray.getx(n),t.lineVertexArray.gety(n)),s=tw(o,a,t.getElevation),l=s.signedDistanceFromCamera>0?s.point:function(t,e,i,r,n,o){return tT(t,e,i,1,n,o)}(t.tileAnchorPoint,o,r,0,a,t),h=tI(i.writingMode,r,l,u);if(h)return h}let r=tN(d*l.getoffsetX(i.glyphStartIndex),p,m,n,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,t,c);if(!r||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};f=[r]}for(let t of f)e.ak(h,t.point,t.angle);return{}}function tT(t,e,i,r,n,o){let a=t.add(t.sub(e)._unit()),s=void 0!==n?tw(a,n,o.getElevation).point:tC(a.x,a.y,o).point,l=i.sub(s);return i.add(l._mult(r/l.mag()))}function tA(t,i,r){let n=i.projectionCache;if(n.projections[t])return n.projections[t];let o=new e.P(i.lineVertexArray.getx(t),i.lineVertexArray.gety(t)),a=tC(o.x,o.y,i);if(a.signedDistanceFromCamera>0)return n.projections[t]=a.point,n.anyProjectionOccluded=n.anyProjectionOccluded||a.isOccluded,a.point;let s=t-r.direction;return function(t,e,i,r,n){return tT(t,e,i,r,void 0,n)}(0===r.distanceFromAnchor?i.tileAnchorPoint:new e.P(i.lineVertexArray.getx(s),i.lineVertexArray.gety(s)),o,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,i)}function tC(t,i,r){let n;let o=t+r.translation[0],a=i+r.translation[1];return!r.pitchWithMap&&r.projection.useSpecialProjectionForSymbols?((n=r.projection.projectTileCoordinates(o,a,r.unwrappedTileID,r.getElevation)).point.x=(.5*n.point.x+.5)*r.width,n.point.y=(-(.5*n.point.y)+.5)*r.height):(n=tw(new e.P(o,a),r.labelPlaneMatrix,r.getElevation)).isOccluded=!1,n}function tL(t,e,i){return t._unit()._perp()._mult(e*i)}function tR(t,i,r,n,o,a,s,l,h){if(l.projectionCache.offsets[t])return l.projectionCache.offsets[t];let u=r.add(i);if(t+h.direction<n||t+h.direction>=o)return l.projectionCache.offsets[t]=u,u;let c=tA(t+h.direction,l,h),f=tL(c.sub(r),s,h.direction),d=r.add(f),p=c.add(f);return l.projectionCache.offsets[t]=e.al(a,u,d,p)||u,l.projectionCache.offsets[t]}function tN(t,e,i,r,n,o,a,s,l){let h;let u=r?t-e:t+e,c=u>0?1:-1,f=0;r&&(c*=-1,f=Math.PI),c<0&&(f+=Math.PI);let d,p=c>0?o+n:o+n+1;s.projectionCache.cachedAnchorPoint?d=s.projectionCache.cachedAnchorPoint:(d=tC(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,s.projectionCache.cachedAnchorPoint=d);let m,g,y=d,v=d,_=0,b=0,x=Math.abs(u),w=[];for(;_+b<=x;){if((p+=c)<o||p>=a)return null;_+=b,v=y,g=m;let t={absOffsetX:x,direction:c,distanceFromAnchor:_,previousVertex:v};if(y=tA(p,s,t),0===i)w.push(v),h=y.sub(v);else{let e;let r=y.sub(v);e=0===r.mag()?tL(tA(p+c,s,t).sub(y),i,c):tL(r,i,c),g||(g=v.add(e)),m=tR(p,e,y,o,a,g,i,s,t),w.push(g),h=m.sub(g)}b=h.mag()}let M=h._mult((x-_)/b)._add(g||v),S=f+Math.atan2(y.y-v.y,y.x-v.x);return w.push(M),{point:M,angle:l?S:0,path:w}}let tz=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function tO(t,e){for(let i=0;i<t;i++){let t=e.length;e.resize(t+4),e.float32.set(tz,3*t)}}let tD=100;class tB{constructor(t,e,i=new t_(t.width+200,t.height+200,25),r=new t_(t.width+200,t.height+200,25)){this.transform=t,this.mapProjection=e,this.grid=i,this.ignoredGrid=r,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+tD,this.screenBottomBoundary=t.height+tD,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,i,r,n,o,a,s,l,h,u){let c=t.anchorPointX+s[0],f=t.anchorPointY+s[1],d=this.projectAndGetPerspectiveRatio(r,c,f,n,h),p=this._projectCollisionBox(t,i,r,n,o,a,s,d,h,u),[m,g,y,v]=p.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?p.allPointsOccluded:this.mapProjection.isOccluded(c,f,n))||d.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(m,g,y,v)||"always"!==e&&this.grid.hitTest(m,g,y,v,e,l)?{box:[m,g,y,v],placeable:!1,offscreen:!1}:{box:[m,g,y,v],placeable:!0,offscreen:this.isOffscreen(m,g,y,v)}}placeCollisionCircles(t,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g){let y=[],v=new e.P(i.anchorX,i.anchorY),_=this.getPerspectiveRatio(a,v.x,v.y,s,g),b=(c?o/_:o*_)/e.aq,x={getElevation:g,labelPlaneMatrix:l,lineVertexArray:r,pitchWithMap:c,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:v,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:m},w=tE(b,n,i.lineOffsetX*b,i.lineOffsetY*b,!1,i,!1,x),M=!1,S=!1,k=!0;if(w){let i=.5*d*_+p,r=new e.P(-100,-100),n=new e.P(this.screenRightBoundary,this.screenBottomBoundary),o=new ty,a=w.first,s=w.last,l=[];for(let t=a.path.length-1;t>=1;t--)l.push(a.path[t]);for(let t=1;t<s.path.length;t++)l.push(s.path[t]);let c=2.5*i;if(h){let t=this.projectPathToScreenSpace(l,x,h);l=t.some(t=>t.signedDistanceFromCamera<=0)?[]:t.map(t=>t.point)}let m=[];if(l.length>0){let t=l[0].clone(),i=l[0].clone();for(let e=1;e<l.length;e++)t.x=Math.min(t.x,l[e].x),t.y=Math.min(t.y,l[e].y),i.x=Math.max(i.x,l[e].x),i.y=Math.max(i.y,l[e].y);m=t.x>=r.x&&i.x<=n.x&&t.y>=r.y&&i.y<=n.y?[l]:i.x<r.x||t.x>n.x||i.y<r.y||t.y>n.y?[]:e.am([l],r.x,r.y,n.x,n.y)}for(let e of m){o.reset(e,.25*i);let r=0;r=o.length<=.5*i?1:Math.ceil(o.paddedLength/c)+1;for(let e=0;e<r;e++){let n=e/Math.max(r-1,1),a=o.lerp(n),s=a.x+tD,l=a.y+tD;y.push(s,l,i,0);let h=s-i,c=l-i,d=s+i,p=l+i;if(k=k&&this.isOffscreen(h,c,d,p),S=S||this.isInsideGrid(h,c,d,p),"always"!==t&&this.grid.hitTestCircle(s,l,i,t,f)&&(M=!0,!u))return{circles:[],offscreen:!1,collisionDetected:M}}}}return{circles:!u&&M||!S||_<this.perspectiveRatioCutoff?[]:y,offscreen:k,collisionDetected:M}}projectPathToScreenSpace(t,e,i){return t.map(t=>tw(t,i,e.getElevation))}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};let i=[],r=1/0,n=1/0,o=-1/0,a=-1/0;for(let s of t){let t=new e.P(s.x+tD,s.y+tD);r=Math.min(r,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),i.push(t)}let s=this.grid.query(r,n,o,a).concat(this.ignoredGrid.query(r,n,o,a)),l={},h={};for(let t of s){let r=t.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;let n=[new e.P(t.x1,t.y1),new e.P(t.x2,t.y1),new e.P(t.x2,t.y2),new e.P(t.x1,t.y2)];e.an(i,n)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===h[r.bucketInstanceId]&&(h[r.bucketInstanceId]=[]),h[r.bucketInstanceId].push(r.featureIndex))}return h}insertCollisionBox(t,e,i,r,n,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,r,n,o){let a=i?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:n,collisionGroupID:o,overlapMode:e};for(let e=0;e<t.length;e+=4)a.insertCircle(s,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(t,i,r,n,o){let a=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(i,r,n,o):tw(new e.P(i,r),t,o);return{point:new e.P((a.point.x+1)/2*this.transform.width+tD,(1-a.point.y)/2*this.transform.height+tD),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a.signedDistanceFromCamera*.5,isOccluded:a.isOccluded,signedDistanceFromCamera:a.signedDistanceFromCamera}}getPerspectiveRatio(t,i,r,n,o){let a=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(i,r,n,o):tw(new e.P(i,r),t,o);return .5+this.transform.cameraToCenterDistance/a.signedDistanceFromCamera*.5}isOffscreen(t,e,i,r){return i<tD||t>=this.screenRightBoundary||r<tD||e>this.screenBottomBoundary}isInsideGrid(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){let t=e.ao([]);return e.J(t,t,[-100,-100,0]),t}_projectCollisionBox(t,i,r,n,o,a,s,l,h,u){let c=i*l.perspectiveRatio,f=new e.P(1,0),d=new e.P(0,1),p=new e.P(t.anchorPointX+s[0],t.anchorPointY+s[1]);if(a&&!o){let t=this.projectAndGetPerspectiveRatio(r,p.x+1,p.y,n,h).point.sub(l.point).unit(),i=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0),o=Math.sin(i),a=Math.cos(i);f=new e.P(a,o),d=new e.P(-o,a)}else if(!a&&o){let t=-this.transform.angle,i=Math.sin(t),r=Math.cos(t);f=new e.P(r,i),d=new e.P(-i,r)}let m=l.point,g=c;o&&(m=p,g=Math.pow(2,-(this.transform.zoom-Math.floor(this.transform.zoom)))*this.mapProjection.getPitchedTextCorrection(this.transform,p,n),u||(g*=e.ad(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),u&&(m=m.add(f.mult(u.x*g)).add(d.mult(u.y*g)));let y=t.x1*g,v=t.x2*g,_=(y+v)/2,b=t.y1*g,x=t.y2*g,w=(b+x)/2,M=[];for(let{offsetX:t,offsetY:i}of[{offsetX:y,offsetY:b},{offsetX:_,offsetY:b},{offsetX:v,offsetY:b},{offsetX:v,offsetY:w},{offsetX:v,offsetY:x},{offsetX:_,offsetY:x},{offsetX:y,offsetY:x},{offsetX:y,offsetY:w}])M.push(new e.P(m.x+f.x*t+d.x*i,m.y+f.y*t+d.y*i));let S=!1;if(o){let t=M.map(t=>this.projectAndGetPerspectiveRatio(r,t.x,t.y,n,h));S=t.some(t=>!t.isOccluded),M=t.map(t=>t.point)}else S=!0;return{box:e.ap(M),allPointsOccluded:!S}}}function tF(t,i,r){return i*(e.X/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}class tj{constructor(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class tq{constructor(t,e,i,r,n){this.text=new tj(t?t.text:null,e,i,n),this.icon=new tj(t?t.icon:null,e,r,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tV{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class tU{constructor(){this.invProjMatrix=e.H(),this.viewportMatrix=e.H(),this.circles=[]}}class tZ{constructor(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}}class tG{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){let e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function tH(t,i,r,n,o){let{horizontalAlign:a,verticalAlign:s}=e.av(t);return new e.P(-(a-.5)*i+n[0]*o,-(s-.5)*r+n[1]*o)}class tW{constructor(t,e,i,r,n,o){this.transform=t.clone(),this.terrain=i,this.collisionIndex=new tB(this.transform,e),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new tG(n),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){let e=this.terrain;return e?(i,r)=>e.getElevation(t,i,r):null}getBucketParts(t,i,r,n){let o=r.getBucket(i),a=r.latestFeatureIndex;if(!o||!a||i.id!==o.layerIds[0])return;let s=r.collisionBoxArray,l=o.layers[0].layout,h=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.X,f=r.tileID.toUnwrapped(),d=this.transform.calculatePosMatrix(f),p="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),g=tF(r,1,this.transform.zoom),y=this.collisionIndex.mapProjection.translatePosition(this.transform,r,h.get("text-translate"),h.get("text-translate-anchor")),v=this.collisionIndex.mapProjection.translatePosition(this.transform,r,h.get("icon-translate"),h.get("icon-translate-anchor")),_=tb(d,p,m,this.transform,g),b=null;if(p){let t=tx(d,p,m,this.transform,g);b=e.L([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new tZ(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);let x={bucket:o,layout:l,translationText:y,translationIcon:v,posMatrix:d,unwrappedTileID:f,textLabelPlaneMatrix:_,labelToScreenMatrix:b,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.ah(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(let e of o.sortKeyRanges){let{sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n}=e;t.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n,parameters:x})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}attemptAnchorPlacement(t,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_){let b=e.ar[t.textAnchor],x=[t.textOffset0,t.textOffset1],w=tH(b,r,n,x,o),M=this.collisionIndex.placeCollisionBox(i,f,l,h,u,s,a,g,c.predicate,_,w);if((!v||this.collisionIndex.placeCollisionBox(v,f,l,h,u,s,a,y,c.predicate,_,w).placeable)&&M.placeable){let t;if(this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(t=this.prevPlacement.variableOffsets[d.crossTileID].anchor),0===d.crossTileID)throw Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[d.crossTileID]={textOffset:x,width:r,height:n,anchor:b,textBoxScale:o,prevAnchor:t},this.markUsedJustification(p,b,d,m),p.allowVerticalPlacement&&(this.markUsedOrientation(p,m,d),this.placedOrientations[d.crossTileID]=m),{shift:w,placedGlyphBoxes:M}}}placeLayerBucketPart(t,i,r){let{bucket:n,layout:o,translationText:a,translationIcon:s,posMatrix:l,unwrappedTileID:h,textLabelPlaneMatrix:u,labelToScreenMatrix:c,textPixelRatio:f,holdingForFade:d,collisionBoxArray:p,partiallyEvaluatedTextSize:m,collisionGroup:g}=t.parameters,y=o.get("text-optional"),v=o.get("icon-optional"),_=e.as(o,"text-overlap","text-allow-overlap"),b="always"===_,x=e.as(o,"icon-overlap","icon-allow-overlap"),w="always"===x,M="map"===o.get("text-rotation-alignment"),S="map"===o.get("text-pitch-alignment"),k="none"!==o.get("icon-text-fit"),E="viewport-y"===o.get("symbol-z-order"),I=b&&(w||!n.hasIconData()||v),P=w&&(b||!n.hasTextData()||y);!n.collisionArrays&&p&&n.deserializeCollisionBoxes(p);let T=this._getTerrainElevationFunc(this.retainedQueryData[n.bucketInstanceId].tileID),A=(t,p,w)=>{var E,A;if(i[t.crossTileID])return;if(d)return void(this.placements[t.crossTileID]=new tV(!1,!1,!1));let C=!1,R=!1,N=!0,z=null,O={box:null,placeable:!1,offscreen:null},D={box:null,placeable:!1,offscreen:null},B=null,F=null,j=null,q=0,V=0,U=0;p.textFeatureIndex?q=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(q=t.featureIndex),p.verticalTextFeatureIndex&&(V=p.verticalTextFeatureIndex);let Z=p.textBox;if(Z){let i=i=>{let r=e.ai.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){let e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,r=e,this.markUsedOrientation(n,r,t))}return r},o=(i,r)=>{if(n.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&p.verticalTextBox){for(let t of n.writingModes)if(t===e.ai.vertical?D=O=r():O=i(),O&&O.placeable)break}else O=i()},u=t.textAnchorOffsetStartIndex,c=t.textAnchorOffsetEndIndex;if(c===u){let r=(e,i)=>{let r=this.collisionIndex.placeCollisionBox(e,_,f,l,h,S,M,a,g.predicate,T);return r&&r.placeable&&(this.markUsedOrientation(n,i,t),this.placedOrientations[t.crossTileID]=i),r};o(()=>r(Z,e.ai.horizontal),()=>{let i=p.verticalTextBox;return n.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?r(i,e.ai.vertical):{box:null,offscreen:null}}),i(O&&O.placeable)}else{let d=e.ar[null===(A=null===(E=this.prevPlacement)||void 0===E?void 0:E.variableOffsets[t.crossTileID])||void 0===A?void 0:A.anchor],m=(i,o,p)=>{let m=i.x2-i.x1,y=i.y2-i.y1,v=t.textBoxScale,b=k&&"never"===x?o:null,w=null,E="never"===_?1:2,I="never";d&&E++;for(let e=0;e<E;e++){for(let e=u;e<c;e++){let r=n.textAnchorOffsets.get(e);if(d&&r.textAnchor!==d)continue;let o=this.attemptAnchorPlacement(r,i,m,y,v,M,S,f,l,h,g,I,t,n,p,a,s,b,T);if(o&&(w=o.placedGlyphBoxes)&&w.placeable)return C=!0,z=o.shift,w}d?d=null:I=_}return r&&!w&&(w={box:this.collisionIndex.placeCollisionBox(Z,"always",f,l,h,S,M,a,g.predicate,T,new e.P(0,0)).box,offscreen:!1,placeable:!1}),w};o(()=>m(Z,p.iconBox,e.ai.horizontal),()=>{let i=p.verticalTextBox;return n.allowVerticalPlacement&&(!O||!O.placeable)&&t.numVerticalGlyphVertices>0&&i?m(i,p.verticalIconBox,e.ai.vertical):{box:null,occluded:!0,offscreen:null}}),O&&(C=O.placeable,N=O.offscreen);let y=i(O&&O.placeable);if(!C&&this.prevPlacement){let e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(n,e.anchor,t,y))}}}if(C=(B=O)&&B.placeable,N=B&&B.offscreen,t.useRuntimeCollisionCircles){let i=n.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),s=e.aj(n.textSizeData,m,i),f=o.get("text-padding");(F=this.collisionIndex.placeCollisionCircles(_,i,n.lineVertexArray,n.glyphOffsetArray,s,l,h,u,c,r,S,g.predicate,t.collisionCircleDiameter,f,a,T)).circles.length&&F.collisionDetected&&!r&&e.w("Collisions detected, but collision boxes are not shown"),C=b||F.circles.length>0&&!F.collisionDetected,N=N&&F.offscreen}if(p.iconFeatureIndex&&(U=p.iconFeatureIndex),p.iconBox){let t=t=>this.collisionIndex.placeCollisionBox(t,x,f,l,h,S,M,s,g.predicate,T,k&&z?z:void 0);R=D&&D.placeable&&p.verticalIconBox?(j=t(p.verticalIconBox)).placeable:(j=t(p.iconBox)).placeable,N=N&&j.offscreen}let G=y||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,H=v||0===t.numIconVertices;G||H?H?G||(R=R&&C):C=R&&C:R=C=R&&C;let W=R&&j.placeable;if(C&&B.placeable&&this.collisionIndex.insertCollisionBox(B.box,_,o.get("text-ignore-placement"),n.bucketInstanceId,D&&D.placeable&&V?V:q,g.ID),W&&this.collisionIndex.insertCollisionBox(j.box,x,o.get("icon-ignore-placement"),n.bucketInstanceId,U,g.ID),F&&C&&this.collisionIndex.insertCollisionCircles(F.circles,_,o.get("text-ignore-placement"),n.bucketInstanceId,q,g.ID),r&&this.storeCollisionData(n.bucketInstanceId,w,p,B,j,F),0===t.crossTileID)throw Error("symbolInstance.crossTileID can't be 0");if(0===n.bucketInstanceId)throw Error("bucket.bucketInstanceId can't be 0");this.placements[t.crossTileID]=new tV(C||I,R||P,N||n.justReloaded),i[t.crossTileID]=!0};if(E){if(0!==t.symbolInstanceStart)throw Error("bucket.bucketInstanceId should be 0");let e=n.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){let i=e[t];A(n.symbolInstances.get(i),n.collisionArrays[i],i)}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)A(n.symbolInstances.get(e),n.collisionArrays[e],e);if(r&&n.bucketInstanceId in this.collisionCircleArrays){let t=this.collisionCircleArrays[n.bucketInstanceId];e.at(t.invProjMatrix,l),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1}storeCollisionData(t,e,i,r,n,o){if(i.textBox||i.iconBox){let o,a;this.collisionBoxArrays.has(t)?o=this.collisionBoxArrays.get(t):(o=new Map,this.collisionBoxArrays.set(t,o)),o.has(e)?a=o.get(e):(a={text:null,icon:null},o.set(e,a)),i.textBox&&(a.text=r.box),i.iconBox&&(a.icon=n.box)}if(o){let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new tU);for(let t=0;t<o.circles.length;t+=4)e.circles.push(o.circles[t+0]),e.circles.push(o.circles[t+1]),e.circles.push(o.circles[t+2]),e.circles.push(o.collisionDetected?1:0)}}markUsedJustification(t,i,r,n){let o;for(let a of(o=n===e.ai.vertical?r.verticalPlacedTextSymbolIndex:({left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex})[e.au(i)],[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex]))a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=o>=0&&a!==o?0:r.crossTileID)}markUsedOrientation(t,i,r){let n=i===e.ai.horizontal||i===e.ai.horizontalOnly?i:0,o=i===e.ai.vertical?i:0;for(let e of[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex])t.text.placedSymbolArray.get(e).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;let e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;let r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(let t in this.placements){let e=this.placements[t],o=n[t];o?(this.opacities[t]=new tq(o,r,e.text,e.icon),i=i||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new tq(null,r,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(let t in n){let e=n[t];if(!this.opacities[t]){let n=new tq(e,r,!1,!1);n.isHidden()||(this.opacities[t]=n,i=i||e.text.placed||e.icon.placed)}}for(let t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(let t in a)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=a[t]);if(e&&void 0===e.lastPlacementChangeTime)throw Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){let i={};for(let r of e){let e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,r.tileID,i,r.collisionBoxArray)}}updateBucketOpacities(t,i,r,n){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();let o=t.layers[0],a=o.layout,s=new tq(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),h=a.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),c="map"===a.get("text-rotation-alignment"),f="map"===a.get("text-pitch-alignment"),d="none"!==a.get("icon-text-fit"),p=new tq(null,0,l&&(h||!t.hasIconData()||a.get("icon-optional")),h&&(l||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);let m=(t,e,i)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i);t.hasVisibleVertices=t.hasVisibleVertices||i!==t6},g=this.collisionBoxArrays.get(t.bucketInstanceId);for(let i=0;i<t.symbolInstances.length;i++){let n=t.symbolInstances.get(i),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:a,crossTileID:l}=n,h=this.opacities[l];r[l]?h=s:h||(h=p,this.opacities[l]=h),r[l]=!0;let y=n.numIconVertices>0,v=this.placedOrientations[n.crossTileID],_=v===e.ai.vertical,b=v===e.ai.horizontal||v===e.ai.horizontalOnly;if(o>0||a>0){let e=t2(h.text);m(t.text,o,_?t6:e),m(t.text,a,b?t6:e);let i=h.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach(e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=i||_?1:0)}),n.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=i||b?1:0);let r=this.variableOffsets[n.crossTileID];r&&this.markUsedJustification(t,r.anchor,n,v);let s=this.placedOrientations[n.crossTileID];s&&(this.markUsedJustification(t,"left",n,s),this.markUsedOrientation(t,s,n))}if(y){let e=t2(h.icon),i=!(d&&n.verticalPlacedIconSymbolIndex&&_);n.placedIconSymbolIndex>=0&&(m(t.icon,n.numIconVertices,i?e:t6),t.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=h.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,n.numVerticalIconVertices,i?t6:e),t.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=h.icon.isHidden())}let x=g&&g.has(i)?g.get(i):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){let r=t.collisionArrays[i];if(r){let i=new e.P(0,0);if(r.textBox||r.verticalTextBox){let e=!0;if(u){let t=this.variableOffsets[l];t?(i=tH(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),c&&i._rotate(f?this.transform.angle:-this.transform.angle)):e=!1}if(r.textBox||r.verticalTextBox){let n;r.textBox&&(n=_),r.verticalTextBox&&(n=b),tX(t.textCollisionBox.collisionVertexArray,h.text.placed,!e||n,x.text,i.x,i.y)}}if(r.iconBox||r.verticalIconBox){let e;let n=!!(!b&&r.verticalIconBox);r.iconBox&&(e=n),r.verticalIconBox&&(e=!n),tX(t.iconCollisionBox.collisionVertexArray,h.icon.placed,e,x.icon,d?i.x:0,d?i.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){let e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){let i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function tX(t,e,i,r,n,o){r&&0!==r.length||(r=[0,0,0,0]);let a=r[0]-tD,s=r[1]-tD,l=r[2]-tD,h=r[3]-tD;t.emplaceBack(e?1:0,i?1:0,n||0,o||0,a,s),t.emplaceBack(e?1:0,i?1:0,n||0,o||0,l,s),t.emplaceBack(e?1:0,i?1:0,n||0,o||0,l,h),t.emplaceBack(e?1:0,i?1:0,n||0,o||0,a,h)}let t$=33554432,tY=16777216,tK=131072,tJ=65536,tQ=512,t0=256,t1=2;function t2(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;let e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*t$+e*tY+i*tK+e*tJ+i*tQ+e*t0+i*t1+e}let t6=0;function t3(){return{isOccluded:(t,e,i)=>!1,getPitchedTextCorrection:(t,e,i)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(t,e,i,r){throw Error("Not implemented.")},translatePosition:(t,e,i,r)=>(function(t,e,i,r,n=!1){if(!i[0]&&!i[1])return[0,0];let o=n?"map"===r?t.angle:0:"viewport"===r?-t.angle:0;if(o){let t=Math.sin(o),e=Math.cos(o);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}return[n?i[0]:tF(e,i[0],t.zoom),n?i[1]:tF(e,i[1],t.zoom)]})(t,e,i,r),getCircleRadiusCorrection:t=>1}}class t8{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,r,n){let o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((t,e)=>t.sortKey-e.sortKey));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1}}class t4{constructor(t,e,i,r,n,o,a,s){this.placement=new tW(t,t3(),e,o,a,s),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,e,i){let r=u.now(),n=()=>!this._forceFullPlacement&&u.now()-r>2;for(;this._currentPlacementIndex>=0;){let r=e[t[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===r.type&&(!r.minzoom||r.minzoom<=o)&&(!r.maxzoom||r.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new t8(r)),this._inProgressLayer.continuePlacement(i[r.source],this.placement,this._showCollisionBoxes,r,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}let t5=512/e.X/2;class t7{constructor(t,i,r){this.tileID=t,this.bucketInstanceId=r,this._symbolsByKey={};let n=new Map;for(let t=0;t<i.length;t++){let e=i.get(t),r=e.key,o=n.get(r);o?o.push(e):n.set(r,[e])}for(let[t,i]of n){let r={positions:i.map(t=>({x:Math.floor(t.anchorX*t5),y:Math.floor(t.anchorY*t5)})),crossTileIDs:i.map(t=>t.crossTileID)};if(r.positions.length>128){let t=new e.aw(r.positions.length,16,Uint16Array);for(let{x:e,y:i}of r.positions)t.add(e,i);t.finish(),delete r.positions,r.index=t}this._symbolsByKey[t]=r}}getScaledCoordinates(t,i){let{x:r,y:n,z:o}=this.tileID.canonical,{x:a,y:s,z:l}=i.canonical,h=t5/Math.pow(2,l-o),u=(s*e.X+t.anchorY)*h,c=n*e.X*t5;return{x:Math.floor((a*e.X+t.anchorX)*h-r*e.X*t5),y:Math.floor(u-c)}}findMatches(t,e,i){let r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let n=0;n<t.length;n++){let o=t.get(n);if(o.crossTileID)continue;let a=this._symbolsByKey[o.key];if(!a)continue;let s=this.getScaledCoordinates(o,e);if(a.index)for(let t of a.index.range(s.x-r,s.y-r,s.x+r,s.y+r).sort()){let e=a.crossTileIDs[t];if(!i[e]){i[e]=!0,o.crossTileID=e;break}}else if(a.positions)for(let t=0;t<a.positions.length;t++){let e=a.positions[t],n=a.crossTileIDs[t];if(Math.abs(e.x-s.x)<=r&&Math.abs(e.y-s.y)<=r&&!i[n]){i[n]=!0,o.crossTileID=n;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class t9{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class et{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){let e=Math.round((t-this.lng)/360);if(0!==e)for(let t in this.indexes){let i=this.indexes[t],r={};for(let t in i){let n=i[t];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[t]=r}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});let r=this.usedCrossTileIDs[t.overscaledZ];for(let i in this.indexes){let n=this.indexes[i];if(Number(i)>t.overscaledZ)for(let i in n){let o=n[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{let o=n[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let t=0;t<e.symbolInstances.length;t++){let n=e.symbolInstances.get(t);n.crossTileID||(n.crossTileID=i.generate(),r[n.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new t7(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(let i of e.getCrossTileIDsLists())for(let e of i)delete this.usedCrossTileIDs[t][e]}removeStaleBuckets(t){let e=!1;for(let i in this.indexes){let r=this.indexes[i];for(let n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e}}class ee{constructor(){this.layerIndexes={},this.crossTileIDs=new t9,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new et);let n=!1,o={};for(let a of(r.handleWrapJump(i),e)){let e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(a.tileID,e,this.crossTileIDs)&&(n=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(n=!0),n}pruneUnusedLayers(t){let e={};for(let i in t.forEach(t=>{e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]}}let ei=(t,i)=>e.t(t,i&&i.filter(t=>"source.canvas"!==t.identifier)),er=e.ax();class en extends e.E{constructor(t,i={}){super(),this._rtlPluginLoaded=()=>{for(let t in this.sourceCaches){let e=this.sourceCaches[t].getSource().type;"vector"!==e&&"geojson"!==e||this.sourceCaches[t].reload()}},this.map=t,this.dispatcher=new U(V(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(t,e)=>this.getGlyphs(t,e)),this.dispatcher.registerMessageHandler("GI",(t,e)=>this.getImages(t,e)),this.imageManager=new P,this.imageManager.setEventedParent(this),this.glyphManager=new R(t._requestManager,i.localIdeographFontFamily),this.lineAtlas=new B(256,512),this.crossTileSymbolIndex=new ee,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",e.az()),tu().on(ts,this._rtlPluginLoaded),this.on("data",t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;let e=this.sourceCaches[t.sourceId];if(!e)return;let i=e.getSource();if(i&&i.vectorLayerIds)for(let t in this._layers){let e=this._layers[t];e.source===i.id&&this._validateLayer(e)}})}loadURL(t,i={},r){this.fire(new e.k("dataloading",{dataType:"style"})),i.validate="boolean"!=typeof i.validate||i.validate;let n=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;let o=this._loadStyleRequest;e.h(n,this._loadStyleRequest).then(t=>{this._loadStyleRequest=null,this._load(t.data,i,r)}).catch(t=>{this._loadStyleRequest=null,t&&!o.signal.aborted&&this.fire(new e.j(t))})}loadJSON(t,i={},r){this.fire(new e.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,u.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,i.validate=!1!==i.validate,this._load(t,i,r)}).catch(()=>{})}loadEmpty(){this.fire(new e.k("dataloading",{dataType:"style"})),this._load(er,{validate:!1})}_load(t,i,r){var n;let o=i.transformStyle?i.transformStyle(r,t):t;if(!i.validate||!ei(this,e.x(o))){for(let t in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(t,o.sources[t],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new z(this.stylesheet.light),this.sky=new D(this.stylesheet.sky),this.map.setTerrain(null!==(n=this.stylesheet.terrain)&&void 0!==n?n:null),this.fire(new e.k("data",{dataType:"style"})),this.fire(new e.k("style.load"))}}_createLayers(){let t=e.aA(this.stylesheet.layers);for(let i of(this.dispatcher.broadcast("SL",t),this._order=t.map(t=>t.id),this._layers={},this._serializedLayers=null,t)){let t=e.aB(i);t.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=t}}_loadSprite(t,i=!1,r){let n;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(t,i,r,n){return e._(this,void 0,void 0,function*(){let o=S(t),a=r>1?"@2x":"",s={},l={};for(let{id:t,url:r}of o){let o=i.transformRequest(k(r,a,".json"),"SpriteJSON");s[t]=e.h(o,n);let h=i.transformRequest(k(r,a,".png"),"SpriteImage");l[t]=b.getImage(h,n)}return yield Promise.all([...Object.values(s),...Object.values(l)]),function(t,i){return e._(this,void 0,void 0,function*(){let e={};for(let r in t){e[r]={};let n=u.getImageCanvasContext((yield i[r]).data),o=(yield t[r]).data;for(let t in o){let{width:i,height:a,x:s,y:l,sdf:h,pixelRatio:u,stretchX:c,stretchY:f,content:d,textFitWidth:p,textFitHeight:m}=o[t];e[r][t]={data:null,pixelRatio:u,sdf:h,stretchX:c,stretchY:f,content:d,textFitWidth:p,textFitHeight:m,spriteData:{width:i,height:a,x:s,y:l,context:n}}}}return e})}(s,l)})})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(t=>{if(this._spriteRequest=null,t)for(let e in t){for(let i of(this._spritesImagesIds[e]=[],this._spritesImagesIds[e]?this._spritesImagesIds[e].filter(e=>!(e in t)):[]))this.imageManager.removeImage(i),this._changedImages[i]=!0;for(let r in t[e]){let n="default"===e?r:`${e}:${r}`;this._spritesImagesIds[e].push(n),n in this.imageManager.images?this.imageManager.updateImage(n,t[e][r],!1):this.imageManager.addImage(n,t[e][r]),i&&(this._changedImages[n]=!0)}}}).catch(t=>{this._spriteRequest=null,n=t,this.fire(new e.j(n))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),i&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"})),r&&r(n)})}_unloadSprite(){for(let t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}_validateLayer(t){let i=this.sourceCaches[t.source];if(!i)return;let r=t.sourceLayer;if(!r)return;let n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.j(Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t){let e=this._serializedAllLayers();if(!t||0===t.length)return Object.values(e);let i=[];for(let r of t)e[r]&&i.push(e[r]);return i}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;for(let e of(t=this._serializedLayers={},Object.keys(this._layers))){let i=this._layers[e];"custom"!==i.type&&(t[e]=i.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(let t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw Error("Style is not done loading.")}update(t){if(!this._loaded)return;let i=this._changed;if(i){let e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(let t in(e.length||i.length)&&this._updateWorkerLayers(e,i),this._updatedSources){let e=this._updatedSources[t];if("reload"===e)this._reloadSource(t);else{if("clear"!==e)throw Error(`Invalid action ${e}`);this._clearSource(t)}}for(let e in this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs(),this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}let r={};for(let t in this.sourceCaches){let e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(let e of this._order){let i=this._layers[e];i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)&&i.source&&(this.sourceCaches[i.source].used=!0)}for(let t in r){let i=this.sourceCaches[t];!!r[t]!=!!i.used&&i.fire(new e.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:t}))}this.light.recalculate(t),this.sky.recalculate(t),this.z=t.zoom,i&&this.fire(new e.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let t=Object.keys(this._changedImages);if(t.length){for(let e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,i={}){var r;this._checkLoaded();let n=this.serialize();if(t=i.transformStyle?i.transformStyle(n,t):t,(null===(r=i.validate)||void 0===r||r)&&ei(this,e.x(t)))return!1;(t=e.aC(t)).layers=e.aA(t.layers);let o=e.aD(n,t),a=this._getOperationsToPerform(o);if(a.unimplemented.length>0)throw Error(`Unimplemented: ${a.unimplemented.join(", ")}.`);if(0===a.operations.length)return!1;for(let t of a.operations)t();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){let e=[],i=[];for(let r of t)switch(r.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":e.push(()=>this.addLayer.apply(this,r.args));break;case"removeLayer":e.push(()=>this.removeLayer.apply(this,r.args));break;case"setPaintProperty":e.push(()=>this.setPaintProperty.apply(this,r.args));break;case"setLayoutProperty":e.push(()=>this.setLayoutProperty.apply(this,r.args));break;case"setFilter":e.push(()=>this.setFilter.apply(this,r.args));break;case"addSource":e.push(()=>this.addSource.apply(this,r.args));break;case"removeSource":e.push(()=>this.removeSource.apply(this,r.args));break;case"setLayerZoomRange":e.push(()=>this.setLayerZoomRange.apply(this,r.args));break;case"setLight":e.push(()=>this.setLight.apply(this,r.args));break;case"setGeoJSONSourceData":e.push(()=>this.setGeoJSONSourceData.apply(this,r.args));break;case"setGlyphs":e.push(()=>this.setGlyphs.apply(this,r.args));break;case"setSprite":e.push(()=>this.setSprite.apply(this,r.args));break;case"setSky":e.push(()=>this.setSky.apply(this,r.args));break;case"setTerrain":e.push(()=>this.map.setTerrain.apply(this,r.args));break;case"setTransition":e.push(()=>{});break;default:i.push(r.command)}return{operations:e,unimplemented:i}}addImage(t,i){if(this.getImage(t))return this.fire(new e.j(Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new e.j(Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,i,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw Error(`Source "${t}" already exists.`);if(!i.type)throw Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.x.source,`sources.${t}`,i,null,r))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);let n=this.sourceCaches[t]=new tp(t,i,this.dispatcher);n.style=this,n.setEventedParent(this,()=>({isSourceLoaded:n.loaded(),source:n.serialize(),sourceId:t})),n.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw Error("There is no source with this ID");for(let i in this._layers)if(this._layers[i].source===t)return this.fire(new e.j(Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));let i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new e.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw Error(`There is no source with this ID=${t}`);let i=this.sourceCaches[t].getSource();if("geojson"!==i.type)throw Error(`geojsonSource.type is ${i.type}, which is !== 'geojson`);i.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,i,r={}){let n;this._checkLoaded();let o=t.id;if(this.getLayer(o))return void this.fire(new e.j(Error(`Layer "${o}" already exists on this map.`)));if("custom"===t.type){if(ei(this,e.aE(t)))return;n=e.aB(t)}else{if("source"in t&&"object"==typeof t.source&&(this.addSource(o,t.source),t=e.aC(t),t=e.e(t,{source:o})),this._validate(e.x.layer,`layers.${o}`,t,{arrayIndex:-1},r))return;n=e.aB(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:o}})}let a=i?this._order.indexOf(i):this._order.length;if(i&&-1===a)this.fire(new e.j(Error(`Cannot add layer "${o}" before non-existing layer "${i}".`)));else{if(this._order.splice(a,0,o),this._layerOrderChanged=!0,this._layers[o]=n,this._removedLayers[o]&&n.source&&"custom"!==n.type){let t=this._removedLayers[o];delete this._removedLayers[o],t.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())}this._updateLayer(n),n.onAdd&&n.onAdd(this.map)}}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.j(Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===i)return;let r=this._order.indexOf(t);this._order.splice(r,1);let n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new e.j(Error(`Cannot move layer "${t}" before non-existing layer "${i}".`))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();let i=this._layers[t];if(!i)return void this.fire(new e.j(Error(`Cannot remove non-existing layer "${t}".`)));i.setEventedParent(null);let r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,i,r){this._checkLoaded();let n=this.getLayer(t);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new e.j(Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,i,r={}){this._checkLoaded();let n=this.getLayer(t);if(n){if(!e.aF(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(e.x.filter,`layers.${n.id}.filter`,i,null,r)||(n.filter=e.aC(i),this._updateLayer(n)))}else this.fire(new e.j(Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return e.aC(this.getLayer(t).filter)}setLayoutProperty(t,i,r,n={}){this._checkLoaded();let o=this.getLayer(t);o?e.aF(o.getLayoutProperty(i),r)||(o.setLayoutProperty(i,r,n),this._updateLayer(o)):this.fire(new e.j(Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,i){let r=this.getLayer(t);if(r)return r.getLayoutProperty(i);this.fire(new e.j(Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,i,r,n={}){this._checkLoaded();let o=this.getLayer(t);o?e.aF(o.getPaintProperty(i),r)||(o.setPaintProperty(i,r,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new e.j(Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(t,i){this._checkLoaded();let r=t.source,n=t.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new e.j(Error(`The source '${r}' does not exist in the map's style.`)));let a=o.getSource().type;"geojson"===a&&n?this.fire(new e.j(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?(void 0===t.id&&this.fire(new e.j(Error("The feature id parameter must be provided."))),o.setFeatureState(n,t.id,i)):this.fire(new e.j(Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,i){this._checkLoaded();let r=t.source,n=this.sourceCaches[r];if(void 0===n)return void this.fire(new e.j(Error(`The source '${r}' does not exist in the map's style.`)));let o=n.getSource().type,a="vector"===o?t.sourceLayer:void 0;"vector"!==o||a?i&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.j(Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(a,t.id,i):this.fire(new e.j(Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();let i=t.source,r=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n)return"vector"!==n.getSource().type||r?(void 0===t.id&&this.fire(new e.j(Error("The feature id parameter must be provided."))),n.getFeatureState(r,t.id)):void this.fire(new e.j(Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new e.j(Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return e.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let t=e.aG(this.sourceCaches,t=>t.serialize()),i=this._serializeByIds(this._order),r=this.map.getTerrain()||void 0,n=this.stylesheet;return e.aH({version:n.version,name:n.name,metadata:n.metadata,light:n.light,sky:n.sky,center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch,sprite:n.sprite,glyphs:n.glyphs,transition:n.transition,sources:t,layers:i,terrain:r},t=>void 0!==t)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){let e=t=>"fill-extrusion"===this._layers[t].type,i={},r=[];for(let n=this._order.length-1;n>=0;n--){let o=this._order[n];if(e(o))for(let e of(i[o]=n,t)){let t=e[o];if(t)for(let e of t)r.push(e)}}r.sort((t,e)=>e.intersectionZ-t.intersectionZ);let n=[];for(let o=this._order.length-1;o>=0;o--){let a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){let e=r[t].feature;if(i[e.layer.id]<o)break;n.push(e),r.pop()}else for(let e of t){let t=e[a];if(t)for(let e of t)n.push(e.feature)}}return n}queryRenderedFeatures(t,i,r){i&&i.filter&&this._validate(e.x.filter,"queryRenderedFeatures.filter",i.filter,null,i);let n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.j(Error("parameters.layers must be an Array."))),[];for(let t of i.layers){let i=this._layers[t];if(!i)return this.fire(new e.j(Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];n[i.source]=!0}}let o=[];i.availableImages=this._availableImages;let a=this._serializedAllLayers();for(let e in this.sourceCaches)i.layers&&!n[e]||o.push(H(this.sourceCaches[e],this._layers,a,t,i,r));return this.placement&&o.push(function(t,e,i,r,n,o,a){let s={},l=o.queryRenderedSymbols(r),h=[];for(let t of Object.keys(l).map(Number))h.push(a[t]);for(let i of(h.sort(W),h)){let r=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(let t in r){let e=s[t]=s[t]||[],n=r[t];for(let t of(n.sort((t,e)=>{let r=i.featureSortOrder;if(r){let i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}),n))e.push(t)}}for(let e in s)s[e].forEach(r=>{let n=r.feature,o=i[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o});return s}(this._layers,a,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.x.filter,"querySourceFeatures.filter",i.filter,null,i);let r=this.sourceCaches[t];return r?function(t,e){let i=t.getRenderableIds().map(e=>t.getTileByID(e)),r=[],n={};for(let t=0;t<i.length;t++){let o=i[t],a=o.tileID.canonical.key;n[a]||(n[a]=!0,o.querySourceFeatures(r,e))}return r}(r,i):[]}getLight(){return this.light.getLight()}setLight(t,i={}){this._checkLoaded();let r=this.light.getLight(),n=!1;for(let i in t)if(!e.aF(t[i],r[i])){n=!0;break}if(!n)return;let o={now:u.now(),transition:e.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(o)}getSky(){var t;return null===(t=this.stylesheet)||void 0===t?void 0:t.sky}setSky(t,i={}){let r=this.sky.getSky(),n=!1;for(let i in t||r&&(n=!0),t)if(!e.aF(t[i],r[i])){n=!0;break}if(!n)return;let o={now:u.now(),transition:e.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,i),this.sky.updateTransitions(o)}_validate(t,i,r,n,o={}){return(!o||!1!==o.validate)&&ei(this,t.call(e.x,e.e({key:i,style:this.serialize(),value:r,styleSpec:e.v},n)))}_remove(t=!0){for(let t in this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),tu().off(ts,this._rtlPluginLoaded),this._layers)this._layers[t].setEventedParent(null);for(let t in this.sourceCaches){let e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(let e in this.sourceCaches)this.sourceCaches[e].update(t,this.map.terrain)}_generateCollisionBoxes(){for(let t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,e,i,r,n=!1){let o=!1,a=!1,s={};for(let e of this._order){let i=this._layers[e];if("symbol"!==i.type)continue;if(!s[i.source]){let t=this.sourceCaches[i.source];s[i.source]=t.getRenderableIds(!0).map(e=>t.getTileByID(e)).sort((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1))}let r=this.crossTileSymbolIndex.addLayer(i,s[i.source],t.center.lng);o=o||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.now(),t.zoom))&&(this.pauseablePlacement=new t4(t,this.map.terrain,this._order,n,e,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(let t of this._order){let e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,s[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.now())}_releaseSymbolFadeTiles(){for(let t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,i){return e._(this,void 0,void 0,function*(){let t=yield this.imageManager.getImages(i.icons);this._updateTilesForChangedImages();let e=this.sourceCaches[i.source];return e&&e.setDependencies(i.tileID.key,i.type,i.icons),t})}getGlyphs(t,i){return e._(this,void 0,void 0,function*(){let t=yield this.glyphManager.getGlyphs(i.stacks),e=this.sourceCaches[i.source];return e&&e.setDependencies(i.tileID.key,i.type,[""]),t})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,i={}){this._checkLoaded(),t&&this._validate(e.x.glyphs,"glyphs",t,null,i)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,i,r={},n){this._checkLoaded();let o=[{id:t,url:i}],a=[...S(this.stylesheet.sprite),...o];this._validate(e.x.sprite,"sprite",a,null,r)||(this.stylesheet.sprite=a,this._loadSprite(o,!0,n))}removeSprite(t){this._checkLoaded();let i=S(this.stylesheet.sprite);if(i.find(e=>e.id===t)){if(this._spritesImagesIds[t])for(let e of this._spritesImagesIds[t])this.imageManager.removeImage(e),this._changedImages[e]=!0;i.splice(i.findIndex(e=>e.id===t),1),this.stylesheet.sprite=i.length>0?i:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}else this.fire(new e.j(Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return S(this.stylesheet.sprite)}setSprite(t,i={},r){this._checkLoaded(),t&&this._validate(e.x.sprite,"sprite",t,null,i)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,r):(this._unloadSprite(),r&&r(null)))}}var eo=e.Y([{name:"a_pos",type:"Int16",components:2}]);let ea={prelude:es("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:es("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:es("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:es("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:es("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:es("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:es("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:es("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:es("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:es("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:es("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:es("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:es("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:es("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:es("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:es("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:es("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:es("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:es("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:es("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:es("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:es("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:es("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:es("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:es("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:es("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:es("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:es("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:es("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:es("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function es(t,e){let i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(i,(t,e,i,r,n)=>(s[n]=!0,"define"===e?`
#ifndef HAS_UNIFORM_u_${n}
varying ${i} ${r} ${n};
#else
uniform ${i} ${r} u_${n};
#endif
`:`
#ifdef HAS_UNIFORM_u_${n}
    ${i} ${r} ${n} = u_${n};
#endif
`)),vertexSource:e=e.replace(i,(t,e,i,r,n)=>{let o="float"===r?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?`
#ifndef HAS_UNIFORM_u_${n}
uniform lowp float u_${n}_t;
attribute ${i} ${o} a_${n};
varying ${i} ${r} ${n};
#else
uniform ${i} ${r} u_${n};
#endif
`:"vec4"===a?`
#ifndef HAS_UNIFORM_u_${n}
    ${n} = a_${n};
#else
    ${i} ${r} ${n} = u_${n};
#endif
`:`
#ifndef HAS_UNIFORM_u_${n}
    ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);
#else
    ${i} ${r} ${n} = u_${n};
#endif
`:"define"===e?`
#ifndef HAS_UNIFORM_u_${n}
uniform lowp float u_${n}_t;
attribute ${i} ${o} a_${n};
#else
uniform ${i} ${r} u_${n};
#endif
`:"vec4"===a?`
#ifndef HAS_UNIFORM_u_${n}
    ${i} ${r} ${n} = a_${n};
#else
    ${i} ${r} ${n} = u_${n};
#endif
`:`
#ifndef HAS_UNIFORM_u_${n}
    ${i} ${r} ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);
#else
    ${i} ${r} ${n} = u_${n};
#endif
`}),staticAttributes:r,staticUniforms:a}}class el{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,r,n,o,a,s,l){this.context=t;let h=this.boundPaintVertexBuffers.length!==r.length;for(let t=0;!h&&t<r.length;t++)this.boundPaintVertexBuffers[t]!==r[t]&&(h=!0);!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||h||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(e,i,r,n,o,a,s,l):(t.bindVertexArray.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind(),l&&l.bind())}freshBind(t,e,i,r,n,o,a,s){let l=t.numAttributes,h=this.context,u=h.gl;for(let l of(this.vao&&this.destroy(),this.vao=h.createVertexArray(),h.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s,e.enableAttributes(u,t),i))l.enableAttributes(u,t);for(let r of(o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),s&&s.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,n),i))r.bind(),r.setVertexAttribPointers(u,t,n);o&&(o.bind(),o.setVertexAttribPointers(u,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,n)),s&&(s.bind(),s.setVertexAttribPointers(u,t,n)),h.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let eh=(t,i,r,n,o)=>({u_matrix:t,u_texture:0,u_ele_delta:i,u_fog_matrix:r,u_fog_color:n?n.properties.get("fog-color"):e.aN.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:n?n.calculateFogBlendOpacity(o):0,u_horizon_color:n?n.properties.get("horizon-color"):e.aN.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1});function eu(t){let e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;let r=t[i].split(" ");e.push(r.pop())}return e}class ec{constructor(t,i,r,n,o,a){let s,l;let h=t.gl;this.program=h.createProgram();let u=eu(i.staticAttributes),c=r?r.getBinderAttributes():[],f=u.concat(c),d=ea.prelude.staticUniforms?eu(ea.prelude.staticUniforms):[],p=i.staticUniforms?eu(i.staticUniforms):[],m=r?r.getBinderUniforms():[],g=d.concat(p).concat(m),y=[];for(let t of g)0>y.indexOf(t)&&y.push(t);let v=r?r.defines():[];o&&v.push("#define OVERDRAW_INSPECTOR;"),a&&v.push("#define TERRAIN3D;");let _=v.concat(ea.prelude.fragmentSource,i.fragmentSource).join("\n"),b=v.concat(ea.prelude.vertexSource,i.vertexSource).join("\n"),x=h.createShader(h.FRAGMENT_SHADER);if(h.isContextLost())return void(this.failedToCreate=!0);if(h.shaderSource(x,_),h.compileShader(x),!h.getShaderParameter(x,h.COMPILE_STATUS))throw Error(`Could not compile fragment shader: ${h.getShaderInfoLog(x)}`);h.attachShader(this.program,x);let w=h.createShader(h.VERTEX_SHADER);if(h.isContextLost())return void(this.failedToCreate=!0);if(h.shaderSource(w,b),h.compileShader(w),!h.getShaderParameter(w,h.COMPILE_STATUS))throw Error(`Could not compile vertex shader: ${h.getShaderInfoLog(w)}`);h.attachShader(this.program,w),this.attributes={};let M={};this.numAttributes=f.length;for(let t=0;t<this.numAttributes;t++)f[t]&&(h.bindAttribLocation(this.program,t,f[t]),this.attributes[f[t]]=t);if(h.linkProgram(this.program),!h.getProgramParameter(this.program,h.LINK_STATUS))throw Error(`Program failed to link: ${h.getProgramInfoLog(this.program)}`);h.deleteShader(w),h.deleteShader(x);for(let t=0;t<y.length;t++){let e=y[t];if(e&&!M[e]){let t=h.getUniformLocation(this.program,e);t&&(M[e]=t)}}this.fixedUniforms=n(t,M),this.terrainUniforms=(s=t,l=M,{u_depth:new e.aI(s,l.u_depth),u_terrain:new e.aI(s,l.u_terrain),u_terrain_dim:new e.aJ(s,l.u_terrain_dim),u_terrain_matrix:new e.aK(s,l.u_terrain_matrix),u_terrain_unpack:new e.aL(s,l.u_terrain_unpack),u_terrain_exaggeration:new e.aJ(s,l.u_terrain_exaggeration)}),this.binderUniforms=r?r.getUniforms(t,M):[]}draw(t,e,i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y){let v=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(o),s)for(let e in t.activeTexture.set(v.TEXTURE2),v.bindTexture(v.TEXTURE_2D,s.depthTexture),t.activeTexture.set(v.TEXTURE3),v.bindTexture(v.TEXTURE_2D,s.texture),this.terrainUniforms)this.terrainUniforms[e].set(s[e]);for(let t in this.fixedUniforms)this.fixedUniforms[t].set(a[t]);p&&p.setUniforms(t,this.binderUniforms,f,{zoom:d});let _=0;switch(e){case v.LINES:_=2;break;case v.TRIANGLES:_=3;break;case v.LINE_STRIP:_=1}for(let i of c.get()){let r=i.vaos||(i.vaos={});(r[l]||(r[l]=new el)).bind(t,this,h,p?p.getPaintVertexBuffers():[],u,i.vertexOffset,m,g,y),v.drawElements(e,i.primitiveLength*_,v.UNSIGNED_SHORT,i.primitiveOffset*_*2)}}}function ef(t,e,i){let r=1/tF(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}let ed=(t,i,r,n)=>{let o=i.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var t=new e.A(9);return e.A!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();"viewport"===o.properties.get("anchor")&&function(t,e){var i=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(l,-i.transform.angle),function(t,e,i){var r=e[0],n=e[1],o=e[2];t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8]}(s,s,l);let h=o.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[h.r,h.g,h.b],u_vertical_gradient:+r,u_opacity:n}},ep=(t,i,r,n,o,a,s)=>e.e(ed(t,i,r,n),ef(a,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),em=t=>({u_matrix:t}),eg=(t,i,r,n)=>e.e(em(t),ef(r,i,n)),ey=(t,e)=>({u_matrix:t,u_world:e}),ev=(t,i,r,n,o)=>e.e(eg(t,i,r,n),{u_world:o}),e_=(t,e,i,r)=>{let n,o;let a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){let t=tF(i,1,a.zoom);n=!0,o=[t,t]}else n=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+n,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:o}},eb=(t,e,i)=>({u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}),ex=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),ew=t=>({u_matrix:t}),eM=(t,e,i,r)=>({u_matrix:t,u_extrude_scale:tF(e,1,i),u_intensity:r});function eS(t,i){let r=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new e.Z(0,n/r).toLngLat().lat,new e.Z(0,(n+1)/r).toLngLat().lat]}let ek=(t,e,i,r)=>{let n=t.transform;return{u_matrix:eA(t,e,i,r),u_ratio:1/tF(e,1,n.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},eE=(t,i,r,n,o)=>e.e(ek(t,i,r,o),{u_image:0,u_image_height:n}),eI=(t,e,i,r,n)=>{let o=t.transform,a=eT(e,o);return{u_matrix:eA(t,e,i,n),u_texsize:e.imageAtlasTexture.size,u_ratio:1/tF(e,1,o.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},eP=(t,i,r,n,o,a)=>{let s=t.lineAtlas,l=eT(i,t.transform),h="round"===r.layout.get("line-cap"),u=s.getDash(n.from,h),c=s.getDash(n.to,h),f=u.width*o.fromScale,d=c.width*o.toScale;return e.e(ek(t,i,r,a),{u_patternscale_a:[l/f,-u.height/2],u_patternscale_b:[l/d,-c.height/2],u_sdfgamma:s.width/(256*Math.min(f,d)*t.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:o.t})};function eT(t,e){return 1/tF(t,1,e.tileZoom)}function eA(t,e,i,r){return t.translatePosMatrix(r?r.posMatrix:e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}let eC=(t,e,i,r,n)=>{var o,a;return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"))>0?1-1/(1.001-a):-a,u_contrast_factor:(o=n.paint.get("raster-contrast"))>0?1/(1-o):1+o,u_spin_weights:eL(n.paint.get("raster-hue-rotate"))}};function eL(t){let e=Math.sin(t*=Math.PI/180),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}let eR=(t,e,i,r,n,o,a,s,l,h,u,c,f,d)=>{let p=a.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:p.cameraToCenterDistance,u_pitch:p.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:p.width/p.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:h,u_is_text:+c,u_pitch_with_map:+r,u_is_along_line:n,u_is_variable_anchor:o,u_texsize:f,u_texture:0,u_translation:u,u_pitched_scale:d}},eN=(t,i,r,n,o,a,s,l,h,u,c,f,d,p,m)=>{let g=s.transform;return e.e(eR(t,i,r,n,o,a,s,l,h,u,c,f,d,m),{u_gamma_scale:n?Math.cos(g._pitch)*g.cameraToCenterDistance:1,u_device_pixel_ratio:s.pixelRatio,u_is_halo:+p})},ez=(t,i,r,n,o,a,s,l,h,u,c,f,d,p)=>e.e(eN(t,i,r,n,o,a,s,l,h,u,c,!0,f,!0,p),{u_texsize_icon:d,u_texture_icon:1}),eO=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),eD=(t,i,r,n,o,a)=>e.e(function(t,e,i,r){let n=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),{width:a,height:s}=i.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),h=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=h*(r.tileID.canonical.x+r.tileID.wrap*l),c=h*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/tF(r,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,c>>16],u_pixel_coord_lower:[65535&u,65535&c]}}(n,a,r,o),{u_matrix:t,u_opacity:i}),eB={fillExtrusion:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_lightpos:new e.aO(t,i.u_lightpos),u_lightintensity:new e.aJ(t,i.u_lightintensity),u_lightcolor:new e.aO(t,i.u_lightcolor),u_vertical_gradient:new e.aJ(t,i.u_vertical_gradient),u_opacity:new e.aJ(t,i.u_opacity)}),fillExtrusionPattern:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_lightpos:new e.aO(t,i.u_lightpos),u_lightintensity:new e.aJ(t,i.u_lightintensity),u_lightcolor:new e.aO(t,i.u_lightcolor),u_vertical_gradient:new e.aJ(t,i.u_vertical_gradient),u_height_factor:new e.aJ(t,i.u_height_factor),u_image:new e.aI(t,i.u_image),u_texsize:new e.aP(t,i.u_texsize),u_pixel_coord_upper:new e.aP(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aP(t,i.u_pixel_coord_lower),u_scale:new e.aO(t,i.u_scale),u_fade:new e.aJ(t,i.u_fade),u_opacity:new e.aJ(t,i.u_opacity)}),fill:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix)}),fillPattern:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_image:new e.aI(t,i.u_image),u_texsize:new e.aP(t,i.u_texsize),u_pixel_coord_upper:new e.aP(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aP(t,i.u_pixel_coord_lower),u_scale:new e.aO(t,i.u_scale),u_fade:new e.aJ(t,i.u_fade)}),fillOutline:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_world:new e.aP(t,i.u_world)}),fillOutlinePattern:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_world:new e.aP(t,i.u_world),u_image:new e.aI(t,i.u_image),u_texsize:new e.aP(t,i.u_texsize),u_pixel_coord_upper:new e.aP(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aP(t,i.u_pixel_coord_lower),u_scale:new e.aO(t,i.u_scale),u_fade:new e.aJ(t,i.u_fade)}),circle:(t,i)=>({u_camera_to_center_distance:new e.aJ(t,i.u_camera_to_center_distance),u_scale_with_map:new e.aI(t,i.u_scale_with_map),u_pitch_with_map:new e.aI(t,i.u_pitch_with_map),u_extrude_scale:new e.aP(t,i.u_extrude_scale),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_matrix:new e.aK(t,i.u_matrix)}),collisionBox:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_pixel_extrude_scale:new e.aP(t,i.u_pixel_extrude_scale)}),collisionCircle:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_inv_matrix:new e.aK(t,i.u_inv_matrix),u_camera_to_center_distance:new e.aJ(t,i.u_camera_to_center_distance),u_viewport_size:new e.aP(t,i.u_viewport_size)}),debug:(t,i)=>({u_color:new e.aM(t,i.u_color),u_matrix:new e.aK(t,i.u_matrix),u_overlay:new e.aI(t,i.u_overlay),u_overlay_scale:new e.aJ(t,i.u_overlay_scale)}),clippingMask:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix)}),heatmap:(t,i)=>({u_extrude_scale:new e.aJ(t,i.u_extrude_scale),u_intensity:new e.aJ(t,i.u_intensity),u_matrix:new e.aK(t,i.u_matrix)}),heatmapTexture:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_world:new e.aP(t,i.u_world),u_image:new e.aI(t,i.u_image),u_color_ramp:new e.aI(t,i.u_color_ramp),u_opacity:new e.aJ(t,i.u_opacity)}),hillshade:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_image:new e.aI(t,i.u_image),u_latrange:new e.aP(t,i.u_latrange),u_light:new e.aP(t,i.u_light),u_shadow:new e.aM(t,i.u_shadow),u_highlight:new e.aM(t,i.u_highlight),u_accent:new e.aM(t,i.u_accent)}),hillshadePrepare:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_image:new e.aI(t,i.u_image),u_dimension:new e.aP(t,i.u_dimension),u_zoom:new e.aJ(t,i.u_zoom),u_unpack:new e.aL(t,i.u_unpack)}),line:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_ratio:new e.aJ(t,i.u_ratio),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.aP(t,i.u_units_to_pixels)}),lineGradient:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_ratio:new e.aJ(t,i.u_ratio),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.aP(t,i.u_units_to_pixels),u_image:new e.aI(t,i.u_image),u_image_height:new e.aJ(t,i.u_image_height)}),linePattern:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_texsize:new e.aP(t,i.u_texsize),u_ratio:new e.aJ(t,i.u_ratio),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_image:new e.aI(t,i.u_image),u_units_to_pixels:new e.aP(t,i.u_units_to_pixels),u_scale:new e.aO(t,i.u_scale),u_fade:new e.aJ(t,i.u_fade)}),lineSDF:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_ratio:new e.aJ(t,i.u_ratio),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.aP(t,i.u_units_to_pixels),u_patternscale_a:new e.aP(t,i.u_patternscale_a),u_patternscale_b:new e.aP(t,i.u_patternscale_b),u_sdfgamma:new e.aJ(t,i.u_sdfgamma),u_image:new e.aI(t,i.u_image),u_tex_y_a:new e.aJ(t,i.u_tex_y_a),u_tex_y_b:new e.aJ(t,i.u_tex_y_b),u_mix:new e.aJ(t,i.u_mix)}),raster:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_tl_parent:new e.aP(t,i.u_tl_parent),u_scale_parent:new e.aJ(t,i.u_scale_parent),u_buffer_scale:new e.aJ(t,i.u_buffer_scale),u_fade_t:new e.aJ(t,i.u_fade_t),u_opacity:new e.aJ(t,i.u_opacity),u_image0:new e.aI(t,i.u_image0),u_image1:new e.aI(t,i.u_image1),u_brightness_low:new e.aJ(t,i.u_brightness_low),u_brightness_high:new e.aJ(t,i.u_brightness_high),u_saturation_factor:new e.aJ(t,i.u_saturation_factor),u_contrast_factor:new e.aJ(t,i.u_contrast_factor),u_spin_weights:new e.aO(t,i.u_spin_weights)}),symbolIcon:(t,i)=>({u_is_size_zoom_constant:new e.aI(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aI(t,i.u_is_size_feature_constant),u_size_t:new e.aJ(t,i.u_size_t),u_size:new e.aJ(t,i.u_size),u_camera_to_center_distance:new e.aJ(t,i.u_camera_to_center_distance),u_pitch:new e.aJ(t,i.u_pitch),u_rotate_symbol:new e.aI(t,i.u_rotate_symbol),u_aspect_ratio:new e.aJ(t,i.u_aspect_ratio),u_fade_change:new e.aJ(t,i.u_fade_change),u_matrix:new e.aK(t,i.u_matrix),u_label_plane_matrix:new e.aK(t,i.u_label_plane_matrix),u_coord_matrix:new e.aK(t,i.u_coord_matrix),u_is_text:new e.aI(t,i.u_is_text),u_pitch_with_map:new e.aI(t,i.u_pitch_with_map),u_is_along_line:new e.aI(t,i.u_is_along_line),u_is_variable_anchor:new e.aI(t,i.u_is_variable_anchor),u_texsize:new e.aP(t,i.u_texsize),u_texture:new e.aI(t,i.u_texture),u_translation:new e.aP(t,i.u_translation),u_pitched_scale:new e.aJ(t,i.u_pitched_scale)}),symbolSDF:(t,i)=>({u_is_size_zoom_constant:new e.aI(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aI(t,i.u_is_size_feature_constant),u_size_t:new e.aJ(t,i.u_size_t),u_size:new e.aJ(t,i.u_size),u_camera_to_center_distance:new e.aJ(t,i.u_camera_to_center_distance),u_pitch:new e.aJ(t,i.u_pitch),u_rotate_symbol:new e.aI(t,i.u_rotate_symbol),u_aspect_ratio:new e.aJ(t,i.u_aspect_ratio),u_fade_change:new e.aJ(t,i.u_fade_change),u_matrix:new e.aK(t,i.u_matrix),u_label_plane_matrix:new e.aK(t,i.u_label_plane_matrix),u_coord_matrix:new e.aK(t,i.u_coord_matrix),u_is_text:new e.aI(t,i.u_is_text),u_pitch_with_map:new e.aI(t,i.u_pitch_with_map),u_is_along_line:new e.aI(t,i.u_is_along_line),u_is_variable_anchor:new e.aI(t,i.u_is_variable_anchor),u_texsize:new e.aP(t,i.u_texsize),u_texture:new e.aI(t,i.u_texture),u_gamma_scale:new e.aJ(t,i.u_gamma_scale),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_is_halo:new e.aI(t,i.u_is_halo),u_translation:new e.aP(t,i.u_translation),u_pitched_scale:new e.aJ(t,i.u_pitched_scale)}),symbolTextAndIcon:(t,i)=>({u_is_size_zoom_constant:new e.aI(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aI(t,i.u_is_size_feature_constant),u_size_t:new e.aJ(t,i.u_size_t),u_size:new e.aJ(t,i.u_size),u_camera_to_center_distance:new e.aJ(t,i.u_camera_to_center_distance),u_pitch:new e.aJ(t,i.u_pitch),u_rotate_symbol:new e.aI(t,i.u_rotate_symbol),u_aspect_ratio:new e.aJ(t,i.u_aspect_ratio),u_fade_change:new e.aJ(t,i.u_fade_change),u_matrix:new e.aK(t,i.u_matrix),u_label_plane_matrix:new e.aK(t,i.u_label_plane_matrix),u_coord_matrix:new e.aK(t,i.u_coord_matrix),u_is_text:new e.aI(t,i.u_is_text),u_pitch_with_map:new e.aI(t,i.u_pitch_with_map),u_is_along_line:new e.aI(t,i.u_is_along_line),u_is_variable_anchor:new e.aI(t,i.u_is_variable_anchor),u_texsize:new e.aP(t,i.u_texsize),u_texsize_icon:new e.aP(t,i.u_texsize_icon),u_texture:new e.aI(t,i.u_texture),u_texture_icon:new e.aI(t,i.u_texture_icon),u_gamma_scale:new e.aJ(t,i.u_gamma_scale),u_device_pixel_ratio:new e.aJ(t,i.u_device_pixel_ratio),u_is_halo:new e.aI(t,i.u_is_halo),u_translation:new e.aP(t,i.u_translation),u_pitched_scale:new e.aJ(t,i.u_pitched_scale)}),background:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_opacity:new e.aJ(t,i.u_opacity),u_color:new e.aM(t,i.u_color)}),backgroundPattern:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_opacity:new e.aJ(t,i.u_opacity),u_image:new e.aI(t,i.u_image),u_pattern_tl_a:new e.aP(t,i.u_pattern_tl_a),u_pattern_br_a:new e.aP(t,i.u_pattern_br_a),u_pattern_tl_b:new e.aP(t,i.u_pattern_tl_b),u_pattern_br_b:new e.aP(t,i.u_pattern_br_b),u_texsize:new e.aP(t,i.u_texsize),u_mix:new e.aJ(t,i.u_mix),u_pattern_size_a:new e.aP(t,i.u_pattern_size_a),u_pattern_size_b:new e.aP(t,i.u_pattern_size_b),u_scale_a:new e.aJ(t,i.u_scale_a),u_scale_b:new e.aJ(t,i.u_scale_b),u_pixel_coord_upper:new e.aP(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.aP(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.aJ(t,i.u_tile_units_to_pixels)}),terrain:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_texture:new e.aI(t,i.u_texture),u_ele_delta:new e.aJ(t,i.u_ele_delta),u_fog_matrix:new e.aK(t,i.u_fog_matrix),u_fog_color:new e.aM(t,i.u_fog_color),u_fog_ground_blend:new e.aJ(t,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new e.aJ(t,i.u_fog_ground_blend_opacity),u_horizon_color:new e.aM(t,i.u_horizon_color),u_horizon_fog_blend:new e.aJ(t,i.u_horizon_fog_blend)}),terrainDepth:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_ele_delta:new e.aJ(t,i.u_ele_delta)}),terrainCoords:(t,i)=>({u_matrix:new e.aK(t,i.u_matrix),u_texture:new e.aI(t,i.u_texture),u_terrain_coords_id:new e.aJ(t,i.u_terrain_coords_id),u_ele_delta:new e.aJ(t,i.u_ele_delta)}),sky:(t,i)=>({u_sky_color:new e.aM(t,i.u_sky_color),u_horizon_color:new e.aM(t,i.u_horizon_color),u_horizon:new e.aJ(t,i.u_horizon),u_sky_horizon_blend:new e.aJ(t,i.u_sky_horizon_blend)})};class eF{constructor(t,e,i){this.context=t;let r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=!!i,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){let e=this.context.gl;if(!this.dynamicDraw)throw Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let ej={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class eq{constructor(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;let n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);let e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){let r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,i){for(let r=0;r<this.attributes.length;r++){let n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[ej[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let eV=new WeakMap;function eU(t){var e;if(eV.has(t))return eV.get(t);{let i=null===(e=t.getParameter(t.VERSION))||void 0===e?void 0:e.startsWith("WebGL 2.0");return eV.set(t,i),i}}class eZ{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class eG extends eZ{getDefault(){return e.aN.transparent}set(t){let e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class eH extends eZ{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class eW extends eZ{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class eX extends eZ{getDefault(){return[!0,!0,!0,!0]}set(t){let e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class e$ extends eZ{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class eY extends eZ{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class eK extends eZ{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){let e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class eJ extends eZ{getDefault(){let t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){let e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class eQ extends eZ{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class e0 extends eZ{getDefault(){return[0,1]}set(t){let e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class e1 extends eZ{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class e2 extends eZ{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class e6 extends eZ{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class e3 extends eZ{getDefault(){let t=this.gl;return[t.ONE,t.ZERO]}set(t){let e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class e8 extends eZ{getDefault(){return e.aN.transparent}set(t){let e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class e4 extends eZ{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class e5 extends eZ{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class e7 extends eZ{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class e9 extends eZ{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class it extends eZ{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ie extends eZ{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ii extends eZ{getDefault(){let t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){let e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ir extends eZ{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class io extends eZ{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ia extends eZ{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class is extends eZ{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class il extends eZ{getDefault(){return null}set(t){let e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ih extends eZ{getDefault(){return null}set(t){var e;if(t===this.current&&!this.dirty)return;let i=this.gl;eU(i)?i.bindVertexArray(t):null===(e=i.getExtension("OES_vertex_array_object"))||void 0===e||e.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class iu extends eZ{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class ic extends eZ{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class id extends eZ{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;let e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class ip extends eZ{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class im extends ip{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class ig extends ip{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class iy extends ip{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class iv{constructor(t,e,i,r,n){this.context=t,this.width=e,this.height=i;let o=t.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new im(t,a),r)this.depthAttachment=n?new iy(t,a):new ig(t,a);else if(n)throw Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw Error("Framebuffer is not complete")}destroy(){let t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){let e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class i_{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}i_.Replace=[1,0],i_.disabled=new i_(i_.Replace,e.aN.transparent,[!1,!1,!1,!1]),i_.unblended=new i_(i_.Replace,e.aN.transparent,[!0,!0,!0,!0]),i_.alphaBlended=new i_([1,771],e.aN.transparent,[!0,!0,!0,!0]);class ib{constructor(t){var e,i;if(this.gl=t,this.clearColor=new eG(this),this.clearDepth=new eH(this),this.clearStencil=new eW(this),this.colorMask=new eX(this),this.depthMask=new e$(this),this.stencilMask=new eY(this),this.stencilFunc=new eK(this),this.stencilOp=new eJ(this),this.stencilTest=new eQ(this),this.depthRange=new e0(this),this.depthTest=new e1(this),this.depthFunc=new e2(this),this.blend=new e6(this),this.blendFunc=new e3(this),this.blendColor=new e8(this),this.blendEquation=new e4(this),this.cullFace=new e5(this),this.cullFaceSide=new e7(this),this.frontFace=new e9(this),this.program=new it(this),this.activeTexture=new ie(this),this.viewport=new ii(this),this.bindFramebuffer=new ir(this),this.bindRenderbuffer=new io(this),this.bindTexture=new ia(this),this.bindVertexBuffer=new is(this),this.bindElementBuffer=new il(this),this.bindVertexArray=new ih(this),this.pixelStoreUnpack=new iu(this),this.pixelStoreUnpackPremultiplyAlpha=new ic(this),this.pixelStoreUnpackFlipY=new id(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),eU(t)){this.HALF_FLOAT=t.HALF_FLOAT;let r=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(e=t.RGBA16F)&&void 0!==e?e:null==r?void 0:r.RGBA16F_EXT,this.RGB16F=null!==(i=t.RGB16F)&&void 0!==i?i:null==r?void 0:r.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");let e=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==e?void 0:e.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new eF(this,t,e)}createVertexBuffer(t,e,i){return new eq(this,t,e,i)}createRenderbuffer(t,e,i){let r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n}createFramebuffer(t,e,i,r){return new iv(this,t,e,i,r)}clear({color:t,depth:e,stencil:i}){let r=this.gl,n=0;t&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==i&&(n|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(n)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){e.aF(t.blendFunction,i_.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return eU(this.gl)?this.gl.createVertexArray():null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var e;return eU(this.gl)?this.gl.deleteVertexArray(t):null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class ix{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}ix.ReadOnly=!1,ix.ReadWrite=!0,ix.disabled=new ix(519,ix.ReadOnly,[0,1]);let iw=7680;class iM{constructor(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o}}iM.disabled=new iM({func:519,mask:0},0,0,iw,iw,iw);class iS{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}function ik(t,i,r,n,o){var a;let l=t.context,h=l.gl,u=t.useProgram("collisionBox"),c=[],f=0,d=0;for(let s=0;s<n.length;s++){let p=n[s],m=i.getTile(p).getBucket(r);if(!m)continue;let g=o?m.textCollisionBox:m.iconCollisionBox,y=m.collisionCircleArray;if(y.length>0){let i=e.H();e.aR(i,m.placementInvProjMatrix,t.transform.glCoordMatrix),e.aR(i,i,m.placementViewportMatrix),c.push({circleArray:y,circleOffset:d,transform:p.posMatrix,invTransform:i,coord:p}),f+=y.length/4,d=f}g&&u.draw(l,h.LINES,ix.disabled,iM.disabled,t.colorModeForRenderPass(),iS.disabled,{u_matrix:p.posMatrix,u_pixel_extrude_scale:[1/(a=t.transform).width,1/a.height]},t.style.map.terrain&&t.style.map.terrain.getTerrainData(p),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,t.transform.zoom,null,null,g.collisionVertexBuffer)}if(!o||!c.length)return;let p=t.useProgram("collisionCircle"),m=new e.aS;m.resize(4*f),m._trim();let g=0;for(let t of c)for(let e=0;e<t.circleArray.length/4;e++){let i=4*e,r=t.circleArray[i+0],n=t.circleArray[i+1],o=t.circleArray[i+2],a=t.circleArray[i+3];m.emplace(g++,r,n,o,a,0),m.emplace(g++,r,n,o,a,1),m.emplace(g++,r,n,o,a,2),m.emplace(g++,r,n,o,a,3)}(!s||s.length<2*f)&&(s=function(t){let i=2*t,r=new e.aU;r.resize(i),r._trim();for(let t=0;t<i;t++){let e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(f));let y=l.createIndexBuffer(s,!0),v=l.createVertexBuffer(m,e.aT.members,!0);for(let i of c){let n=eb(i.transform,i.invTransform,t.transform);p.draw(l,h.TRIANGLES,ix.disabled,iM.disabled,t.colorModeForRenderPass(),iS.disabled,n,t.style.map.terrain&&t.style.map.terrain.getTerrainData(i.coord),r.id,v,y,e.a0.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,t.transform.zoom,null,null,null)}v.destroy(),y.destroy()}iS.disabled=new iS(!1,1029,2305),iS.backCCW=new iS(!0,1029,2305);let iE=e.ao(new Float32Array(16));function iI(t,i,r,n,o,a){let{horizontalAlign:s,verticalAlign:l}=e.av(t);return new e.P((-(s-.5)*i/o+n[0])*a,(-(l-.5)*r/o+n[1])*a)}function iP(t,i,r,n,o,a){let s=i.tileAnchorPoint.add(new e.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let t=n.mult(a);return r||(t=t.rotate(-o)),tw(s.add(t),i.labelPlaneMatrix,i.getElevation).point}if(r){let e=tC(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(t),r=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0);return t.add(n.rotate(r))}return t.add(n)}function iT(t,i,r,n,o,a,s,l,h,u,c,f,d,p){let m=t.text.placedSymbolArray,g=t.text.dynamicLayoutVertexArray,y=t.icon.dynamicLayoutVertexArray,v={};g.clear();for(let y=0;y<m.length;y++){let _=m.get(y),b=_.hidden||!_.crossTileID||t.allowVerticalPlacement&&!_.placedOrientation?null:n[_.crossTileID];if(b){let n=new e.P(_.anchorX,_.anchorY),m={getElevation:p,width:o.width,height:o.height,labelPlaneMatrix:a,lineVertexArray:null,pitchWithMap:r,projection:c,projectionCache:null,tileAnchorPoint:n,translation:f,unwrappedTileID:d},y=r?tw(n,s,p):tC(n.x,n.y,m),x=tM(o.cameraToCenterDistance,y.signedDistanceFromCamera),w=e.aj(t.textSizeData,h,_)*x/e.aq;r&&(w*=t.tilePixelRatio/l);let{width:M,height:S,anchor:k,textOffset:E,textBoxScale:I}=b,P=iI(k,M,S,E,I,w),T=c.getPitchedTextCorrection(o,n.add(new e.P(f[0],f[1])),d),A=iP(y.point,m,i,P,o.angle,T),C=t.allowVerticalPlacement&&_.placedOrientation===e.ai.vertical?Math.PI/2:0;for(let t=0;t<_.numGlyphs;t++)e.ak(g,A,C);u&&_.associatedIconIndex>=0&&(v[_.associatedIconIndex]={shiftedAnchor:A,angle:C})}else tO(_.numGlyphs,g)}if(u){y.clear();let i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){let r=i.get(t);if(r.hidden)tO(r.numGlyphs,y);else{let i=v[t];if(i)for(let t=0;t<r.numGlyphs;t++)e.ak(y,i.shiftedAnchor,i.angle);else tO(r.numGlyphs,y)}}t.icon.dynamicLayoutVertexBuffer.updateData(y)}t.text.dynamicLayoutVertexBuffer.updateData(g)}function iA(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function iC(t,i,r,n,o,a,s,l,h,u,c,f){let d=t.context,p=d.gl,m=t.transform,g=t3(),y="map"===l,v="map"===h,_="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),b=y&&!v&&!_,x=!v&&_,w=!r.layout.get("symbol-sort-key").isConstant(),M=!1,S=t.depthModeForSublayer(0,ix.ReadOnly),k=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),E=[],I=g.getCircleRadiusCorrection(m);for(let l of n){let n=i.getTile(l),h=n.getBucket(r);if(!h)continue;let c=o?h.text:h.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;let f=c.programConfigurations.get(r.id),d=o||h.sdfIcons,S=o?h.textSizeData:h.iconSizeData,P=v||0!==m.pitch,T=t.useProgram(iA(d,o,h),f),A=e.ah(S,m.zoom),C=t.style.map.terrain&&t.style.map.terrain.getTerrainData(l),R,N,z,O,D=[0,0],B=null;if(o)N=n.glyphAtlasTexture,z=p.LINEAR,R=n.glyphAtlasTexture.size,h.iconsInText&&(D=n.imageAtlasTexture.size,B=n.imageAtlasTexture,O=P||t.options.rotating||t.options.zooming||"composite"===S.kind||"camera"===S.kind?p.LINEAR:p.NEAREST);else{let e=1!==r.layout.get("icon-size").constantOr(0)||h.iconsNeedLinear;N=n.imageAtlasTexture,z=d||t.options.rotating||t.options.zooming||e||P?p.LINEAR:p.NEAREST,R=n.imageAtlasTexture.size}let F=tF(n,1,t.transform.zoom),j=x?l.posMatrix:iE,q=tb(j,v,y,t.transform,F),V=tx(j,v,y,t.transform,F),U=tx(l.posMatrix,v,y,t.transform,F),Z=g.translatePosition(t.transform,n,a,s),G=k&&h.hasTextData(),H="none"!==r.layout.get("icon-text-fit")&&G&&h.hasIconData();if(_){let e=t.style.map.terrain?(e,i)=>t.style.map.terrain.getElevation(l,e,i):null,i="map"===r.layout.get("text-rotation-alignment");tk(h,l.posMatrix,t,o,q,U,v,u,i,g,l.toUnwrapped(),m.width,m.height,Z,e)}let W=l.posMatrix,X=o&&k||H,$=_||X?iE:q,Y=V,K=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),J={program:T,buffers:c,uniformValues:d?h.iconsInText?ez(S.kind,A,b,v,_,X,t,W,$,Y,Z,R,D,I):eN(S.kind,A,b,v,_,X,t,W,$,Y,Z,o,R,!0,I):eR(S.kind,A,b,v,_,X,t,W,$,Y,Z,o,R,I),atlasTexture:N,atlasTextureIcon:B,atlasInterpolation:z,atlasInterpolationIcon:O,isSDF:d,hasHalo:K};if(w&&h.canOverlap)for(let t of(M=!0,c.segments.get()))E.push({segments:new e.a0([t]),sortKey:t.sortKey,state:J,terrainData:C});else E.push({segments:c.segments,sortKey:0,state:J,terrainData:C})}for(let e of(M&&E.sort((t,e)=>t.sortKey-e.sortKey),E)){let i=e.state;if(d.activeTexture.set(p.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,p.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),i.isSDF){let n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,iL(i.buffers,e.segments,r,t,i.program,S,c,f,n,e.terrainData)),n.u_is_halo=0}iL(i.buffers,e.segments,r,t,i.program,S,c,f,i.uniformValues,e.terrainData)}}function iL(t,e,i,r,n,o,a,s,l,h){let u=r.context;n.draw(u,u.gl.TRIANGLES,o,a,s,iS.disabled,l,h,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function iR(t,e,i,r,n){if(!i||!r||!r.imageAtlas)return;let o=r.imageAtlas.patternPositions,a=o[i.to.toString()],s=o[i.from.toString()];if(!a&&s&&(a=s),!s&&a&&(s=a),!a||!s){let t=n.getPaintProperty(e);a=o[t],s=o[t]}a&&s&&t.setConstantPatternPositions(a,s)}function iN(t,e,i,r,n,o,a){let s,l,h,u,c;let f=t.context.gl,d="fill-pattern",p=i.paint.get(d),m=p&&p.constantOr(1),g=i.getCrossfadeParameters();a?(l=m&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(l=m?"fillPattern":"fill",s=f.TRIANGLES);let y=p.constantOr(null);for(let p of r){let r=e.getTile(p);if(m&&!r.patternsLoaded())continue;let v=r.getBucket(i);if(!v)continue;let _=v.programConfigurations.get(i.id),b=t.useProgram(l,_),x=t.style.map.terrain&&t.style.map.terrain.getTerrainData(p);m&&(t.context.activeTexture.set(f.TEXTURE0),r.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),_.updatePaintBuffers(g)),iR(_,d,y,r,i);let w=x?p:null,M=t.translatePosMatrix(w?w.posMatrix:p.posMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){u=v.indexBuffer2,c=v.segments2;let e=[f.drawingBufferWidth,f.drawingBufferHeight];h="fillOutlinePattern"===l&&m?ev(M,t,g,r,e):ey(M,e)}else u=v.indexBuffer,c=v.segments,h=m?eg(M,t,g,r):em(M);b.draw(t.context,s,n,t.stencilModeForClipping(p),o,iS.disabled,h,x,i.id,v.layoutVertexBuffer,u,c,i.paint,t.transform.zoom,_)}}function iz(t,e,i,r,n,o,a){let s=t.context,l=s.gl,h="fill-extrusion-pattern",u=i.paint.get(h),c=u.constantOr(1),f=i.getCrossfadeParameters(),d=i.paint.get("fill-extrusion-opacity"),p=u.constantOr(null);for(let u of r){let r=e.getTile(u),m=r.getBucket(i);if(!m)continue;let g=t.style.map.terrain&&t.style.map.terrain.getTerrainData(u),y=m.programConfigurations.get(i.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(f)),iR(y,h,p,r,i);let _=t.translatePosMatrix(u.posMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),b=i.paint.get("fill-extrusion-vertical-gradient"),x=c?ep(_,t,b,d,u,f,r):ed(_,t,b,d);v.draw(s,s.gl.TRIANGLES,n,o,a,iS.backCCW,x,g,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,t.transform.zoom,y,t.style.map.terrain&&m.centroidVertexBuffer)}}function iO(t,e,i,r,n,o,a){let s=t.context,l=s.gl,h=i.fbo;if(!h)return;let u=t.useProgram("hillshade"),c=t.style.map.terrain&&t.style.map.terrain.getTerrainData(e);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,h.colorAttachment.get()),u.draw(s,l.TRIANGLES,n,o,a,iS.disabled,((t,e,i,r)=>{let n=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);let l=!t.options.moving;return{u_matrix:r?r.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:eS(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:o,u_accent:a}})(t,i,r,c?e:null),c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function iD(t,i,r,n,o,a){let s=t.context,l=s.gl,h=i.dem;if(h&&h.data){let u=h.dim,c=h.stride,f=h.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(c),i.demTexture){let t=i.demTexture;t.update(f,{premultiply:!1}),t.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new E(s,f,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let d=i.fbo;if(!d){let t=new E(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),(d=i.fbo=s.createFramebuffer(u,u,!0,!1)).colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,n,o,a,iS.disabled,((t,i)=>{let r=i.stride,n=e.H();return e.aQ(n,0,e.X,-e.X,0,0,1),e.J(n,n,[0,-e.X,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:i.getUnpackVector()}})(i.tileID,h),null,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function iB(t,i,r,n,o,a){let s=n.paint.get("raster-fade-duration");if(!a&&s>0){let n=u.now(),a=(n-t.timeAdded)/s,l=i?(n-i.timeAdded)/s:-1,h=r.getSource(),c=o.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),f=!i||Math.abs(i.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),d=f&&t.refreshedUponExpiration?1:e.ad(f?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}let iF=new e.aN(1,0,0,1),ij=new e.aN(0,1,0,1),iq=new e.aN(0,0,1,1),iV=new e.aN(1,0,1,1),iU=new e.aN(0,1,1,1);function iZ(t,e,i,r){iH(t,0,e+i/2,t.transform.width,i,r)}function iG(t,e,i,r){iH(t,e-i/2,0,i,t.transform.height,r)}function iH(t,e,i,r,n,o){let a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,i*t.pixelRatio,r*t.pixelRatio,n*t.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function iW(t,i,r){let n=t.context,o=n.gl,a=r.posMatrix,s=t.useProgram("debug"),l=ix.disabled,h=iM.disabled,u=t.colorModeForRenderPass(),c="$debug",f=t.style.map.terrain&&t.style.map.terrain.getTerrainData(r);n.activeTexture.set(o.TEXTURE0);let d=i.getTileByID(r.key).latestRawTileData,p=Math.floor((d&&d.byteLength||0)/1024),m=512/Math.min(i.getTile(r).tileSize,512)*(r.overscaledZ/t.transform.zoom)*.5,g=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(g+=` => ${r.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();let i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,`${g} ${p}kB`),s.draw(n,o.TRIANGLES,l,h,i_.alphaBlended,iS.disabled,ex(a,e.aN.transparent,m),null,c,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments),s.draw(n,o.LINE_STRIP,l,h,u,iS.disabled,ex(a,e.aN.red),f,c,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments)}function iX(t,e,i){let r=t.context,n=r.gl,o=t.colorModeForRenderPass(),a=new ix(n.LEQUAL,ix.ReadWrite,t.depthRangeFor3D),s=t.useProgram("terrain"),l=e.getTerrainMesh();for(let h of(r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height]),i)){let i=t.renderToTexture.getTexture(h),u=e.getTerrainData(h.tileID);r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.texture);let c=eh(t.transform.calculatePosMatrix(h.tileID.toUnwrapped()),e.getMeshFrameDelta(t.transform.zoom),t.transform.calculateFogMatrix(h.tileID.toUnwrapped()),t.style.sky,t.transform.pitch);s.draw(r,n.TRIANGLES,a,iM.disabled,o,iS.backCCW,c,u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class i${constructor(t,e,i){this.vertexBuffer=t,this.indexBuffer=e,this.segments=i}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class iY{constructor(t,i){this.context=new ib(t),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:e.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=tp.maxUnderzooming+tp.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new ee}resize(t,e,i){if(this.width=Math.floor(t*i),this.height=Math.floor(e*i),this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let t of this.style._order)this.style._layers[t].resize()}setup(){let t=this.context,i=new e.aX;i.emplaceBack(0,0),i.emplaceBack(e.X,0),i.emplaceBack(0,e.X),i.emplaceBack(e.X,e.X),this.tileExtentBuffer=t.createVertexBuffer(i,eo.members),this.tileExtentSegments=e.a0.simpleSegment(0,0,4,2);let r=new e.aX;r.emplaceBack(0,0),r.emplaceBack(e.X,0),r.emplaceBack(0,e.X),r.emplaceBack(e.X,e.X),this.debugBuffer=t.createVertexBuffer(r,eo.members),this.debugSegments=e.a0.simpleSegment(0,0,4,5);let n=new e.$;n.emplaceBack(0,0,0,0),n.emplaceBack(e.X,0,e.X,0),n.emplaceBack(0,e.X,0,e.X),n.emplaceBack(e.X,e.X,e.X,e.X),this.rasterBoundsBuffer=t.createVertexBuffer(n,te.members),this.rasterBoundsSegments=e.a0.simpleSegment(0,0,4,2);let o=new e.aX;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,eo.members),this.viewportSegments=e.a0.simpleSegment(0,0,4,2);let a=new e.aZ;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);let s=new e.aY;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);let l=this.context.gl;this.stencilClearMode=new iM({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){let t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let r=e.H();e.aQ(r,0,this.width,this.height,0,0,1),e.K(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,ix.disabled,this.stencilClearMode,i_.disabled,iS.disabled,ew(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;let i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(i_.disabled),i.setDepthMode(ix.disabled);let n=this.useProgram("clippingMask");for(let t of(this._tileClippingMaskIDs={},e)){let e=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,o=this.style.map.terrain&&this.style.map.terrain.getTerrainData(t);n.draw(i,r.TRIANGLES,ix.disabled,new iM({func:r.ALWAYS,mask:0},e,255,r.KEEP,r.KEEP,r.REPLACE),i_.disabled,iS.disabled,ew(t.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let t=this.nextStencilID++,e=this.context.gl;return new iM({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){let e=this.context.gl;return new iM({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){let e=this.context.gl,i=t.sort((t,e)=>e.overscaledZ-t.overscaledZ),r=i[i.length-1].overscaledZ,n=i[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();let t={};for(let i=0;i<n;i++)t[i+r]=new iM({func:e.GEQUAL,mask:255},i+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=n,[t,i]}return[{[r]:iM.disabled},i]}colorModeForRenderPass(){let t=this.context.gl;if(this._showOverdrawInspector){let i=1/8;return new i_([t.CONSTANT_COLOR,t.ONE],new e.aN(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?i_.unblended:i_.alphaBlended}depthModeForSublayer(t,e,i){if(!this.opaquePassEnabledForLayer())return ix.disabled;let r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new ix(i||this.context.gl.LEQUAL,e,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){var r;this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(u.now()),this.imageManager.beginFrame();let n=this.style._order,o=this.style.sourceCaches,a={},s={},l={};for(let t in o){let e=o[t];e.used&&e.prepare(this.context),a[t]=e.getVisibleCoordinates(),s[t]=a[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<n.length;t++)if(this.style._layers[n[t]].is3D()){this.opaquePassCutoff=t;break}for(let t of(this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen",n)){let e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;let i=s[e.source];("custom"===e.type||i.length)&&this.renderLayer(this,o[e.source],e,i)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.aN.black:e.aN.transparent,depth:1}),this.clearStencil(),(null===(r=this.style.stylesheet)||void 0===r?void 0:r.sky)&&function(t,i){let r,n,o;let a=t.context,s=a.gl,l=(r=i,n=t.style.map.transform,o=t.pixelRatio,{u_sky_color:r.properties.get("sky-color"),u_horizon_color:r.properties.get("horizon-color"),u_horizon:(n.height/2+n.getHorizon())*o,u_sky_horizon_blend:r.properties.get("sky-horizon-blend")*n.height/2*o}),h=new ix(s.LEQUAL,ix.ReadWrite,[0,1]),u=iM.disabled,c=t.colorModeForRenderPass(),f=t.useProgram("sky");if(!i.mesh){let t=new e.aX;t.emplaceBack(-1,-1),t.emplaceBack(1,-1),t.emplaceBack(1,1),t.emplaceBack(-1,1);let r=new e.aY;r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),i.mesh=new i$(a.createVertexBuffer(t,eo.members),a.createIndexBuffer(r),e.a0.simpleSegment(0,0,t.length,r.length))}f.draw(a,s.TRIANGLES,h,u,c,iS.disabled,l,void 0,"sky",i.mesh.vertexBuffer,i.mesh.indexBuffer,i.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){let t=this.style._layers[n[this.currentLayer]],e=o[t.source],i=a[t.source];this._renderTileClippingMasks(t,i),this.renderLayer(this,e,t,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){let t=this.style._layers[n[this.currentLayer]],e=o[t.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(t))continue;let i=("symbol"===t.type?l:s)[t.source];this._renderTileClippingMasks(t,a[t.source]),this.renderLayer(this,e,t,i)}if(this.options.showTileBoundaries){let t=function(t,e){let i=null,r=Object.values(t._layers).flatMap(i=>i.source&&!i.isHidden(e)?[t.sourceCaches[i.source]]:[]),n=r.filter(t=>"vector"===t.getSource().type),o=r.filter(t=>"vector"!==t.getSource().type),a=t=>{(!i||i.getSource().maxzoom<t.getSource().maxzoom)&&(i=t)};return n.forEach(t=>a(t)),i||o.forEach(t=>a(t)),i}(this.style,this.transform.zoom);t&&function(t,e,i){for(let r=0;r<i.length;r++)iW(t,e,i[r])}(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){let e=t.transform.padding;iZ(t,t.transform.height-(e.top||0),3,iF),iZ(t,e.bottom||0,3,ij),iG(t,e.left||0,3,iq),iG(t,t.transform.width-(e.right||0),3,iV);let i=t.transform.centerPoint;!function(t,e,i,r){iH(t,e-1,i-10,2,20,r),iH(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,iU)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;let i=this.terrainFacilitator.matrix,r=this.transform.modelViewProjectionMatrix,n=this.terrainFacilitator.dirty;n||(n=t?!e.a_(i,r):!e.a$(i,r)),n||(n=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),n&&(e.b0(i,r),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(t,i){let r=t.context,n=r.gl,o=i_.unblended,a=new ix(n.LEQUAL,ix.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.sourceCache.getRenderableTiles(),h=t.useProgram("terrainDepth");for(let u of(r.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.aN.transparent,depth:1}),l)){let e=i.getTerrainData(u.tileID),l={u_matrix:t.transform.calculatePosMatrix(u.tileID.toUnwrapped()),u_ele_delta:i.getMeshFrameDelta(t.transform.zoom)};h.draw(r,n.TRIANGLES,a,iM.disabled,o,iS.backCCW,l,e,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.map.terrain),function(t,i){let r=t.context,n=r.gl,o=i_.unblended,a=new ix(n.LEQUAL,ix.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.getCoordsTexture(),h=i.sourceCache.getRenderableTiles(),u=t.useProgram("terrainCoords");for(let c of(r.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),r.clear({color:e.aN.transparent,depth:1}),i.coordsIndex=[],h)){let e=i.getTerrainData(c.tileID);r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,l.texture);let h={u_matrix:t.transform.calculatePosMatrix(c.tileID.toUnwrapped()),u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0,u_ele_delta:i.getMeshFrameDelta(t.transform.zoom)};u.draw(r,n.TRIANGLES,a,iM.disabled,o,iS.backCCW,h,e,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),i.coordsIndex.push(c.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height])}(this,this.style.map.terrain))}renderLayer(t,i,r,n){if(!r.isHidden(this.transform.zoom)&&("background"===r.type||"custom"===r.type||(n||[]).length))switch(this.id=r.id,r.type){case"symbol":!function(t,i,r,n,o){if("translucent"!==t.renderPass)return;let a=iM.disabled,s=t.colorModeForRenderPass();(r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(t,i,r,n,o,a,s,l,h){let u=i.transform,c=t3(),f="map"===o,d="map"===a;for(let o of t){let t=n.getTile(o),a=t.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;let p=e.ah(a.textSizeData,u.zoom),m=tF(t,1,i.transform.zoom),g=tb(o.posMatrix,d,f,i.transform,m),y="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(p){let e=Math.pow(2,u.zoom-t.tileID.overscaledZ),r=i.style.map.terrain?(t,e)=>i.style.map.terrain.getElevation(o,t,e):null,n=c.translatePosition(u,t,s,l);iT(a,f,d,h,u,g,o.posMatrix,e,p,y,c,n,o.toUnwrapped(),r)}}}(n,t,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&iC(t,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&iC(t,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),i.map.showCollisionBoxes&&(ik(t,i,r,n,!0),ik(t,i,r,n,!1))}(t,i,r,n,this.style.placement.variableOffsets);break;case"circle":!function(t,i,r,n){if("translucent"!==t.renderPass)return;let o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;let h=t.context,u=h.gl,c=t.depthModeForSublayer(0,ix.ReadOnly),f=iM.disabled,d=t.colorModeForRenderPass(),p=[];for(let o=0;o<n.length;o++){let a=n[o],s=i.getTile(a),h=s.getBucket(r);if(!h)continue;let u=h.programConfigurations.get(r.id),c=t.useProgram("circle",u),f=h.layoutVertexBuffer,d=h.indexBuffer,m=t.style.map.terrain&&t.style.map.terrain.getTerrainData(a),g={programConfiguration:u,program:c,layoutVertexBuffer:f,indexBuffer:d,uniformValues:e_(t,a,s,r),terrainData:m};if(l)for(let t of h.segments.get())p.push({segments:new e.a0([t]),sortKey:t.sortKey,state:g});else p.push({segments:h.segments,sortKey:0,state:g})}for(let e of(l&&p.sort((t,e)=>t.sortKey-e.sortKey),p)){let{programConfiguration:i,program:n,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=e.state;n.draw(h,u.TRIANGLES,c,f,d,iS.disabled,s,l,r.id,o,a,e.segments,r.paint,t.transform.zoom,i)}}(t,i,r,n);break;case"heatmap":!function(t,i,r,n){if(0!==r.paint.get("heatmap-opacity")){if("offscreen"===t.renderPass){let o=t.context,a=o.gl,s=iM.disabled,l=new i_([a.ONE,a.ONE],e.aN.transparent,[!0,!0,!0,!0]);(function(t,e,i){let r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{let o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1,!1),function(t,e,i,r){var n,o;let a=t.gl,s=null!==(n=t.HALF_FLOAT)&&void 0!==n?n:a.UNSIGNED_BYTE,l=null!==(o=t.RGBA16F)&&void 0!==o?o:a.RGBA;a.texImage2D(a.TEXTURE_2D,0,l,e.width/4,e.height/4,0,a.RGBA,s,null),r.colorAttachment.set(i)}(t,e,o,n)}})(o,t,r),o.clear({color:e.aN.transparent});for(let e=0;e<n.length;e++){let h=n[e];if(i.hasRenderableParent(h))continue;let u=i.getTile(h),c=u.getBucket(r);if(!c)continue;let f=c.programConfigurations.get(r.id),d=t.useProgram("heatmap",f),{zoom:p}=t.transform;d.draw(o,a.TRIANGLES,ix.disabled,s,l,iS.disabled,eM(h.posMatrix,u,p,r.paint.get("heatmap-intensity")),null,r.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,r.paint,t.transform.zoom,f)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){let r=t.context,n=r.gl,o=i.heatmapFbo;if(!o)return;r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);let a=i.colorRampTexture;a||(a=i.colorRampTexture=new E(r,i.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,n.TRIANGLES,ix.disabled,iM.disabled,t.colorModeForRenderPass(),iS.disabled,((t,i,r,n)=>{let o=e.H();e.aQ(o,0,t.width,t.height,0,0,1);let a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(t,i),null,i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}(t,r))}}(t,i,r,n);break;case"line":!function(t,i,r,n){if("translucent"!==t.renderPass)return;let o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;let s=t.depthModeForSublayer(0,ix.ReadOnly),l=t.colorModeForRenderPass(),h=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),c=u.constantOr(1),f=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),p=c?"linePattern":h?"lineSDF":f?"lineGradient":"line",m=t.context,g=m.gl,y=!0;for(let o of n){let n=i.getTile(o);if(c&&!n.patternsLoaded())continue;let a=n.getBucket(r);if(!a)continue;let v=a.programConfigurations.get(r.id),_=t.context.program.get(),b=t.useProgram(p,v),x=y||b.program!==_,w=t.style.map.terrain&&t.style.map.terrain.getTerrainData(o),M=u.constantOr(null);if(M&&n.imageAtlas){let t=n.imageAtlas,e=t.patternPositions[M.to.toString()],i=t.patternPositions[M.from.toString()];e&&i&&v.setConstantPatternPositions(e,i)}let S=w?o:null,k=c?eI(t,n,r,d,S):h?eP(t,n,r,h,d,S):f?eE(t,n,r,a.lineClipsArray.length,S):ek(t,n,r,S);if(c)m.activeTexture.set(g.TEXTURE0),n.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),v.updatePaintBuffers(d);else if(h&&(x||t.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),t.lineAtlas.bind(m);else if(f){let n=a.gradients[r.id],s=n.texture;if(r.gradientVersion!==n.version){let l=256;if(r.stepInterpolant){let r=i.getSource().maxzoom,n=o.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.ad(e.aV(a.maxLineLength/e.X*1024*n),256,m.maxTextureSize)}n.gradient=e.aW({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:n.gradient||void 0,clips:a.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new E(m,n.gradient,g.RGBA),n.version=r.gradientVersion,s=n.texture}m.activeTexture.set(g.TEXTURE0),s.bind(r.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}b.draw(m,g.TRIANGLES,s,t.stencilModeForClipping(o),l,iS.disabled,k,w,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,t.transform.zoom,v,a.layoutVertexBuffer2),y=!1}}(t,i,r,n);break;case"fill":!function(t,i,r,n){let o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;let s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),h=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.aN.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===h){let e=t.depthModeForSublayer(1,"opaque"===t.renderPass?ix.ReadWrite:ix.ReadOnly);iN(t,i,r,n,e,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){let e=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,ix.ReadOnly);iN(t,i,r,n,e,s,!0)}}(t,i,r,n);break;case"fill-extrusion":!function(t,e,i,r){let n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){let o=new ix(t.context.gl.LEQUAL,ix.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))iz(t,e,i,r,o,iM.disabled,i_.disabled),iz(t,e,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{let n=t.colorModeForRenderPass();iz(t,e,i,r,o,iM.disabled,n)}}}(t,i,r,n);break;case"hillshade":!function(t,e,i,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;let n=t.context,o=t.depthModeForSublayer(0,ix.ReadOnly),a=t.colorModeForRenderPass(),[s,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r];for(let r of l){let n=e.getTile(r);void 0!==n.needsHillshadePrepare&&n.needsHillshadePrepare&&"offscreen"===t.renderPass?iD(t,n,i,o,iM.disabled,a):"translucent"===t.renderPass&&iO(t,r,n,i,o,s[r.overscaledZ],a)}n.viewport.set([0,0,t.width,t.height])}(t,i,r,n);break;case"raster":!function(t,e,i,r){if("translucent"!==t.renderPass||0===i.paint.get("raster-opacity")||!r.length)return;let n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),[h,u]=a instanceof ti?[{},r]:t.stencilConfigForOverlap(r),c=u[u.length-1].overscaledZ,f=!t.options.moving;for(let r of u){let u,d;let p=t.depthModeForSublayer(r.overscaledZ-c,1===i.paint.get("raster-opacity")?ix.ReadWrite:ix.ReadOnly,o.LESS),m=e.getTile(r);m.registerFadeDuration(i.paint.get("raster-fade-duration"));let g=e.findLoadedParent(r,0),y=e.findLoadedSibling(r),v=iB(m,g||y||null,e,i,t.transform,t.style.map.terrain),_="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),m.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),g?(g.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),u=Math.pow(2,g.tileID.overscaledZ-m.tileID.overscaledZ),d=[m.tileID.canonical.x*u%1,m.tileID.canonical.y*u%1]):m.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),m.texture.useMipmap&&n.extTextureFilterAnisotropic&&t.transform.pitch>20&&o.texParameterf(o.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax);let b=t.style.map.terrain&&t.style.map.terrain.getTerrainData(r),x=b?r:null,w=eC(x?x.posMatrix:t.transform.calculatePosMatrix(r.toUnwrapped(),f),d||[0,0],u||1,v,i);a instanceof ti?s.draw(n,o.TRIANGLES,p,iM.disabled,l,iS.disabled,w,b,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,p,h[r.overscaledZ],l,iS.disabled,w,b,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}(t,i,r,n);break;case"background":!function(t,e,i,r){let n=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;let a=t.context,s=a.gl,l=t.transform,h=l.tileSize,u=i.paint.get("background-pattern");if(t.isPatternMissing(u))return;let c=!u&&1===n.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==c)return;let f=iM.disabled,d=t.depthModeForSublayer(0,"opaque"===c?ix.ReadWrite:ix.ReadOnly),p=t.colorModeForRenderPass(),m=t.useProgram(u?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:h,terrain:t.style.map.terrain});u&&(a.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));let y=i.getCrossfadeParameters();for(let e of g){let l=r?e.posMatrix:t.transform.calculatePosMatrix(e.toUnwrapped()),c=u?eD(l,o,t,u,{tileID:e,tileSize:h},y):eO(l,o,n),g=t.style.map.terrain&&t.style.map.terrain.getTerrainData(e);m.draw(a,s.TRIANGLES,d,f,p,iS.disabled,c,g,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}(t,0,r,n);break;case"custom":!function(t,e,i){let r=t.context,n=i.implementation;if("offscreen"===t.renderPass){let e=n.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(iM.disabled);let e="3d"===n.renderingMode?new ix(t.context.gl.LEQUAL,ix.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,ix.ReadOnly);r.setDepthMode(e),n.render(r.gl,t.transform.customLayerMatrix(),{farZ:t.transform.farZ,nearZ:t.transform.nearZ,fov:t.transform._fov,modelViewProjectionMatrix:t.transform.modelViewProjectionMatrix,projectionMatrix:t.transform.projectionMatrix}),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}(t,0,r)}}translatePosMatrix(t,i,r,n,o){if(!r[0]&&!r[1])return t;let a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){let t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}let s=[o?r[0]:tF(i,r[0],this.transform.zoom),o?r[1]:tF(i,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.J(l,t,s),l}saveTileTexture(t){let e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){let e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;let e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}useProgram(t,e){this.cache=this.cache||{};let i=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new ec(this.context,ea[t],e,eB[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:t,drawingBufferHeight:e}=this.context.gl;return this.width!==t||this.height!==e}}class iK{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,i,r){let n=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(r=>{let o=1/(r=e.ag([],r,t))[3]/i*n;return e.b1(r,r,[o,o,1/r[3],o])}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(t=>{var e,i;let r=function(t,e){var i=e[0],r=e[1],n=e[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],l=i[2];return t[0]=n*l-o*s,t[1]=o*a-r*l,t[2]=r*s-n*a,t}([],w([],o[t[0]],o[t[1]]),w([],o[t[2]],o[t[1]]))),n=-((e=r)[0]*(i=o[t[1]])[0]+e[1]*i[1]+e[2]*i[2]);return r.concat(n)});return new iK(o,a)}}class iJ{constructor(t,e){this.min=t,this.max=e,this.center=function(t,e,i){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}([],this.min,this.max))}quadrant(t){let e=[t%2==0,t<2],i=_(this.min),r=_(this.max);for(let t=0;t<e.length;t++)i[t]=e[t]?this.min[t]:this.center[t],r[t]=e[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new iJ(i,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){let i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],r=!0;for(let n=0;n<t.planes.length;n++){let o=t.planes[n],a=0;for(let t=0;t<i.length;t++)e.b2(o,i[t])>=0&&a++;if(0===a)return 0;a!==i.length&&(r=!1)}if(r)return 2;for(let e=0;e<3;e++){let i=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let n=0;n<t.points.length;n++){let o=t.points[n][e]-this.min[e];i=Math.min(i,o),r=Math.max(r,o)}if(r<0||i>this.max[e]-this.min[e])return 0}return 1}}class iQ{constructor(t=0,e=0,i=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r}interpolate(t,i,r){return null!=i.top&&null!=t.top&&(this.top=e.z.number(t.top,i.top,r)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.z.number(t.bottom,i.bottom,r)),null!=i.left&&null!=t.left&&(this.left=e.z.number(t.left,i.left,r)),null!=i.right&&null!=t.right&&(this.right=e.z.number(t.right,i.right,r)),this}getCenter(t,i){let r=e.ad((this.left+t-this.right)/2,0,t),n=e.ad((this.top+i-this.bottom)/2,0,i);return new e.P(r,n)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new iQ(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let i0=85.051129;class i1{constructor(t,i,r,n,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new iQ,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let t=new i1(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){let i=-e.b3(t,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=function(){var t=new e.A(4);return e.A!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}(),function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);t[0]=r*l+o*s,t[1]=n*l+a*s,t[2]=-(r*s)+o*l,t[3]=-(n*s)+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){let i=e.ad(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){let e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.tileZoom=Math.max(0,Math.floor(e)),this.scale=this.zoomScale(e),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){return Math.max(0,(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize)))}getVisibleUnwrappedCoordinates(t){let i=[new e.b4(0,t)];if(this._renderWorldCopies){let r=this.pointCoordinate(new e.P(0,0)),n=this.pointCoordinate(new e.P(this.width,0)),o=this.pointCoordinate(new e.P(this.width,this.height)),a=this.pointCoordinate(new e.P(0,this.height)),s=Math.floor(Math.min(r.x,n.x,o.x,a.x)),l=Math.floor(Math.max(r.x,n.x,o.x,a.x)),h=1;for(let r=s-h;r<=l+h;r++)0!==r&&i.push(new e.b4(r,t))}return i}coveringTiles(t){var i,r;let n=this.coveringZoomLevel(t),o=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);let a=this.pointCoordinate(this.getCameraPoint()),s=e.Z.fromLngLat(this.center),l=Math.pow(2,n),h=[l*a.x,l*a.y,0],u=[l*s.x,l*s.y,0],c=iK.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,n),f=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(f=n);let d=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,p=t=>({aabb:new iJ([t*l,0,0],[(t+1)*l,l,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),m=[],g=[],y=n,v=t.reparseOverscaled?o:n;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(p(-t)),m.push(p(t));for(m.push(p(0));m.length>0;){let n=m.pop(),o=n.x,a=n.y,s=n.fullyVisible;if(!s){let t=n.aabb.intersects(c);if(0===t)continue;s=2===t}let l=t.terrain?h:u,p=Math.max(Math.abs(n.aabb.distanceX(l)),Math.abs(n.aabb.distanceY(l)));if(n.zoom===y||p>d+(1<<y-n.zoom)-2&&n.zoom>=f){let t=y-n.zoom,i=h[0]-.5-(o<<t),r=h[1]-.5-(a<<t);g.push({tileID:new e.S(n.zoom===y?v:n.zoom,n.wrap,n.zoom,o,a),distanceSq:M([u[0]-.5-o,u[1]-.5-a]),tileDistanceToCamera:Math.sqrt(i*i+r*r)})}else for(let l=0;l<4;l++){let h=(o<<1)+l%2,u=(a<<1)+(l>>1),c=n.zoom+1,f=n.aabb.quadrant(l);if(t.terrain){let o=new e.S(c,n.wrap,c,h,u),a=t.terrain.getMinMaxElevation(o),s=null!==(i=a.minElevation)&&void 0!==i?i:this.elevation,l=null!==(r=a.maxElevation)&&void 0!==r?r:this.elevation;f=new iJ([f.min[0],f.min[1],s],[f.max[0],f.max[1],l])}m.push({aabb:f,zoom:c,x:h,y:u,wrap:n.wrap,fullyVisible:s})}}return g.sort((t,e)=>t.distanceSq-e.distanceSq).map(t=>t.tileID)}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){let i=e.ad(t.lat,-85.051129,i0);return new e.P(e.O(t.lng)*this.worldSize,e.Q(i)*this.worldSize)}unproject(t){return new e.Z(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){let i=this.elevation,r=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,n=this.pointLocation(this.centerPoint,t),o=t.getElevationForLngLatZoom(n,this.tileZoom);if(!(this.elevation-o))return;let a=r+i-o,s=Math.cos(this._pitch)*this.cameraToCenterDistance/a/e.b5(1,n.lat),l=this.scaleZoom(s/this.tileSize);this._elevation=o,this._center=n,this.zoom=l}setLocationAtPoint(t,i){let r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.Z(o.x-(r.x-n.x),o.y-(r.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),e.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(t){return e.Z.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,i){if(i){let e=i.pointCoordinate(t);if(null!=e)return e}let r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];e.ag(r,r,this.pixelMatrixInverse),e.ag(n,n,this.pixelMatrixInverse);let o=r[3],a=n[3],s=r[1]/o,l=n[1]/a,h=r[2]/o,u=n[2]/a,c=h===u?0:(0-h)/(u-h);return new e.Z(e.z.number(r[0]/o,n[0]/a,c)/this.worldSize,e.z.number(s,l,c)/this.worldSize)}coordinatePoint(t,i=0,r=this.pixelMatrix){let n=[t.x*this.worldSize,t.y*this.worldSize,i,1];return e.ag(n,n,r),new e.P(n[0]/n[3],n[1]/n[3])}getBounds(){let t=Math.max(0,this.height/2-this.getHorizon());return(new $).extend(this.pointLocation(new e.P(0,t))).extend(this.pointLocation(new e.P(this.width,t))).extend(this.pointLocation(new e.P(this.width,this.height))).extend(this.pointLocation(new e.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new $([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,i0])}calculateTileMatrix(t){let i=t.canonical,r=this.worldSize/this.zoomScale(i.z),n=i.x+Math.pow(2,i.z)*t.wrap,o=e.ao(new Float64Array(16));return e.J(o,o,[n*r,i.y*r,0]),e.K(o,o,[r/e.X,r/e.X,1]),o}calculatePosMatrix(t,i=!1){let r=t.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];let o=this.calculateTileMatrix(t);return e.L(o,i?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,o),n[r]=new Float32Array(o),n[r]}calculateFogMatrix(t){let i=t.key,r=this._fogMatrixCache;if(r[i])return r[i];let n=this.calculateTileMatrix(t);return e.L(n,this.fogMatrix,n),r[i]=new Float32Array(n),r[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,i){let r,n;i=e.ad(+i,this.minZoom,this.maxZoom);let o={center:new e.N(t.lng,t.lat),zoom:i},a=this.lngRange;this._renderWorldCopies||null!==a||(a=[-(180-1e-10),180-1e-10]);let s=this.tileSize*this.zoomScale(o.zoom),l=0,h=s,u=0,c=s,f=0,d=0,{x:p,y:m}=this.size;if(this.latRange){let t=this.latRange;l=e.Q(t[1])*s,(h=e.Q(t[0])*s)-l<m&&(f=m/(h-l))}a&&(u=e.b3(e.O(a[0])*s,0,s),(c=e.b3(e.O(a[1])*s,0,s))<u&&(c+=s),c-u<p&&(d=p/(c-u)));let{x:g,y:y}=this.project.call({worldSize:s},t),v=Math.max(d||0,f||0);if(v){let t=new e.P(d?(c+u)/2:g,f?(h+l)/2:y);return o.center=this.unproject.call({worldSize:s},t).wrap(),o.zoom+=this.scaleZoom(v),o}if(this.latRange){let t=m/2;y-t<l&&(n=l+t),y+t>h&&(n=h-t)}if(a){let t=(u+c)/2,i=g;this._renderWorldCopies&&(i=e.b3(g,t-s/2,t+s/2));let n=p/2;i-n<u&&(r=u+n),i+n>c&&(r=c-n)}if(void 0!==r||void 0!==n){let t=new e.P(null!=r?r:g,null!=n?n:y);o.center=this.unproject.call({worldSize:s},t).wrap()}return o}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t=this._unmodified,{center:e,zoom:i}=this.getConstrained(this.center,this.zoom);this.center=e,this.zoom=i,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;let t=this.centerOffset,i=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=e.b5(1,this.center.lat)*this.worldSize;let n=e.ao(new Float64Array(16));e.K(n,n,[this.width/2,-this.height/2,1]),e.J(n,n,[1,-1,0]),this.labelPlaneMatrix=n,n=e.ao(new Float64Array(16)),e.K(n,n,[1,-1,1]),e.J(n,n,[-1,-1,0]),e.K(n,n,[2/this.width,2/this.height,1]),this.glCoordMatrix=n;let o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),a=Math.min(this.elevation,this.minElevationForCurrentTile),s=o-a*this._pixelPerMeter/Math.cos(this._pitch),l=a<0?s:o,h=Math.PI/2+this._pitch,u=this._fov*(.5+t.y/this.height),c=Math.sin(u)*l/Math.sin(e.ad(Math.PI-h-u,.01,Math.PI-.01)),f=this.getHorizon(),d=2*Math.atan(f/this.cameraToCenterDistance)*(.5+t.y/(2*f)),p=Math.min(c,Math.sin(d)*l/Math.sin(e.ad(Math.PI-h-d,.01,Math.PI-.01)));this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*p+l),this.nearZ=this.height/50,n=new Float64Array(16),e.b6(n,this._fov,this.width/this.height,this.nearZ,this.farZ),n[8]=-(2*t.x)/this.width,n[9]=2*t.y/this.height,this.projectionMatrix=e.af(n),e.K(n,n,[1,-1,1]),e.J(n,n,[0,0,-this.cameraToCenterDistance]),e.b7(n,n,this._pitch),e.ae(n,n,this.angle),e.J(n,n,[-i,-r,0]),this.mercatorMatrix=e.K([],n,[this.worldSize,this.worldSize,this.worldSize]),e.K(n,n,[1,1,this._pixelPerMeter]),this.pixelMatrix=e.L(new Float64Array(16),this.labelPlaneMatrix,n),e.J(n,n,[0,0,-this.elevation]),this.modelViewProjectionMatrix=n,this.invModelViewProjectionMatrix=e.at([],n),this.fogMatrix=new Float64Array(16),e.b6(this.fogMatrix,this._fov,this.width/this.height,o,this.farZ),this.fogMatrix[8]=-(2*t.x)/this.width,this.fogMatrix[9]=2*t.y/this.height,e.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),e.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),e.b7(this.fogMatrix,this.fogMatrix,this._pitch),e.ae(this.fogMatrix,this.fogMatrix,this.angle),e.J(this.fogMatrix,this.fogMatrix,[-i,-r,0]),e.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),e.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=e.L(new Float64Array(16),this.labelPlaneMatrix,n);let m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),v=Math.sin(this.angle),_=i-Math.round(i)+y*m+v*g,b=r-Math.round(r)+y*g+v*m,x=new Float64Array(n);if(e.J(x,x,[_>.5?_-1:_,b>.5?b-1:b,0]),this.alignedModelViewProjectionMatrix=x,!(n=e.at(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=n,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let t=this.pointCoordinate(new e.P(0,0)),i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.ag(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.P(0,t))}getCameraQueryGeometry(t){let i=this.getCameraPoint();if(1===t.length)return[t[0],i];{let r=i.x,n=i.y,o=i.x,a=i.y;for(let e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y);return[new e.P(r,n),new e.P(o,n),new e.P(o,a),new e.P(r,a),new e.P(r,n)]}}lngLatToCameraDepth(t,i){let r=this.locationCoordinate(t),n=[r.x*this.worldSize,r.y*this.worldSize,i,1];return e.ag(n,n,this.modelViewProjectionMatrix),n[2]/n[3]}}function i2(t,e){let i,r=!1,n=null,o=null,a=()=>{n=null,r&&(t.apply(o,i),n=setTimeout(a,e),r=!1)};return(...t)=>(r=!0,o=this,i=t,n||a(),n)}class i6{constructor(t){this._getCurrentHash=()=>{let t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map(t=>t.split("=")).forEach(t=>{t[0]===this._hashName&&(e=t)}),(e&&e[1]||"").split("/")}return t.split("/")},this._onHashChange=()=>{let t=this._getCurrentHash();if(t.length>=3&&!t.some(t=>isNaN(t))){let e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let t=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,t)},this._removeHash=()=>{let t=this._getCurrentHash();if(0===t.length)return;let e=t.join("/"),i=e;i.split("&").length>0&&(i=i.split("&")[0]),this._hashName&&(i=`${this._hashName}=${e}`);let r=window.location.hash.replace(i,"");r.startsWith("#&")?r=r.slice(0,1)+r.slice(2):"#"===r&&(r="");let n=window.location.href.replace(/(#.+)?$/,r);n=n.replace("&&","&"),window.history.replaceState(window.history.state,null,n)},this._updateHash=i2(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){let e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.pow(10,Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10)),n=Math.round(e.lng*r)/r,o=Math.round(e.lat*r)/r,a=this._map.getBearing(),s=this._map.getPitch(),l="";if(l+=t?`/${n}/${o}/${i}`:`${i}/${o}/${n}`,(a||s)&&(l+="/"+Math.round(10*a)/10),s&&(l+=`/${Math.round(s)}`),this._hashName){let t=this._hashName,e=!1,i=window.location.hash.slice(1).split("&").map(i=>{let r=i.split("=")[0];return r===t?(e=!0,`${r}=${l}`):i}).filter(t=>t);return e||i.push(`${t}=${l}`),`#${i.join("&")}`}return`#${l}`}}let i3={linearity:.3,easing:e.b8(0,0,.3,1)},i8=e.e({deceleration:2500,maxSpeed:1400},i3),i4=e.e({deceleration:20,maxSpeed:1400},i3),i5=e.e({deceleration:1e3,maxSpeed:360},i3),i7=e.e({deceleration:1e3,maxSpeed:90},i3);class i9{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.now(),settings:t})}_drainInertiaBuffer(){let t=this._inertiaBuffer,e=u.now();for(;t.length>0&&e-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let i={zoom:0,bearing:0,pitch:0,pan:new e.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);let r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(i.pan.mag()){let o=re(i.pan.mag(),r,e.e({},i8,t||{}));n.offset=i.pan.mult(o.amount/i.pan.mag()),n.center=this._map.transform.center,rt(n,o)}if(i.zoom){let t=re(i.zoom,r,i4);n.zoom=this._map.transform.zoom+t.amount,rt(n,t)}if(i.bearing){let t=re(i.bearing,r,i5);n.bearing=this._map.transform.bearing+e.ad(t.amount,-179,179),rt(n,t)}if(i.pitch){let t=re(i.pitch,r,i7);n.pitch=this._map.transform.pitch+t.amount,rt(n,t)}if(n.zoom||n.bearing){let t=void 0===i.pinchAround?i.around:i.pinchAround;n.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),e.e(n,{noMoveStart:!0})}}function rt(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function re(t,i,r){let{maxSpeed:n,linearity:o,deceleration:a}=r,s=e.ad(t*o/(i/1e3),-n,n),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:l/2*s}}class ri extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,r,n={}){let o=c.mousePos(i.getCanvas(),r);super(t,e.e({point:o,lngLat:i.unproject(o),originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}}class rr extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,r){let n="touchend"===t?r.changedTouches:r.touches,o=c.touchPos(i.getCanvasContainer(),n),a=o.map(t=>i.unproject(t)),s=o.reduce((t,e,i,r)=>t.add(e.div(r.length)),new e.P(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:i.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class rn extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}}class ro{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new rn(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ri(t.type,this._map,t))}mouseup(t){this._map.fire(new ri(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new ri(t.type,this._map,t))}dblclick(t){return this._firePreventable(new ri(t.type,this._map,t))}mouseover(t){this._map.fire(new ri(t.type,this._map,t))}mouseout(t){this._map.fire(new ri(t.type,this._map,t))}touchstart(t){return this._firePreventable(new rr(t.type,this._map,t))}touchmove(t){this._map.fire(new rr(t.type,this._map,t))}touchend(t){this._map.fire(new rr(t.type,this._map,t))}touchcancel(t){this._map.fire(new rr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ra{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new ri(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new ri(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rs{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(e.P.convert(t),this._map.terrain)}}class rl{constructor(t,e){this._map=t,this._tr=new rs(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(c.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;let i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;let r=this._startPos;this._lastPos=i,this._box||(this._box=c.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));let n=Math.min(r.x,i.x),o=Math.max(r.x,i.x),a=Math.min(r.y,i.y),s=Math.max(r.y,i.y);c.setTransform(this._box,`translate(${n}px,${a}px)`),this._box.style.width=o-n+"px",this._box.style.height=s-a+"px"}mouseupWindow(t,i){if(!this._active||0!==t.button)return;let r=this._startPos,n=i;if(this.reset(),c.suppressClick(),r.x!==n.x||r.y!==n.y)return this._map.fire(new e.k("boxzoomend",{originalEvent:t})),{cameraAnimation:t=>t.fitScreenCoordinates(r,n,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(c.remove(this._box),this._box=null),c.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,i){return this._map.fire(new e.k(t,{originalEvent:i}))}}function rh(t,e){if(t.length!==e.length)throw Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);let i={};for(let r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}class ru{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){let i=new e.P(0,0);for(let e of t)i._add(e);return i.div(t.length)}(i),this.touches=rh(r,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;let r=rh(i,e);for(let t in this.touches){let e=r[t];(!e||e.dist(this.touches[t])>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){let t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class rc{constructor(t){this.singleTap=new ru(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){let r=this.singleTap.touchend(t,e,i);if(r){let e=t.timeStamp-this.lastTime<500,i=!this.lastTap||30>this.lastTap.dist(r);if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class rf{constructor(t){this._tr=new rs(t),this._zoomIn=new rc({numTouches:1,numTaps:2}),this._zoomOut=new rc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){let r=this._zoomIn.touchend(t,e,i),n=this._zoomOut.touchend(t,e,i),o=this._tr;return r?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(r)},{originalEvent:t})}):n?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(n)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rd{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){let e=this._moveFunction(...t);if(e.bearingDelta||e.pitchDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(t,e){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=e.length?e[0]:e,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,e){if(!this.isEnabled())return;let i=this._lastPoint;if(!i)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);let r=e.length?e[0]:e;return!this._moved&&r.dist(i)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=r,this._move(i,r))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&c.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let rp={0:1,2:2};class rm{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){let e=c.mouseButton(t);this._eventButton=e}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(t,e){let i=rp[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton)}isValidEndEvent(t){return c.mouseButton(t)===this._eventButton}}class rg{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return 1===t.targetTouches.length}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}let ry=t=>{t.mousedown=t.dragStart,t.mousemoveWindow=t.dragMove,t.mouseup=t.dragEnd,t.contextmenu=t=>{t.preventDefault()}},rv=({enable:t,clickTolerance:e,bearingDegreesPerPixelMoved:i=.8})=>new rd({clickTolerance:e,move:(t,e)=>({bearingDelta:(e.x-t.x)*i}),moveStateManager:new rm({checkCorrectEvent:t=>0===c.mouseButton(t)&&t.ctrlKey||2===c.mouseButton(t)}),enable:t,assignEvents:ry}),r_=({enable:t,clickTolerance:e,pitchDegreesPerPixelMoved:i=-.5})=>new rd({clickTolerance:e,move:(t,e)=>({pitchDelta:(e.y-t.y)*i}),moveStateManager:new rm({checkCorrectEvent:t=>0===c.mouseButton(t)&&t.ctrlKey||2===c.mouseButton(t)}),enable:t,assignEvents:ry});class rb{constructor(t,e){this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._active){if(!this._shouldBePrevented(i.length))return t.preventDefault(),this._calculateTransform(t,e,i);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&this._shouldBePrevented(i.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,i,r){r.length>0&&(this._active=!0);let n=rh(r,i),o=new e.P(0,0),a=new e.P(0,0),s=0;for(let t in n){let e=n[t],i=this._touches[t];i&&(o._add(e),a._add(e.sub(i)),s++,n[t]=e)}if(this._touches=n,this._shouldBePrevented(s)||!a.mag())return;let l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rx{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();let[r,n]=this._firstTwoTouches,o=rw(i,e,r),a=rw(i,e,n);if(!o||!a)return;let s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;let[r,n]=this._firstTwoTouches,o=rw(i,e,r),a=rw(i,e,n);o&&a||(this._active&&c.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function rw(t,e,i){for(let r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function rM(t,e){return Math.log(t/e)/Math.LN2}class rS extends rx{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){let i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(.1>Math.abs(rM(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:rM(this._distance,i),pinchAround:e}}}function rk(t,e){return 180*t.angleWith(e)/Math.PI}class rE extends rx{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e,i){let r=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rk(this._vector,r),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());let e=25/(Math.PI*this._minDiameter)*360;return Math.abs(rk(t,this._startVector))<e}}function rI(t){return Math.abs(t.y)>Math.abs(t.x)}class rP extends rx{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,i){super.touchstart(t,e,i),this._currentTouchCount=i.length}_start(t){this._lastPoints=t,rI(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:-((r.y+n.y)/2*.5)}):void 0}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;let r=t.mag()>=2,n=e.mag()>=2;if(!r&&!n)return;if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;let o=t.y>0==e.y>0;return rI(t)&&rI(e)&&o}}let rT={panStep:100,bearingStep:15,pitchStep:10};class rA{constructor(t){this._tr=new rs(t);let e=rT;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,r=0,n=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:a=>{let s=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:rC,zoom:e?Math.round(s.zoom)+e*(t.shiftKey?2:1):s.zoom,bearing:s.bearing+i*this._bearingStep,pitch:s.pitch+r*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:s.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rC(t){return t*(2-t)}let rL=4.000244140625;class rR{constructor(t,e){this._onTimeout=t=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},this._map=t,this._tr=new rs(t),this._triggerRenderFrame=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let e=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=u.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%rL==0?this._type="wheel":0!==e&&4>Math.abs(e)?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=200>Math.abs(r*e)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let i=c.mousePos(this._map.getCanvas(),t),r=this._tr;this._around=i.y>r.transform.height/2-r.transform.getHorizon()?e.N.convert(this._aroundCenter?r.center:r.unproject(i)):e.N.convert(r.center),this._aroundPoint=r.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let t=this._tr.transform;if(0!==this._delta){let e="wheel"===this._type&&Math.abs(this._delta)>rL?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==i&&(i=1/i);let r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let i="number"==typeof this._targetZoom?this._targetZoom:t.zoom,r=this._startZoom,n=this._easing,o,a=!1,s=u.now()-this._lastWheelEventTime;if("wheel"===this._type&&r&&n&&s){let t=Math.min(s/200,1),l=n(t);o=e.z.number(r,i,l),t<1?this._frameId||(this._frameId=!0):a=!0}else o=i,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.b9;if(this._prevEase){let t=this._prevEase,r=(u.now()-t.start)/t.duration,n=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01,a=Math.sqrt(.0729-o*o);i=e.b8(o,a,.25,1)}return this._prevEase={start:u.now(),duration:t,easing:i},i}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class rN{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class rz{constructor(t){this._tr=new rs(t),this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rO{constructor(){this._tap=new rc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,e,i){if(!this._swipePoint){if(this._tapTime){let r=e[0],n=t.timeStamp-this._tapTime<500,o=30>this._tapPoint.dist(r);n&&o?i.length>0&&(this._swipePoint=r,this._swipeTouch=i[0].identifier):this.reset()}else this._tap.touchstart(t,e,i)}}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;let r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){if(this._tapTime)this._swipePoint&&0===i.length&&this.reset();else{let r=this._tap.touchend(t,e,i);r&&(this._tapTime=t.timeStamp,this._tapPoint=r)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rD{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rB{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class rF{constructor(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class rj{constructor(t,e){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=t,this._options=e,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=c.create("div","maplibregl-cooperative-gesture-screen",t);let e=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(e=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let i=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),r=document.createElement("div");r.className="maplibregl-desktop-message",r.textContent=e,this._container.appendChild(r);let n=document.createElement("div");n.className="maplibregl-mobile-message",n.textContent=i,this._container.appendChild(n),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(c.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,i){this._enabled&&(this._map.fire(new e.k("cooperativegestureprevented",{gestureType:t,originalEvent:i})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let rq=t=>t.zoom||t.drag||t.pitch||t.rotate;class rV extends e.k{}function rU(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class rZ{constructor(t,e){this.handleWindowEvent=t=>{this.handleEvent(t,`${t.type}Window`)},this.handleEvent=(t,e)=>{if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;let i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},n={},o={},a=t.touches,s=a?this._getMapTouches(a):void 0,l=s?c.touchPos(this._map.getCanvas(),s):c.mousePos(this._map.getCanvas(),t);for(let{handlerName:a,handler:h,allowed:u}of this._handlers){let c;h.isEnabled()&&(this._blockedByActive(o,u,a)?h.reset():h[e||t.type]&&(c=h[e||t.type](t,l,s),this.mergeHandlerResult(r,n,c,a,i),c&&c.needsRenderFrame&&this._triggerRenderFrame()),(c||h.isActive())&&(o[a]=h))}let h={};for(let t in this._previousActiveHandlers)o[t]||(h[t]=i);this._previousActiveHandlers=o,(Object.keys(h).length||rU(r))&&(this._changes.push([r,n,h]),this._triggerRenderFrame()),(Object.keys(o).length||rU(r))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:u}=r;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new i9(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e);let i=this._el;for(let[t,e,r]of(this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[window,"blur",void 0]],this._listeners))c.addEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(let[t,e,i]of this._listeners)c.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){let e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new ro(e,t));let r=e.boxZoom=new rl(e,t);this._add("boxZoom",r),t.interactive&&t.boxZoom&&r.enable();let n=e.cooperativeGestures=new rj(e,t.cooperativeGestures);this._add("cooperativeGestures",n),t.cooperativeGestures&&n.enable();let o=new rf(e),a=new rz(e);e.doubleClickZoom=new rN(a,o),this._add("tapZoom",o),this._add("clickZoom",a),t.interactive&&t.doubleClickZoom&&e.doubleClickZoom.enable();let s=new rO;this._add("tapDragZoom",s);let l=e.touchPitch=new rP(e);this._add("touchPitch",l),t.interactive&&t.touchPitch&&e.touchPitch.enable(t.touchPitch);let h=rv(t),u=r_(t);e.dragRotate=new rB(t,h,u),this._add("mouseRotate",h,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]),t.interactive&&t.dragRotate&&e.dragRotate.enable();let f=(({enable:t,clickTolerance:e})=>new rd({clickTolerance:e,move:(t,e)=>({around:e,panDelta:e.sub(t)}),activateOnStart:!0,moveStateManager:new rm({checkCorrectEvent:t=>0===c.mouseButton(t)&&!t.ctrlKey}),enable:t,assignEvents:ry}))(t),d=new rb(t,e);e.dragPan=new rD(i,f,d),this._add("mousePan",f),this._add("touchPan",d,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&e.dragPan.enable(t.dragPan);let p=new rE,m=new rS;e.touchZoomRotate=new rF(i,m,p,s),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&e.touchZoomRotate.enable(t.touchZoomRotate);let g=e.scrollZoom=new rR(e,()=>this._triggerRenderFrame());this._add("scrollZoom",g,["mousePan"]),t.interactive&&t.scrollZoom&&e.scrollZoom.enable(t.scrollZoom);let y=e.keyboard=new rA(e);this._add("keyboard",y),t.interactive&&t.keyboard&&e.keyboard.enable(),this._add("blockableMapEvent",new ra(e))}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(let{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(let{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!rq(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,e,i){for(let r in t)if(r!==i&&(!e||0>e.indexOf(r)))return!0;return!1}_getMapTouches(t){let e=[];for(let i of t)this._el.contains(i.target)&&e.push(i);return e}mergeHandlerResult(t,i,r,n,o){if(!r)return;e.e(t,r);let a={handlerName:n,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(i.zoom=a),void 0!==r.panDelta&&(i.drag=a),void 0!==r.pitchDelta&&(i.pitch=a),void 0!==r.bearingDelta&&(i.rotate=a)}_applyChanges(){let t={},i={},r={};for(let[n,o,a]of this._changes)n.panDelta&&(t.panDelta=(t.panDelta||new e.P(0,0))._add(n.panDelta)),n.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(t.around=n.around),void 0!==n.pinchAround&&(t.pinchAround=n.pinchAround),n.noInertia&&(t.noInertia=n.noInertia),e.e(i,o),e.e(r,a);this._updateMapTransform(t,i,r),this._changes=[]}_updateMapTransform(t,e,i){let r=this._map,n=r._getTransformForUpdate(),o=r.terrain;if(!(rU(t)||o&&this._terrainMovement))return this._fireEvents(e,i,!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:h,around:u,pinchAround:c}=t;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;let f=n.pointLocation(a?u.sub(a):u);l&&(n.bearing+=l),h&&(n.pitch+=h),s&&(n.zoom+=s),o?!this._terrainMovement&&(e.drag||e.zoom)?(this._terrainMovement=!0,this._map._elevationFreeze=!0,n.setLocationAtPoint(f,u)):e.drag&&this._terrainMovement?n.center=n.pointLocation(n.centerPoint.sub(a)):n.setLocationAtPoint(f,u):n.setLocationAtPoint(f,u),r._applyUpdatedTransform(n),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)}_fireEvents(t,i,r){let n;let o=rq(this._eventsInProgress),a=rq(t),s={};for(let e in t){let{originalEvent:i}=t[e];this._eventsInProgress[e]||(s[`${e}start`]=i),this._eventsInProgress[e]=t[e]}for(let t in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(t,s[t]);for(let e in a&&this._fireEvent("move",a.originalEvent),t){let{originalEvent:i}=t[e];this._fireEvent(e,i)}let l={};for(let t in this._eventsInProgress){let{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],n=i[e]||r,l[`${t}end`]=n)}for(let t in l)this._fireEvent(t,l[t]);let h=rq(this._eventsInProgress),c=(o||a)&&!h;if(c&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let t=this._map._getTransformForUpdate();t.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(t)}if(r&&c){this._updatingCamera=!0;let t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;t&&(t.essential||!u.prefersReducedMotion)?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),t.freezeElevation=!0,this._map.easeTo(t,{originalEvent:n})):(this._map.fire(new e.k("moveend",{originalEvent:n})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,i){this._map.fire(new e.k(t,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new rV("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class rG extends e.E{constructor(t,e){super(),this._renderFrameCallback=()=>{let t=Math.min((u.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new e.N(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(t,i,r){return t=e.P.convert(t).mult(-1),this.panTo(this.transform.center,e.e({offset:t},i),r)}panTo(t,i,r){return this.easeTo(e.e({center:t},i),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(t,i,r){return this.easeTo(e.e({zoom:t},i),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(t,i,r){return this.easeTo(e.e({bearing:t},i),r)}resetNorth(t,i){return this.rotateTo(0,e.e({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.e({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(t,e){t=$.convert(t);let i=e&&e.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),i,e)}_cameraForBoxAndBearing(t,i,r,n){let o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=e.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){let t=n.padding;n.padding={top:t,bottom:t,right:t,left:t}}n.padding=e.e(o,n.padding);let a=this.transform,s=a.padding,l=new $(t,i),h=a.project(l.getNorthWest()),u=a.project(l.getNorthEast()),c=a.project(l.getSouthEast()),f=a.project(l.getSouthWest()),d=e.ba(-r),p=h.rotate(d),m=u.rotate(d),g=c.rotate(d),y=f.rotate(d),v=new e.P(Math.max(p.x,m.x,y.x,g.x),Math.max(p.y,m.y,y.y,g.y)),_=new e.P(Math.min(p.x,m.x,y.x,g.x),Math.min(p.y,m.y,y.y,g.y)),b=v.sub(_),x=(a.width-(s.left+s.right+n.padding.left+n.padding.right))/b.x,w=(a.height-(s.top+s.bottom+n.padding.top+n.padding.bottom))/b.y;if(w<0||x<0)return void e.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let M=Math.min(a.scaleZoom(a.scale*Math.min(x,w)),n.maxZoom),S=e.P.convert(n.offset),k=new e.P((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(e.ba(r)),E=S.add(k).mult(a.scale/a.zoomScale(M));return{center:a.unproject(h.add(c).div(2).sub(E)),zoom:M,bearing:r}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}fitScreenCoordinates(t,i,r,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.P.convert(t)),this.transform.pointLocation(e.P.convert(i)),r,n),n,o)}_fitInternal(t,i,r){return t?(delete(i=e.e(t,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this}jumpTo(t,i){this.stop();let r=this._getTransformForUpdate(),n=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.N.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this._applyUpdatedTransform(r),this.fire(new e.k("movestart",i)).fire(new e.k("move",i)),n&&this.fire(new e.k("zoomstart",i)).fire(new e.k("zoom",i)).fire(new e.k("zoomend",i)),o&&this.fire(new e.k("rotatestart",i)).fire(new e.k("rotate",i)).fire(new e.k("rotateend",i)),a&&this.fire(new e.k("pitchstart",i)).fire(new e.k("pitch",i)).fire(new e.k("pitchend",i)),this.fire(new e.k("moveend",i))}calculateCameraOptionsFromTo(t,i,r,n=0){let o=e.Z.fromLngLat(t,i),a=e.Z.fromLngLat(r,n),s=a.x-o.x,l=a.y-o.y,h=a.z-o.z,u=Math.hypot(s,l,h);if(0===u)throw Error("Can't calculate camera options with same From and To");let c=Math.hypot(s,l),f=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),d=180*Math.atan2(s,-l)/Math.PI,p=180*Math.acos(c/u)/Math.PI;return p=h<0?90-p:90+p,{center:a.toLngLat(),zoom:f,pitch:p,bearing:d}}easeTo(t,i){var r;let n,o;this._stop(!1,t.easeId),(!1===(t=e.e({offset:[0,0],duration:500,easing:e.b9},t)).animate||!t.essential&&u.prefersReducedMotion)&&(t.duration=0);let a=this._getTransformForUpdate(),s=a.zoom,l=a.bearing,h=a.pitch,c=a.padding,f="bearing"in t?this._normalizeBearing(t.bearing,l):l,d="pitch"in t?+t.pitch:h,p="padding"in t?t.padding:a.padding,m=e.P.convert(t.offset),g=a.centerPoint.add(m),y=a.pointLocation(g),{center:v,zoom:_}=a.getConstrained(e.N.convert(t.center||y),null!==(r=t.zoom)&&void 0!==r?r:s);this._normalizeCenter(v,a);let b=a.project(y),x=a.project(v).sub(b),w=a.zoomScale(_-s);t.around&&(n=e.N.convert(t.around),o=a.locationPoint(n));let M={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||_!==s,this._rotating=this._rotating||l!==f,this._pitching=this._pitching||d!==h,this._padding=!a.isPaddingEqual(p),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,M),this.terrain&&this._prepareElevation(v),this._ease(r=>{if(this._zooming&&(a.zoom=e.z.number(s,_,r)),this._rotating&&(a.bearing=e.z.number(l,f,r)),this._pitching&&(a.pitch=e.z.number(h,d,r)),this._padding&&(a.interpolatePadding(c,p,r),g=a.centerPoint.add(m)),this.terrain&&!t.freezeElevation&&this._updateElevation(r),n)a.setLocationAtPoint(n,o);else{let t=a.zoomScale(a.zoom-s),e=Math.pow(_>s?Math.min(2,w):Math.max(.5,w),1-r),i=a.unproject(b.add(x.mult(r*e)).mult(t));a.setLocationAtPoint(a.renderWorldCopies?i.wrap():i,g)}this._applyUpdatedTransform(a),this._fireMoveEvents(i)},e=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(i,e)},t),this}_prepareEase(t,i,r={}){this._moving=!0,i||r.moving||this.fire(new e.k("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.k("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.k("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let i=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&i!==this._elevationTarget){let e=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(e-(i-(e*t+this._elevationStart))/(1-t)),this._elevationTarget=i}this.transform.elevation=e.z.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){let e=t.getCameraPosition(),i=this.terrain.getElevationForLngLatZoom(e.lngLat,t.zoom);if(e.altitude<i){let r=this.calculateCameraOptionsFromTo(e.lngLat,i,t.center,t.elevation);return{pitch:r.pitch,zoom:r.zoom}}return{}}_applyUpdatedTransform(t){let e=[];if(this.terrain&&e.push(t=>this._elevateCameraIfInsideTerrain(t)),this.transformCameraUpdate&&e.push(t=>this.transformCameraUpdate(t)),!e.length)return;let i=t.clone();for(let t of e){let e=i.clone(),{center:r,zoom:n,pitch:o,bearing:a,elevation:s}=t(e);r&&(e.center=r),void 0!==n&&(e.zoom=n),void 0!==o&&(e.pitch=o),void 0!==a&&(e.bearing=a),void 0!==s&&(e.elevation=s),i.apply(e)}this.transform.apply(i)}_fireMoveEvents(t){this.fire(new e.k("move",t)),this._zooming&&this.fire(new e.k("zoom",t)),this._rotating&&this.fire(new e.k("rotate",t)),this._pitching&&this.fire(new e.k("pitch",t))}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId;let r=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.k("zoomend",t)),n&&this.fire(new e.k("rotateend",t)),o&&this.fire(new e.k("pitchend",t)),this.fire(new e.k("moveend",t))}flyTo(t,i){var r;if(!t.essential&&u.prefersReducedMotion){let r=e.M(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),t=e.e({offset:[0,0],speed:1.2,curve:1.42,easing:e.b9},t);let n=this._getTransformForUpdate(),o=n.zoom,a=n.bearing,s=n.pitch,l=n.padding,h="bearing"in t?this._normalizeBearing(t.bearing,a):a,c="pitch"in t?+t.pitch:s,f="padding"in t?t.padding:n.padding,d=e.P.convert(t.offset),p=n.centerPoint.add(d),m=n.pointLocation(p),{center:g,zoom:y}=n.getConstrained(e.N.convert(t.center||m),null!==(r=t.zoom)&&void 0!==r?r:o);this._normalizeCenter(g,n);let v=n.zoomScale(y-o),_=n.project(m),b=n.project(g).sub(_),x=t.curve,w=Math.max(n.width,n.height),M=w/v,S=b.mag();if("minZoom"in t){let i=e.ad(Math.min(t.minZoom,o,y),n.minZoom,n.maxZoom);x=Math.sqrt(w/n.zoomScale(i-o)/S*2)}let k=x*x;function E(t){let e=(M*M-w*w+(t?-1:1)*k*k*S*S)/(2*(t?M:w)*k*S);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function P(t){return(Math.exp(t)+Math.exp(-t))/2}let T=E(!1),A=function(t){return P(T)/P(T+x*t)},C=function(t){var e;return w*((P(T)*(I(e=T+x*t)/P(e))-I(T))/k)/S},R=(E(!0)-T)/x;if(1e-6>Math.abs(S)||!isFinite(R)){if(1e-6>Math.abs(w-M))return this.easeTo(t,i);let e=M<w?-1:1;R=Math.abs(Math.log(M/w))/x,C=()=>0,A=t=>Math.exp(e*x*t)}return t.duration="duration"in t?+t.duration:1e3*R/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=a!==h,this._pitching=c!==s,this._padding=!n.isPaddingEqual(f),this._prepareEase(i,!1),this.terrain&&this._prepareElevation(g),this._ease(r=>{let u=r*R,m=1/A(u);n.zoom=1===r?y:o+n.scaleZoom(m),this._rotating&&(n.bearing=e.z.number(a,h,r)),this._pitching&&(n.pitch=e.z.number(s,c,r)),this._padding&&(n.interpolatePadding(l,f,r),p=n.centerPoint.add(d)),this.terrain&&!t.freezeElevation&&this._updateElevation(r);let v=1===r?g:n.unproject(_.add(b.mult(C(u))).mult(m));n.setLocationAtPoint(n.renderWorldCopies?v.wrap():v,p),this._applyUpdatedTransform(n),this._fireMoveEvents(i)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(i)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){var i;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}return t||null===(i=this.handlers)||void 0===i||i.stop(!1),this}_ease(t,e,i){!1===i.animate||0===i.duration?(t(1),e()):(this._easeStart=u.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,i){let r=Math.abs((t=e.b3(t,-180,180))-i);return Math.abs(t-360-i)<r&&(t-=360),Math.abs(t+360-i)<r&&(t+=360),t}_normalizeCenter(t,e){if(!e.renderWorldCopies||e.lngRange)return;let i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(e.N.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}let rH={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class rW{constructor(t=rH){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=t=>{t&&("metadata"===t.sourceDataType||"visibility"===t.sourceDataType||"style"===t.dataType||"terrain"===t.type)&&this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=c.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=c.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=c.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){c.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){let i=this._map._getUIString(`AttributionControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(t=>"string"!=typeof t?"":t)):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){let t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}let e=this._map.style.sourceCaches;for(let i in e){let r=e[i];if(r.used||r.usedForTerrain){let e=r.getSource();e.attribution&&0>t.indexOf(e.attribution)&&t.push(e.attribution)}}(t=t.filter(t=>String(t).trim())).sort((t,e)=>t.length-e.length);let i=(t=t.filter((e,i)=>{for(let r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class rX{constructor(t={}){this._updateCompact=()=>{let t=this._container.children;if(t.length){let e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact"):e.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=c.create("div","maplibregl-ctrl");let e=c.create("a","maplibregl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){c.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class r${constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){let e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){let e=this._currentlyRunning;for(let i of e?this._queue.concat(e):this._queue)if(i.id===t)return void(i.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw Error("Attempting to run(), but is already running.");let e=this._currentlyRunning=this._queue;for(let i of(this._queue=[],e))if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var rY=e.Y([{name:"a_pos3d",type:"Int16",components:3}]);class rK extends e.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,i){this.sourceCache.update(t,i),this._renderableTilesKeys=[];let r={};for(let n of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i}))r[n.key]=!0,this._renderableTilesKeys.push(n.key),this._tiles[n.key]||(n.posMatrix=new Float64Array(16),e.aQ(n.posMatrix,0,e.X,0,e.X,0,1),this._tiles[n.key]=new tc(n,this.tileSize));for(let t in this._tiles)r[t]||delete this._tiles[t]}freeRtt(t){for(let e in this._tiles){let i=this._tiles[e];(!t||i.tileID.equals(t)||i.tileID.isChildOf(t)||t.isChildOf(i.tileID))&&(i.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){let i={};for(let r of this._renderableTilesKeys){let n=this._tiles[r].tileID;if(n.canonical.equals(t.canonical)){let n=t.clone();n.posMatrix=new Float64Array(16),e.aQ(n.posMatrix,0,e.X,0,e.X,0,1),i[r]=n}else if(n.canonical.isChildOf(t.canonical)){let o=t.clone();o.posMatrix=new Float64Array(16);let a=n.canonical.z-t.canonical.z,s=n.canonical.x-(n.canonical.x>>a<<a),l=n.canonical.y-(n.canonical.y>>a<<a),h=e.X>>a;e.aQ(o.posMatrix,0,h,0,h,0,1),e.J(o.posMatrix,o.posMatrix,[-s*h,-l*h,0]),i[r]=o}else if(t.canonical.isChildOf(n.canonical)){let o=t.clone();o.posMatrix=new Float64Array(16);let a=t.canonical.z-n.canonical.z,s=t.canonical.x-(t.canonical.x>>a<<a),l=t.canonical.y-(t.canonical.y>>a<<a),h=e.X>>a;e.aQ(o.posMatrix,0,e.X,0,e.X,0,1),e.J(o.posMatrix,o.posMatrix,[s*h,l*h,0]),e.K(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),i[r]=o}}return i}getSourceTile(t,e){let i=this.sourceCache._source,r=t.overscaledZ-this.deltaZoom;if(r>i.maxzoom&&(r=i.maxzoom),r<i.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(r).key);let n=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!n||!n.dem)&&e)for(;r>=i.minzoom&&(!n||!n.dem);)n=this.sourceCache.getTileByID(t.scaledTo(r--).key);return n}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(e=>e.timeAdded>=t)}}class rJ{constructor(t,e,i){this.painter=t,this.sourceCache=new rK(e),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,i,r,n=e.X){var o;if(!(i>=0&&i<n&&r>=0&&r<n))return 0;let a=this.getTerrainData(t),s=null===(o=a.tile)||void 0===o?void 0:o.dem;if(!s)return 0;let l=function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}([],[i/n*e.X,r/n*e.X],a.u_terrain_matrix),h=[l[0]*s.dim,l[1]*s.dim],u=Math.floor(h[0]),c=Math.floor(h[1]),f=h[0]-u,d=h[1]-c;return s.get(u,c)*(1-f)*(1-d)+s.get(u+1,c)*f*(1-d)+s.get(u,c+1)*(1-f)*d+s.get(u+1,c+1)*f*d}getElevationForLngLatZoom(t,i){let{tileID:r,mercatorX:n,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(t,i);return this.getElevation(r,n%e.X,o%e.X,e.X)}getElevation(t,i,r,n=e.X){return this.getDEMElevation(t,i,r,n)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){let t=this.painter.context,i=new e.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new E(t,i,t.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new E(t,new e.R({width:1,height:1}),t.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=e.ao([])}let i=this.sourceCache.getSourceTile(t,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){let t=this.painter.context;i.demTexture=this.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new E(t,i.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),i.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}let r=i&&i+i.tileID.key+t.key;if(r&&!this._demMatrixCache[r]){let r=this.sourceCache.sourceCache._source.maxzoom,n=t.canonical.z-i.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=r?n=t.canonical.z-r:e.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let o=t.canonical.x-(t.canonical.x>>n<<n),a=t.canonical.y-(t.canonical.y>>n<<n),s=e.bb(new Float64Array(16),[1/(e.X<<n),1/(e.X<<n),0]);e.J(s,s,[o*e.X,a*e.X,0]),this._demMatrixCache[t.key]={matrix:s,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getFramebuffer(t){let e=this.painter,i=e.width/devicePixelRatio,r=e.height/devicePixelRatio;return this._fbo&&(this._fbo.width!==i||this._fbo.height!==r)&&(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new E(e.context,{width:i,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new E(e.context,{width:i,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(i,r,!0,!1),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,i,r))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,e=0;t<this._coordsTextureSize;t++)for(let r=0;r<this._coordsTextureSize;r++,e+=4)i[e+0]=255&r,i[e+1]=255&t,i[e+2]=r>>8<<4|t>>8,i[e+3]=0;let r=new E(t,new e.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),t.gl.RGBA,{premultiply:!1});return r.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);let i=new Uint8Array(4),r=this.painter.context,n=r.gl,o=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),a=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),s=Math.round(this.painter.height/devicePixelRatio);r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),n.readPixels(o,s-a-1,1,1,n.RGBA,n.UNSIGNED_BYTE,i),r.bindFramebuffer.set(null);let l=i[0]+(i[2]>>4<<8),h=i[1]+((15&i[2])<<8),u=this.coordsIndex[255-i[3]],c=u&&this.sourceCache.getTileByID(u);if(!c)return null;let f=this._coordsTextureSize,d=(1<<c.tileID.canonical.z)*f;return new e.Z((c.tileID.canonical.x*f+l)/d+c.tileID.wrap,(c.tileID.canonical.y*f+h)/d,this.getElevation(c.tileID,l,h,f))}depthAtPoint(t){let e=new Uint8Array(4),i=this.painter.context,r=i.gl;return i.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),r.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,r.RGBA,r.UNSIGNED_BYTE,e),i.bindFramebuffer.set(null),(e[0]/16777216+e[1]/65536+e[2]/256+e[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let t=this.painter.context,i=new e.bc,r=new e.aY,n=this.meshSize,o=e.X/n,a=n*n;for(let t=0;t<=n;t++)for(let e=0;e<=n;e++)i.emplaceBack(e*o,t*o,0);for(let t=0;t<a;t+=n+1)for(let e=0;e<n;e++)r.emplaceBack(e+t,n+e+t+1,n+e+t+2),r.emplaceBack(e+t,n+e+t+2,e+t+1);let s=i.length,l=s+2*(n+1);for(let t of[0,1])for(let r=0;r<=n;r++)for(let n of[0,1])i.emplaceBack(r*o,t*e.X,n);for(let t=0;t<2*n;t+=2)r.emplaceBack(l+t,l+t+1,l+t+3),r.emplaceBack(l+t,l+t+3,l+t+2),r.emplaceBack(s+t,s+t+3,s+t+1),r.emplaceBack(s+t,s+t+2,s+t+3);let h=i.length,u=h+2*(n+1);for(let t of[0,1])for(let r=0;r<=n;r++)for(let n of[0,1])i.emplaceBack(t*e.X,r*o,n);for(let t=0;t<2*n;t+=2)r.emplaceBack(h+t,h+t+1,h+t+3),r.emplaceBack(h+t,h+t+3,h+t+2),r.emplaceBack(u+t,u+t+3,u+t+1),r.emplaceBack(u+t,u+t+2,u+t+3);return this._mesh=new i$(t.createVertexBuffer(i,rY.members),t.createIndexBuffer(r),e.a0.simpleSegment(0,0,i.length,r.length)),this._mesh}getMeshFrameDelta(t){return 2*Math.PI*e.bd/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,e){var i;let{tileID:r}=this._getOverscaledTileIDFromLngLatZoom(t,e);return null!==(i=this.getMinMaxElevation(r).minElevation)&&void 0!==i?i:0}getMinMaxElevation(t){let e=this.getTerrainData(t).tile,i={minElevation:null,maxElevation:null};return e&&e.dem&&(i.minElevation=e.dem.min*this.exaggeration,i.maxElevation=e.dem.max*this.exaggeration),i}_getOverscaledTileIDFromLngLatZoom(t,i){let r=e.Z.fromLngLat(t.wrap()),n=(1<<i)*e.X,o=r.x*n,a=r.y*n,s=Math.floor(o/e.X),l=Math.floor(a/e.X);return{tileID:new e.S(i,0,i,s,l),mercatorX:o,mercatorY:a}}}class rQ{constructor(t,e,i){this._context=t,this._size=e,this._tileSize=i,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){let e=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),i=new E(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return i.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),e.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),e.colorAttachment.set(i.texture),{id:t,fbo:e,texture:i,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(e=>t.id!==e),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(let t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw Error("No free RenderPool available, call freeAllObjects() required!");let t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(let t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(t=>!t.inUse)}}let r0={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class r1{constructor(t,e){this.painter=t,this.terrain=e,this.pool=new rQ(t.context,30,e.sourceCache.tileSize*e.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,e){for(let i in this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(i=>!t._layers[i].isHidden(e)),this._coordsDescendingInv={},t.sourceCaches)for(let e of(this._coordsDescendingInv[i]={},t.sourceCaches[i].getVisibleCoordinates())){let t=this.terrain.sourceCache.getTerrainCoords(e);for(let e in t)this._coordsDescendingInv[i][e]||(this._coordsDescendingInv[i][e]=[]),this._coordsDescendingInv[i][e].push(t[e])}for(let e of(this._coordsDescendingInvStr={},t._order)){let i=t._layers[e],r=i.source;if(r0[i.type]&&!this._coordsDescendingInvStr[r])for(let t in this._coordsDescendingInvStr[r]={},this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][t]=this._coordsDescendingInv[r][t].map(t=>t.key).sort().join()}for(let t of this._renderableTiles)for(let e in this._coordsDescendingInvStr){let i=this._coordsDescendingInvStr[e][t.tileID.key];i&&i!==t.rttCoords[e]&&(t.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;let i=t.type,r=this.painter,n=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(r0[i]&&(this._prevType&&r0[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(t.id),!n))return!0;if(r0[this._prevType]||r0[i]&&n){this._prevType=i;let t=this._stacks.length-1,n=this._stacks[t]||[];for(let i of this._renderableTiles){if(this.pool.isFull()&&(iX(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(i),i.rtt[t]){let e=this.pool.getObjectForId(i.rtt[t].id);if(e.stamp===i.rtt[t].stamp){this.pool.useObject(e);continue}}let o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),i.rtt[t]={id:o.id,stamp:o.stamp},r.context.bindFramebuffer.set(o.fbo.framebuffer),r.context.clear({color:e.aN.transparent,stencil:0}),r.currentStencilSource=void 0;for(let t=0;t<n.length;t++){let e=r.style._layers[n[t]],a=e.source?this._coordsDescendingInv[e.source][i.tileID.key]:[i.tileID];r.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),r._renderTileClippingMasks(e,a),r.renderLayer(r,r.style.sourceCaches[e.source],e,a),e.source&&(i.rttCoords[e.source]=this._coordsDescendingInvStr[e.source][i.tileID.key])}}return iX(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),r0[i]}return!1}}let r2={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},r6=h,r3={hash:!1,interactive:!0,bearingSnap:7,attributionControl:rH,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:e.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},r8=t=>{t.touchstart=t.dragStart,t.touchmoveWindow=t.dragMove,t.touchend=t.dragEnd},r4={showCompass:!0,showZoom:!0,visualizePitch:!1};class r5{constructor(t,i,r=!1){this.mousedown=t=>{this.startMouse(e.e({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),c.mousePos(this.element,t)),c.addEventListener(window,"mousemove",this.mousemove),c.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=t=>{this.moveMouse(t,c.mousePos(this.element,t))},this.mouseup=t=>{this.mouseRotate.dragEnd(t),this.mousePitch&&this.mousePitch.dragEnd(t),this.offTemp()},this.touchstart=t=>{1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=c.touchPos(this.element,t.targetTouches)[0],this.startTouch(t,this._startPos),c.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),c.addEventListener(window,"touchend",this.touchend))},this.touchmove=t=>{1!==t.targetTouches.length?this.reset():(this._lastPos=c.touchPos(this.element,t.targetTouches)[0],this.moveTouch(t,this._lastPos))},this.touchend=t=>{0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let n=t.dragRotate._mouseRotate.getClickTolerance(),o=t.dragRotate._mousePitch.getClickTolerance();this.element=i,this.mouseRotate=rv({clickTolerance:n,enable:!0}),this.touchRotate=(({enable:t,clickTolerance:e,bearingDegreesPerPixelMoved:i=.8})=>new rd({clickTolerance:e,move:(t,e)=>({bearingDelta:(e.x-t.x)*i}),moveStateManager:new rg,enable:t,assignEvents:r8}))({clickTolerance:n,enable:!0}),this.map=t,r&&(this.mousePitch=r_({clickTolerance:o,enable:!0}),this.touchPitch=(({enable:t,clickTolerance:e,pitchDegreesPerPixelMoved:i=-.5})=>new rd({clickTolerance:e,move:(t,e)=>({pitchDelta:(e.y-t.y)*i}),moveStateManager:new rg,enable:t,assignEvents:r8}))({clickTolerance:o,enable:!0})),c.addEventListener(i,"mousedown",this.mousedown),c.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),c.addEventListener(i,"touchcancel",this.reset)}startMouse(t,e){this.mouseRotate.dragStart(t,e),this.mousePitch&&this.mousePitch.dragStart(t,e),c.disableDrag()}startTouch(t,e){this.touchRotate.dragStart(t,e),this.touchPitch&&this.touchPitch.dragStart(t,e),c.disableDrag()}moveMouse(t,e){let i=this.map,{bearingDelta:r}=this.mouseRotate.dragMove(t,e)||{};if(r&&i.setBearing(i.getBearing()+r),this.mousePitch){let{pitchDelta:r}=this.mousePitch.dragMove(t,e)||{};r&&i.setPitch(i.getPitch()+r)}}moveTouch(t,e){let i=this.map,{bearingDelta:r}=this.touchRotate.dragMove(t,e)||{};if(r&&i.setBearing(i.getBearing()+r),this.touchPitch){let{pitchDelta:r}=this.touchPitch.dragMove(t,e)||{};r&&i.setPitch(i.getPitch()+r)}}off(){let t=this.element;c.removeEventListener(t,"mousedown",this.mousedown),c.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),c.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),c.removeEventListener(window,"touchend",this.touchend),c.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){c.enableDrag(),c.removeEventListener(window,"mousemove",this.mousemove),c.removeEventListener(window,"mouseup",this.mouseup),c.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),c.removeEventListener(window,"touchend",this.touchend)}}function r7(t,i,r){let n=new e.N(t.lng,t.lat);if(t=new e.N(t.lng,t.lat),i){let n=new e.N(t.lng-360,t.lat),o=new e.N(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(i);r.locationPoint(n).distSqr(i)<a?t=n:r.locationPoint(o).distSqr(i)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){let e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t.lng!==n.lng&&r.locationPoint(t).y>r.height/2-r.getHorizon()?t:n}let r9={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nt(t,e,i){let r=t.classList;for(let t in r9)r.remove(`maplibregl-${i}-anchor-${t}`);r.add(`maplibregl-${i}-anchor-${e}`)}class ne extends e.E{constructor(t){if(super(),this._onKeyPress=t=>{let e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},this._onMapClick=t=>{let e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},this._update=t=>{var e;if(!this._map)return;let i=this._map.loaded()&&!this._map.isMoving();"terrain"!==(null==t?void 0:t.type)&&("render"!==(null==t?void 0:t.type)||i)||this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?r7(this._lngLat,this._flatPos,this._map.transform):null===(e=this._lngLat)||void 0===e?void 0:e.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let r="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?r=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(r=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||t&&"moveend"!==t.type||(this._pos=this._pos.round()),c.setTransform(this._element,`${r9[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${r}`),u.frameAsync(new AbortController).then(()=>{this._updateOpacity(t&&"moveend"===t.type)}).catch(()=>{})},this._onMove=t=>{if(!this._isDragging){let e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.k("dragstart"))),this.fire(new e.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.k("dragend")),this._state="inactive"},this._addDragHandler=t=>{this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==t?void 0:t.opacity,null==t?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=e.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=c.create("div");let i=c.createNS("http://www.w3.org/2000/svg","svg"),r=41,n=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${r}px`),i.setAttributeNS(null,"width",`${n}px`),i.setAttributeNS(null,"viewBox",`0 0 ${n} ${r}`);let o=c.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");let a=c.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");let s=c.createNS("http://www.w3.org/2000/svg","g");for(let t of(s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000"),[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}])){let e=c.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),s.appendChild(e)}let l=c.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill",this._color);let h=c.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),l.appendChild(h);let u=c.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"opacity","0.25"),u.setAttributeNS(null,"fill","#000000");let f=c.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),u.appendChild(f);let d=c.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");let p=c.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(8.0, 8.0)");let m=c.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#000000"),m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962");let g=c.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),p.appendChild(m),p.appendChild(g),a.appendChild(s),a.appendChild(l),a.appendChild(u),a.appendChild(d),a.appendChild(p),i.appendChild(a),i.setAttributeNS(null,"height",r*this._scale+"px"),i.setAttributeNS(null,"width",n*this._scale+"px"),this._element.appendChild(i),this._offset=e.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",t=>{t.preventDefault()}),this._element.addEventListener("mousedown",t=>{t.preventDefault()}),nt(this._element,this._anchor,"marker"),t&&t.className)for(let e of t.className.split(" "))this._element.classList.add(e);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),c.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){let e=38.1,i=13.5,r=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-i+r)],"bottom-right":[-r,-1*(e-i+r)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){let t=this._popup;return this._element.style.opacity===this._opacityWhenCovered||t&&(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map))),this}_updateOpacity(t=!1){var i,r;if(!(null===(i=this._map)||void 0===i?void 0:i.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let n=this._map,o=n.terrain.depthAtPoint(this._pos),a=n.terrain.getElevationForLngLatZoom(this._lngLat,n.transform.tileZoom);if(n.transform.lngLatToCameraDepth(this._lngLat,a)-o<.006)return void(this._element.style.opacity=this._opacity);let s=-this._offset.y/n.transform._pixelPerMeter,l=Math.sin(n.getPitch()*Math.PI/180)*s,h=n.terrain.depthAtPoint(new e.P(this._pos.x,this._pos.y-this._offset.y)),u=n.transform.lngLatToCameraDepth(this._lngLat,a+l)-h>.006;(null===(r=this._popup)||void 0===r?void 0:r.isOpen())&&u&&this._popup.remove(),this._element.style.opacity=u?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=e.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,e){return void 0===t&&void 0===e&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==t&&(this._opacity=t),void 0!==e&&(this._opacityWhenCovered=e),this._map&&this._updateOpacity(!0),this}}let ni={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},nr=0,nn=!1,no={maxWidth:100,unit:"metric"};function na(t,e,i){let r=i&&i.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),a=t.unproject([r,n]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){let i=3.2808*s;i>5280?ns(e,r,i/5280,t._getUIString("ScaleControl.Miles")):ns(e,r,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?ns(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?ns(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):ns(e,r,s,t._getUIString("ScaleControl.Meters"))}function ns(t,e,i,r){let n=function(t){let e=Math.pow(10,`${Math.floor(t)}`.length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){let e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i))}(i);t.style.width=n/i*e+"px",t.innerHTML=`${n}&nbsp;${r}`}let nl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},nh="a[href], [tabindex]:not([tabindex='-1']), [contenteditable]:not([contenteditable='false']), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])";function nu(t){if(t){if("number"==typeof t){let i=Math.round(Math.abs(t)/Math.SQRT2);return{center:new e.P(0,0),top:new e.P(0,t),"top-left":new e.P(i,i),"top-right":new e.P(-i,i),bottom:new e.P(0,-t),"bottom-left":new e.P(i,-i),"bottom-right":new e.P(-i,-i),left:new e.P(t,0),right:new e.P(-t,0)}}if(t instanceof e.P||Array.isArray(t)){let i=e.P.convert(t);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.P.convert(t.center||[0,0]),top:e.P.convert(t.top||[0,0]),"top-left":e.P.convert(t["top-left"]||[0,0]),"top-right":e.P.convert(t["top-right"]||[0,0]),bottom:e.P.convert(t.bottom||[0,0]),"bottom-left":e.P.convert(t["bottom-left"]||[0,0]),"bottom-right":e.P.convert(t["bottom-right"]||[0,0]),left:e.P.convert(t.left||[0,0]),right:e.P.convert(t.right||[0,0])}}return nu(new e.P(0,0))}let nc=h;t.AJAXError=e.bg,t.Evented=e.E,t.LngLat=e.N,t.MercatorCoordinate=e.Z,t.Point=e.P,t.addProtocol=e.bh,t.config=e.a,t.removeProtocol=e.bi,t.AttributionControl=rW,t.BoxZoomHandler=rl,t.CanvasSource=tn,t.CooperativeGesturesHandler=rj,t.DoubleClickZoomHandler=rN,t.DragPanHandler=rD,t.DragRotateHandler=rB,t.EdgeInsets=iQ,t.FullscreenControl=class extends e.E{constructor(t={}){super(),this._onFullscreenChange=()=>{var t;let e=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.fullscreenElement;)e=e.shadowRoot.fullscreenElement;e===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,t&&t.container&&(t.container instanceof HTMLElement?this._container=t.container:e.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){c.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let t=this._fullscreenButton=c.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);c.create("span","maplibregl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new e.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new e.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},t.GeoJSONSource=tt,t.GeolocateControl=class extends e.E{constructor(t){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new e.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{let i=new e.N(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=this._map.getBearing(),o=e.e({bearing:n},this.options.fitBoundsOptions),a=$.fromLngLat(i,r);this._map.fitBounds(a,o,{geolocateSource:!0})},this._updateMarker=t=>{if(t){let i=new e.N(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation){if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&nn)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new e.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=c.create("button","maplibregl-ctrl-geolocate",this._container),c.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(!1===t){e.w("Geolocation support is not available so the GeolocateControl will be disabled.");let t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{let t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=c.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ne({element:this._dotElement}),this._circleElement=c.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ne({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new e.k("trackuserlocationend")),this.fire(new e.k("userlocationlostfocus")))})}},this.options=e.e({},ni,t)}onAdd(t){return this._map=t,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return e._(this,arguments,void 0,function*(t=!1){if(void 0!==l&&!t)return l;if(void 0===window.navigator.permissions)return l=!!window.navigator.geolocation;try{let t=yield window.navigator.permissions.query({name:"geolocation"});l="denied"!==t.state}catch(t){l=!!window.navigator.geolocation}return l})})().then(t=>this._finishSetupUI(t)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),c.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,nr=0,nn=!1}_isOutOfMapMaxBounds(t){let e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let t=this._map.getBounds(),e=t.getSouthEast(),i=t.getNorthEast(),r=e.distanceTo(i),n=Math.ceil(this._accuracy/(r/this._map._container.clientHeight)*2);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}trigger(){if(!this._setup)return e.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":nr--,nn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new e.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.k("trackuserlocationstart")),this.fire(new e.k("userlocationfocus"));break;default:throw Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++nr>1?(t={maximumAge:6e5,timeout:0},nn=!0):(t=this.options.positionOptions,nn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},t.Hash=i6,t.ImageSource=ti,t.KeyboardHandler=rA,t.LngLatBounds=$,t.LogoControl=rX,t.Map=class extends rG{constructor(t){e.be.mark(e.bf.create);let i=Object.assign(Object.assign({},r3),t);if(null!=i.minZoom&&null!=i.maxZoom&&i.minZoom>i.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=i.minPitch&&null!=i.maxPitch&&i.minPitch>i.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=i.minPitch&&i.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=i.maxPitch&&i.maxPitch>85)throw Error("maxPitch must be less than or equal to 85");if(super(new i1(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new r$,this._controls=[],this._mapId=e.a4(),this._contextLost=t=>{t.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new e.k("webglcontextlost",{originalEvent:t}))},this._contextRestored=t=>{this._setupPainter(),this.resize(),this._update(),this.fire(new e.k("webglcontextrestored",{originalEvent:t}))},this._onMapScroll=t=>{if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===i.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===i.preserveDrawingBuffer,this._antialias=!0===i.antialias,this._trackResize=!0===i.trackResize,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=!0===i.refreshExpiredTiles,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=!0===i.crossSourceCollisions,this._collectResourceTiming=!0===i.collectResourceTiming,this._locale=Object.assign(Object.assign({},r2),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===i.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=b.addThrottleControl(()=>this.isMoving()),this._requestManager=new v(i.transformRequest),"string"==typeof i.container){if(this._container=document.getElementById(i.container),!this._container)throw Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let t=!1,e=i2(t=>{this._trackResize&&!this._removed&&this.resize(t)._update()},50);this._resizeObserver=new ResizeObserver(i=>{t?e(i):t=!0}),this._resizeObserver.observe(this._container)}this.handlers=new rZ(this,i),this._hash=i.hash&&new i6("string"==typeof i.hash&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,e.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new rW("boolean"==typeof i.attributionControl?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new rX,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new e.k(`${t.dataType}data`,t))}),this.on("dataloading",t=>{this.fire(new e.k(`${t.dataType}dataloading`,t))}),this.on("dataabort",t=>{this.fire(new e.k("sourcedataabort",t))})}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.j(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let r=t.onAdd(this);this._controls.push(t);let n=this._controlPositions[i];return -1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.j(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,i,r){return null==r&&this.terrain&&(r=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(t,e,i,r)}resize(t){var i;let r=this._containerDimensions(),n=r[0],o=r[1],a=this._getClampedPixelRatio(n,o);if(this._resizeCanvas(n,o,a),this.painter.resize(n,o,a),this.painter.overLimit()){let t=this.painter.context.gl;this._maxCanvasSize=[t.drawingBufferWidth,t.drawingBufferHeight];let e=this._getClampedPixelRatio(n,o);this._resizeCanvas(n,o,e),this.painter.resize(n,o,e)}this.transform.resize(n,o),null===(i=this._requestedCameraState)||void 0===i||i.resize(n,o);let s=!this._moving;return s&&(this.stop(),this.fire(new e.k("movestart",t)).fire(new e.k("move",t))),this.fire(new e.k("resize",t)),s&&this.fire(new e.k("moveend",t)),this}_getClampedPixelRatio(t,e){let{0:i,1:r}=this._maxCanvasSize,n=this.getPixelRatio(),o=t*n,a=e*n;return Math.min(o>i?i/o:1,a>r?r/a:1)*n}getPixelRatio(){var t;return null!==(t=this._overridePixelRatio)&&void 0!==t?t:devicePixelRatio}setPixelRatio(t){this._overridePixelRatio=t,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds($.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(t){return this.transform.locationPoint(e.N.convert(t),this.style&&this.terrain)}unproject(t){return this.transform.pointLocation(e.P.convert(t),this.terrain)}isMoving(){var t;return this._moving||(null===(t=this.handlers)||void 0===t?void 0:t.isMoving())}isZooming(){var t;return this._zooming||(null===(t=this.handlers)||void 0===t?void 0:t.isZooming())}isRotating(){var t;return this._rotating||(null===(t=this.handlers)||void 0===t?void 0:t.isRotating())}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let r=!1,n=n=>{let o=this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[];o.length?r||(r=!0,i.call(this,new ri(t,this,n.originalEvent,{features:o}))):r=!1};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1,n=n=>{(this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,i.call(this,new ri(t,this,n.originalEvent)))},o=e=>{r&&(r=!1,i.call(this,new ri(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:o}}}{let r=t=>{let r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:r}}}}on(t,e,i){if(void 0===i)return super.on(t,e);let r=this._createDelegatedListener(t,e,i);for(let e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(e,r.delegates[e]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);let r=this._createDelegatedListener(t,e,i);for(let t in r.delegates)this.once(t,r.delegates[t]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{let n=this._delegatedListeners[t];for(let t=0;t<n.length;t++){let r=n[t];if(r.layer===e&&r.listener===i){for(let t in r.delegates)this.off(t,r.delegates[t]);return n.splice(t,1),this}}})(),this)}queryRenderedFeatures(t,i){let r;if(!this.style)return[];let n=t instanceof e.P||Array.isArray(t),o=n?t:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(n?{}:t)||{},o instanceof e.P||"number"==typeof o[0])r=[e.P.convert(o)];else{let t=e.P.convert(o[0]),i=e.P.convert(o[1]);r=[t,new e.P(i.x,t.y),i,new e.P(t.x,i.y),t]}return this.style.queryRenderedFeatures(r,i,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(t,i){return!1!==(i=e.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){let e=this._locale[t];if(null==e)throw Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(t,e));let i=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!t)),t?(this.style=new en(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t,e,i):this.style.loadJSON(t,e,i)):delete this.style,this}_lazyInitEmptyStyle(){this.style||(this.style=new en(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,i){if("string"==typeof t){let r=this._requestManager.transformRequest(t,"Style");e.h(r,new AbortController).then(t=>{this._updateDiff(t.data,i)}).catch(t=>{t&&this.fire(new e.j(t))})}else"object"==typeof t&&this._updateDiff(t,i)}_updateDiff(t,i){try{this.style.setState(t,i)&&this._update(!0)}catch(r){e.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.w("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){let i=this.style&&this.style.sourceCaches[t];if(void 0!==i)return i.loaded();this.fire(new e.j(Error(`There is no source with ID '${t}'`)))}setTerrain(t){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),t){let i=this.style.sourceCaches[t.source];if(!i)throw Error(`cannot load terrain, because there exists no source with ID: ${t.source}`);for(let r in null===this.terrain&&i.reload(),this.style._layers){let i=this.style._layers[r];"hillshade"===i.type&&i.source===t.source&&e.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new rJ(this.painter,i,t),this.painter.renderToTexture=new r1(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=e=>{"style"===e.dataType?this.terrain.sourceCache.freeRtt():"source"===e.dataType&&e.tile&&(e.sourceId!==t.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(e.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new e.k("terrain",{terrain:t})),this}getTerrain(){var t,e;return null!==(e=null===(t=this.terrain)||void 0===t?void 0:t.options)&&void 0!==e?e:null}areTilesLoaded(){let t=this.style&&this.style.sourceCaches;for(let e in t){let i=t[e]._tiles;for(let t in i){let e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(t,i,r={}){let{pixelRatio:n=1,sdf:o=!1,stretchX:a,stretchY:s,content:l,textFitWidth:h,textFitHeight:c}=r;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||e.b(i))){if(void 0===i.width||void 0===i.height)return this.fire(new e.j(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:r,height:u,data:f}=i,d=i;return this.style.addImage(t,{data:new e.R({width:r,height:u},new Uint8Array(f)),pixelRatio:n,stretchX:a,stretchY:s,content:l,textFitWidth:h,textFitHeight:c,sdf:o,version:0,userImage:d}),d.onAdd&&d.onAdd(this,t),this}}{let{width:r,height:f,data:d}=u.getImageData(i);this.style.addImage(t,{data:new e.R({width:r,height:f},d),pixelRatio:n,stretchX:a,stretchY:s,content:l,textFitWidth:h,textFitHeight:c,sdf:o,version:0})}}updateImage(t,i){let r=this.style.getImage(t);if(!r)return this.fire(new e.j(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let{width:n,height:o,data:a}=i instanceof HTMLImageElement||e.b(i)?u.getImageData(i):i;if(void 0===n||void 0===o)return this.fire(new e.j(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(n!==r.data.width||o!==r.data.height)return this.fire(new e.j(Error("The width and height of the updated image must be that same as the previous version of the image")));let s=!(i instanceof HTMLImageElement||e.b(i));return r.data.replace(a,s),this.style.updateImage(t,r),this}getImage(t){return this.style.getImage(t)}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.j(Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(t){return b.getImage(this._requestManager.transformRequest(t,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,r={}){return this.style.setPaintProperty(t,e,i,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,r={}){return this.style.setLayoutProperty(t,e,i,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setGlyphs(t,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(t,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(t,e,i={}){return this._lazyInitEmptyStyle(),this.style.addSprite(t,e,i,t=>{t||this._update(!0)}),this}removeSprite(t){return this._lazyInitEmptyStyle(),this.style.removeSprite(t),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(t,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(t,e,t=>{t||this._update(!0)}),this}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(t){return this._lazyInitEmptyStyle(),this.style.setSky(t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){let t=this._container;t.classList.add("maplibregl-map");let e=this._canvasContainer=c.create("div","maplibregl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=c.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let i=this._containerDimensions(),r=this._getClampedPixelRatio(i[0],i[1]);this._resizeCanvas(i[0],i[1],r);let n=this._controlContainer=c.create("div","maplibregl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(t=>{o[t]=c.create("div",`maplibregl-ctrl-${t} `,n)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,e,i){this._canvas.width=Math.floor(i*t),this._canvas.height=Math.floor(i*e),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){let t={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},e=null;this._canvas.addEventListener("webglcontextcreationerror",i=>{e={requestedAttributes:t},i&&(e.statusMessage=i.statusMessage,e.type=i.type)},{once:!0});let i=this._canvas.getContext("webgl2",t)||this._canvas.getContext("webgl",t);if(!i){let t="Failed to initialize WebGL";throw e?(e.message=t,Error(JSON.stringify(e))):Error(t)}this.painter=new iY(i,this.transform),f.testSupport(i)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style&&this.style._loaded&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint()),this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(t){let i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let t=this.transform.zoom,n=u.now();this.style.zoomHistory.update(t,n);let o=new e.a9(t,{now:n,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=o.crossFadingFactor();1===a&&a===this._crossFadingFactor||(r=!0,this._crossFadingFactor=a),this.style.update(o)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new e.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,e.be.mark(e.bf.load),this.fire(new e.k("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let n=this._sourcesDirty||this._styleDirty||this._placementDirty;return n||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.k("idle")),!this._loaded||this._fullyLoaded||n||(this._fullyLoaded=!0,e.be.mark(e.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var t;for(let t of(this._hash&&this._hash.remove(),this._controls))t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),b.removeThrottleControl(this._imageQueueHandle),null===(t=this._resizeObserver)||void 0===t||t.disconnect();let i=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==i?void 0:i.loseContext)&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),c.remove(this._canvasContainer),c.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),e.be.clearMetrics(),this._removed=!0,this.fire(new e.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,u.frameAsync(this._frameRequest).then(t=>{e.be.frame(t),this._frameRequest=null,this._render(t)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get version(){return r6}getCameraTargetElevation(){return this.transform.elevation}},t.MapMouseEvent=ri,t.MapTouchEvent=rr,t.MapWheelEvent=rn,t.Marker=ne,t.NavigationControl=class{constructor(t){this._updateZoomButtons=()=>{let t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},this._rotateCompassArrow=()=>{let t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,e)=>{let i=this._map._getUIString(`NavigationControl.${e}`);t.title=i,t.setAttribute("aria-label",i)},this.options=e.e({},r4,t),this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),c.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),c.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=c.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new r5(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){c.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){let i=c.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}},t.Popup=class extends e.E{constructor(t){super(),this.remove=()=>(this._content&&c.remove(this._content),this._container&&(c.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new e.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var e;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=c.create("div","maplibregl-popup",this._map.getContainer()),this._tip=c.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let t of this.options.className.split(" "))this._container.classList.add(t);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?r7(this._lngLat,this._flatPos,this._map.transform):null===(e=this._lngLat)||void 0===e?void 0:e.wrap(),this._trackPointer&&!t)return;let i=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let r=this.options.anchor,n=nu(this.options.offset);if(!r){let t;let e=this._container.offsetWidth,o=this._container.offsetHeight;t=i.y+n.bottom.y<o?["top"]:i.y>this._map.transform.height-o?["bottom"]:[],i.x<e/2?t.push("left"):i.x>this._map.transform.width-e/2&&t.push("right"),r=0===t.length?"bottom":t.join("-")}let o=i.add(n[r]);this.options.subpixelPositioning||(o=o.round()),c.setTransform(this._container,`${r9[r]} translate(${o.x}px,${o.y}px)`),nt(this._container,r,"popup")},this._onClose=()=>{this.remove()},this.options=e.e(Object.create(nl),t)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new e.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.N.convert(t),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){let e;let i=document.createDocumentFragment(),r=document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)i.appendChild(e);return this.setDOMContent(i)}getMaxWidth(){var t;return null===(t=this._container)||void 0===t?void 0:t.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=c.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){return this._container&&this._container.classList.add(t),this}removeClassName(t){return this._container&&this._container.classList.remove(t),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}setSubpixelPositioning(t){this.options.subpixelPositioning=t}_createCloseButton(){this.options.closeButton&&(this._closeButton=c.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let t=this._container.querySelector(nh);t&&t.focus()}},t.RasterDEMTileSource=Q,t.RasterTileSource=J,t.ScaleControl=class{constructor(t){this._onMove=()=>{na(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,na(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},no),t)}getDefaultPosition(){return"bottom-left"}onAdd(t){return this._map=t,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){c.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},t.ScrollZoomHandler=rR,t.Style=en,t.TerrainControl=class{constructor(t){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=t}onAdd(t){return this._map=t,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=c.create("button","maplibregl-ctrl-terrain",this._container),c.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){c.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},t.TwoFingersTouchPitchHandler=rP,t.TwoFingersTouchRotateHandler=rE,t.TwoFingersTouchZoomHandler=rS,t.TwoFingersTouchZoomRotateHandler=rF,t.VectorTileSource=K,t.VideoSource=tr,t.addSourceType=(t,i)=>e._(void 0,void 0,void 0,function*(){if(ta(t))throw Error(`A source type called "${t}" already exists.`);((t,e)=>{to[t]=e})(t,i)}),t.clearPrewarmedResources=function(){let t=o;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(F),o=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},t.getMaxParallelImageRequests=function(){return e.a.MAX_PARALLEL_IMAGE_REQUESTS},t.getRTLTextPluginStatus=function(){return tu().getRTLTextPluginStatus()},t.getVersion=function(){return nc},t.getWorkerCount=function(){return j.workerCount},t.getWorkerUrl=function(){return e.a.WORKER_URL},t.importScriptInWorkers=function(t){return Z().broadcast("IS",t)},t.prewarm=function(){V().acquire(F)},t.setMaxParallelImageRequests=function(t){e.a.MAX_PARALLEL_IMAGE_REQUESTS=t},t.setRTLTextPlugin=function(t,e){return tu().setRTLTextPlugin(t,e)},t.setWorkerCount=function(t){j.workerCount=t},t.setWorkerUrl=function(t){e.a.WORKER_URL=t}}),t})}),parcelRegister("cBgUY",function(t,e){$parcel$defineInteropFlag(t.exports),$parcel$export(t.exports,"default",()=>c);var i=parcelRequire("MtiXV"),r=parcelRequire("5FLoR"),n=parcelRequire("fuL1l"),o=parcelRequire("gk5mE"),a=parcelRequire("1JtwK"),s=parcelRequire("csn06"),l=parcelRequire("gRUiu"),h=parcelRequire("9dV6O"),u=parcelRequire("7FQTa");i.default.defaultDatum="WGS84",i.default.Proj=r.default,i.default.WGS84=new i.default.Proj("WGS84"),i.default.Point=n.default,i.default.toPoint=o.default,i.default.defs=a.default,i.default.nadgrid=s.default,i.default.transform=l.default,i.default.mgrs=h.default,i.default.version="__VERSION__",(0,u.default)(i.default);var c=i.default}),parcelRegister("MtiXV",function(t,e){$parcel$export(t.exports,"default",()=>s);var i=parcelRequire("5FLoR"),r=parcelRequire("gRUiu"),n=(0,i.default)("WGS84");function o(t,e,i,n){var o,a,s;return Array.isArray(i)?(o=(0,r.default)(t,e,i,n)||{x:NaN,y:NaN},i.length>2)?(void 0===t.name||"geocent"!==t.name)&&(void 0===e.name||"geocent"!==e.name)?[o.x,o.y].concat(i.splice(2)):"number"==typeof o.z?[o.x,o.y,o.z].concat(i.splice(3)):[o.x,o.y,i[2]].concat(i.splice(3)):[o.x,o.y]:(a=(0,r.default)(t,e,i,n),2===(s=Object.keys(i)).length||s.forEach(function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=i[r]}),a)}function a(t){return t instanceof i.default?t:t.oProj?t.oProj:(0,i.default)(t)}var s=function(t,e,i){t=a(t);var r,s=!1;return(void 0===e?(e=t,t=n,s=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=n,s=!0),e=a(e),i)?o(t,e,i):(r={forward:function(i,r){return o(t,e,i,r)},inverse:function(i,r){return o(e,t,i,r)}},s&&(r.oProj=e),r)}}),parcelRegister("5FLoR",function(t,e){$parcel$export(t.exports,"default",()=>c);var i=parcelRequire("hfI6n"),r=parcelRequire("iLlAU"),n=parcelRequire("dRcEP"),o=parcelRequire("42EBW"),a=parcelRequire("2WHwF"),s=parcelRequire("iQ1L5"),l=parcelRequire("9tIAs"),h=parcelRequire("csn06");function u(t,e){if(!(this instanceof u))return new u(t);e=e||function(t){if(t)throw t};var n=(0,i.default)(t);if("object"!=typeof n){e("Could not parse to valid json: "+t);return}var c=u.projections.get(n.projName);if(!c){e("Could not get projection name from: "+t);return}if(n.datumCode&&"none"!==n.datumCode){var f=(0,l.default)(a.default,n.datumCode);f&&(n.datum_params=n.datum_params||(f.towgs84?f.towgs84.split(","):null),n.ellps=f.ellipse,n.datumName=f.datumName?f.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var d=(0,o.sphere)(n.a,n.b,n.rf,n.ellps,n.sphere),p=(0,o.eccentricity)(d.a,d.b,d.rf,n.R_A),m=(0,h.getNadgrids)(n.nadgrids),g=n.datum||(0,s.default)(n.datumCode,n.datum_params,d.a,d.b,p.es,p.ep2,m);(0,r.default)(this,n),(0,r.default)(this,c),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=g,this.init(),e(null,this)}u.projections=n.default,u.projections.start();var c=u}),parcelRegister("hfI6n",function(t,e){$parcel$export(t.exports,"default",()=>p);var i=parcelRequire("1JtwK"),r=parcelRequire("bhoMA"),n=parcelRequire("gQcom"),o=parcelRequire("9tIAs");function a(t){return"string"==typeof t}function s(t){return t in i.default}var l=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function h(t){return l.some(function(e){return t.indexOf(e)>-1})}var u=["3857","900913","3785","102113"];function c(t){var e=(0,o.default)(t,"authority");if(e){var i=(0,o.default)(e,"epsg");return i&&u.indexOf(i)>-1}}function f(t){var e=(0,o.default)(t,"extension");if(e)return(0,o.default)(e,"proj4")}function d(t){return"+"===t[0]}var p=function(t){if(!a(t))return t;if(s(t))return i.default[t];if(h(t)){var e=(0,r.default)(t);if(c(e))return i.default["EPSG:3857"];var o=f(e);return o?(0,n.default)(o):e}if(d(t))return(0,n.default)(t)}}),parcelRegister("1JtwK",function(t,e){$parcel$export(t.exports,"default",()=>a);var i=parcelRequire("WOwPJ"),r=parcelRequire("gQcom"),n=parcelRequire("bhoMA");function o(t){var e=this;if(2==arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?o[t]=(0,r.default)(arguments[1]):o[t]=(0,n.default)(arguments[1]):o[t]=i}else if(1==arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?o.apply(e,t):o(t)});if("string"==typeof t){if(t in o)return o[t]}else"EPSG"in t?o["EPSG:"+t.EPSG]=t:"ESRI"in t?o["ESRI:"+t.ESRI]=t:"IAU2000"in t?o["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(0,i.default)(o);var a=o}),parcelRegister("WOwPJ",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}}),parcelRegister("gQcom",function(t,e){$parcel$export(t.exports,"default",()=>a);var i=parcelRequire("bHF3j"),r=parcelRequire("8PrGf"),n=parcelRequire("yLZPs"),o=parcelRequire("9tIAs");function a(t){var e,a,s,l={},h=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t},{}),u={proj:"projName",datum:"datumCode",rf:function(t){l.rf=parseFloat(t)},lat_0:function(t){l.lat0=t*i.D2R},lat_1:function(t){l.lat1=t*i.D2R},lat_2:function(t){l.lat2=t*i.D2R},lat_ts:function(t){l.lat_ts=t*i.D2R},lon_0:function(t){l.long0=t*i.D2R},lon_1:function(t){l.long1=t*i.D2R},lon_2:function(t){l.long2=t*i.D2R},alpha:function(t){l.alpha=parseFloat(t)*i.D2R},gamma:function(t){l.rectified_grid_angle=parseFloat(t)},lonc:function(t){l.longc=t*i.D2R},x_0:function(t){l.x0=parseFloat(t)},y_0:function(t){l.y0=parseFloat(t)},k_0:function(t){l.k0=parseFloat(t)},k:function(t){l.k0=parseFloat(t)},a:function(t){l.a=parseFloat(t)},b:function(t){l.b=parseFloat(t)},r:function(t){l.a=l.b=parseFloat(t)},r_a:function(){l.R_A=!0},zone:function(t){l.zone=parseInt(t,10)},south:function(){l.utmSouth=!0},towgs84:function(t){l.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){l.to_meter=parseFloat(t)},units:function(t){l.units=t;var e=(0,o.default)(n.default,t);e&&(l.to_meter=e.to_meter)},from_greenwich:function(t){l.from_greenwich=t*i.D2R},pm:function(t){var e=(0,o.default)(r.default,t);l.from_greenwich=(e||parseFloat(t))*i.D2R},nadgrids:function(t){"@null"===t?l.datumCode="none":l.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(l.axis=t)},approx:function(){l.approx=!0}};for(e in h)a=h[e],e in u?"function"==typeof(s=u[e])?s(a):l[s]=a:l[e]=a;return"string"==typeof l.datumCode&&"WGS84"!==l.datumCode&&(l.datumCode=l.datumCode.toLowerCase()),l}}),parcelRegister("bHF3j",function(t,e){$parcel$export(t.exports,"PJD_3PARAM",()=>i),$parcel$export(t.exports,"PJD_7PARAM",()=>r),$parcel$export(t.exports,"PJD_GRIDSHIFT",()=>n),$parcel$export(t.exports,"PJD_WGS84",()=>o),$parcel$export(t.exports,"PJD_NODATUM",()=>a),$parcel$export(t.exports,"SRS_WGS84_SEMIMAJOR",()=>s),$parcel$export(t.exports,"SRS_WGS84_SEMIMINOR",()=>l),$parcel$export(t.exports,"SRS_WGS84_ESQUARED",()=>h),$parcel$export(t.exports,"SEC_TO_RAD",()=>u),$parcel$export(t.exports,"HALF_PI",()=>c),$parcel$export(t.exports,"SIXTH",()=>f),$parcel$export(t.exports,"RA4",()=>d),$parcel$export(t.exports,"RA6",()=>p),$parcel$export(t.exports,"EPSLN",()=>m),$parcel$export(t.exports,"D2R",()=>g),$parcel$export(t.exports,"R2D",()=>y),$parcel$export(t.exports,"FORTPI",()=>v),$parcel$export(t.exports,"TWO_PI",()=>_),$parcel$export(t.exports,"SPI",()=>b);var i=1,r=2,n=3,o=4,a=5,s=6378137,l=6356752.314,h=.0066943799901413165,u=484813681109536e-20,c=Math.PI/2,f=.16666666666666666,d=.04722222222222222,p=.022156084656084655,m=1e-10,g=.017453292519943295,y=57.29577951308232,v=Math.PI/4,_=2*Math.PI,b=3.14159265359}),parcelRegister("8PrGf",function(t,e){$parcel$export(t.exports,"default",()=>i);var i={};i.greenwich=0,i.lisbon=-9.131906111111,i.paris=2.337229166667,i.bogota=-74.080916666667,i.madrid=-3.687938888889,i.rome=12.452333333333,i.bern=7.439583333333,i.jakarta=106.807719444444,i.ferro=-17.666666666667,i.brussels=4.367975,i.stockholm=18.058277777778,i.athens=23.7163375,i.oslo=10.722916666667}),parcelRegister("yLZPs",function(t,e){$parcel$export(t.exports,"default",()=>i);var i={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}}),parcelRegister("9tIAs",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=/[\s_\-\/\(\)]/g;function r(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),o=e.toLowerCase().replace(i,""),a=-1;++a<n.length;)if((r=n[a]).toLowerCase().replace(i,"")===o)return t[r]}}),parcelRegister("bhoMA",function(t,e){$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("kqNdl"),r=parcelRequire("9E5vO"),n=.017453292519943295;function o(t,e){var i=e[0],r=e[1];!(i in t)&&r in t&&(t[i]=t[r],3===e.length&&(t[i]=e[2](t[i])))}function a(t){return t*n}function s(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,r=t.AXIS.length;i<r;++i){var n=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==n[0].indexOf("north")||("y"===n[0]||"lat"===n[0])&&"north"===n[1]?e+="n":-1!==n[0].indexOf("south")||("y"===n[0]||"lat"===n[0])&&"south"===n[1]?e+="s":-1!==n[0].indexOf("east")||("x"===n[0]||"lon"===n[0])&&"east"===n[1]?e+="e":(-1!==n[0].indexOf("west")||("x"===n[0]||"lon"===n[0])&&"west"===n[1])&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function l(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach(function(e){return o(t,e)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&("Stereographic_South_Pole"===t.projName||"Polar Stereographic (variant B)"===t.projName)?(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=a(t.lat0>0?90:-90))}function l(t){var e=(0,i.default)(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var a={};return(0,r.sExpr)(e,a),s(a),a}}),parcelRegister("kqNdl",function(t,e){$parcel$export(t.exports,"default",()=>i);var i=m,r=1,n=2,o=3,a=4,s=5,l=-1,h=/\s/,u=/[A-Za-z]/,c=/[A-Za-z84_]/,f=/[,\]]/,d=/[\d\.E\-\+]/;function p(t){if("string"!=typeof t)throw Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=r}function m(t){return new p(t).output()}p.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==a)for(;h.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case r:return this.neutral(t);case n:return this.keyword(t);case a:return this.quoted(t);case s:return this.afterquote(t);case o:return this.number(t);case l:return}},p.prototype.afterquote=function(t){if('"'===t){this.word+='"',this.state=a;return}if(f.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},p.prototype.afterItem=function(t){if(","===t){null!==this.word&&this.currentObject.push(this.word),this.word=null,this.state=r;return}if("]"===t){this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=r,this.currentObject=this.stack.pop(),this.currentObject||(this.state=l);return}},p.prototype.number=function(t){if(d.test(t)){this.word+=t;return}if(f.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw Error("havn't handled \""+t+'" in number yet, index '+this.place)},p.prototype.quoted=function(t){if('"'===t){this.state=s;return}this.word+=t},p.prototype.keyword=function(t){if(c.test(t)){this.word+=t;return}if("["===t){var e=[];e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=r;return}if(f.test(t)){this.afterItem(t);return}throw Error("havn't handled \""+t+'" in keyword yet, index '+this.place)},p.prototype.neutral=function(t){if(u.test(t)){this.word=t,this.state=n;return}if('"'===t){this.word="",this.state=a;return}if(d.test(t)){this.word=t,this.state=o;return}if(f.test(t)){this.afterItem(t);return}throw Error("havn't handled \""+t+'" in neutral yet, index '+this.place)},p.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===l)return this.root;throw Error('unable to parse string "'+this.text+'". State is '+this.state)}}),parcelRegister("9E5vO",function(t,e){function i(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,o=i.reduce(function(t,e){return r(e,t),t},n);e&&(t[e]=o)}function r(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n,o=t.shift();if("PARAMETER"===o&&(o=t.shift()),1===t.length){if(Array.isArray(t[0])){e[o]={},r(t[0],e[o]);return}e[o]=t[0];return}if(!t.length){e[o]=!0;return}if("TOWGS84"===o){e[o]=t;return}if("AXIS"===o){o in e||(e[o]=[]),e[o].push(t);return}switch(Array.isArray(o)||(e[o]={}),o){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[o]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&r(t[2],e[o]);return;case"SPHEROID":case"ELLIPSOID":e[o]={name:t[0],a:t[1],rf:t[2]},4===t.length&&r(t[3],e[o]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],i(e,o,t);return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return r(t,e[o]);return i(e,o,t)}}$parcel$export(t.exports,"sExpr",()=>r)}),parcelRegister("iLlAU",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e){var i,r;if(t=t||{},!e)return t;for(r in e)void 0!==(i=e[r])&&(t[r]=i);return t}}),parcelRegister("dRcEP",function(t,e){$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("YsrFM"),r=parcelRequire("bF2kX"),n=[i.default,r.default],o={},a=[];function s(t,e){var i=a.length;return t.names?(a[i]=t,t.names.forEach(function(t){o[t.toLowerCase()]=i}),this):(console.log(e),!0)}var l={start:function(){n.forEach(s)},add:s,get:function(t){if(!t)return!1;var e=t.toLowerCase();if(void 0!==o[e]&&a[o[e]])return a[o[e]]}}}),parcelRegister("YsrFM",function(t,e){$parcel$export(t.exports,"default",()=>s);var i=parcelRequire("5KZDk"),r=parcelRequire("idrHz"),n=parcelRequire("51dWf"),o=parcelRequire("dkHfn"),a=parcelRequire("bHF3j"),s={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,i.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,o=t.x,s=t.y;if(s*a.R2D>90&&s*a.R2D<-90&&o*a.R2D>180&&o*a.R2D<-180||Math.abs(Math.abs(s)-a.HALF_PI)<=a.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,r.default)(o-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(a.FORTPI+.5*s));else{var l=Math.sin(s),h=(0,n.default)(this.e,s,l);e=this.x0+this.a*this.k0*(0,r.default)(o-this.long0),i=this.y0-this.a*this.k0*Math.log(h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,s=t.y-this.y0;if(this.sphere)i=a.HALF_PI-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var l=Math.exp(-s/(this.a*this.k0));if(-9999===(i=(0,o.default)(this.e,l)))return null}return e=(0,r.default)(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}}),parcelRegister("5KZDk",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e,i){var r=t*e;return i/Math.sqrt(1-r*r)}}),parcelRegister("idrHz",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("bHF3j"),r=parcelRequire("4GFvn");function n(t){return Math.abs(t)<=i.SPI?t:t-(0,r.default)(t)*i.TWO_PI}}),parcelRegister("4GFvn",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){return t<0?-1:1}}),parcelRegister("51dWf",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("bHF3j");function r(t,e,r){var n=t*r;return n=Math.pow((1-n)/(1+n),.5*t),Math.tan(.5*(i.HALF_PI-e))/n}}),parcelRegister("dkHfn",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("bHF3j");function r(t,e){for(var r,n,o=.5*t,a=i.HALF_PI-2*Math.atan(e),s=0;s<=15;s++)if(r=t*Math.sin(a),n=i.HALF_PI-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-a,a+=n,1e-10>=Math.abs(n))return a;return -9999}}),parcelRegister("bF2kX",function(t,e){function i(t){return t}$parcel$export(t.exports,"default",()=>r);var r={init:function(){},forward:i,inverse:i,names:["longlat","identity"]}}),parcelRegister("42EBW",function(t,e){$parcel$export(t.exports,"eccentricity",()=>o),$parcel$export(t.exports,"sphere",()=>a);var i=parcelRequire("bHF3j"),r=parcelRequire("4PtTU"),n=parcelRequire("9tIAs");function o(t,e,r,n){var o=t*t,a=e*e,s=(o-a)/o,l=0;return n?(t*=1-s*(i.SIXTH+s*(i.RA4+s*i.RA6)),o=t*t,s=0):l=Math.sqrt(s),{es:s,e:l,ep2:(o-a)/a}}function a(t,e,o,a,s){if(!t){var l=(0,n.default)(r.default,a);l||(l=r.WGS84),t=l.a,e=l.b,o=l.rf}return o&&!e&&(e=(1-1/o)*t),(0===o||Math.abs(t-e)<i.EPSLN)&&(s=!0,e=t),{a:t,b:e,rf:o,sphere:s}}}),parcelRegister("4PtTU",function(t,e){$parcel$export(t.exports,"default",()=>i),$parcel$export(t.exports,"WGS84",()=>r);var i={};i.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},i.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},i.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},i.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},i.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},i.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},i.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},i.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},i.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},i.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},i.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},i.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},i.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},i.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},i.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},i.clrk80ign={a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},i.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},i.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},i.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},i.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},i.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},i.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},i.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},i.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},i.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},i.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},i.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},i.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},i.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},i.hough={a:6378270,rf:297,ellipseName:"Hough"},i.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},i.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},i.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},i.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},i.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},i.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},i.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},i.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},i.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},i.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},i.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},i.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var r=i.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};i.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}}),parcelRegister("2WHwF",function(t,e){$parcel$export(t.exports,"default",()=>i);var i={};i.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},i.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},i.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},i.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},i.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},i.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},i.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},i.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},i.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},i.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},i.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},i.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},i.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},i.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},i.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},i.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},i.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},i.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}),parcelRegister("iQ1L5",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("bHF3j"),r=function(t,e,r,n,o,a,s){var l={};return void 0===t||"none"===t?l.datum_type=i.PJD_NODATUM:l.datum_type=i.PJD_WGS84,e&&(l.datum_params=e.map(parseFloat),(0!==l.datum_params[0]||0!==l.datum_params[1]||0!==l.datum_params[2])&&(l.datum_type=i.PJD_3PARAM),l.datum_params.length>3&&(0!==l.datum_params[3]||0!==l.datum_params[4]||0!==l.datum_params[5]||0!==l.datum_params[6])&&(l.datum_type=i.PJD_7PARAM,l.datum_params[3]*=i.SEC_TO_RAD,l.datum_params[4]*=i.SEC_TO_RAD,l.datum_params[5]*=i.SEC_TO_RAD,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=i.PJD_GRIDSHIFT,l.grids=s),l.a=r,l.b=n,l.es=o,l.ep2=a,l}}),parcelRegister("csn06",function(t,e){$parcel$export(t.exports,"default",()=>r),$parcel$export(t.exports,"getNadgrids",()=>n);var i={};function r(t,e){var r=new DataView(e),n=s(r),o=l(r,n),a=u(r,o,n),h={header:o,subgrids:a};return i[t]=h,h}function n(t){return void 0===t?null:t.split(",").map(o)}function o(t){if(0===t.length)return null;var e="@"===t[0];return(e&&(t=t.slice(1)),"null"===t)?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:i[t]||null,isNull:!1}}function a(t){return t/3600*Math.PI/180}function s(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function l(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:h(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function h(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function u(t,e,i){for(var r=176,n=[],o=0;o<e.nSubgrids;o++){var s=f(t,r,i),l=d(t,r,s,i),h=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),u=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);n.push({ll:[a(s.lowerLongitude),a(s.lowerLatitude)],del:[a(s.longitudeInterval),a(s.latitudeInterval)],lim:[h,u],count:s.gridNodeCount,cvs:c(l)}),r+=176+16*s.gridNodeCount}return n}function c(t){return t.map(function(t){return[a(t.longitudeShift),a(t.latitudeShift)]})}function f(t,e,i){return{name:h(t,e+8,e+16).trim(),parent:h(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function d(t,e,i,r){for(var n=e+176,o=16,a=[],s=0;s<i.gridNodeCount;s++){var l={latitudeShift:t.getFloat32(n+s*o,r),longitudeShift:t.getFloat32(n+s*o+4,r),latitudeAccuracy:t.getFloat32(n+s*o+8,r),longitudeAccuracy:t.getFloat32(n+s*o+12,r)};a.push(l)}return a}}),parcelRegister("gRUiu",function(t,e){$parcel$export(t.exports,"default",()=>h);var i=parcelRequire("bHF3j"),r=parcelRequire("7eZez"),n=parcelRequire("7Fnqe"),o=parcelRequire("5FLoR"),a=parcelRequire("gk5mE"),s=parcelRequire("9ZUvm");function l(t,e){return(t.datum.datum_type===i.PJD_3PARAM||t.datum.datum_type===i.PJD_7PARAM||t.datum.datum_type===i.PJD_GRIDSHIFT)&&"WGS84"!==e.datumCode||(e.datum.datum_type===i.PJD_3PARAM||e.datum.datum_type===i.PJD_7PARAM||e.datum.datum_type===i.PJD_GRIDSHIFT)&&"WGS84"!==t.datumCode}function h(t,e,u,c){var f,d=void 0!==(u=Array.isArray(u)?(0,a.default)(u):{x:u.x,y:u.y,z:u.z,m:u.m}).z;if((0,s.default)(u),t.datum&&e.datum&&l(t,e)&&(u=h(t,f=new o.default("WGS84"),u,c),t=f),c&&"enu"!==t.axis&&(u=(0,n.default)(t,!1,u)),"longlat"===t.projName)u={x:u.x*i.D2R,y:u.y*i.D2R,z:u.z||0};else if(t.to_meter&&(u={x:u.x*t.to_meter,y:u.y*t.to_meter,z:u.z||0}),!(u=t.inverse(u)))return;if(t.from_greenwich&&(u.x+=t.from_greenwich),u=(0,r.default)(t.datum,e.datum,u))return(e.from_greenwich&&(u={x:u.x-e.from_greenwich,y:u.y,z:u.z||0}),"longlat"===e.projName?u={x:u.x*i.R2D,y:u.y*i.R2D,z:u.z||0}:(u=e.forward(u),e.to_meter&&(u={x:u.x/e.to_meter,y:u.y/e.to_meter,z:u.z||0})),c&&"enu"!==e.axis)?(0,n.default)(e,!0,u):(u&&!d&&delete u.z,u)}}),parcelRegister("7eZez",function(t,e){$parcel$export(t.exports,"default",()=>a);var i=parcelRequire("bHF3j"),r=parcelRequire("f41gb"),n=parcelRequire("idrHz");function o(t){return t===i.PJD_3PARAM||t===i.PJD_7PARAM}function a(t,e,n){if((0,r.compareDatums)(t,e)||t.datum_type===i.PJD_NODATUM||e.datum_type===i.PJD_NODATUM)return n;var a=t.a,l=t.es;if(t.datum_type===i.PJD_GRIDSHIFT){if(0!==s(t,!1,n))return;a=i.SRS_WGS84_SEMIMAJOR,l=i.SRS_WGS84_ESQUARED}var h=e.a,u=e.b,c=e.es;if(e.datum_type===i.PJD_GRIDSHIFT&&(h=i.SRS_WGS84_SEMIMAJOR,u=i.SRS_WGS84_SEMIMINOR,c=i.SRS_WGS84_ESQUARED),l===c&&a===h&&!o(t.datum_type)&&!o(e.datum_type)||(n=(0,r.geodeticToGeocentric)(n,l,a),o(t.datum_type)&&(n=(0,r.geocentricToWgs84)(n,t.datum_type,t.datum_params)),o(e.datum_type)&&(n=(0,r.geocentricFromWgs84)(n,e.datum_type,e.datum_params)),n=(0,r.geocentricToGeodetic)(n,c,h,u),e.datum_type!==i.PJD_GRIDSHIFT||0===s(e,!0,n)))return n}function s(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},a=!1,s=[];t:for(var h=0;h<t.grids.length;h++){var u=t.grids[h];if(s.push(u.name),u.isNull){o=n;break}if(a=u.mandatory,null===u.grid){if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1;continue}for(var c=u.grid.subgrids,f=0,d=c.length;f<d;f++){var p=c[f],m=(Math.abs(p.del[1])+Math.abs(p.del[0]))/1e4,g=p.ll[0]-m,y=p.ll[1]-m,v=p.ll[0]+(p.lim[0]-1)*p.del[0]+m,_=p.ll[1]+(p.lim[1]-1)*p.del[1]+m;if(!(y>n.y)&&!(g>n.x)&&!(_<n.y)&&!(v<n.x)&&!isNaN((o=l(n,e,p)).x))break t}}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*i.R2D+" "+n.y*i.R2D+" tried: '"+s+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function l(t,e,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var o={x:t.x,y:t.y};o.x-=i.ll[0],o.y-=i.ll[1],o.x=(0,n.default)(o.x-Math.PI)+Math.PI;var a=h(o,i);if(e){if(isNaN(a.x))return r;a.x=o.x-a.x,a.y=o.y-a.y;var s,l,u=9,c=1e-12;do{if(isNaN((l=h(a,i)).x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:o.x-(l.x+a.x),y:o.y-(l.y+a.y)},a.x+=s.x,a.y+=s.y}while(u--&&Math.abs(s.x)>c&&Math.abs(s.y)>c)if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=(0,n.default)(a.x+i.ll[0]),r.y=a.y+i.ll[1]}else isNaN(a.x)||(r.x=t.x+a.x,r.y=t.y+a.y);return r}function h(t,e){var i,r={x:t.x/e.del[0],y:t.y/e.del[1]},n={x:Math.floor(r.x),y:Math.floor(r.y)},o={x:r.x-1*n.x,y:r.y-1*n.y},a={x:Number.NaN,y:Number.NaN};if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return a;i=n.y*e.lim[0]+n.x;var s={x:e.cvs[i][0],y:e.cvs[i][1]};i++;var l={x:e.cvs[i][0],y:e.cvs[i][1]};i+=e.lim[0];var h={x:e.cvs[i][0],y:e.cvs[i][1]};i--;var u={x:e.cvs[i][0],y:e.cvs[i][1]},c=o.x*o.y,f=o.x*(1-o.y),d=(1-o.x)*(1-o.y),p=(1-o.x)*o.y;return a.x=d*s.x+f*l.x+p*u.x+c*h.x,a.y=d*s.y+f*l.y+p*u.y+c*h.y,a}}),parcelRegister("f41gb",function(t,e){$parcel$export(t.exports,"compareDatums",()=>r),$parcel$export(t.exports,"geodeticToGeocentric",()=>n),$parcel$export(t.exports,"geocentricToGeodetic",()=>o),$parcel$export(t.exports,"geocentricToWgs84",()=>a),$parcel$export(t.exports,"geocentricFromWgs84",()=>s);var i=parcelRequire("bHF3j");function r(t,e){return!(t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===i.PJD_3PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==i.PJD_7PARAM||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}function n(t,e,r){var n,o,a,s=t.x,l=t.y,h=t.z?t.z:0;if(l<-i.HALF_PI&&l>-1.001*i.HALF_PI)l=-i.HALF_PI;else if(l>i.HALF_PI&&l<1.001*i.HALF_PI)l=i.HALF_PI;else if(l<-i.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};else if(l>i.HALF_PI)return{x:1/0,y:1/0,z:t.z};return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(l),a=Math.cos(l),{x:((n=r/Math.sqrt(1-o*o*e))+h)*a*Math.cos(s),y:(n+h)*a*Math.sin(s),z:(n*(1-e)+h)*o}}function o(t,e,r,n){var o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b,x=1e-12,w=1e-12*1e-12,M=30,S=t.x,k=t.y,E=t.z?t.z:0;if(o=Math.sqrt(S*S+k*k),a=Math.sqrt(S*S+k*k+E*E),o/r<x){if(v=0,a/r<x)return _=i.HALF_PI,b=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(k,S);s=E/a,h=1/Math.sqrt(1-e*(2-e)*(l=o/a)*l),f=l*(1-e)*h,d=s*h,y=0;do y++,c=r/Math.sqrt(1-e*d*d),b=o*f+E*d-c*(1-e*d*d),h=1/Math.sqrt(1-(u=e*c/(c+b))*(2-u)*l*l),p=l*(1-u)*h,g=(m=s*h)*f-p*d,f=p,d=m;while(g*g>w&&y<M)return{x:v,y:_=Math.atan(m/Math.abs(p)),z:b}}function a(t,e,r){if(e===i.PJD_3PARAM)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===i.PJD_7PARAM){var n=r[0],o=r[1],a=r[2],s=r[3],l=r[4],h=r[5],u=r[6];return{x:u*(t.x-h*t.y+l*t.z)+n,y:u*(h*t.x+t.y-s*t.z)+o,z:u*(-l*t.x+s*t.y+t.z)+a}}}function s(t,e,r){if(e===i.PJD_3PARAM)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===i.PJD_7PARAM){var n=r[0],o=r[1],a=r[2],s=r[3],l=r[4],h=r[5],u=r[6],c=(t.x-n)/u,f=(t.y-o)/u,d=(t.z-a)/u;return{x:c+h*f-l*d,y:-h*c+f+s*d,z:l*c-s*f+d}}}}),parcelRegister("7Fnqe",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e,i){var r,n,o,a=i.x,s=i.y,l=i.z||0,h={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==i.z)switch(0===o?(r=a,n=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,n=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=l,n="z"),t.axis[o]){case"e":case"n":h[n]=r;break;case"w":case"s":h[n]=-r;break;case"u":void 0!==i[n]&&(h.z=r);break;case"d":void 0!==i[n]&&(h.z=-r);break;default:return null}return h}}),parcelRegister("gk5mE",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}}),parcelRegister("9ZUvm",function(t,e){function i(t){r(t.x),r(t.y)}function r(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw TypeError("coordinates must be finite numbers")}$parcel$export(t.exports,"default",()=>i)}),parcelRegister("fuL1l",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("9dV6O");function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}r.fromMGRS=function(t){return new r((0,i.toPoint)(t))},r.prototype.toMGRS=function(t){return(0,i.forward)([this.x,this.y],t)};var n=r}),parcelRegister("9dV6O",function(t,e){$parcel$export(t.exports,"default",()=>u),$parcel$export(t.exports,"forward",()=>c),$parcel$export(t.exports,"toPoint",()=>d);var i=6,r="AJSAJS",n="AFAFAF",o=65,a=73,s=79,l=86,h=90,u={forward:c,inverse:f,toPoint:d};function c(t,e){return e=e||5,_(g({lat:t[1],lon:t[0]}),e)}function f(t){var e=y(M(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function d(t){var e=y(M(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function p(t){return Math.PI/180*t}function m(t){return t/Math.PI*180}function g(t){var e,i,r,n,o,a,s,l=t.lat,h=t.lon,u=6378137,c=.00669438,f=.9996,d=p(l),m=p(h);s=Math.floor((h+180)/6)+1,180===h&&(s=60),l>=56&&l<64&&h>=3&&h<12&&(s=32),l>=72&&l<84&&(h>=0&&h<9?s=31:h>=9&&h<21?s=33:h>=21&&h<33?s=35:h>=33&&h<42&&(s=37)),a=p((s-1)*6-180+3),e=c/(1-c),i=u/Math.sqrt(1-c*Math.sin(d)*Math.sin(d)),r=Math.tan(d)*Math.tan(d),n=e*Math.cos(d)*Math.cos(d);var g=f*i*((o=Math.cos(d)*(m-a))+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-58*e)*o*o*o*o*o/120)+5e5,y=f*(u*((1-c/4-3*c*c/64-5*c*c*c/256)*d-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*d)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*d)-35*c*c*c/3072*Math.sin(6*d))+i*Math.tan(d)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-330*e)*o*o*o*o*o*o/720));return l<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(g),zoneNumber:s,zoneLetter:v(l)}}function y(t){var e,i,r,n,o,a,s,l,h,u,c=t.northing,f=t.easting,d=t.zoneLetter,p=t.zoneNumber;if(p<0||p>60)return null;var g=.9996,v=6378137,_=.00669438,b=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),x=f-5e5,w=c;d<"N"&&(w-=1e7),s=(p-1)*6-180+3,e=_/(1-_),h=(l=w/g/(v*(1-_/4-3*_*_/64-5*_*_*_/256)))+(3*b/2-27*b*b*b/32)*Math.sin(2*l)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*l)+151*b*b*b/96*Math.sin(6*l),i=v/Math.sqrt(1-_*Math.sin(h)*Math.sin(h)),r=Math.tan(h)*Math.tan(h),n=e*Math.cos(h)*Math.cos(h),o=v*(1-_)/Math.pow(1-_*Math.sin(h)*Math.sin(h),1.5),a=x/(i*g);var M=h-i*Math.tan(h)/o*(a*a/2-(5+3*r+10*n-4*n*n-9*e)*a*a*a*a/24+(61+90*r+298*n+45*r*r-252*e-3*n*n)*a*a*a*a*a*a/720);M=m(M);var S=(a-(1+2*r+n)*a*a*a/6+(5-2*n+28*r-3*n*n+8*e+24*r*r)*a*a*a*a*a/120)/Math.cos(h);if(S=s+m(S),t.accuracy){var k=y({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});u={top:k.lat,right:k.lon,bottom:M,left:S}}else u={lat:M,lon:S};return u}function v(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function _(t,e){var i="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+b(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+r.substr(r.length-5,e)}function b(t,e,i){return w(Math.floor(t/1e5),Math.floor(e/1e5)%20,x(i))}function x(t){var e=t%i;return 0===e&&(e=i),e}function w(t,e,i){var u=i-1,c=r.charCodeAt(u),f=n.charCodeAt(u),d=c+t-1,p=f+e,m=!1;return d>h&&(d=d-h+o-1,m=!0),(d===a||c<a&&d>a||(d>a||c<a)&&m)&&d++,(d===s||c<s&&d>s||(d>s||c<s)&&m)&&++d===a&&d++,d>h&&(d=d-h+o-1),p>l?(p=p-l+o-1,m=!0):m=!1,(p===a||f<a&&p>a||(p>a||f<a)&&m)&&p++,(p===s||f<s&&p>s||(p>s||f<s)&&m)&&++p===a&&p++,p>l&&(p=p-l+o-1),String.fromCharCode(d)+String.fromCharCode(p)}function M(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i,r=t.length,n=null,o="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,a++}var s=parseInt(o,10);if(0===a||a+3>r)throw"MGRSPoint bad conversion from: "+t;var l=t.charAt(a++);if(l<="A"||"B"===l||"Y"===l||l>="Z"||"I"===l||"O"===l)throw"MGRSPoint zone letter "+l+" not handled: "+t;n=t.substring(a,a+=2);for(var h=x(s),u=S(n.charAt(0),h),c=k(n.charAt(1),h);c<E(l);)c+=2e6;var f=r-a;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d=f/2,p=0,m=0;return d>0&&(i=1e5/Math.pow(10,d),p=parseFloat(t.substring(a,a+d))*i,m=parseFloat(t.substring(a+d))*i),{easting:p+u,northing:m+c,zoneLetter:l,zoneNumber:s,accuracy:i}}function S(t,e){for(var i=r.charCodeAt(e-1),n=1e5,l=!1;i!==t.charCodeAt(0);){if(++i===a&&i++,i===s&&i++,i>h){if(l)throw"Bad character: "+t;i=o,l=!0}n+=1e5}return n}function k(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=n.charCodeAt(e-1),r=0,h=!1;i!==t.charCodeAt(0);){if(++i===a&&i++,i===s&&i++,i>l){if(h)throw"Bad character: "+t;i=o,h=!0}r+=1e5}return r}function E(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}}),parcelRegister("7FQTa",function(t,e){$parcel$export(t.exports,"default",()=>N);var i=parcelRequire("cJW9Q"),r=parcelRequire("9fo7k"),n=parcelRequire("cXrAe"),o=parcelRequire("eXSnJ"),a=parcelRequire("iXPB9"),s=parcelRequire("cQT9W"),l=parcelRequire("ePTJQ"),h=parcelRequire("fd7E3"),u=parcelRequire("eoDOL"),c=parcelRequire("iIeR4"),f=parcelRequire("ipoui"),d=parcelRequire("ikfWB"),p=parcelRequire("74hiV"),m=parcelRequire("fxXIO"),g=parcelRequire("8y4Ne"),y=parcelRequire("5Kxvw"),v=parcelRequire("5gGgy"),_=parcelRequire("l9aqp"),b=parcelRequire("fL7Eq"),x=parcelRequire("1ECEl"),w=parcelRequire("5GM1P"),M=parcelRequire("9ukGA"),S=parcelRequire("50bLi"),k=parcelRequire("3EITr"),E=parcelRequire("gZ9np"),I=parcelRequire("l0sB0"),P=parcelRequire("jV3ph"),T=parcelRequire("9SwDK"),A=parcelRequire("j00R0"),C=parcelRequire("8MQko"),R=parcelRequire("9sdbb");function N(t){t.Proj.projections.add(i.default),t.Proj.projections.add(r.default),t.Proj.projections.add(n.default),t.Proj.projections.add(o.default),t.Proj.projections.add(a.default),t.Proj.projections.add(s.default),t.Proj.projections.add(l.default),t.Proj.projections.add(h.default),t.Proj.projections.add(u.default),t.Proj.projections.add(c.default),t.Proj.projections.add(f.default),t.Proj.projections.add(d.default),t.Proj.projections.add(p.default),t.Proj.projections.add(m.default),t.Proj.projections.add(g.default),t.Proj.projections.add(y.default),t.Proj.projections.add(v.default),t.Proj.projections.add(_.default),t.Proj.projections.add(b.default),t.Proj.projections.add(x.default),t.Proj.projections.add(w.default),t.Proj.projections.add(M.default),t.Proj.projections.add(S.default),t.Proj.projections.add(k.default),t.Proj.projections.add(E.default),t.Proj.projections.add(I.default),t.Proj.projections.add(P.default),t.Proj.projections.add(T.default),t.Proj.projections.add(A.default),t.Proj.projections.add(C.default),t.Proj.projections.add(R.default)}}),parcelRegister("cJW9Q",function(t,e){$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("d0869"),r=parcelRequire("lWHR0"),n=parcelRequire("6ZSpg"),o=parcelRequire("idrHz"),a=parcelRequire("bHF3j"),s=parcelRequire("4GFvn"),l={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,i.default)(this.es),this.ml0=(0,r.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n=t.x,s=t.y,l=(0,o.default)(n-this.long0),h=Math.sin(s),u=Math.cos(s);if(this.es){var c=u*l,f=Math.pow(c,2),d=this.ep2*Math.pow(u,2),p=Math.pow(d,2),m=Math.pow(Math.abs(u)>a.EPSLN?Math.tan(s):0,2),g=Math.pow(m,2);c/=Math.sqrt(1-this.es*Math.pow(h,2));var y=(0,r.default)(s,h,u,this.en);e=this.a*(this.k0*c*(1+f/6*(1-m+d+f/20*(5-18*m+g+14*d-58*m*d+f/42*(61+179*g-g*m-479*m)))))+this.x0,i=this.a*(this.k0*(y-this.ml0+h*l*c/2*(1+f/12*(5-m+9*d+4*p+f/30*(61+g-58*m+270*d-330*m*d+f/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var v=u*Math.sin(l);if(Math.abs(Math.abs(v)-1)<a.EPSLN)return 93;if(e=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,(v=Math.abs(i=u*Math.cos(l)/Math.sqrt(1-Math.pow(v,2))))>=1){if(v-1>a.EPSLN)return 93;i=0}else i=Math.acos(i);s<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=e,t.y=i,t},inverse:function(t){var e,i,r,l,h=(t.x-this.x0)*(1/this.a),u=(t.y-this.y0)*(1/this.a);if(this.es){if(e=this.ml0+u/this.k0,Math.abs(i=(0,n.default)(e,this.es,this.en))<a.HALF_PI){var c=Math.sin(i),f=Math.cos(i),d=Math.abs(f)>a.EPSLN?Math.tan(i):0,p=this.ep2*Math.pow(f,2),m=Math.pow(p,2),g=Math.pow(d,2),y=Math.pow(g,2),v=h*Math.sqrt(e=1-this.es*Math.pow(c,2))/this.k0,_=Math.pow(v,2);e*=d,r=i-e*_/(1-this.es)*.5*(1-_/12*(5+3*g-9*p*g+p-4*m-_/30*(61+90*g-252*p*g+45*y+46*p-_/56*(1385+3633*g+4095*y+1574*y*g)))),l=(0,o.default)(this.long0+v*(1-_/6*(1+2*g+p-_/20*(5+28*g+24*y+8*p*g+6*p-_/42*(61+662*g+1320*y+720*y*g))))/f)}else r=a.HALF_PI*(0,s.default)(u),l=0}else{var b=Math.exp(h/this.k0),x=.5*(b-1/b),w=Math.cos(this.lat0+u/this.k0);r=Math.asin(e=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(x,2)))),u<0&&(r=-r),l=0===x&&0===w?0:(0,o.default)(Math.atan2(x,w)+this.long0)}return t.x=l,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]}}),parcelRegister("d0869",function(t,e){$parcel$export(t.exports,"default",()=>p);var i=1,r=.25,n=.046875,o=.01953125,a=.01068115234375,s=.75,l=.46875,h=.013020833333333334,u=.007120768229166667,c=.3645833333333333,f=.005696614583333333,d=.3076171875;function p(t){var e=[];e[0]=i-t*(r+t*(n+t*(o+t*a))),e[1]=t*(s-t*(n+t*(o+t*a)));var p=t*t;return e[2]=p*(l-t*(h+t*u)),p*=t,e[3]=p*(c-t*f),e[4]=p*t*d,e}}),parcelRegister("lWHR0",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e,i,r){return i*=e,e*=e,r[0]*t-i*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}}),parcelRegister("6ZSpg",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("lWHR0"),r=parcelRequire("bHF3j"),n=20;function o(t,e,o){for(var a=1/(1-e),s=t,l=n;l;--l){var h=Math.sin(s),u=1-e*h*h;if(u=((0,i.default)(s,h,Math.cos(s),o)-t)*(u*Math.sqrt(u))*a,s-=u,Math.abs(u)<r.EPSLN)break}return s}}),parcelRegister("9fo7k",function(t,e){$parcel$export(t.exports,"init",()=>u),$parcel$export(t.exports,"forward",()=>c),$parcel$export(t.exports,"inverse",()=>f),$parcel$export(t.exports,"names",()=>d),$parcel$export(t.exports,"default",()=>p);var i=parcelRequire("cJW9Q"),r=parcelRequire("YuxPp"),n=parcelRequire("jYRKv"),o=parcelRequire("eir9M"),a=parcelRequire("coVjF"),s=parcelRequire("cIFdk"),l=parcelRequire("8w4sA"),h=parcelRequire("idrHz");function u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&((0,i.default).init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+-2854/675*e))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+4642/4725*e))))),r*=e,this.cgb[1]=r*(7/3+e*(-1.6+e*(-227/45+e*(2704/315+2323/945*e)))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+-1522/945*e)))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+73814/2835*e))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+-12686/2835*e))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+-399572/14175*e)),this.cbg[3]=r*(1237/630+e*(-2.4+-24832/14175*e)),r*=e,this.cgb[4]=r*(4174/315+-144838/6237*e),this.cbg[4]=r*(-734/315+109598/31185*e),r*=e,this.cgb[5]=601676/22275*r,this.cbg[5]=444337/155925*r,r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+-96199/604800*e))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+7891/37800*e))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+1118711/3870720*e)))),this.gtu[1]=r*(13/48+e*(-.6+e*(557/1440+e*(281/630+-1983433/1935360*e)))),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+-5569/90720*e))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+167603/181440*e))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+830251/7257600*e)),this.gtu[3]=r*(49561/161280+e*(-179/168+6601661/7257600*e)),r*=e,this.utg[4]=r*(-4583/161280+108847/3991680*e),this.gtu[4]=r*(34729/80640+-3418889/1995840*e),r*=e,this.utg[5]=-20648693/638668800*r,this.gtu[5]=.6650675310896665*r;var n=(0,a.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(n+(0,s.default)(this.gtu,2*n))}function c(t){var e,i,r=(0,h.default)(t.x-this.long0),s=t.y,u=Math.sin(s=(0,a.default)(this.cbg,s)),c=Math.cos(s),f=Math.sin(r),d=Math.cos(r);s=Math.atan2(u,d*c),r=Math.atan2(f*c,(0,n.default)(u,c*d)),r=(0,o.default)(Math.tan(r));var p=(0,l.default)(this.gtu,2*s,2*r);return s+=p[0],2.623395162778>=Math.abs(r+=p[1])?(e=this.a*(this.Qn*r)+this.x0,i=this.a*(this.Qn*s+this.Zb)+this.y0):(e=1/0,i=1/0),t.x=e,t.y=i,t}function f(t){var e,i,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,2.623395162778>=Math.abs(o/=this.Qn)){var u=(0,l.default)(this.utg,2*s,2*o);s+=u[0],o+=u[1],o=Math.atan((0,r.default)(o));var c=Math.sin(s),f=Math.cos(s),d=Math.sin(o),p=Math.cos(o);s=Math.atan2(c*p,(0,n.default)(d,p*f)),o=Math.atan2(d,p*f),e=(0,h.default)(o+this.long0),i=(0,a.default)(this.cgb,s)}else e=1/0,i=1/0;return t.x=e,t.y=i,t}var d=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],p={init:u,forward:c,inverse:f,names:d}}),parcelRegister("YuxPp",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){var e=Math.exp(t);return(e-1/e)/2}}),parcelRegister("jYRKv",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e){var i=Math.max(t=Math.abs(t),e=Math.abs(e)),r=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}}),parcelRegister("eir9M",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("jYRKv"),r=parcelRequire("gwBKH");function n(t){var e=Math.abs(t);return e=(0,r.default)(e*(1+e/((0,i.default)(1,e)+1))),t<0?-e:e}}),parcelRegister("gwBKH",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}}),parcelRegister("coVjF",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e){for(var i,r=2*Math.cos(2*e),n=t.length-1,o=t[n],a=0;--n>=0;)i=-a+r*o+t[n],a=o,o=i;return e+i*Math.sin(2*e)}}),parcelRegister("cIFdk",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e){for(var i,r=2*Math.cos(e),n=t.length-1,o=t[n],a=0;--n>=0;)i=-a+r*o+t[n],a=o,o=i;return Math.sin(e)*i}}),parcelRegister("8w4sA",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("YuxPp"),r=parcelRequire("88Ys1");function n(t,e,n){for(var o,a,s=Math.sin(e),l=Math.cos(e),h=(0,i.default)(n),u=(0,r.default)(n),c=2*l*u,f=-2*s*h,d=t.length-1,p=t[d],m=0,g=0,y=0;--d>=0;)o=g,a=m,p=-o+c*(g=p)-f*(m=y)+t[d],y=-a+f*g+c*m;return[(c=s*u)*p-(f=l*h)*y,c*y+f*p]}}),parcelRegister("88Ys1",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){var e=Math.exp(t);return(e+1/e)/2}}),parcelRegister("cXrAe",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("5cAnT"),r=parcelRequire("9fo7k"),n=parcelRequire("bHF3j"),o={init:function(){var t=(0,i.default)(this.zone,this.long0);if(void 0===t)throw Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*n.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,(0,r.default).init.apply(this),this.forward=r.default.forward,this.inverse=r.default.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"}}),parcelRegister("5cAnT",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("idrHz");function r(t,e){if(void 0===t){if((t=Math.floor(((0,i.default)(e)+Math.PI)*30/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}}),parcelRegister("eXSnJ",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("8akn4"),r=parcelRequire("idrHz"),n=parcelRequire("jYRKv"),o={init:function(){(0,i.default).init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,o,a;return t.x=(0,r.default)(t.x-this.long0),(0,i.default).forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,o,a,s,l;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,l=(0,n.default)(t.x,t.y)){var h=2*Math.atan2(l,this.R2);e=Math.sin(h),s=Math.asin((o=Math.cos(h))*this.sinc0+t.y*e*this.cosc0/l),a=Math.atan2(t.x*e,l*this.cosc0*o-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,(0,i.default).inverse.apply(this,[t]),t.x=(0,r.default)(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]}}),parcelRegister("8akn4",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("l9vm5"),r=parcelRequire("bHF3j"),n=20,o={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+r.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+r.FORTPI),this.C)*(0,i.default)(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+r.FORTPI),this.C)*(0,i.default)(this.e*Math.sin(n),this.ratexp))-r.HALF_PI,t.x=this.C*e,t},inverse:function(t){for(var e=1e-14,o=t.x/this.C,a=t.y,s=Math.pow(Math.tan(.5*a+r.FORTPI)/this.K,1/this.C),l=n;l>0&&!(Math.abs((a=2*Math.atan(s*(0,i.default)(this.e*Math.sin(t.y),-.5*this.e))-r.HALF_PI)-t.y)<e);--l)t.y=a;return l?(t.x=o,t.y=a,t):null},names:["gauss"]}}),parcelRegister("l9vm5",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e){return Math.pow((1-t)/(1+t),e)}}),parcelRegister("iXPB9",function(t,e){$parcel$export(t.exports,"ssfn_",()=>l),$parcel$export(t.exports,"init",()=>h),$parcel$export(t.exports,"forward",()=>u),$parcel$export(t.exports,"inverse",()=>c),$parcel$export(t.exports,"names",()=>f),$parcel$export(t.exports,"default",()=>d);var i=parcelRequire("bHF3j"),r=parcelRequire("4GFvn"),n=parcelRequire("5KZDk"),o=parcelRequire("51dWf"),a=parcelRequire("dkHfn"),s=parcelRequire("idrHz");function l(t,e,r){return e*=r,Math.tan(.5*(i.HALF_PI+t))*Math.pow((1-e)/(1+e),.5*r)}function h(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.EPSLN&&(this.k0=.5*(1+(0,r.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=i.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.EPSLN&&Math.abs(Math.cos(this.lat_ts))>i.EPSLN&&(this.k0=.5*this.cons*(0,n.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,o.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,n.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function u(t){var e,r,n,a,l,h,u=t.x,c=t.y,f=Math.sin(c),d=Math.cos(c),p=(0,s.default)(u-this.long0);if(Math.abs(Math.abs(u-this.long0)-Math.PI)<=i.EPSLN&&Math.abs(c+this.lat0)<=i.EPSLN)return t.x=NaN,t.y=NaN,t;if(this.sphere)e=2*this.k0/(1+this.sinlat0*f+this.coslat0*d*Math.cos(p)),t.x=this.a*e*d*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*d*Math.cos(p))+this.y0;else{if(a=Math.cos(r=2*Math.atan(this.ssfn_(c,f,this.e))-i.HALF_PI),n=Math.sin(r),Math.abs(this.coslat0)<=i.EPSLN)return l=(0,o.default)(this.e,c*this.con,this.con*f),h=2*this.a*this.k0*l/this.cons,t.x=this.x0+h*Math.sin(u-this.long0),t.y=this.y0-this.con*h*Math.cos(u-this.long0),t;Math.abs(this.sinlat0)<i.EPSLN?(e=2*this.a*this.k0/(1+a*Math.cos(p)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*a*Math.cos(p))),t.y=e*(this.cosX0*n-this.sinX0*a*Math.cos(p))+this.y0),t.x=e*a*Math.sin(p)+this.x0}return t}function c(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,o,l,h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(h/(2*this.a*this.k0));return e=this.long0,r=this.lat0,h<=i.EPSLN||(r=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/h),e=Math.abs(this.coslat0)<i.EPSLN?this.lat0>0?(0,s.default)(this.long0+Math.atan2(t.x,-1*t.y)):(0,s.default)(this.long0+Math.atan2(t.x,t.y)):(0,s.default)(this.long0+Math.atan2(t.x*Math.sin(u),h*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u)))),t.x=e,t.y=r,t}if(Math.abs(this.coslat0)<=i.EPSLN){if(h<=i.EPSLN)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=h*this.cons/(2*this.a*this.k0),r=this.con*(0,a.default)(this.e,n),e=this.con*(0,s.default)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,h<=i.EPSLN?l=this.X0:(l=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/h),e=(0,s.default)(this.long0+Math.atan2(t.x*Math.sin(o),h*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*(0,a.default)(this.e,Math.tan(.5*(i.HALF_PI+l)));return t.x=e,t.y=r,t}var f=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],d={init:h,forward:u,inverse:c,names:f,ssfn_:l}}),parcelRegister("cQT9W",function(t,e){$parcel$export(t.exports,"default",()=>i);var i={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,r=1/this.rf,n=2*r-Math.pow(r,2),o=this.e=Math.sqrt(n);this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=2*(Math.atan(Math.exp(-this.alpha*(e+i)+this.K))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(n))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(n));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,r=e/this.R,n=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),s=this.lambda0+a/this.alpha,l=0,h=o,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=h,t},names:["somerc"]}}),parcelRegister("ePTJQ",function(t,e){$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("51dWf"),r=parcelRequire("idrHz"),n=parcelRequire("dkHfn"),o=parcelRequire("bHF3j"),a=1e-7;function s(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==e.indexOf(i)}var l={init:function(){var t,e,n,l,h,u,c,f,d,p,m,g,y=0,v=0,_=0,b=0,x=0,w=0,M=0;this.no_off=s(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var k=!1;if("rectified_grid_angle"in this&&(k=!0),S&&(M=this.alpha),k&&(y=this.rectified_grid_angle*o.D2R),S||k)v=this.longc;else if(_=this.long1,x=this.lat1,b=this.long2,Math.abs(x-(w=this.lat2))<=a||(t=Math.abs(x))<=a||Math.abs(t-o.HALF_PI)<=a||Math.abs(Math.abs(this.lat0)-o.HALF_PI)<=a||Math.abs(Math.abs(w)-o.HALF_PI)<=a)throw Error();var E=1-this.es;e=Math.sqrt(E),Math.abs(this.lat0)>o.EPSLN?(f=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*f*f,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*e/t,(h=(l=this.B*e/(n*Math.sqrt(t)))*l-1)<=0?h=0:(h=Math.sqrt(h),this.lat0<0&&(h=-h)),this.E=h+=l,this.E*=Math.pow((0,i.default)(this.e,this.lat0,f),this.B)):(this.B=1/e,this.A=this.k0,this.E=l=h=1),S||k?(S?(m=Math.asin(Math.sin(M)/l),k||(y=M)):M=Math.asin(l*Math.sin(m=y)),this.lam0=v-Math.asin(.5*(h-1/h)*Math.tan(m))/this.B):(u=Math.pow((0,i.default)(this.e,x,Math.sin(x)),this.B),c=Math.pow((0,i.default)(this.e,w,Math.sin(w)),this.B),h=this.E/u,d=(c-u)/(c+u),p=((p=this.E*this.E)-c*u)/(p+c*u),(t=_-b)<-Math.pi?b-=o.TWO_PI:t>Math.pi&&(b+=o.TWO_PI),this.lam0=(0,r.default)(.5*(_+b)-Math.atan(p*Math.tan(.5*this.B*(_-b))/d)/this.B),y=M=Math.asin(l*Math.sin(m=Math.atan(2*Math.sin(this.B*(0,r.default)(_-this.lam0))/(h-1/h))))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,g=this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(l*l-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),h=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(o.FORTPI-h)),this.v_pole_s=this.ArB*Math.log(Math.tan(o.FORTPI+h))},forward:function(t){var e,r,n,s,l,h,u,c,f={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-o.HALF_PI)>o.EPSLN){if(h=1/(l=this.E/Math.pow((0,i.default)(this.e,t.y,Math.sin(t.y)),this.B)),e=.5*(l-h),r=.5*(l+h),s=Math.sin(this.B*t.x),Math.abs(Math.abs(n=(e*this.singam-s*this.cosgam)/r)-1)<o.EPSLN)throw Error();c=.5*this.ArB*Math.log((1-n)/(1+n)),u=Math.abs(h=Math.cos(this.B*t.x))<a?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+s*this.singam,h)}else c=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(f.x=u,f.y=c):(u-=this.u_0,f.x=c*this.cosrot+u*this.sinrot,f.y=u*this.cosrot-c*this.sinrot),f.x=this.a*f.x+this.x0,f.y=this.a*f.y+this.y0,f},inverse:function(t){var e,i,r,a,s,l,h,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=.5*((r=Math.exp(-this.BrA*i))-1/r),s=.5*(r+1/r),Math.abs(Math.abs(h=((l=Math.sin(this.BrA*e))*this.cosgam+a*this.singam)/s)-1)<o.EPSLN)u.x=0,u.y=h<0?-o.HALF_PI:o.HALF_PI;else{if(u.y=this.E/Math.sqrt((1+h)/(1-h)),u.y=(0,n.default)(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw Error();u.x=-this.rB*Math.atan2(a*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]}}),parcelRegister("fd7E3",function(t,e){$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("5KZDk"),r=parcelRequire("51dWf"),n=parcelRequire("4GFvn"),o=parcelRequire("idrHz"),a=parcelRequire("dkHfn"),s=parcelRequire("bHF3j"),l={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<s.EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=(0,i.default)(this.e,e,n),a=(0,r.default)(this.e,this.lat1,e),l=Math.sin(this.lat2),h=Math.cos(this.lat2),u=(0,i.default)(this.e,l,h),c=(0,r.default)(this.e,this.lat2,l),f=(0,r.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>s.EPSLN?this.ns=Math.log(o/u)/Math.log(a/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e,i,a=t.x,l=t.y;Math.abs(2*Math.abs(l)-Math.PI)<=s.EPSLN&&(l=(0,n.default)(l)*(s.HALF_PI-2*s.EPSLN));var h=Math.abs(Math.abs(l)-s.HALF_PI);if(h>s.EPSLN)e=(0,r.default)(this.e,l,Math.sin(l)),i=this.a*this.f0*Math.pow(e,this.ns);else{if((h=l*this.ns)<=0)return null;i=0}var u=this.ns*(0,o.default)(a-this.long0);return t.x=this.k0*(i*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(u))+this.y0,t},inverse:function(t){var e,i,r,n,l,h=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(h*h+u*u),i=1):(e=-Math.sqrt(h*h+u*u),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*h,i*u)),0!==e||this.ns>0){if(i=1/this.ns,r=Math.pow(e/(this.a*this.f0),i),-9999===(n=(0,a.default)(this.e,r)))return null}else n=-s.HALF_PI;return l=(0,o.default)(c/this.ns+this.long0),t.x=l,t.y=n,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]}}),parcelRegister("eoDOL",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("idrHz"),r={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,o,a,s,l,h=t.x,u=t.y,c=(0,i.default)(h-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),a=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=l*Math.cos(s)/1,t.x=l*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,r,n,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,s=0;var h=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),1e-10>Math.abs(a-t.y)&&(s=1),a=t.y,h+=1;while(0===s&&h<15)return h>=15?null:t},names:["Krovak","krovak"]}}),parcelRegister("iIeR4",function(t,e){$parcel$export(t.exports,"default",()=>f);var i=parcelRequire("8ESoG"),r=parcelRequire("cTnRT"),n=parcelRequire("kSWjW"),o=parcelRequire("3vw6U"),a=parcelRequire("c2AxB"),s=parcelRequire("6uFuh"),l=parcelRequire("idrHz"),h=parcelRequire("jyYmi"),u=parcelRequire("atdXq"),c=parcelRequire("bHF3j"),f={init:function(){this.sphere||(this.e0=(0,r.default)(this.es),this.e1=(0,n.default)(this.es),this.e2=(0,o.default)(this.es),this.e3=(0,a.default)(this.es),this.ml0=this.a*(0,i.default)(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,o=t.y;if(n=(0,l.default)(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var a=Math.sin(o),h=Math.cos(o),u=(0,s.default)(this.a,this.e,a),c=Math.tan(o)*Math.tan(o),f=n*Math.cos(o),d=f*f,p=this.es*h*h/(1-this.es),m=this.a*(0,i.default)(this.e0,this.e1,this.e2,this.e3,o);e=u*f*(1-d*c*(1/6-(8-c+8*p)*d/120)),r=m-this.ml0+u*a/h*d*(.5+(5-c+6*p)*d/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,r=t.x/this.a,n=t.y/this.a;if(this.sphere){var o=n+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),i=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+n,f=(0,u.default)(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-c.HALF_PI)<=c.EPSLN)return t.x=this.long0,t.y=c.HALF_PI,n<0&&(t.y*=-1),t;var d=(0,s.default)(this.a,this.e,Math.sin(f)),p=d*d*d/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(f),2),g=r*this.a/d,y=g*g;e=f-d*Math.tan(f)/p*g*g*(.5-(1+3*m)*g*g/24),i=g*(1-y*(m/3+(1+3*m)*m*y/15))/Math.cos(f)}return t.x=(0,l.default)(i+this.long0),t.y=(0,h.default)(e),t},names:["Cassini","Cassini_Soldner","cass"]}}),parcelRegister("8ESoG",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e,i,r,n){return t*n-e*Math.sin(2*n)+i*Math.sin(4*n)-r*Math.sin(6*n)}}),parcelRegister("cTnRT",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){return 1-.25*t*(1+t/16*(3+1.25*t))}}),parcelRegister("kSWjW",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){return .375*t*(1+.25*t*(1+.46875*t))}}),parcelRegister("3vw6U",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){return .05859375*t*t*(1+.75*t)}}),parcelRegister("c2AxB",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){return t*t*t*(35/3072)}}),parcelRegister("6uFuh",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e,i){var r=e*i;return t/Math.sqrt(1-r*r)}}),parcelRegister("jyYmi",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("bHF3j"),r=parcelRequire("4GFvn");function n(t){return Math.abs(t)<i.HALF_PI?t:t-(0,r.default)(t)*Math.PI}}),parcelRegister("atdXq",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e,i,r,n){o=t/e;for(var o,a,s=0;s<15;s++)if(a=(t-(e*o-i*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)))/(e-2*i*Math.cos(2*o)+4*r*Math.cos(4*o)-6*n*Math.cos(6*o)),o+=a,1e-10>=Math.abs(a))return o;return NaN}}),parcelRegister("ipoui",function(t,e){$parcel$export(t.exports,"S_POLE",()=>o),$parcel$export(t.exports,"N_POLE",()=>a),$parcel$export(t.exports,"EQUIT",()=>s),$parcel$export(t.exports,"OBLIQ",()=>l),$parcel$export(t.exports,"init",()=>h),$parcel$export(t.exports,"forward",()=>u),$parcel$export(t.exports,"inverse",()=>c),$parcel$export(t.exports,"names",()=>b),$parcel$export(t.exports,"default",()=>x);var i=parcelRequire("bHF3j"),r=parcelRequire("lA0h9"),n=parcelRequire("idrHz"),o=1,a=2,s=3,l=4;function h(){var t,e=Math.abs(this.lat0);if(Math.abs(e-i.HALF_PI)<i.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<i.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,r.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=v(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=(0,r.default)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function u(t){var e,o,a,s,l,h,u,c,f,d,p=t.x,m=t.y;if(p=(0,n.default)(p-this.long0),this.sphere){if(l=Math.sin(m),d=Math.cos(m),a=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((o=this.mode===this.EQUIT?1+d*a:1+this.sinph0*l+this.cosph0*d*a)<=i.EPSLN)return null;e=(o=Math.sqrt(2/o))*d*Math.sin(p),o*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(m+this.lat0)<i.EPSLN)return null;o=i.FORTPI-.5*m,e=(o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)))*Math.sin(p),o*=a}}else{switch(u=0,c=0,f=0,a=Math.cos(p),s=Math.sin(p),l=Math.sin(m),h=(0,r.default)(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=Math.sqrt(1-(u=h/this.qp)*u)),this.mode){case this.OBLIQ:f=1+this.sinb1*u+this.cosb1*c*a;break;case this.EQUIT:f=1+c*a;break;case this.N_POLE:f=i.HALF_PI+m,h=this.qp-h;break;case this.S_POLE:f=m-i.HALF_PI,h=this.qp+h}if(Math.abs(f)<i.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),o=this.mode===this.OBLIQ?this.ymf*f*(this.cosb1*u-this.sinb1*c*a):(f=Math.sqrt(2/(1+c*a)))*u*this.ymf,e=this.xmf*f*c*s;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(f=Math.sqrt(h))*s,o=a*(this.mode===this.S_POLE?f:-f)):e=o=0}}return t.x=this.a*e+this.x0,t.y=this.a*o+this.y0,t}function c(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a;if(this.sphere){var o,a,s,l,h,u,c,f,d=0,p=0;if((a=.5*(f=Math.sqrt(e*e+r*r)))>1)return null;switch(a=2*Math.asin(a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(a),d=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(f)<=i.EPSLN?0:Math.asin(r*p/f),e*=p,r=d*f;break;case this.OBLIQ:a=Math.abs(f)<=i.EPSLN?this.lat0:Math.asin(d*this.sinph0+r*p*this.cosph0/f),e*=p*this.cosph0,r=(d-Math.sin(a)*this.sinph0)*f;break;case this.N_POLE:r=-r,a=i.HALF_PI-a;break;case this.S_POLE:a-=i.HALF_PI}o=0===r&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,(u=Math.sqrt(e*e+r*r))<i.EPSLN)return t.x=this.long0,t.y=this.lat0,t;s=Math.cos(l=2*Math.asin(.5*u/this.rq)),e*=l=Math.sin(l),this.mode===this.OBLIQ?(c=s*this.sinb1+r*l*this.cosb1/u,h=this.qp*c,r=u*this.cosb1*s-r*this.sinb1*l):(c=r*l/u,h=this.qp*c,r=u*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),!(h=e*e+r*r))return t.x=this.long0,t.y=this.lat0,t;c=1-h/this.qp,this.mode===this.S_POLE&&(c=-c)}o=Math.atan2(e,r),a=_(Math.asin(c),this.apa)}return t.x=(0,n.default)(this.long0+o),t.y=a,t}var f=.3333333333333333,d=.17222222222222222,p=.10257936507936508,m=.06388888888888888,g=.0664021164021164,y=.016415012942191543;function v(t){var e,i=[];return i[0]=t*f,e=t*t,i[0]+=e*d,i[1]=e*m,e*=t,i[0]+=e*p,i[1]+=e*g,i[2]=e*y,i}function _(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var b=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],x={init:h,forward:u,inverse:c,names:b,S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}}),parcelRegister("lA0h9",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}}),parcelRegister("ikfWB",function(t,e){$parcel$export(t.exports,"init",()=>s),$parcel$export(t.exports,"forward",()=>l),$parcel$export(t.exports,"inverse",()=>h),$parcel$export(t.exports,"phi1z",()=>u),$parcel$export(t.exports,"names",()=>c),$parcel$export(t.exports,"default",()=>f);var i=parcelRequire("5KZDk"),r=parcelRequire("lA0h9"),n=parcelRequire("idrHz"),o=parcelRequire("j2DHH"),a=parcelRequire("bHF3j");function s(){Math.abs(this.lat1+this.lat2)<a.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,i.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,r.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,i.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,r.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,r.default)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>a.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function l(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var o=(0,r.default)(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,s=this.ns0*(0,n.default)(e-this.long0),l=a*Math.sin(s)+this.x0,h=this.rh-a*Math.cos(s)+this.y0;return t.x=l,t.y=h,t}function h(t){var e,i,r,o,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),o=0,0!==e&&(o=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,i)),a=(0,n.default)(o/this.ns0+this.long0),t.x=a,t.y=s,t}function u(t,e){var i,r,n,s,l,h=(0,o.default)(.5*e);if(t<a.EPSLN)return h;for(var u=t*t,c=1;c<=25;c++)if(i=Math.sin(h),r=Math.cos(h),h+=l=.5*(s=1-(n=t*i)*n)*s/r*(e/(1-u)-i/s+.5/t*Math.log((1-n)/(1+n))),1e-7>=Math.abs(l))return h;return null}var c=["Albers_Conic_Equal_Area","Albers","aea"],f={init:s,forward:l,inverse:h,names:c,phi1z:u}}),parcelRegister("j2DHH",function(t,e){$parcel$export(t.exports,"default",()=>i);function i(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}}),parcelRegister("74hiV",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("idrHz"),r=parcelRequire("j2DHH"),n=parcelRequire("bHF3j"),o={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,o,a,s,l,h,u,c=t.x,f=t.y;return o=(0,i.default)(c-this.long0),e=Math.sin(f),r=Math.cos(f),a=Math.cos(o),l=this.sin_p14*e+this.cos_p14*r*a,s=1,l>0||Math.abs(l)<=n.EPSLN?(h=this.x0+this.a*s*r*Math.sin(o)/l,u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*r*a)/l):(h=this.x0+this.infinity_dist*r*Math.sin(o),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*a)),t.x=h,t.y=u,t},inverse:function(t){var e,n,o,a,s,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.sin(a=Math.atan2(e,this.rc)),o=Math.cos(a),l=(0,r.default)(o*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),s=(0,i.default)(this.long0+s)):(l=this.phic0,s=0),t.x=s,t.y=l,t},names:["gnom"]}}),parcelRegister("fxXIO",function(t,e){$parcel$export(t.exports,"default",()=>a);var i=parcelRequire("idrHz"),r=parcelRequire("lA0h9"),n=parcelRequire("5KZDk"),o=parcelRequire("qAL3h"),a={init:function(){this.sphere||(this.k0=(0,n.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,o=t.x,a=t.y,s=(0,i.default)(o-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var l=(0,r.default)(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*l*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,i.default)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=(0,o.default)(this.e,2*t.y*this.k0/this.a),e=(0,i.default)(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]}}),parcelRegister("qAL3h",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("bHF3j");function r(t,e){if(1e-6>Math.abs(Math.abs(e)-(1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t)))))return e<0?-1*i.HALF_PI:i.HALF_PI;for(var r,n,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(n=Math.sin(s),o=Math.cos(s),s+=r=Math.pow(1-(a=t*n)*a,2)/(2*o)*(e/(1-t*t)-n/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),1e-10>=Math.abs(r))return s;return NaN}}),parcelRegister("8y4Ne",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("idrHz"),r=parcelRequire("jyYmi"),n={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,o=(0,i.default)(e-this.long0),a=(0,r.default)(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t},inverse:function(t){var e=t.x,n=t.y;return t.x=(0,i.default)(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=(0,r.default)(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]}}),parcelRegister("5Kxvw",function(t,e){$parcel$export(t.exports,"default",()=>f);var i=parcelRequire("cTnRT"),r=parcelRequire("kSWjW"),n=parcelRequire("3vw6U"),o=parcelRequire("c2AxB"),a=parcelRequire("idrHz"),s=parcelRequire("jyYmi"),l=parcelRequire("8ESoG"),h=parcelRequire("bHF3j"),u=parcelRequire("6uFuh"),c=20,f={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,i.default)(this.es),this.e1=(0,r.default)(this.es),this.e2=(0,n.default)(this.es),this.e3=(0,o.default)(this.es),this.ml0=this.a*(0,l.default)(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,r,n=t.x,o=t.y,c=(0,a.default)(n-this.long0);if(r=c*Math.sin(o),this.sphere)Math.abs(o)<=h.EPSLN?(e=this.a*c,i=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),i=this.a*((0,s.default)(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=h.EPSLN)e=this.a*c,i=-1*this.ml0;else{var f=(0,u.default)(this.a,this.e,Math.sin(o))/Math.tan(o);e=f*Math.sin(r),i=this.a*(0,l.default)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+f*(1-Math.cos(r))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,r,n,o,s,u,f,d,p,m,g,y,v,_;if(r=t.x-this.x0,n=t.y-this.y0,this.sphere){if(Math.abs(n+this.a*this.lat0)<=h.EPSLN)e=(0,a.default)(r/this.a+this.long0),i=0;else{for(s=this.lat0+n/this.a,u=r*r/this.a/this.a+s*s,f=s,o=c;o;--o)if(p=Math.tan(f),d=-1*(s*(f*p+1)-f-.5*(f*f+u)*p)/((f-s)/p-1),f+=d,Math.abs(d)<=h.EPSLN){i=f;break}e=(0,a.default)(this.long0+Math.asin(r*Math.tan(f)/this.a)/Math.sin(i))}}else if(Math.abs(n+this.ml0)<=h.EPSLN)i=0,e=(0,a.default)(this.long0+r/this.a);else{for(s=(this.ml0+n)/this.a,u=r*r/this.a/this.a+s*s,f=s,o=c;o;--o)if(m=Math.sqrt(1-(_=this.e*Math.sin(f))*_)*Math.tan(f),g=this.a*(0,l.default)(this.e0,this.e1,this.e2,this.e3,f),y=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),d=(s*(m*(v=g/this.a)+1)-v-.5*m*(v*v+u))/(this.es*Math.sin(2*f)*(v*v+u-2*s*v)/(4*m)+(s-v)*(m*y-2/Math.sin(2*f))-y),f-=d,Math.abs(d)<=h.EPSLN){i=f;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=(0,a.default)(this.long0+Math.asin(r*m/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]}}),parcelRegister("5gGgy",function(t,e){$parcel$export(t.exports,"iterations",()=>r),$parcel$export(t.exports,"init",()=>n),$parcel$export(t.exports,"forward",()=>o),$parcel$export(t.exports,"inverse",()=>a),$parcel$export(t.exports,"names",()=>s),$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("bHF3j"),r=1;function n(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-.00034,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function o(t){var e,r,n,o=t.x,a=t.y-this.lat0,s=o-this.long0,l=a/i.SEC_TO_RAD*1e-5,h=s,u=1,c=0;for(e=1;e<=10;e++)u*=l,c+=this.A[e]*u;var f=c,d=h,p=1,m=0,g=0,y=0;for(e=1;e<=6;e++)r=p*f-m*d,n=m*f+p*d,p=r,m=n,g=g+this.B_re[e]*p-this.B_im[e]*m,y=y+this.B_im[e]*p+this.B_re[e]*m;return t.x=y*this.a+this.x0,t.y=g*this.a+this.y0,t}function a(t){var e=t.x,r=t.y,n=e-this.x0,o=(r-this.y0)/this.a,a=n/this.a,s=1,l=0,h=0,u=0;for(f=1;f<=6;f++)d=s*o-l*a,p=l*o+s*a,s=d,l=p,h=h+this.C_re[f]*s-this.C_im[f]*l,u=u+this.C_im[f]*s+this.C_re[f]*l;for(var c=0;c<this.iterations;c++){var f,d,p,m,g,y=h,v=u,_=o,b=a;for(f=2;f<=6;f++)m=y*h-v*u,g=v*h+y*u,y=m,v=g,_+=(f-1)*(this.B_re[f]*y-this.B_im[f]*v),b+=(f-1)*(this.B_im[f]*y+this.B_re[f]*v);y=1,v=0;var x=this.B_re[1],w=this.B_im[1];for(f=2;f<=6;f++)m=y*h-v*u,g=v*h+y*u,y=m,v=g,x+=f*(this.B_re[f]*y-this.B_im[f]*v),w+=f*(this.B_im[f]*y+this.B_re[f]*v);var M=x*x+w*w;h=(_*x+b*w)/M,u=(b*x-_*w)/M}var S=h,k=u,E=1,I=0;for(f=1;f<=9;f++)E*=S,I+=this.D[f]*E;var P=this.lat0+I*i.SEC_TO_RAD*1e5,T=this.long0+k;return t.x=T,t.y=P,t}var s=["New_Zealand_Map_Grid","nzmg"],l={init:n,forward:o,inverse:a,names:s}}),parcelRegister("l9aqp",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("idrHz"),r={init:function(){},forward:function(t){var e=t.x,r=t.y,n=(0,i.default)(e-this.long0),o=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=(0,i.default)(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]}}),parcelRegister("fL7Eq",function(t,e){$parcel$export(t.exports,"default",()=>u);var i=parcelRequire("idrHz"),r=parcelRequire("jyYmi"),n=parcelRequire("d0869"),o=parcelRequire("lWHR0"),a=parcelRequire("6ZSpg"),s=parcelRequire("bHF3j"),l=parcelRequire("j2DHH"),h=20,u={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,n.default)(this.es)},forward:function(t){var e,r,n=t.x,a=t.y;if(n=(0,i.default)(n-this.long0),this.sphere){if(this.m)for(var l=this.n*Math.sin(a),u=h;u;--u){var c=(this.m*a+Math.sin(a)-l)/(this.m+Math.cos(a));if(a-=c,Math.abs(c)<s.EPSLN)break}else a=1!==this.n?Math.asin(this.n*Math.sin(a)):a;e=this.a*this.C_x*n*(this.m+Math.cos(a)),r=this.a*this.C_y*a}else{var f=Math.sin(a),d=Math.cos(a);r=this.a*(0,o.default)(a,f,d,this.en),e=this.a*n*d/Math.sqrt(1-this.es*f*f)}return t.x=e,t.y=r,t},inverse:function(t){var e,n,o,h;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,l.default)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,l.default)(Math.sin(e)/this.n)),o=(0,i.default)(o+this.long0),e=(0,r.default)(e)):(h=Math.abs(e=(0,a.default)(t.y/this.a,this.es,this.en)))<s.HALF_PI?(h=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*h*h)/(this.a*Math.cos(e)),o=(0,i.default)(n)):h-s.EPSLN<s.HALF_PI&&(o=this.long0),t.x=o,t.y=e,t},names:["Sinusoidal","sinu"]}}),parcelRegister("1ECEl",function(t,e){$parcel$export(t.exports,"default",()=>n);var i=parcelRequire("idrHz"),r=parcelRequire("bHF3j"),n={init:function(){},forward:function(t){for(var e=t.x,n=t.y,o=(0,i.default)(e-this.long0),a=n,s=Math.PI*Math.sin(n);;){var l=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=l,Math.abs(l)<r.EPSLN)break}a/=2,Math.PI/2-Math.abs(n)<r.EPSLN&&(o=0);var h=.900316316158*this.a*o*Math.cos(a)+this.x0,u=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=h,t.y=u,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0,Math.abs(r=t.y/(1.4142135623731*this.a))>.999999999999&&(r=.999999999999),e=Math.asin(r);var e,r,n=(0,i.default)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),Math.abs(r=(2*e+Math.sin(2*e))/Math.PI)>1&&(r=1);var o=Math.asin(r);return t.x=n,t.y=o,t},names:["Mollweide","moll"]}}),parcelRegister("5GM1P",function(t,e){$parcel$export(t.exports,"default",()=>f);var i=parcelRequire("cTnRT"),r=parcelRequire("kSWjW"),n=parcelRequire("3vw6U"),o=parcelRequire("c2AxB"),a=parcelRequire("5KZDk"),s=parcelRequire("8ESoG"),l=parcelRequire("idrHz"),h=parcelRequire("jyYmi"),u=parcelRequire("atdXq"),c=parcelRequire("bHF3j"),f={init:function(){Math.abs(this.lat1+this.lat2)<c.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,i.default)(this.es),this.e1=(0,r.default)(this.es),this.e2=(0,n.default)(this.es),this.e3=(0,o.default)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,a.default)(this.e,this.sinphi,this.cosphi),this.ml1=(0,s.default)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<c.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,a.default)(this.e,this.sinphi,this.cosphi),this.ml2=(0,s.default)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,s.default)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var n=(0,s.default)(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-n)}var o=this.ns*(0,l.default)(i-this.long0),a=this.x0+e*Math.sin(o),h=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=h,t},inverse:function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var e,i,r,n,o=0;if(0!==i&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return n=(0,l.default)(this.long0+o/this.ns),r=(0,h.default)(this.g-i/this.a),t.x=n,t.y=r,t;var a=this.g-i/this.a;return r=(0,u.default)(a,this.e0,this.e1,this.e2,this.e3),n=(0,l.default)(this.long0+o/this.ns),t.x=n,t.y=r,t},names:["Equidistant_Conic","eqdc"]}}),parcelRegister("9ukGA",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("idrHz"),r=parcelRequire("bHF3j"),n=parcelRequire("j2DHH"),o={init:function(){this.R=this.a},forward:function(t){var e,o,a=t.x,s=t.y,l=(0,i.default)(a-this.long0);Math.abs(s)<=r.EPSLN&&(e=this.x0+this.R*l,o=this.y0);var h=(0,n.default)(2*Math.abs(s/Math.PI));(Math.abs(l)<=r.EPSLN||Math.abs(Math.abs(s)-r.HALF_PI)<=r.EPSLN)&&(e=this.x0,o=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*h):this.y0+-(Math.PI*this.R*Math.tan(.5*h)));var u=.5*Math.abs(Math.PI/l-l/Math.PI),c=u*u,f=Math.sin(h),d=Math.cos(h),p=d/(f+d-1),m=p*p,g=p*(2/f-1),y=g*g,v=Math.PI*this.R*(u*(p-y)+Math.sqrt(c*(p-y)*(p-y)-(y+c)*(m-y)))/(y+c);l<0&&(v=-v),e=this.x0+v;var _=c+p;return v=Math.PI*this.R*(g*_-u*Math.sqrt((y+c)*(c+1)-_*_))/(y+c),o=s>=0?this.y0+v:this.y0-v,t.x=e,t.y=o,t},inverse:function(t){var e,n,o,a,s,l,h,u,c,f,d,p,m;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(o=t.x/d)*o+(a=t.y/d)*a,h=(l=-Math.abs(a)*(1+s))-2*a*a+o*o,u=-2*l+1+2*a*a+s*s,m=a*a/u+(2*h*h*h/u/u/u-9*l*h/u/u)/27,f=2*Math.sqrt(-(c=(l-h*h/3/u)/u)/3),Math.abs(d=3*m/c/f)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-f*Math.cos(p+Math.PI/3)-h/3/u)*Math.PI:-(-f*Math.cos(p+Math.PI/3)-h/3/u)*Math.PI,e=Math.abs(o)<r.EPSLN?this.long0:(0,i.default)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(o*o-a*a)+s*s))/2/o),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]}}),parcelRegister("50bLi",function(t,e){$parcel$export(t.exports,"default",()=>f);var i=parcelRequire("idrHz"),r=parcelRequire("bHF3j"),n=parcelRequire("8ESoG"),o=parcelRequire("cTnRT"),a=parcelRequire("kSWjW"),s=parcelRequire("3vw6U"),l=parcelRequire("c2AxB"),h=parcelRequire("6uFuh"),u=parcelRequire("j2DHH"),c=parcelRequire("atdXq"),f={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,u,c,f,d,p,m,g,y,v,_,b,x,w,M,S,k,E,I,P,T,A,C=t.x,R=t.y,N=Math.sin(t.y),z=Math.cos(t.y),O=(0,i.default)(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=r.EPSLN?(t.x=this.x0+this.a*(r.HALF_PI-R)*Math.sin(O),t.y=this.y0-this.a*(r.HALF_PI-R)*Math.cos(O)):Math.abs(this.sin_p12+1)<=r.EPSLN?(t.x=this.x0+this.a*(r.HALF_PI+R)*Math.sin(O),t.y=this.y0+this.a*(r.HALF_PI+R)*Math.cos(O)):(k=(S=Math.acos(this.sin_p12*N+this.cos_p12*z*Math.cos(O)))?S/Math.sin(S):1,t.x=this.x0+this.a*k*z*Math.sin(O),t.y=this.y0+this.a*k*(this.cos_p12*N-this.sin_p12*z*Math.cos(O))):(e=(0,o.default)(this.es),u=(0,a.default)(this.es),c=(0,s.default)(this.es),f=(0,l.default)(this.es),Math.abs(this.sin_p12-1)<=r.EPSLN)?(d=this.a*(0,n.default)(e,u,c,f,r.HALF_PI),p=this.a*(0,n.default)(e,u,c,f,R),t.x=this.x0+(d-p)*Math.sin(O),t.y=this.y0-(d-p)*Math.cos(O)):Math.abs(this.sin_p12+1)<=r.EPSLN?(d=this.a*(0,n.default)(e,u,c,f,r.HALF_PI),p=this.a*(0,n.default)(e,u,c,f,R),t.x=this.x0+(d+p)*Math.sin(O),t.y=this.y0+(d+p)*Math.cos(O)):(m=N/z,g=(0,h.default)(this.a,this.e,this.sin_p12),y=(0,h.default)(this.a,this.e,N),v=Math.atan((1-this.es)*m+this.es*g*this.sin_p12/(y*z)),E=0===(_=Math.atan2(Math.sin(O),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(O)))?Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(_)-Math.PI)<=r.EPSLN?-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.asin(Math.sin(O)*Math.cos(v)/Math.sin(_)),w=(b=this.e*this.sin_p12/Math.sqrt(1-this.es))*(x=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es)),M=x*x,A=(T=(P=(I=E*E)*E)*E)*E,S=g*E*(1-I*M*(1-M)/6+P/8*w*(1-2*M)+T/120*(M*(4-7*M)-3*b*b*(1-7*M))-A/48*w),t.x=this.x0+S*Math.sin(_),t.y=this.y0+S*Math.cos(_)),t},inverse:function(t){var e,f,d,p,m,g,y,v,_,b,x,w,M,S,k,E,I,P,T,A,C,R,N;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*r.HALF_PI*this.a)return;return d=Math.sin(f=e/this.a),p=Math.cos(f),m=this.long0,Math.abs(e)<=r.EPSLN?g=this.lat0:(g=(0,u.default)(p*this.sin_p12+t.y*d*this.cos_p12/e),m=Math.abs(Math.abs(this.lat0)-r.HALF_PI)<=r.EPSLN?this.lat0>=0?(0,i.default)(this.long0+Math.atan2(t.x,-t.y)):(0,i.default)(this.long0-Math.atan2(-t.x,t.y)):(0,i.default)(this.long0+Math.atan2(t.x*d,e*this.cos_p12*p-t.y*this.sin_p12*d))),t.x=m,t.y=g,t}return(y=(0,o.default)(this.es),v=(0,a.default)(this.es),_=(0,s.default)(this.es),b=(0,l.default)(this.es),Math.abs(this.sin_p12-1)<=r.EPSLN)?(w=(x=this.a*(0,n.default)(y,v,_,b,r.HALF_PI))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),g=(0,c.default)(w/this.a,y,v,_,b),m=(0,i.default)(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=r.EPSLN?(x=this.a*(0,n.default)(y,v,_,b,r.HALF_PI),w=(e=Math.sqrt(t.x*t.x+t.y*t.y))-x,g=(0,c.default)(w/this.a,y,v,_,b),m=(0,i.default)(this.long0+Math.atan2(t.x,t.y))):(e=Math.sqrt(t.x*t.x+t.y*t.y),k=Math.atan2(t.x,t.y),M=(0,h.default)(this.a,this.e,this.sin_p12),E=Math.cos(k),P=-(I=this.e*this.cos_p12*E)*I/(1-this.es),T=3*this.es*(1-P)*this.sin_p12*this.cos_p12*E/(1-this.es),C=(A=e/M)-P*(1+P)*Math.pow(A,3)/6-T*(1+3*P)*Math.pow(A,4)/24,R=1-P*C*C/2-A*C*C*C/6,S=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*E),m=(0,i.default)(this.long0+Math.asin(Math.sin(k)*Math.sin(C)/Math.cos(S))),g=Math.atan2(((N=Math.sin(S))-this.es*R*this.sin_p12)*Math.tan(S),N*(1-this.es))),t.x=m,t.y=g,t},names:["Azimuthal_Equidistant","aeqd"]}}),parcelRegister("3EITr",function(t,e){$parcel$export(t.exports,"default",()=>o);var i=parcelRequire("idrHz"),r=parcelRequire("j2DHH"),n=parcelRequire("bHF3j"),o={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,o,a,s,l,h,u,c=t.x,f=t.y;return o=(0,i.default)(c-this.long0),e=Math.sin(f),r=Math.cos(f),a=Math.cos(o),l=this.sin_p14*e+this.cos_p14*r*a,s=1,(l>0||Math.abs(l)<=n.EPSLN)&&(h=this.a*s*r*Math.sin(o),u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*r*a)),t.x=h,t.y=u,t},inverse:function(t){var e,o,a,s,l,h;return(t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.sin(o=(0,r.default)(e/this.a)),s=Math.cos(o),l=this.long0,Math.abs(e)<=n.EPSLN)?h=this.lat0:(h=(0,r.default)(s*this.sin_p14+t.y*a*this.cos_p14/e),l=Math.abs(Math.abs(this.lat0)-n.HALF_PI)<=n.EPSLN?this.lat0>=0?(0,i.default)(this.long0+Math.atan2(t.x,-t.y)):(0,i.default)(this.long0-Math.atan2(-t.x,t.y)):(0,i.default)(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a))),t.x=l,t.y=h,t},names:["ortho"]}}),parcelRegister("gZ9np",function(t,e){$parcel$export(t.exports,"default",()=>s);var i=parcelRequire("bHF3j"),r={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},n={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function o(t,e,r,o){var a;return t<i.EPSLN?(o.value=n.AREA_0,a=0):Math.abs(a=Math.atan2(e,r))<=i.FORTPI?o.value=n.AREA_0:a>i.FORTPI&&a<=i.HALF_PI+i.FORTPI?(o.value=n.AREA_1,a-=i.HALF_PI):a>i.HALF_PI+i.FORTPI||a<=-(i.HALF_PI+i.FORTPI)?(o.value=n.AREA_2,a=a>=0?a-i.SPI:a+i.SPI):(o.value=n.AREA_3,a+=i.HALF_PI),a}function a(t,e){var r=t+e;return r<-i.SPI?r+=i.TWO_PI:r>+i.SPI&&(r-=i.TWO_PI),r}var s={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=i.HALF_PI-i.FORTPI/2?this.face=r.TOP:this.lat0<=-(i.HALF_PI-i.FORTPI/2)?this.face=r.BOTTOM:Math.abs(this.long0)<=i.FORTPI?this.face=r.FRONT:Math.abs(this.long0)<=i.HALF_PI+i.FORTPI?this.face=this.long0>0?r.RIGHT:r.LEFT:this.face=r.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,s,l,h,u,c,f,d,p,m,g,y,v={x:0,y:0},_={value:0};return t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,s=t.x,this.face===r.TOP?(h=i.HALF_PI-e,s>=i.FORTPI&&s<=i.HALF_PI+i.FORTPI?(_.value=n.AREA_0,l=s-i.HALF_PI):s>i.HALF_PI+i.FORTPI||s<=-(i.HALF_PI+i.FORTPI)?(_.value=n.AREA_1,l=s>0?s-i.SPI:s+i.SPI):s>-(i.HALF_PI+i.FORTPI)&&s<=-i.FORTPI?(_.value=n.AREA_2,l=s+i.HALF_PI):(_.value=n.AREA_3,l=s)):this.face===r.BOTTOM?(h=i.HALF_PI+e,s>=i.FORTPI&&s<=i.HALF_PI+i.FORTPI?(_.value=n.AREA_0,l=-s+i.HALF_PI):s<i.FORTPI&&s>=-i.FORTPI?(_.value=n.AREA_1,l=-s):s<-i.FORTPI&&s>=-(i.HALF_PI+i.FORTPI)?(_.value=n.AREA_2,l=-s-i.HALF_PI):(_.value=n.AREA_3,l=s>0?-s+i.SPI:-s-i.SPI)):(this.face===r.RIGHT?s=a(s,+i.HALF_PI):this.face===r.BACK?s=a(s,+i.SPI):this.face===r.LEFT&&(s=a(s,-i.HALF_PI)),m=Math.sin(e),g=Math.cos(e),y=Math.sin(s),f=g*Math.cos(s),d=g*y,p=m,this.face===r.FRONT?l=o(h=Math.acos(f),p,d,_):this.face===r.RIGHT?l=o(h=Math.acos(d),p,-f,_):this.face===r.BACK?l=o(h=Math.acos(-f),p,-d,_):this.face===r.LEFT?l=o(h=Math.acos(-d),p,f,_):(h=l=0,_.value=n.AREA_0)),u=Math.sqrt((1-Math.cos(h))/(Math.cos(c=Math.atan(12/i.SPI*(l+Math.acos(Math.sin(l)*Math.cos(i.FORTPI))-i.HALF_PI)))*Math.cos(c))/(1-Math.cos(Math.atan(1/Math.cos(l))))),_.value===n.AREA_1?c+=i.HALF_PI:_.value===n.AREA_2?c+=i.SPI:_.value===n.AREA_3&&(c+=1.5*i.SPI),v.x=u*Math.cos(c),v.y=u*Math.sin(c),v.x=v.x*this.a+this.x0,v.y=v.y*this.a+this.y0,t.x=v.x,t.y=v.y,t},inverse:function(t){var e,o,s,l,h,u,c,f,d,p,m,g,y,v,_={lam:0,phi:0},b={value:0};return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,o=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?b.value=n.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(b.value=n.AREA_1,e-=i.HALF_PI):t.x<0&&-t.x>=Math.abs(t.y)?(b.value=n.AREA_2,e=e<0?e+i.SPI:e-i.SPI):(b.value=n.AREA_3,e+=i.HALF_PI),h=Math.atan(Math.sin(f=i.SPI/12*Math.tan(e))/(Math.cos(f)-1/Math.sqrt(2))),(u=1-(s=Math.cos(e))*s*(l=Math.tan(o))*l*(1-Math.cos(Math.atan(1/Math.cos(h)))))<-1?u=-1:u>1&&(u=1),this.face===r.TOP?(c=Math.acos(u),_.phi=i.HALF_PI-c,b.value===n.AREA_0?_.lam=h+i.HALF_PI:b.value===n.AREA_1?_.lam=h<0?h+i.SPI:h-i.SPI:b.value===n.AREA_2?_.lam=h-i.HALF_PI:_.lam=h):this.face===r.BOTTOM?(c=Math.acos(u),_.phi=c-i.HALF_PI,b.value===n.AREA_0?_.lam=-h+i.HALF_PI:b.value===n.AREA_1?_.lam=-h:b.value===n.AREA_2?_.lam=-h-i.HALF_PI:_.lam=h<0?-h-i.SPI:-h+i.SPI):(m=(f=(d=u)*d)>=1?0:Math.sqrt(1-f)*Math.sin(h),f+=m*m,p=f>=1?0:Math.sqrt(1-f),b.value===n.AREA_1?(f=p,p=-m,m=f):b.value===n.AREA_2?(p=-p,m=-m):b.value===n.AREA_3&&(f=p,p=m,m=-f),this.face===r.RIGHT?(f=d,d=-p,p=f):this.face===r.BACK?(d=-d,p=-p):this.face===r.LEFT&&(f=d,d=p,p=-f),_.phi=Math.acos(-m)-i.HALF_PI,_.lam=Math.atan2(p,d),this.face===r.RIGHT?_.lam=a(_.lam,-i.HALF_PI):this.face===r.BACK?_.lam=a(_.lam,-i.SPI):this.face===r.LEFT&&(_.lam=a(_.lam,+i.HALF_PI))),0!==this.es&&(g=_.phi<0?1:0,y=Math.tan(_.phi),v=this.b/Math.sqrt(y*y+this.one_minus_f_squared),_.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),g&&(_.phi=-_.phi)),_.lam+=this.long0,t.x=_.lam,t.y=_.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]}}),parcelRegister("l0sB0",function(t,e){$parcel$export(t.exports,"default",()=>p);var i=parcelRequire("bHF3j"),r=parcelRequire("idrHz"),n=[[1,22199e-21,-.0000715515,31103e-10],[.9986,-.000482243,-.000024897,-.0000013309],[.9954,-.00083103,-.0000448605,-.000000986701],[.99,-.00135364,-.000059661,36777e-10],[.9822,-.00167442,-.00000449547,-.00000572411],[.973,-.00214868,-.0000903571,18736e-12],[.96,-.00305085,-.0000900761,164917e-11],[.9427,-.00382792,-.0000653386,-.0000026154],[.9216,-.00467746,-.00010457,481243e-11],[.8962,-.00536223,-.0000323831,-.00000543432],[.8679,-.00609363,-.000113898,332484e-11],[.835,-.00698325,-.0000640253,934959e-12],[.7986,-.00755338,-.0000500009,935324e-12],[.7597,-.00798324,-.000035971,-.00000227626],[.7186,-.00851367,-.0000701149,-.0000086303],[.6732,-.00986209,-.000199569,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],o=[[-.00000000000000000520417,.0124,121431e-23,-.0000000000845284],[.062,.0124,-.00000000126793,422642e-15],[.124,.0124,507171e-14,-.00000000160604],[.186,.0123999,-.0000000190189,600152e-14],[.248,.0124002,710039e-13,-.0000000224],[.31,.0123992,-.000000264997,835986e-13],[.372,.0124029,988983e-12,-.000000311994],[.434,.0123893,-.00000369093,-.000000435621],[.4958,.0123198,-.0000102252,-.000000345523],[.5571,.0121916,-.0000154081,-.000000582288],[.6176,.0119938,-.0000241424,-.000000525327],[.6769,.011713,-.0000320223,-.000000516405],[.7346,.0113541,-.0000397684,-.000000609052],[.7903,.0109107,-.0000489042,-.00000104739],[.8435,.0103431,-.000064615,-.00000000140374],[.8936,.00969686,-.000064636,-.000008547],[.9394,.00840947,-.000192841,-.0000042106],[.9761,.00616527,-.000256,-.0000042106],[1,.00328947,-.000319159,-.0000042106]],a=.8487,s=1.3523,l=i.R2D/5,h=1/l,u=18,c=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},f=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function d(t,e,i,r){for(var n=e;r;--r){var o=t(n);if(n-=o,Math.abs(o)<i)break}return n}var p={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=(0,r.default)(t.x-this.long0),f=Math.abs(t.y),d=Math.floor(f*l);d<0?d=0:d>=u&&(d=u-1),f=i.R2D*(f-h*d);var p={x:c(n[d],f)*e,y:c(o[d],f)};return t.y<0&&(p.y=-p.y),p.x=p.x*this.a*a+this.x0,p.y=p.y*this.a*s+this.y0,p},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*a),y:Math.abs(t.y-this.y0)/(this.a*s)};if(e.y>=1)e.x/=n[u][0],e.y=t.y<0?-i.HALF_PI:i.HALF_PI;else{var l=Math.floor(e.y*u);for(l<0?l=0:l>=u&&(l=u-1);;)if(o[l][0]>e.y)--l;else if(o[l+1][0]<=e.y)++l;else break;var h=o[l],p=5*(e.y-h[0])/(o[l+1][0]-h[0]);p=d(function(t){return(c(h,t)-e.y)/f(h,t)},p,i.EPSLN,100),e.x/=c(n[l],p),e.y=(5*l+p)*i.D2R,t.y<0&&(e.y=-e.y)}return e.x=(0,r.default)(e.x+this.long0),e},names:["Robinson","robin"]}}),parcelRegister("jV3ph",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("f41gb"),r={init:function(){this.name="geocent"},forward:function(t){return(0,i.geodeticToGeocentric)(t,this.es,this.a)},inverse:function(t){return(0,i.geocentricToGeodetic)(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]}}),parcelRegister("9SwDK",function(t,e){$parcel$export(t.exports,"default",()=>a);var i=parcelRequire("bHF3j"),r=parcelRequire("jYRKv"),n={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},o={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},a={init:function(){if(Object.keys(o).forEach((function(t){if(void 0===this[t])this[t]=o[t].def;else if(o[t].num&&isNaN(this[t]))throw Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);else o[t].num&&(this[t]=parseFloat(this[t]));o[t].degrees&&(this[t]=this[t]*i.D2R)}).bind(this)),Math.abs(Math.abs(this.lat0)-i.HALF_PI)<i.EPSLN?this.mode=this.lat0<0?n.S_POLE:n.N_POLE:Math.abs(this.lat0)<i.EPSLN?this.mode=n.EQUIT:(this.mode=n.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,r,o,a=Math.sin(t.y),s=Math.cos(t.y),l=Math.cos(t.x);switch(this.mode){case n.OBLIQ:i=this.sinph0*a+this.cosph0*s*l;break;case n.EQUIT:i=s*l;break;case n.S_POLE:i=-a;break;case n.N_POLE:i=a}switch(e=(i=this.pn1/(this.p-i))*s*Math.sin(t.x),this.mode){case n.OBLIQ:i*=this.cosph0*a-this.sinph0*s*l;break;case n.EQUIT:i*=a;break;case n.N_POLE:i*=-(s*l);break;case n.S_POLE:i*=s*l}return o=1/((r=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*o,i=r*o,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,o,a,s,l,h={x:t.x,y:t.y};a=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*a,o=this.pn1*t.y*this.cw*a,t.x=e*this.cg+o*this.sg,t.y=o*this.cg-e*this.sg;var u=(0,r.default)(t.x,t.y);if(Math.abs(u)<i.EPSLN)h.x=0,h.y=t.y;else{switch(l=1-u*u*this.pfact,s=Math.sqrt(1-(l=(this.p-Math.sqrt(l))/(this.pn1/u+u/this.pn1))*l),this.mode){case n.OBLIQ:h.y=Math.asin(s*this.sinph0+t.y*l*this.cosph0/u),t.y=(s-this.sinph0*Math.sin(h.y))*u,t.x*=l*this.cosph0;break;case n.EQUIT:h.y=Math.asin(t.y*l/u),t.y=s*u,t.x*=l;break;case n.N_POLE:h.y=Math.asin(s),t.y=-t.y;break;case n.S_POLE:h.y=-Math.asin(s)}h.x=Math.atan2(t.x,t.y)}return t.x=h.x+this.long0,t.y=h.y,t},names:["Tilted_Perspective","tpers"]}}),parcelRegister("j00R0",function(t,e){$parcel$export(t.exports,"default",()=>r);var i=parcelRequire("jYRKv"),r={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw Error();if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,o,a=t.x,s=t.y;if(a-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var l=this.radius_p/(0,i.default)(this.radius_p*Math.cos(s),Math.sin(s));if(r=l*Math.cos(a)*Math.cos(s),n=l*Math.sin(a)*Math.cos(s),o=l*Math.sin(s),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/(0,i.default)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/(0,i.default)(n,e)))}else"sphere"===this.shape&&(r=Math.cos(a)*(e=Math.cos(s)),n=Math.sin(a)*e,o=Math.sin(s),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/(0,i.default)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/(0,i.default)(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,o,a=-1,s=0,l=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*(0,i.default)(1,l)):(s=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*(0,i.default)(1,s));var h=l/this.radius_p;if(e=s*s+h*h+a*a,(n=(r=2*this.radius_g*a)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),a=this.radius_g+o*a,s*=o,l*=o,t.x=Math.atan2(s,a),t.y=Math.atan(l*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+l*l)):(s=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+l*l+a*a,(n=(r=2*this.radius_g*a)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),a=this.radius_g+o*a,s*=o,l*=o,t.x=Math.atan2(s,a),t.y=Math.atan(l*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]}}),parcelRegister("8MQko",function(t,e){$parcel$export(t.exports,"default",()=>l);var i=parcelRequire("idrHz"),r=1.340264,n=-.081106,o=893e-6,a=.003796,s=Math.sqrt(3)/2,l={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=(0,i.default)(t.x-this.long0),l=Math.asin(s*Math.sin(t.y)),h=l*l,u=h*h*h;return t.x=e*Math.cos(l)/(s*(r+3*n*h+u*(7*o+9*a*h))),t.y=l*(r+n*h+u*(o+a*h)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,l,h,u,c,f=1e-9,d=12,p=t.y;for(c=0;c<d&&(l=(e=p*p)*e*e,h=p*(r+n*e+l*(o+a*e))-t.y,p-=u=h/(r+3*n*e+l*(7*o+9*a*e)),!(Math.abs(u)<f));++c);return l=(e=p*p)*e*e,t.x=s*t.x*(r+3*n*e+l*(7*o+9*a*e))/Math.cos(p),t.y=Math.asin(Math.sin(p)/s),t.x=(0,i.default)(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]}}),parcelRegister("9sdbb",function(t,e){$parcel$export(t.exports,"default",()=>p);var i=parcelRequire("jyYmi"),r=parcelRequire("idrHz"),n=parcelRequire("jYRKv"),o=parcelRequire("d0869"),a=parcelRequire("6ZSpg"),s=parcelRequire("lWHR0"),l=parcelRequire("bHF3j"),h=1e-10;function u(t){var e,i,n,o=(0,r.default)(t.x-(this.long0||0)),a=t.y;return e=this.am1+this.m1-(0,s.default)(a,i=Math.sin(a),n=Math.cos(a),this.en),i=n*o/(e*Math.sqrt(1-this.es*i*i)),t.x=e*Math.sin(i),t.y=this.am1-e*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function c(t){var e,o,s,u;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,o=(0,n.default)(t.x,t.y=this.am1-t.y),(e=Math.abs(u=(0,a.default)(this.am1+this.m1-o,this.es,this.en)))<l.HALF_PI)e=Math.sin(u),s=o*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(u);else if(Math.abs(e-l.HALF_PI)<=h)s=0;else throw Error();return t.x=(0,r.default)(s+(this.long0||0)),t.y=(0,i.default)(u),t}function f(t){var e,i,n=(0,r.default)(t.x-(this.long0||0)),o=t.y;return Math.abs(i=this.cphi1+this.phi1-o)>h?(t.x=i*Math.sin(e=n*Math.cos(o)/i),t.y=this.cphi1-i*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function d(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,o,a=(0,n.default)(t.x,t.y=this.cphi1-t.y);if(Math.abs(o=this.cphi1+this.phi1-a)>l.HALF_PI)throw Error();return e=Math.abs(Math.abs(o)-l.HALF_PI)<=h?0:a*Math.atan2(t.x,t.y)/Math.cos(o),t.x=(0,r.default)(e+(this.long0||0)),t.y=(0,i.default)(o),t}var p={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<h)throw Error();this.es?(this.en=(0,o.default)(this.es),this.m1=(0,s.default)(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=c,this.forward=u):(Math.abs(this.phi1)+h>=l.HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=d,this.forward=f)},names:["bonne","Bonne (Werner lat_1=90)"]}}),parcelRegister("fLiic",function(t,e){$parcel$export(t.exports,"Buffer",()=>i,t=>i=t),$parcel$export(t.exports,"SlowBuffer",()=>r,t=>r=t),$parcel$export(t.exports,"INSPECT_MAX_BYTES",()=>n,t=>n=t),$parcel$export(t.exports,"kMaxLength",()=>o,t=>o=t);var i,r,n,o,a=parcelRequire("2IPMC"),s=parcelRequire("6zNmX");let l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i=f,r=M,n=50;let h=2147483647;function u(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>h)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,i){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return g(t)}return d(t,e,i)}function d(t,e,i){if("string"==typeof t)return y(t,e);if(ArrayBuffer.isView(t))return _(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tu(t,ArrayBuffer)||t&&tu(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(tu(t,SharedArrayBuffer)||t&&tu(t.buffer,SharedArrayBuffer)))return b(t,e,i);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return f.from(r,e,i);let n=x(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return f.from(t[Symbol.toPrimitive]("string"),e,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function p(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function m(t,e,i){return(p(t),t<=0)?c(t):void 0!==e?"string"==typeof i?c(t).fill(e,i):c(t).fill(e):c(t)}function g(t){return p(t),c(t<0?0:0|w(t))}function y(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!f.isEncoding(e))throw TypeError("Unknown encoding: "+e);let i=0|S(t,e),r=c(i),n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}function v(t){let e=t.length<0?0:0|w(t.length),i=c(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function _(t){if(tu(t,Uint8Array)){let e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return v(t)}function b(t,e,i){let r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),f.prototype),r}function x(t){if(f.isBuffer(t)){let e=0|w(t.length),i=c(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||tc(t.length)?c(0):v(t):"Buffer"===t.type&&Array.isArray(t.data)?v(t.data):void 0}function w(t){if(t>=h)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|t}function M(t){return+t!=t&&(t=0),f.alloc(+t)}function S(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tu(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return to(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return tl(t).length;default:if(n)return r?-1:to(t).length;e=(""+e).toLowerCase(),n=!0}}function k(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return q(this,e,i);case"utf8":case"utf-8":return O(this,e,i);case"ascii":return F(this,e,i);case"latin1":case"binary":return j(this,e,i);case"base64":return z(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,e,i);default:if(r)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function E(t,e,i){let r=t[e];t[e]=t[i],t[i]=r}function I(t,e,i,r,n){if(0===t.length)return -1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),tc(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return -1;i=t.length-1}else if(i<0){if(!n)return -1;i=0}if("string"==typeof e&&(e=f.from(e,r)),f.isBuffer(e))return 0===e.length?-1:P(t,e,i,r,n);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):P(t,[e],i,r,n);throw TypeError("val must be string, number or Buffer")}function P(t,e,i,r,n){let o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;a=2,s/=2,l/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){let r=-1;for(o=i;o<s;o++)if(h(t,o)===h(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*a}else -1!==r&&(o-=o-r),r=-1}else for(i+l>s&&(i=s-l),o=i;o>=0;o--){let i=!0;for(let r=0;r<l;r++)if(h(t,o+r)!==h(e,r)){i=!1;break}if(i)return o}return -1}function T(t,e,i,r){let n;i=Number(i)||0;let o=t.length-i;r?(r=Number(r))>o&&(r=o):r=o;let a=e.length;for(r>a/2&&(r=a/2),n=0;n<r;++n){let r=parseInt(e.substr(2*n,2),16);if(tc(r))break;t[i+n]=r}return n}function A(t,e,i,r){return th(to(e,t.length-i),t,i,r)}function C(t,e,i,r){return th(ta(e),t,i,r)}function R(t,e,i,r){return th(tl(e),t,i,r)}function N(t,e,i,r){return th(ts(e,t.length-i),t,i,r)}function z(t,e,i){return 0===e&&i===t.length?a.fromByteArray(t):a.fromByteArray(t.slice(e,i))}function O(t,e,i){i=Math.min(t.length,i);let r=[],n=e;for(;n<i;){let e=t[n],o=null,a=e>239?4:e>223?3:e>191?2:1;if(n+a<=i){let i,r,s,l;switch(a){case 1:e<128&&(o=e);break;case 2:(192&(i=t[n+1]))==128&&(l=(31&e)<<6|63&i)>127&&(o=l);break;case 3:i=t[n+1],r=t[n+2],(192&i)==128&&(192&r)==128&&(l=(15&e)<<12|(63&i)<<6|63&r)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:i=t[n+1],r=t[n+2],s=t[n+3],(192&i)==128&&(192&r)==128&&(192&s)==128&&(l=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&s)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),n+=a}return B(r)}o=2147483647,f.TYPED_ARRAY_SUPPORT=u(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(t,e,i){return d(t,e,i)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(t,e,i){return m(t,e,i)},f.allocUnsafe=function(t){return g(t)},f.allocUnsafeSlow=function(t){return g(t)},f.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==f.prototype},f.compare=function(t,e){if(tu(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),tu(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){let i;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);if(void 0===e)for(i=0,e=0;i<t.length;++i)e+=t[i].length;let r=f.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){let e=t[i];if(tu(e,Uint8Array))n+e.length>r.length?(f.isBuffer(e)||(e=f.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else if(f.isBuffer(e))e.copy(r,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=e.length}return r},f.byteLength=S,f.prototype._isBuffer=!0,f.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)E(this,e,e+1);return this},f.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},f.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},f.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?O(this,0,t):k.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(t){if(!f.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){let t="",e=n;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},l&&(f.prototype[l]=f.prototype.inspect),f.prototype.compare=function(t,e,i,r,n){if(tu(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return -1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,n>>>=0,this===t)return 0;let o=n-r,a=i-e,s=Math.min(o,a),l=this.slice(r,n),h=t.slice(e,i);for(let t=0;t<s;++t)if(l[t]!==h[t]){o=l[t],a=h[t];break}return o<a?-1:a<o?1:0},f.prototype.includes=function(t,e,i){return -1!==this.indexOf(t,e,i)},f.prototype.indexOf=function(t,e,i){return I(this,t,e,i,!0)},f.prototype.lastIndexOf=function(t,e,i){return I(this,t,e,i,!1)},f.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return T(this,t,e,i);case"utf8":case"utf-8":return A(this,t,e,i);case"ascii":case"latin1":case"binary":return C(this,t,e,i);case"base64":return R(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,e,i);default:if(o)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let D=4096;function B(t){let e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=D));return i}function F(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function j(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function q(t,e,i){let r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=tf[t[r]];return n}function V(t,e,i){let r=t.slice(e,i),n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function U(t,e,i){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>i)throw RangeError("Trying to access beyond buffer length")}function Z(t,e,i,r,n,o){if(!f.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw RangeError('"value" argument is out of bounds');if(i+r>t.length)throw RangeError("Index out of range")}function G(t,e,i,r,n){tt(e,r,n,t,i,7);let o=Number(e&BigInt(4294967295));t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function H(t,e,i,r,n){tt(e,r,n,t,i,7);let o=Number(e&BigInt(4294967295));t[i+7]=o,o>>=8,t[i+6]=o,o>>=8,t[i+5]=o,o>>=8,t[i+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function W(t,e,i,r,n,o){if(i+r>t.length||i<0)throw RangeError("Index out of range")}function X(t,e,i,r,n){return e=+e,i>>>=0,n||W(t,e,i,4,34028234663852886e22,-34028234663852886e22),s.write(t,e,i,r,23,4),i+4}function $(t,e,i,r,n){return e=+e,i>>>=0,n||W(t,e,i,8,17976931348623157e292,-17976931348623157e292),s.write(t,e,i,r,52,8),i+8}f.prototype.slice=function(t,e){let i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,f.prototype),r},f.prototype.readUintLE=f.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||U(t,e,this.length);let r=this[t],n=1,o=0;for(;++o<e&&(n*=256);)r+=this[t+o]*n;return r},f.prototype.readUintBE=f.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||U(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},f.prototype.readUint8=f.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readBigUInt64LE=td(function(t){te(t>>>=0,"offset");let e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ti(t,this.length-8);let r=e+256*this[++t]+65536*this[++t]+16777216*this[++t],n=this[++t]+256*this[++t]+65536*this[++t]+16777216*i;return BigInt(r)+(BigInt(n)<<BigInt(32))}),f.prototype.readBigUInt64BE=td(function(t){te(t>>>=0,"offset");let e=this[t],i=this[t+7];(void 0===e||void 0===i)&&ti(t,this.length-8);let r=16777216*e+65536*this[++t]+256*this[++t]+this[++t],n=16777216*this[++t]+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)}),f.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||U(t,e,this.length);let r=this[t],n=1,o=0;for(;++o<e&&(n*=256);)r+=this[t+o]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},f.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||U(t,e,this.length);let r=e,n=1,o=this[t+--r];for(;r>0&&(n*=256);)o+=this[t+--r]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},f.prototype.readInt8=function(t,e){return(t>>>=0,e||U(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},f.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);let i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},f.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);let i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},f.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readBigInt64LE=td(function(t){te(t>>>=0,"offset");let e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&ti(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),f.prototype.readBigInt64BE=td(function(t){te(t>>>=0,"offset");let e=this[t],i=this[t+7];return(void 0===e||void 0===i)&&ti(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+i)}),f.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),s.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),s.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),s.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),s.read(this,t,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){let r=Math.pow(2,8*i)-1;Z(this,t,e,i,r,0)}let n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){let r=Math.pow(2,8*i)-1;Z(this,t,e,i,r,0)}let n=i-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+i},f.prototype.writeUint8=f.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,1,255,0),this[e]=255&t,e+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeBigUInt64LE=td(function(t,e=0){return G(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=td(function(t,e=0){return H(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*i-1);Z(this,t,e,i,r-1,-r)}let n=0,o=1,a=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},f.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*i-1);Z(this,t,e,i,r-1,-r)}let n=i-1,o=1,a=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/o>>0)-a&255;return e+i},f.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||Z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeBigInt64LE=td(function(t,e=0){return G(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=td(function(t,e=0){return H(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(t,e,i){return X(this,t,e,!0,i)},f.prototype.writeFloatBE=function(t,e,i){return X(this,t,e,!1,i)},f.prototype.writeDoubleLE=function(t,e,i){return $(this,t,e,!0,i)},f.prototype.writeDoubleBE=function(t,e,i){return $(this,t,e,!1,i)},f.prototype.copy=function(t,e,i,r){if(!f.isBuffer(t))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);let n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},f.prototype.fill=function(t,e,i,r){let n;if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){let e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{let o=f.isBuffer(t)?t:f.from(t,r),a=o.length;if(0===a)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=o[n%a]}return this};let Y={};function K(t,e,i){Y[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function J(t){let e="",i=t.length,r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function Q(t,e,i){te(e,"offset"),(void 0===t[e]||void 0===t[e+i])&&ti(e,t.length-(i+1))}function tt(t,e,i,r,n,o){if(t>i||t<e){let r;let n="bigint"==typeof e?"n":"";throw r=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`:`>= ${e}${n} and <= ${i}${n}`,new Y.ERR_OUT_OF_RANGE("value",r,t)}Q(r,n,o)}function te(t,e){if("number"!=typeof t)throw new Y.ERR_INVALID_ARG_TYPE(e,"number",t)}function ti(t,e,i){if(Math.floor(t)!==t)throw te(t,i),new Y.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new Y.ERR_BUFFER_OUT_OF_BOUNDS;throw new Y.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),K("ERR_OUT_OF_RANGE",function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?n=J(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=J(n)),n+="n"),r+=` It must be ${e}. Received ${n}`},RangeError);let tr=/[^+/0-9A-Za-z-_]/g;function tn(t){if((t=(t=t.split("=")[0]).trim().replace(tr,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function to(t,e){let i;e=e||1/0;let r=t.length,n=null,o=[];for(let a=0;a<r;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319||a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return o}function ta(t){let e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function ts(t,e){let i,r;let n=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=(i=t.charCodeAt(o))>>8,n.push(i%256),n.push(r);return n}function tl(t){return a.toByteArray(tn(t))}function th(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length)&&!(n>=t.length);++n)e[n+i]=t[n];return n}function tu(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function tc(t){return t!=t}let tf=function(){let t="0123456789abcdef",e=Array(256);for(let i=0;i<16;++i){let r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function td(t){return"undefined"==typeof BigInt?tp:t}function tp(){throw Error("BigInt not supported")}}),parcelRegister("2IPMC",function(t,e){$parcel$export(t.exports,"toByteArray",()=>i,t=>i=t),$parcel$export(t.exports,"fromByteArray",()=>r,t=>r=t),i=f,r=m;for(var i,r,n=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,h=s.length;l<h;++l)n[l]=s[l],o[s.charCodeAt(l)]=l;function u(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var r=i===e?0:4-i%4;return[i,r]}function c(t,e,i){return(e+i)*3/4-i}function f(t){var e,i,r=u(t),n=r[0],s=r[1],l=new a(c(t,n,s)),h=0,f=s>0?n-4:n;for(i=0;i<f;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===s&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,l[h++]=255&e),1===s&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l}function d(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function p(t,e,i){for(var r=[],n=e;n<i;n+=3)r.push(d((t[n]<<16&16711680)+(t[n+1]<<8&65280)+(255&t[n+2])));return r.join("")}function m(t){for(var e,i=t.length,r=i%3,o=[],a=16383,s=0,l=i-r;s<l;s+=a)o.push(p(t,s,s+a>l?l:s+a));return 1===r?o.push(n[(e=t[i-1])>>2]+n[e<<4&63]+"=="):2===r&&o.push(n[(e=(t[i-2]<<8)+t[i-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}),parcelRegister("6zNmX",function(t,e){var i,r;$parcel$export(t.exports,"read",()=>i,t=>i=t),$parcel$export(t.exports,"write",()=>r,t=>r=t),i=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,h=l>>1,u=-7,c=i?n-1:0,f=i?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+c],c+=f,u-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=h}return(d?-1:1)*a*Math.pow(2,o-r)},r=function(t,e,i,r,n,o){var a,s,l,h=8*o-n-1,u=(1<<h)-1,c=u>>1,f=23===n?5960464477539062e-23:0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?e+=f/l:e+=f*Math.pow(2,1-c),e*l>=2&&(a++,l/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*l-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&s,d+=p,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;t[i+d]=255&a,d+=p,a/=256,h-=8);t[i+d-p]|=128*m}}),parcelRegister("9ZyLq",function(t,e){}),parcelRegister("1IbV4",function(t,e){var i=parcelRequire("aKNZT"),r=65536,n=4294967295;function o(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var a=parcelRequire("8GZk1").Buffer,s=$parcel$global.crypto||$parcel$global.msCrypto;function l(t,e){if(t>n)throw RangeError("requested too many random bytes");var o=a.allocUnsafe(t);if(t>0){if(t>r)for(var l=0;l<t;l+=r)s.getRandomValues(o.slice(l,l+r));else s.getRandomValues(o)}return"function"==typeof e?i.nextTick(function(){e(null,o)}):o}s&&s.getRandomValues?t.exports=l:t.exports=o}),parcelRegister("aKNZT",function(t,e){var i,r,n,o=t.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function h(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u=[],c=!1,f=-1;function d(){c&&n&&(c=!1,n.length?u=n.concat(u):f=-1,u.length&&p())}function p(){if(!c){var t=l(d);c=!0;for(var e=u.length;e;){for(n=u,u=[];++f<e;)n&&n[f].run();f=-1,e=u.length}n=null,c=!1,h(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new m(t,e)),1!==u.length||c||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}),parcelRegister("8GZk1",function(t,e){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=parcelRequire("fLiic"),r=i.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(n(i,t.exports),t.exports.Buffer=o),o.prototype=Object.create(r.prototype),n(r,o),o.from=function(t,e,i){if("number"==typeof t)throw TypeError("Argument must not be a number");return r(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return i.SlowBuffer(t)}}),parcelRegister("cYT9k",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("4tt75"),n=parcelRequire("4VOKT"),o=parcelRequire("dhvHe"),a=parcelRequire("entWb");function s(t){a.call(this,"digest"),this._hash=t}i(s,a),s.prototype._update=function(t){this._hash.update(t)},s.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new r:"rmd160"===t||"ripemd160"===t?new n:new s(o(t))}}),parcelRegister("dFiDG",function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}}),parcelRegister("4tt75",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("kkShz"),n=parcelRequire("8GZk1").Buffer,o=Array(16);function a(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(t,e){return t<<e|t>>>32-e}function l(t,e,i,r,n,o,a){return s(t+(e&i|~e&r)+n+o|0,a)+e|0}function h(t,e,i,r,n,o,a){return s(t+(e&r|i&~r)+n+o|0,a)+e|0}function u(t,e,i,r,n,o,a){return s(t+(e^i^r)+n+o|0,a)+e|0}function c(t,e,i,r,n,o,a){return s(t+(i^(e|~r))+n+o|0,a)+e|0}i(a,r),a.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,a=this._d;i=l(i,r,n,a,t[0],3614090360,7),a=l(a,i,r,n,t[1],3905402710,12),n=l(n,a,i,r,t[2],606105819,17),r=l(r,n,a,i,t[3],3250441966,22),i=l(i,r,n,a,t[4],4118548399,7),a=l(a,i,r,n,t[5],1200080426,12),n=l(n,a,i,r,t[6],2821735955,17),r=l(r,n,a,i,t[7],4249261313,22),i=l(i,r,n,a,t[8],1770035416,7),a=l(a,i,r,n,t[9],2336552879,12),n=l(n,a,i,r,t[10],4294925233,17),r=l(r,n,a,i,t[11],2304563134,22),i=l(i,r,n,a,t[12],1804603682,7),a=l(a,i,r,n,t[13],4254626195,12),n=l(n,a,i,r,t[14],2792965006,17),r=l(r,n,a,i,t[15],1236535329,22),i=h(i,r,n,a,t[1],4129170786,5),a=h(a,i,r,n,t[6],3225465664,9),n=h(n,a,i,r,t[11],643717713,14),r=h(r,n,a,i,t[0],3921069994,20),i=h(i,r,n,a,t[5],3593408605,5),a=h(a,i,r,n,t[10],38016083,9),n=h(n,a,i,r,t[15],3634488961,14),r=h(r,n,a,i,t[4],3889429448,20),i=h(i,r,n,a,t[9],568446438,5),a=h(a,i,r,n,t[14],3275163606,9),n=h(n,a,i,r,t[3],4107603335,14),r=h(r,n,a,i,t[8],1163531501,20),i=h(i,r,n,a,t[13],2850285829,5),a=h(a,i,r,n,t[2],4243563512,9),n=h(n,a,i,r,t[7],1735328473,14),r=h(r,n,a,i,t[12],2368359562,20),i=u(i,r,n,a,t[5],4294588738,4),a=u(a,i,r,n,t[8],2272392833,11),n=u(n,a,i,r,t[11],1839030562,16),r=u(r,n,a,i,t[14],4259657740,23),i=u(i,r,n,a,t[1],2763975236,4),a=u(a,i,r,n,t[4],1272893353,11),n=u(n,a,i,r,t[7],4139469664,16),r=u(r,n,a,i,t[10],3200236656,23),i=u(i,r,n,a,t[13],681279174,4),a=u(a,i,r,n,t[0],3936430074,11),n=u(n,a,i,r,t[3],3572445317,16),r=u(r,n,a,i,t[6],76029189,23),i=u(i,r,n,a,t[9],3654602809,4),a=u(a,i,r,n,t[12],3873151461,11),n=u(n,a,i,r,t[15],530742520,16),r=u(r,n,a,i,t[2],3299628645,23),i=c(i,r,n,a,t[0],4096336452,6),a=c(a,i,r,n,t[7],1126891415,10),n=c(n,a,i,r,t[14],2878612391,15),r=c(r,n,a,i,t[5],4237533241,21),i=c(i,r,n,a,t[12],1700485571,6),a=c(a,i,r,n,t[3],2399980690,10),n=c(n,a,i,r,t[10],4293915773,15),r=c(r,n,a,i,t[1],2240044497,21),i=c(i,r,n,a,t[8],1873313359,6),a=c(a,i,r,n,t[15],4264355552,10),n=c(n,a,i,r,t[6],2734768916,15),r=c(r,n,a,i,t[13],1309151649,21),i=c(i,r,n,a,t[4],4149444226,6),a=c(a,i,r,n,t[11],3174756917,10),n=c(n,a,i,r,t[2],718787259,15),r=c(r,n,a,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+a|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a}),parcelRegister("kkShz",function(t,e){var i=parcelRequire("8GZk1").Buffer,r=parcelRequire("ktjtG").Transform;function n(t,e){if(!i.isBuffer(t)&&"string"!=typeof t)throw TypeError(e+" must be a string or a buffer")}function o(t){r.call(this),this._block=i.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}parcelRequire("dFiDG")(o,r),o.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(t){r=t}i(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(n(t,"Data"),this._finalized)throw Error("Digest already called");i.isBuffer(t)||(t=i.from(t,e));for(var r=this._block,o=0;this._blockOffset+t.length-o>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)r[a++]=t[o++];this._update(),this._blockOffset=0}for(;o<t.length;)r[this._blockOffset++]=t[o++];for(var s=0,l=8*t.length;l>0;++s)this._length[s]+=l,(l=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*l);return this},o.prototype._update=function(){throw Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},o.prototype._digest=function(){throw Error("_digest is not implemented")},t.exports=o}),parcelRegister("ktjtG",function(t,e){t.exports=r;var i=parcelRequire("lxKXz").EventEmitter;function r(){i.call(this)}parcelRequire("dFiDG")(r,i),r.Readable=parcelRequire("ga0rJ"),r.Writable=parcelRequire("7FrJE"),r.Duplex=parcelRequire("cfdJ5"),r.Transform=parcelRequire("cSPs5"),r.PassThrough=parcelRequire("lO3Yd"),r.finished=parcelRequire("3vbB1"),r.pipeline=parcelRequire("bvTed"),r.Stream=r,r.prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){r.removeListener("data",n),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",h),t.removeListener("error",h),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("error",h),t.on("error",h),r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t}}),parcelRegister("lxKXz",function(t,e){var i,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};function o(t){console&&console.warn&&console.warn(t)}i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=_,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function h(t){if("function"!=typeof t)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,i,r){if(h(i),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),a=t._events),s=a[e]),void 0===s)s=a[e]=i,++t._eventsCount;else if("function"==typeof s?s=a[e]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),(n=u(t))>0&&s.length>n&&!s.warned){s.warned=!0;var n,a,s,l=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,o(l)}return t}function f(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=f.bind(r);return n.listener=i,r.wrapFn=n,n}function p(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?v(n):g(n,n.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(t,e){for(var i=Array(e),r=0;r<e;++r)i[r]=t[r];return i}function y(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function v(t){for(var e=Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function _(t,e){return new Promise(function(i,r){function n(i){t.removeListener(e,o),r(i)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}x(t,e,o,{once:!0}),"error"!==e&&b(t,n,{once:!0})})}function b(t,e,i){"function"==typeof t.on&&x(t,"error",e,i)}function x(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else if("function"==typeof t.addEventListener)t.addEventListener(e,function n(o){r.once&&t.removeEventListener(e,n),i(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var a,s=Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)n(l,this,e);else for(var h=l.length,u=g(l,h),i=0;i<h;++i)n(u[i],this,e);return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){return h(e),this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,r,n,o,a;if(h(e),void 0===(r=this._events)||void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){a=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():y(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0==arguments.length){var n,o=Object.keys(i);for(r=0;r<o.length;++r)"removeListener"!==(n=o[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}}),parcelRegister("ga0rJ",function(t,e){var i,r,n,o,a,s=parcelRequire("aKNZT");t.exports=I,I.ReadableState=E,parcelRequire("lxKXz").EventEmitter;var l=function(t,e){return t.listeners(e).length},h=parcelRequire("3Yj1R"),u=parcelRequire("fLiic").Buffer,c=(void 0!==$parcel$global?$parcel$global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function f(t){return u.from(t)}function d(t){return u.isBuffer(t)||t instanceof c}var p=parcelRequire("9ZyLq");r=p&&p.debuglog?p.debuglog("stream"):function(){};var m=parcelRequire("c0U4D"),g=parcelRequire("hZMkB"),y=parcelRequire("4CJyF").getHighWaterMark,v=parcelRequire("4zE6a").codes,_=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,x=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;parcelRequire("dFiDG")(I,h);var M=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}function E(t,e,r){i=i||parcelRequire("cfdJ5"),t=t||{},"boolean"!=typeof r&&(r=e instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(n||(n=parcelRequire("g7lNg").StringDecoder),this.decoder=new n(t.encoding),this.encoding=t.encoding)}function I(t){if(i=i||parcelRequire("cfdJ5"),!(this instanceof I))return new I(t);var e=this instanceof i;this._readableState=new E(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function P(t,e,i,n,o){r("readableAddChunk",e);var a,s=t._readableState;if(null===e)s.reading=!1,z(t,s);else if(o||(a=A(s,e)),a)M(t,a);else if(s.objectMode||e&&e.length>0){if("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=f(e)),n)s.endEmitted?M(t,new w):T(t,s,e,!0);else if(s.ended)M(t,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!i?(e=s.decoder.write(e),s.objectMode||0!==e.length?T(t,s,e,!1):B(t,s)):T(t,s,e,!1)}}else n||(s.reading=!1,B(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function T(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&O(t)),B(t,e)}function A(t,e){var i;return d(e)||"string"==typeof e||void 0===e||t.objectMode||(i=new _("chunk",["string","Buffer","Uint8Array"],e)),i}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),I.prototype.destroy=g.destroy,I.prototype._undestroy=g.undestroy,I.prototype._destroy=function(t,e){e(t)},I.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),i=!0),P(this,t,e,!1,i)},I.prototype.unshift=function(t){return P(this,t,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){n||(n=parcelRequire("g7lNg").StringDecoder);var e=new n(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var C=1073741824;function R(t){return t>=C?t=C:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function N(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=R(t)),t<=e.length)?t:e.ended?e.length:(e.needReadable=!0,0)}function z(t,e){if(r("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?O(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,D(t)))}}function O(t){var e=t._readableState;r("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(r("emitReadable",e.flowing),e.emittedReadable=!0,s.nextTick(D,t))}function D(t){var e=t._readableState;r("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,G(t)}function B(t,e){e.readingMore||(e.readingMore=!0,s.nextTick(F,t,e))}function F(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(r("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function j(t){return function(){var e=t._readableState;r("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&l(t,"data")&&(e.flowing=!0,G(t))}}function q(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function V(t){r("readable nexttick read 0"),t.read(0)}function U(t,e){e.resumeScheduled||(e.resumeScheduled=!0,s.nextTick(Z,t,e))}function Z(t,e){r("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),G(t),e.flowing&&!e.reading&&t.read(0)}function G(t){var e=t._readableState;for(r("flow",e.flowing);e.flowing&&null!==t.read(););}function H(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i)}function W(t){var e=t._readableState;r("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,s.nextTick(X,e,t))}function X(t,e){if(r("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function $(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return -1}I.prototype.read=function(t){r("read",t),t=parseInt(t,10);var e,i=this._readableState,n=t;if(0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:i.length>0)||i.ended))return r("read: emitReadable",i.length,i.ended),0===i.length&&i.ended?W(this):O(this),null;if(0===(t=N(t,i))&&i.ended)return 0===i.length&&W(this),null;var o=i.needReadable;return r("need readable",o),(0===i.length||i.length-t<i.highWaterMark)&&r("length less than watermark",o=!0),i.ended||i.reading?r("reading or ended",o=!1):o&&(r("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=N(n,i))),null===(e=t>0?H(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),n!==t&&i.ended&&W(this)),null!==e&&this.emit("data",e),e},I.prototype._read=function(t){M(this,new x("_read()"))},I.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,r("pipe count=%d opts=%j",n.pipesCount,e);var o=e&&!1===e.end||t===s.stdout||t===s.stderr?y:h;function a(t,e){r("onunpipe"),t===i&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,f())}function h(){r("onend"),t.end()}n.endEmitted?s.nextTick(o):i.once("end",o),t.on("unpipe",a);var u=j(i);t.on("drain",u);var c=!1;function f(){r("cleanup"),t.removeListener("close",m),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",a),i.removeListener("end",h),i.removeListener("end",y),i.removeListener("data",d),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}function d(e){r("ondata");var o=t.write(e);r("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==$(n.pipes,t))&&!c&&(r("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function p(e){r("onerror",e),y(),t.removeListener("error",p),0===l(t,"error")&&M(t,e)}function m(){t.removeListener("finish",g),y()}function g(){r("onfinish"),t.removeListener("close",m),y()}function y(){r("unpipe"),i.unpipe(t)}return i.on("data",d),k(t,"error",p),t.once("close",m),t.once("finish",g),t.emit("pipe",i),n.flowing||(r("pipe resume"),i.resume()),t},I.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=$(e.pipes,t);return -1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},I.prototype.on=function(t,e){var i=h.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==t||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,r("on readable",n.length,n.reading),n.length?O(this):n.reading||s.nextTick(V,this)),i},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(t,e){var i=h.prototype.removeListener.call(this,t,e);return"readable"===t&&s.nextTick(q,this),i},I.prototype.removeAllListeners=function(t){var e=h.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&s.nextTick(q,this),e},I.prototype.resume=function(){var t=this._readableState;return t.flowing||(r("resume"),t.flowing=!t.readableListening,U(this,t)),t.paused=!1,this},I.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var o in t.on("end",function(){if(r("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){r("wrapped data"),i.decoder&&(o=i.decoder.write(o)),(!i.objectMode||null!=o)&&(i.objectMode||o&&o.length)&&(e.push(o)||(n=!0,t.pause()))}),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var a=0;a<S.length;a++)t.on(S[a],this.emit.bind(this,S[a]));return this._read=function(e){r("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===o&&(o=parcelRequire("chHWI")),o(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),I._fromList=H,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(t,e){return void 0===a&&(a=parcelRequire("dD06L")),a(I,t,e)})}),parcelRegister("3Yj1R",function(t,e){t.exports=parcelRequire("lxKXz").EventEmitter}),parcelRegister("c0U4D",function(t,e){function i(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){n(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(t,e,i){return(e=l(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function s(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=h(t,"string");return"symbol"==typeof e?e:String(e)}function h(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var u=parcelRequire("fLiic").Buffer,c=parcelRequire("9ZyLq").inspect,f=c&&c.custom||"inspect";function d(t,e,i){u.prototype.copy.call(t,e,i)}t.exports=function(){function t(){o(this,t),this.head=null,this.tail=null,this.length=0}return s(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return u.alloc(0);for(var e=u.allocUnsafe(t>>>0),i=this.head,r=0;i;)d(i.data,e,r),r+=i.data.length,i=i.next;return e}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,o=t>n.length?n.length:t;if(o===n.length?r+=n:r+=n.slice(0,t),0==(t-=o)){o===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(o));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=u.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,o=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,o),0==(t-=o)){o===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(o));break}++r}return this.length-=r,e}},{key:f,value:function(t,e){return c(this,r(r({},e),{},{depth:0,customInspect:!1}))}}]),t}()}),parcelRegister("hZMkB",function(t,e){var i=parcelRequire("aKNZT");function r(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,t)):i.nextTick(s,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?r._writableState?r._writableState.errorEmitted?i.nextTick(o,r):(r._writableState.errorEmitted=!0,i.nextTick(n,r,t)):i.nextTick(n,r,t):e?(i.nextTick(o,r),e(t)):i.nextTick(o,r)})),this}function n(t,e){s(t,e),o(t)}function o(t){(!t._writableState||t._writableState.emitClose)&&(!t._readableState||t._readableState.emitClose)&&t.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}function l(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}t.exports={destroy:r,undestroy:a,errorOrDestroy:l}}),parcelRegister("4CJyF",function(t,e){var i=parcelRequire("4zE6a").codes.ERR_INVALID_OPT_VALUE;function r(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}function n(t,e,n,o){var a=r(e,o,n);if(null!=a){if(!(isFinite(a)&&Math.floor(a)===a)||a<0)throw new i(o?n:"highWaterMark",a);return Math.floor(a)}return t.objectMode?16:16384}t.exports={getHighWaterMark:n}}),parcelRegister("4zE6a",function(t,e){function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}$parcel$export(t.exports,"codes",()=>r,t=>r=t);var r,n={};function o(t,e,r){function o(t,i,r){return"string"==typeof e?e:e(t,i,r)}r||(r=Error);var a=function(t){function e(e,i,r){return t.call(this,o(e,i,r))||this}return i(e,t),e}(r);a.prototype.name=r.name,a.prototype.code=t,n[t]=a}function a(t,e){if(!Array.isArray(t))return"of ".concat(e," ").concat(String(t));var i=t.length;return(t=t.map(function(t){return String(t)}),i>2)?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}function s(t,e,i){return t.substr(!i||i<0?0:+i,e.length)===e}function l(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}function h(t,e,i){return"number"!=typeof i&&(i=0),!(i+e.length>t.length)&&-1!==t.indexOf(e,i)}o("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(t,e,i){if("string"==typeof e&&s(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be",l(t," argument"))n="The ".concat(t," ").concat(r," ").concat(a(e,"type"));else{var r,n,o=h(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(a(e,"type"))}return n+". Received type ".concat(typeof i)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r=n}),parcelRegister("cfdJ5",function(t,e){var i=parcelRequire("aKNZT"),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=h;var n=parcelRequire("ga0rJ"),o=parcelRequire("7FrJE");parcelRequire("dFiDG")(h,n);for(var a=r(o.prototype),s=0;s<a.length;s++){var l=a[s];h.prototype[l]||(h.prototype[l]=o.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);n.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||i.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}),parcelRegister("7FrJE",function(t,e){var i,r,n=parcelRequire("aKNZT");function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Z(e,t)}}t.exports=E,E.WritableState=k;var a={deprecate:parcelRequire("7UyBv")},s=parcelRequire("3Yj1R"),l=parcelRequire("fLiic").Buffer,h=(void 0!==$parcel$global?$parcel$global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function u(t){return l.from(t)}function c(t){return l.isBuffer(t)||t instanceof h}var f=parcelRequire("hZMkB"),d=parcelRequire("4CJyF").getHighWaterMark,p=parcelRequire("4zE6a").codes,m=p.ERR_INVALID_ARG_TYPE,g=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,v=p.ERR_STREAM_CANNOT_PIPE,_=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,x=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,M=f.errorOrDestroy;function S(){}function k(t,e,r){i=i||parcelRequire("cfdJ5"),t=t||{},"boolean"!=typeof r&&(r=e instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===t.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){z(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function E(t){var e=this instanceof(i=i||parcelRequire("cfdJ5"));if(!e&&!r.call(E,this))return new E(t);this._writableState=new k(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function I(t,e){var i=new x;M(t,i),n.nextTick(e,i)}function P(t,e,i,r){var o;return null===i?o=new b:"string"==typeof i||e.objectMode||(o=new m("chunk",["string","Buffer"],i)),!o||(M(t,o),n.nextTick(r,o),!1)}function T(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,i)),e}function A(t,e,i,r,n,o){if(!i){var a=T(e,r,n);r!==a&&(i=!0,n="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else C(t,e,!1,s,r,n,o);return l}function C(t,e,i,r,n,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):i?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function R(t,e,i,r,o){--e.pendingcb,i?(n.nextTick(o,r),n.nextTick(V,t,e),t._writableState.errorEmitted=!0,M(t,r)):(o(r),t._writableState.errorEmitted=!0,M(t,r),V(t,e))}function N(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function z(t,e){var i=t._writableState,r=i.sync,o=i.writecb;if("function"!=typeof o)throw new y;if(N(i),e)R(t,i,r,e,o);else{var a=F(i)||t.destroyed;a||i.corked||i.bufferProcessing||!i.bufferedRequest||B(t,i),r?n.nextTick(O,t,i,a,o):O(t,i,a,o)}}function O(t,e,i,r){i||D(t,e),e.pendingcb--,r(),V(t,e)}function D(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function B(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=Array(e.bufferedRequestCount),n=e.corkedRequestsFree;n.entry=i;for(var a=0,s=!0;i;)r[a]=i,i.isBuf||(s=!1),i=i.next,a+=1;r.allBuffers=s,C(t,e,!0,e.length,r,"",n.finish),e.pendingcb++,e.lastBufferedRequest=null,n.next?(e.corkedRequestsFree=n.next,n.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,h=i.encoding,u=i.callback,c=e.objectMode?1:l.length;if(C(t,e,!1,c,l,h,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function F(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function j(t,e){t._final(function(i){e.pendingcb--,i&&M(t,i),e.prefinished=!0,t.emit("prefinish"),V(t,e)})}function q(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(j,t,e)))}function V(t,e){var i=F(e);if(i&&(q(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}function U(t,e,i){e.ending=!0,V(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function Z(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}parcelRequire("dFiDG")(E,s),k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!r.call(this,t)||this===E&&t&&t._writableState instanceof k}})):r=function(t){return t instanceof this},E.prototype.pipe=function(){M(this,new v)},E.prototype.write=function(t,e,i){var r=this._writableState,n=!1,o=!r.objectMode&&c(t);return o&&!l.isBuffer(t)&&(t=u(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=S),r.ending?I(this,i):(o||P(this,r,t,i))&&(r.pendingcb++,n=A(this,r,o,t,e,i)),n},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;!t.corked||(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||B(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,i){i(new g("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,i){var r=this._writableState;return"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||U(this,r,i),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(t,e){e(t)}}),parcelRegister("7UyBv",function(t,e){function i(t,e){if(r("noDeprecation"))return t;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}function r(t){try{if(!$parcel$global.localStorage)return!1}catch(t){return!1}var e=$parcel$global.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=i}),parcelRegister("g7lNg",function(t,e){$parcel$export(t.exports,"StringDecoder",()=>i,t=>i=t);var i,r=parcelRequire("8GZk1").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;if(!t)return"utf8";for(;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a(t){var e=o(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=a(t),this.encoding){case"utf16le":this.text=p,this.end=m,e=4;break;case"utf8":this.fillLast=c,e=4;break;case"base64":this.text=g,this.end=y,e=3;break;default:this.write=v,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function l(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function h(t,e,i){var r=e.length-1;if(r<i)return 0;var n=l(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=l(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=l(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}function u(t,e,i){if((192&e[0])!=128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((192&e[1])!=128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(192&e[2])!=128)return t.lastNeed=2,"�"}}function c(t){var e=this.lastTotal-this.lastNeed,i=u(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length)}function f(t,e){var i=h(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function p(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function m(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function g(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function v(t){return t.toString(this.encoding)}function _(t){return t&&t.length?this.write(t):""}i=s,s.prototype.write=function(t){var e,i;if(0===t.length)return"";if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=d,s.prototype.text=f,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}}),parcelRegister("chHWI",function(t,e){var i,r=parcelRequire("aKNZT");function n(t,e,i){return(e=o(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t){var e=a(t,"string");return"symbol"==typeof e?e:String(e)}function a(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var s=parcelRequire("3vbB1"),l=Symbol("lastResolve"),h=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),f=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function m(t,e){return{value:t,done:e}}function g(t){var e=t[l];if(null!==e){var i=t[p].read();null!==i&&(t[f]=null,t[l]=null,t[h]=null,e(m(i,!1)))}}function y(t){r.nextTick(g,t)}function v(t,e){return function(i,r){t.then(function(){if(e[c]){i(m(void 0,!0));return}e[d](i,r)},r)}}var _=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((n(i={get stream(){return this[p]},next:function(){var t,e=this,i=this[u];if(null!==i)return Promise.reject(i);if(this[c])return Promise.resolve(m(void 0,!0));if(this[p].destroyed)return new Promise(function(t,i){r.nextTick(function(){e[u]?i(e[u]):t(m(void 0,!0))})});var n=this[f];if(n)t=new Promise(v(n,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(m(o,!1));t=new Promise(this[d])}return this[f]=t,t}},Symbol.asyncIterator,function(){return this}),n(i,"return",function(){var t=this;return new Promise(function(e,i){t[p].destroy(null,function(t){if(t){i(t);return}e(m(void 0,!0))})})}),i),_),x=function(t){var e,i=Object.create(b,(n(e={},p,{value:t,writable:!0}),n(e,l,{value:null,writable:!0}),n(e,h,{value:null,writable:!0}),n(e,u,{value:null,writable:!0}),n(e,c,{value:t._readableState.endEmitted,writable:!0}),n(e,d,{value:function(t,e){var r=i[p].read();r?(i[f]=null,i[l]=null,i[h]=null,t(m(r,!1))):(i[l]=t,i[h]=e)},writable:!0}),e));return i[f]=null,s(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[h];null!==e&&(i[f]=null,i[l]=null,i[h]=null,e(t)),i[u]=t;return}var r=i[l];null!==r&&(i[f]=null,i[l]=null,i[h]=null,r(m(void 0,!0))),i[c]=!0}),t.on("readable",y.bind(null,i)),i};t.exports=x}),parcelRegister("3vbB1",function(t,e){var i=parcelRequire("4zE6a").codes.ERR_STREAM_PREMATURE_CLOSE;function r(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}function n(){}function o(t){return t.setHeader&&"function"==typeof t.abort}function a(t,e,s){if("function"==typeof e)return a(t,null,e);e||(e={}),s=r(s||n);var l=e.readable||!1!==e.readable&&t.readable,h=e.writable||!1!==e.writable&&t.writable,u=function(){t.writable||f()},c=t._writableState&&t._writableState.finished,f=function(){h=!1,c=!0,l||s.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){l=!1,d=!0,h||s.call(t)},m=function(e){s.call(t,e)},g=function(){var e;return l&&!d?(t._readableState&&t._readableState.ended||(e=new i),s.call(t,e)):h&&!c?(t._writableState&&t._writableState.ended||(e=new i),s.call(t,e)):void 0},y=function(){t.req.on("finish",f)};return o(t)?(t.on("complete",f),t.on("abort",g),t.req?y():t.on("request",y)):h&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",p),t.on("finish",f),!1!==e.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",y),t.req&&t.req.removeListener("finish",f),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",f),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",g)}}t.exports=a}),parcelRegister("dD06L",function(t,e){t.exports=function(){throw Error("Readable.from is not available in the browser")}}),parcelRegister("cSPs5",function(t,e){t.exports=h;var i=parcelRequire("4zE6a").codes,r=i.ERR_METHOD_NOT_IMPLEMENTED,n=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,s=parcelRequire("cfdJ5");function l(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new n);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",u)}function u(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(e,i){c(t,e,i)})}function c(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}parcelRequire("dFiDG")(h,s),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,i){i(new r("_transform()"))},h.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){s.prototype._destroy.call(this,t,function(t){e(t)})}}),parcelRegister("lO3Yd",function(t,e){t.exports=r;var i=parcelRequire("cSPs5");function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}parcelRequire("dFiDG")(r,i),r.prototype._transform=function(t,e,i){i(null,t)}}),parcelRegister("bvTed",function(t,e){function i(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var r,n=parcelRequire("4zE6a").codes,o=n.ERR_MISSING_ARGS,a=n.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function l(t){return t.setHeader&&"function"==typeof t.abort}function h(t,e,n,o){o=i(o);var s=!1;t.on("close",function(){s=!0}),void 0===r&&(r=parcelRequire("3vbB1")),r(t,{readable:e,writable:n},function(t){if(t)return o(t);s=!0,o()});var h=!1;return function(e){if(!s&&!h){if(h=!0,l(t))return t.abort();if("function"==typeof t.destroy)return t.destroy();o(e||new a("pipe"))}}}function u(t){t()}function c(t,e){return t.pipe(e)}function f(t){return t.length&&"function"==typeof t[t.length-1]?t.pop():s}function d(){for(var t,e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];var n=f(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var a=i.map(function(e,r){var o=r<i.length-1;return h(e,o,r>0,function(e){t||(t=e),e&&a.forEach(u),o||(a.forEach(u),n(t))})});return i.reduce(c)}t.exports=d}),parcelRegister("4VOKT",function(t,e){var i=parcelRequire("fLiic").Buffer,r=parcelRequire("dFiDG"),n=parcelRequire("kkShz"),o=Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],c=[1352829926,1548603684,1836072691,2053994217,0];function f(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function p(t,e,i,r,n,o,a,s){return d(t+(e^i^r)+o+a|0,s)+n|0}function m(t,e,i,r,n,o,a,s){return d(t+(e&i|~e&r)+o+a|0,s)+n|0}function g(t,e,i,r,n,o,a,s){return d(t+((e|~i)^r)+o+a|0,s)+n|0}function y(t,e,i,r,n,o,a,s){return d(t+(e&r|i&~r)+o+a|0,s)+n|0}function v(t,e,i,r,n,o,a,s){return d(t+(e^(i|~r))+o+a|0,s)+n|0}r(f,n),f.prototype._update=function(){for(var t,e,i=o,r=0;r<16;++r)i[r]=this._block.readInt32LE(4*r);for(var n=0|this._a,f=0|this._b,_=0|this._c,b=0|this._d,x=0|this._e,w=0|this._a,M=0|this._b,S=0|this._c,k=0|this._d,E=0|this._e,I=0;I<80;I+=1)I<16?(t=p(n,f,_,b,x,i[a[I]],u[0],l[I]),e=v(w,M,S,k,E,i[s[I]],c[0],h[I])):I<32?(t=m(n,f,_,b,x,i[a[I]],u[1],l[I]),e=y(w,M,S,k,E,i[s[I]],c[1],h[I])):I<48?(t=g(n,f,_,b,x,i[a[I]],u[2],l[I]),e=g(w,M,S,k,E,i[s[I]],c[2],h[I])):I<64?(t=y(n,f,_,b,x,i[a[I]],u[3],l[I]),e=m(w,M,S,k,E,i[s[I]],c[3],h[I])):(t=v(n,f,_,b,x,i[a[I]],u[4],l[I]),e=p(w,M,S,k,E,i[s[I]],c[4],h[I])),n=x,x=b,b=d(_,10),_=f,f=t,w=E,E=k,k=d(S,10),S=M,M=e;var P=this._b+_+k|0;this._b=this._c+b+E|0,this._c=this._d+x+w|0,this._d=this._e+n+M|0,this._e=this._a+f+S|0,this._a=P},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=i.alloc?i.alloc(20):new i(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=f}),parcelRegister("dhvHe",function(t,e){var i=t.exports=function(t){var e=i[t=t.toLowerCase()];if(!e)throw Error(t+" is not supported (we accept pull requests)");return new e};i.sha=parcelRequire("cCdbK"),i.sha1=parcelRequire("g7T9m"),i.sha224=parcelRequire("dQCfX"),i.sha256=parcelRequire("6fKPd"),i.sha384=parcelRequire("he18m"),i.sha512=parcelRequire("941Sz")}),parcelRegister("cCdbK",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("ieyqE"),n=parcelRequire("8GZk1").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function s(){this.init(),this._w=a,r.call(this,64,56)}function l(t){return t<<5|t>>>27}function h(t){return t<<30|t>>>2}function u(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}i(s,r),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,n=0|this._c,a=0|this._d,s=0|this._e,c=0;c<16;++c)e[c]=t.readInt32BE(4*c);for(;c<80;++c)e[c]=e[c-3]^e[c-8]^e[c-14]^e[c-16];for(var f=0;f<80;++f){var d=~~(f/20),p=l(i)+u(d,r,n,a)+s+e[f]+o[d]|0;s=a,a=n,n=h(r),r=i,i=p}this._a=i+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0},s.prototype._hash=function(){var t=n.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=s}),parcelRegister("ieyqE",function(t,e){var i=parcelRequire("8GZk1").Buffer;function r(t,e){this._block=i.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}r.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=i.from(t,e));for(var r=this._block,n=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var l=a%n,h=Math.min(o-s,n-l),u=0;u<h;u++)r[l+u]=t[s+u];a+=h,s+=h,a%n==0&&this._update(r)}return this._len+=o,this},r.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var r=(4294967295&i)>>>0,n=(i-r)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},r.prototype._update=function(){throw Error("_update must be implemented by subclass")},t.exports=r}),parcelRegister("g7T9m",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("ieyqE"),n=parcelRequire("8GZk1").Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function s(){this.init(),this._w=a,r.call(this,64,56)}function l(t){return t<<1|t>>>31}function h(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function c(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}i(s,r),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,n=0|this._c,a=0|this._d,s=0|this._e,f=0;f<16;++f)e[f]=t.readInt32BE(4*f);for(;f<80;++f)e[f]=l(e[f-3]^e[f-8]^e[f-14]^e[f-16]);for(var d=0;d<80;++d){var p=~~(d/20),m=h(i)+c(p,r,n,a)+s+e[d]+o[p]|0;s=a,a=n,n=u(r),r=i,i=m}this._a=i+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0},s.prototype._hash=function(){var t=n.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=s}),parcelRegister("dQCfX",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("6fKPd"),n=parcelRequire("ieyqE"),o=parcelRequire("8GZk1").Buffer,a=Array(64);function s(){this.init(),this._w=a,n.call(this,64,56)}i(s,r),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var t=o.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=s}),parcelRegister("6fKPd",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("ieyqE"),n=parcelRequire("8GZk1").Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=Array(64);function s(){this.init(),this._w=a,r.call(this,64,56)}function l(t,e,i){return i^t&(e^i)}function h(t,e,i){return t&e|i&(t|e)}function u(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function c(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function f(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function d(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}i(s,r),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,n=0|this._c,a=0|this._d,s=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)e[y]=t.readInt32BE(4*y);for(;y<64;++y)e[y]=d(e[y-2])+e[y-7]+f(e[y-15])+e[y-16]|0;for(var v=0;v<64;++v){var _=g+c(s)+l(s,p,m)+o[v]+e[v]|0,b=u(i)+h(i,r,n)|0;g=m,m=p,p=s,s=a+_|0,a=n,n=r,r=i,i=_+b|0}this._a=i+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},s.prototype._hash=function(){var t=n.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=s}),parcelRegister("he18m",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("941Sz"),n=parcelRequire("ieyqE"),o=parcelRequire("8GZk1").Buffer,a=Array(160);function s(){this.init(),this._w=a,n.call(this,128,112)}i(s,r),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var t=o.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=s}),parcelRegister("941Sz",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("ieyqE"),n=parcelRequire("8GZk1").Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=Array(160);function s(){this.init(),this._w=a,r.call(this,128,112)}function l(t,e,i){return i^t&(e^i)}function h(t,e,i){return t&e|i&(t|e)}function u(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function c(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function f(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function p(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function g(t,e){return t>>>0<e>>>0?1:0}i(s,r),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},s.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,n=0|this._ch,a=0|this._dh,s=0|this._eh,y=0|this._fh,v=0|this._gh,_=0|this._hh,b=0|this._al,x=0|this._bl,w=0|this._cl,M=0|this._dl,S=0|this._el,k=0|this._fl,E=0|this._gl,I=0|this._hl,P=0;P<32;P+=2)e[P]=t.readInt32BE(4*P),e[P+1]=t.readInt32BE(4*P+4);for(;P<160;P+=2){var T=e[P-30],A=e[P-30+1],C=f(T,A),R=d(A,T),N=p(T=e[P-4],A=e[P-4+1]),z=m(A,T),O=e[P-14],D=e[P-14+1],B=e[P-32],F=e[P-32+1],j=R+D|0,q=C+O+g(j,R)|0;q=(q=q+N+g(j=j+z|0,z)|0)+B+g(j=j+F|0,F)|0,e[P]=q,e[P+1]=j}for(var V=0;V<160;V+=2){q=e[V],j=e[V+1];var U=h(i,r,n),Z=h(b,x,w),G=u(i,b),H=u(b,i),W=c(s,S),X=c(S,s),$=o[V],Y=o[V+1],K=l(s,y,v),J=l(S,k,E),Q=I+X|0,tt=_+W+g(Q,I)|0;tt=(tt=(tt=tt+K+g(Q=Q+J|0,J)|0)+$+g(Q=Q+Y|0,Y)|0)+q+g(Q=Q+j|0,j)|0;var te=H+Z|0,ti=G+U+g(te,H)|0;_=v,I=E,v=y,E=k,y=s,k=S,s=a+tt+g(S=M+Q|0,M)|0,a=n,M=w,n=r,w=x,r=i,x=b,i=tt+ti+g(b=Q+te|0,Q)|0}this._al=this._al+b|0,this._bl=this._bl+x|0,this._cl=this._cl+w|0,this._dl=this._dl+M|0,this._el=this._el+S|0,this._fl=this._fl+k|0,this._gl=this._gl+E|0,this._hl=this._hl+I|0,this._ah=this._ah+i+g(this._al,b)|0,this._bh=this._bh+r+g(this._bl,x)|0,this._ch=this._ch+n+g(this._cl,w)|0,this._dh=this._dh+a+g(this._dl,M)|0,this._eh=this._eh+s+g(this._el,S)|0,this._fh=this._fh+y+g(this._fl,k)|0,this._gh=this._gh+v+g(this._gl,E)|0,this._hh=this._hh+_+g(this._hl,I)|0},s.prototype._hash=function(){var t=n.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=s}),parcelRegister("entWb",function(t,e){var i=parcelRequire("8GZk1").Buffer,r=parcelRequire("ktjtG").Transform,n=parcelRequire("g7lNg").StringDecoder;function o(t){r.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}parcelRequire("dFiDG")(o,r),o.prototype.update=function(t,e,r){"string"==typeof t&&(t=i.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state")},o.prototype._transform=function(t,e,i){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{i(r)}},o.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},o.prototype._finalOrDigest=function(t){var e=this.__final()||i.alloc(0);return t&&(e=this._toString(e,t,!0)),e},o.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new n(e),this._encoding=e),this._encoding!==e)throw Error("can't switch encodings");var r=this._decoder.write(t);return i&&(r+=this._decoder.end()),r},t.exports=o}),parcelRegister("g9Omc",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("dm21H"),n=parcelRequire("entWb"),o=parcelRequire("8GZk1").Buffer,a=parcelRequire("9jcrd"),s=parcelRequire("4VOKT"),l=parcelRequire("dhvHe"),h=o.alloc(128);function u(t,e){n.call(this,"digest"),"string"==typeof e&&(e=o.from(e));var i="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>i?e=("rmd160"===t?new s:l(t)).update(e).digest():e.length<i&&(e=o.concat([e,h],i));for(var r=this._ipad=o.allocUnsafe(i),a=this._opad=o.allocUnsafe(i),u=0;u<i;u++)r[u]=54^e[u],a[u]=92^e[u];this._hash="rmd160"===t?new s:l(t),this._hash.update(r)}i(u,n),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new s:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new u("rmd160",e):"md5"===t?new r(a,e):new u(t,e)}}),parcelRegister("dm21H",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("8GZk1").Buffer,n=parcelRequire("entWb"),o=r.alloc(128),a=64;function s(t,e){n.call(this,"digest"),"string"==typeof e&&(e=r.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=r.concat([e,o],a));for(var i=this._ipad=r.allocUnsafe(a),s=this._opad=r.allocUnsafe(a),l=0;l<a;l++)i[l]=54^e[l],s[l]=92^e[l];this._hash=[i]}i(s,n),s.prototype._update=function(t){this._hash.push(t)},s.prototype._final=function(){var t=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,t]))},t.exports=s}),parcelRegister("9jcrd",function(t,e){var i=parcelRequire("4tt75");t.exports=function(t){return new i().update(t).digest()}}),parcelRegister("ftKR2",function(t,e){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')}),parcelRegister("eh1fO",function(t,e){var i,r,n=parcelRequire("8GZk1").Buffer,o=parcelRequire("3FP6H"),a=parcelRequire("7ppHn"),s=parcelRequire("eWdZo"),l=parcelRequire("dwyIQ"),h=$parcel$global.crypto&&$parcel$global.crypto.subtle,u={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},c=[];function f(t){if($parcel$global.process&&!$parcel$global.process.browser||!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(void 0!==c[t])return c[t];var e=p(i=i||n.alloc(8),i,10,128,t).then(function(){return!0}).catch(function(){return!1});return c[t]=e,e}function d(){return r||(r=$parcel$global.process&&$parcel$global.process.nextTick?$parcel$global.process.nextTick:$parcel$global.queueMicrotask?$parcel$global.queueMicrotask:$parcel$global.setImmediate?$parcel$global.setImmediate:$parcel$global.setTimeout)}function p(t,e,i,r,o){return h.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return h.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:o}},t,r<<3)}).then(function(t){return n.from(t)})}function m(t,e){t.then(function(t){d()(function(){e(null,t)})},function(t){d()(function(){e(t)})})}t.exports=function(t,e,i,r,n,h){"function"==typeof n&&(h=n,n=void 0);var c=u[(n=n||"sha1").toLowerCase()];if(!c||"function"!=typeof $parcel$global.Promise){d()(function(){var o;try{o=s(t,e,i,r,n)}catch(t){return h(t)}h(null,o)});return}if(o(i,r),t=l(t,a,"Password"),e=l(e,a,"Salt"),"function"!=typeof h)throw Error("No callback provided to pbkdf2");m(f(c).then(function(o){return o?p(t,e,i,r,c):s(t,e,i,r,n)}),h)}}),parcelRegister("3FP6H",function(t,e){var i=1073741823;t.exports=function(t,e){if("number"!=typeof t)throw TypeError("Iterations not a number");if(t<0)throw TypeError("Bad iterations");if("number"!=typeof e)throw TypeError("Key length not a number");if(e<0||e>i||e!=e)throw TypeError("Bad key length")}}),parcelRegister("7ppHn",function(t,e){var i,r=parcelRequire("aKNZT");i=$parcel$global.process&&$parcel$global.process.browser?"utf-8":$parcel$global.process&&$parcel$global.process.version?parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=i}),parcelRegister("eWdZo",function(t,e){var i=parcelRequire("9jcrd"),r=parcelRequire("4VOKT"),n=parcelRequire("dhvHe"),o=parcelRequire("8GZk1").Buffer,a=parcelRequire("3FP6H"),s=parcelRequire("7ppHn"),l=parcelRequire("dwyIQ"),h=o.alloc(128),u={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function c(t,e,i){var r=f(t),n="sha512"===t||"sha384"===t?128:64;e.length>n?e=r(e):e.length<n&&(e=o.concat([e,h],n));for(var a=o.allocUnsafe(n+u[t]),s=o.allocUnsafe(n+u[t]),l=0;l<n;l++)a[l]=54^e[l],s[l]=92^e[l];var c=o.allocUnsafe(n+i+4);a.copy(c,0,0,n),this.ipad1=c,this.ipad2=a,this.opad=s,this.alg=t,this.blocksize=n,this.hash=r,this.size=u[t]}function f(t){function e(e){return n(t).update(e).digest()}function o(t){return new r().update(t).digest()}return"rmd160"===t||"ripemd160"===t?o:"md5"===t?i:e}function d(t,e,i,r,n){a(i,r);var h=new c(n=n||"sha1",t=l(t,s,"Password"),(e=l(e,s,"Salt")).length),f=o.allocUnsafe(r),d=o.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var p=0,m=u[n],g=Math.ceil(r/m),y=1;y<=g;y++){d.writeUInt32BE(y,e.length);for(var v=h.run(d,h.ipad1),_=v,b=1;b<i;b++){_=h.run(_,h.ipad2);for(var x=0;x<m;x++)v[x]^=_[x]}v.copy(f,p),p+=m}return f}c.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=d}),parcelRegister("dwyIQ",function(t,e){var i=parcelRequire("8GZk1").Buffer;t.exports=function(t,e,r){if(i.isBuffer(t))return t;if("string"==typeof t)return i.from(t,e);if(ArrayBuffer.isView(t))return i.from(t.buffer);throw TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}}),parcelRegister("3WHoc",function(t,e){$parcel$export(t.exports,"readUInt32BE",()=>i,t=>i=t),$parcel$export(t.exports,"writeUInt32BE",()=>r,t=>r=t),$parcel$export(t.exports,"ip",()=>n,t=>n=t),$parcel$export(t.exports,"rip",()=>o,t=>o=t),$parcel$export(t.exports,"pc1",()=>a,t=>a=t),$parcel$export(t.exports,"r28shl",()=>s,t=>s=t),$parcel$export(t.exports,"pc2",()=>l,t=>l=t),$parcel$export(t.exports,"expand",()=>h,t=>h=t),$parcel$export(t.exports,"substitute",()=>u,t=>u=t),$parcel$export(t.exports,"permute",()=>c,t=>c=t),$parcel$export(t.exports,"padSplit",()=>f,t=>f=t),i=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},r=function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},n=function(t,e,i,r){for(var n=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)n<<=1,n|=e>>>s+a&1;for(var s=0;s<=24;s+=8)n<<=1,n|=t>>>s+a&1}for(var a=6;a>=0;a-=2){for(var s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(var s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}i[r+0]=n>>>0,i[r+1]=o>>>0},o=function(t,e,i,r){for(var n=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)n<<=1,n|=e>>>s+a&1,n<<=1,n|=t>>>s+a&1;for(var a=4;a<8;a++)for(var s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;i[r+0]=n>>>0,i[r+1]=o>>>0},a=function(t,e,i,r){for(var n=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1;for(var s=0;s<=24;s+=8)n<<=1,n|=t>>s+a&1}for(var s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1;for(var a=1;a<=3;a++){for(var s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(var s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(var s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;i[r+0]=n>>>0,i[r+1]=o>>>0},s=function(t,e){return t<<e&268435455|t>>>28-e};var i,r,n,o,a,s,l,h,u,c,f,d=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];l=function(t,e,i,r){for(var n=0,o=0,a=d.length>>>1,s=0;s<a;s++)n<<=1,n|=t>>>d[s]&1;for(var s=a;s<d.length;s++)o<<=1,o|=e>>>d[s]&1;i[r+0]=n>>>0,i[r+1]=o>>>0},h=function(t,e,i){var r=0,n=0;r=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=t>>>o&63;for(var o=11;o>=3;o-=4)n|=t>>>o&63,n<<=6;n|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=n>>>0};var p=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];u=function(t,e){for(var i=0,r=0;r<4;r++){var n=t>>>18-6*r&63,o=p[64*r+n];i<<=4,i|=o}for(var r=0;r<4;r++){var n=e>>>18-6*r&63,o=p[256+64*r+n];i<<=4,i|=o}return i>>>0};var m=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];c=function(t){for(var e=0,i=0;i<m.length;i++)e<<=1,e|=t>>>m[i]&1;return e>>>0},f=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var n=[],o=0;o<e;o+=i)n.push(r.slice(o,o+i));return n.join(" ")}}),parcelRegister("dm77F",function(t,e){var i=parcelRequire("8yQDN");function r(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=Array(this.blockSize),this.bufferOff=0,this.padding=!1!==t.padding}t.exports=r,r.prototype._init=function(){},r.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},r.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},r.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(t){var e=0,i=0,r=Array(((this.bufferOff+t.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(r,i)));for(var n=t.length-(t.length-e)%this.blockSize;e<n;e+=this.blockSize)this._update(t,e,r,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return r},r.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),i+=this._flushBuffer(n,i);return e+=this._buffer(t,e),n},r.prototype.final=function(t){var e,i;return(t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e)?e.concat(i):i},r.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=Array(this.blockSize);return this._update(this.buffer,0,t,0),t},r.prototype._unpad=function(t){return t},r.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}}),parcelRegister("8yQDN",function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}t.exports=i,i.equal=function(t,e,i){if(t!=e)throw Error(i||"Assertion failed: "+t+" != "+e)}}),parcelRegister("f8WUS",function(t,e){var i=parcelRequire("8yQDN"),r=parcelRequire("dFiDG"),n=parcelRequire("3WHoc"),o=parcelRequire("dm77F");function a(){this.tmp=[,,],this.keys=null}function s(t){o.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}r(s,o),t.exports=s,s.create=function(t){return new s(t)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];s.prototype.deriveKeys=function(t,e){t.keys=Array(32),i.equal(e.length,this.blockSize,"Invalid key length");var r=n.readUInt32BE(e,0),o=n.readUInt32BE(e,4);n.pc1(r,o,t.tmp,0),r=t.tmp[0],o=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=l[a>>>1];r=n.r28shl(r,s),o=n.r28shl(o,s),n.pc2(r,o,t.keys,a)}},s.prototype._update=function(t,e,i,r){var o=this._desState,a=n.readUInt32BE(t,e),s=n.readUInt32BE(t,e+4);n.ip(a,s,o.tmp,0),a=o.tmp[0],s=o.tmp[1],"encrypt"===this.type?this._encrypt(o,a,s,o.tmp,0):this._decrypt(o,a,s,o.tmp,0),a=o.tmp[0],s=o.tmp[1],n.writeUInt32BE(i,a,r),n.writeUInt32BE(i,s,r+4)},s.prototype._pad=function(t,e){if(!1===this.padding)return!1;for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},s.prototype._unpad=function(t){if(!1===this.padding)return t;for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)i.equal(t[r],e);return t.slice(0,t.length-e)},s.prototype._encrypt=function(t,e,i,r,o){for(var a=e,s=i,l=0;l<t.keys.length;l+=2){var h=t.keys[l],u=t.keys[l+1];n.expand(s,t.tmp,0),h^=t.tmp[0],u^=t.tmp[1];var c=n.substitute(h,u),f=n.permute(c),d=s;s=(a^f)>>>0,a=d}n.rip(s,a,r,o)},s.prototype._decrypt=function(t,e,i,r,o){for(var a=i,s=e,l=t.keys.length-2;l>=0;l-=2){var h=t.keys[l],u=t.keys[l+1];n.expand(a,t.tmp,0),h^=t.tmp[0],u^=t.tmp[1];var c=n.substitute(h,u),f=n.permute(c),d=a;a=(s^f)>>>0,s=d}n.rip(a,s,r,o)}}),parcelRegister("lOLNi",function(t,e){$parcel$export(t.exports,"instantiate",()=>i,t=>i=t);var i,r=parcelRequire("8yQDN"),n=parcelRequire("dFiDG"),o={};function a(t){r.equal(t.length,8,"Invalid IV length"),this.iv=Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}i=function(t){function e(e){t.call(this,e),this._cbcInit()}n(e,t);for(var i=Object.keys(o),r=0;r<i.length;r++){var a=i[r];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,i,r){var n=this._cbcState,o=this.constructor.super_.prototype,a=n.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,i,r);for(var s=0;s<this.blockSize;s++)a[s]=i[r+s]}else{o._update.call(this,t,e,i,r);for(var s=0;s<this.blockSize;s++)i[r+s]^=a[s];for(var s=0;s<this.blockSize;s++)a[s]=t[e+s]}}}),parcelRegister("jrmLL",function(t,e){var i=parcelRequire("8yQDN"),r=parcelRequire("dFiDG"),n=parcelRequire("dm77F"),o=parcelRequire("f8WUS");function a(t,e){i.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),a=e.slice(16,24);"encrypt"===t?this.ciphers=[o.create({type:"encrypt",key:r}),o.create({type:"decrypt",key:n}),o.create({type:"encrypt",key:a})]:this.ciphers=[o.create({type:"decrypt",key:a}),o.create({type:"encrypt",key:n}),o.create({type:"decrypt",key:r})]}function s(t){n.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}r(s,n),t.exports=s,s.create=function(t){return new s(t)},s.prototype._update=function(t,e,i,r){var n=this._edeState;n.ciphers[0]._update(t,e,i,r),n.ciphers[1]._update(i,r,i,r),n.ciphers[2]._update(i,r,i,r)},s.prototype._pad=o.prototype._pad,s.prototype._unpad=o.prototype._unpad}),parcelRegister("1of1m",function(t,e){var i,r;$parcel$export(t.exports,"encrypt",()=>i,t=>i=t),$parcel$export(t.exports,"decrypt",()=>r,t=>r=t),i=function(t,e){return t._cipher.encryptBlock(e)},r=function(t,e){return t._cipher.decryptBlock(e)}}),parcelRegister("38dtZ",function(t,e){$parcel$export(t.exports,"encrypt",()=>i,t=>i=t),$parcel$export(t.exports,"decrypt",()=>r,t=>r=t);var i,r,n=parcelRequire("e7MQo");i=function(t,e){var i=n(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},r=function(t,e){var i=t._prev;return t._prev=e,n(t._cipher.decryptBlock(e),i)}}),parcelRegister("e7MQo",function(t,e){var i=parcelRequire("fLiic").Buffer;t.exports=function(t,e){for(var r=Math.min(t.length,e.length),n=new i(r),o=0;o<r;++o)n[o]=t[o]^e[o];return n}}),parcelRegister("eKyVo",function(t,e){$parcel$export(t.exports,"encrypt",()=>i,t=>i=t);var i,r=parcelRequire("8GZk1").Buffer,n=parcelRequire("e7MQo");function o(t,e,i){var o=e.length,a=n(e,t._cache);return t._cache=t._cache.slice(o),t._prev=r.concat([t._prev,i?e:a]),a}i=function(t,e,i){for(var n,a=r.allocUnsafe(0);e.length;)if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),t._cache.length<=e.length)n=t._cache.length,a=r.concat([a,o(t,e.slice(0,n),i)]),e=e.slice(n);else{a=r.concat([a,o(t,e,i)]);break}return a}}),parcelRegister("7rMJu",function(t,e){$parcel$export(t.exports,"encrypt",()=>i,t=>i=t);var i,r=parcelRequire("8GZk1").Buffer;function n(t,e,i){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([i?e:n])]),n}i=function(t,e,i){for(var o=e.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=n(t,e[s],i);return a}}),parcelRegister("aBfop",function(t,e){$parcel$export(t.exports,"encrypt",()=>i,t=>i=t);var i,r=parcelRequire("8GZk1").Buffer;function n(t,e,i){for(var r,n,a,s=-1,l=8,h=0;++s<l;)r=t._cipher.encryptBlock(t._prev),n=e&1<<7-s?128:0,h+=(128&(a=r[0]^n))>>s%8,t._prev=o(t._prev,i?n:a);return h}function o(t,e){var i=t.length,n=-1,o=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++n<i;)o[n]=t[n]<<1|t[n+1]>>7;return o}i=function(t,e,i){for(var o=e.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=n(t,e[s],i);return a}}),parcelRegister("gMy3M",function(t,e){$parcel$export(t.exports,"encrypt",()=>i,t=>i=t);var i,r=parcelRequire("fLiic").Buffer,n=parcelRequire("e7MQo");function o(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}i=function(t,e){for(;t._cache.length<e.length;)t._cache=r.concat([t._cache,o(t)]);var i=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,i)}}),parcelRegister("inctX",function(t,e){$parcel$export(t.exports,"encrypt",()=>i,t=>i=t);var i,r=parcelRequire("e7MQo"),n=parcelRequire("8GZk1").Buffer,o=parcelRequire("dZo3k");function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}var s=16;i=function(t,e){var i=Math.ceil(e.length/s),o=t._cache.length;t._cache=n.concat([t._cache,n.allocUnsafe(i*s)]);for(var l=0;l<i;l++){var h=a(t),u=o+l*s;t._cache.writeUInt32BE(h[0],u+0),t._cache.writeUInt32BE(h[1],u+4),t._cache.writeUInt32BE(h[2],u+8),t._cache.writeUInt32BE(h[3],u+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,c)}}),parcelRegister("dZo3k",function(t,e){function i(t){for(var e,i=t.length;i--;)if(255===(e=t.readUInt8(i)))t.writeUInt8(0,i);else{e++,t.writeUInt8(e,i);break}}t.exports=i}),parcelRegister("26s1V",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,i,r){for(var n=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=r,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var l="le"===e,h=new t(s),u=this.clone();if(l){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-a;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}function g(t,e,i){return new y().mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?d(this,t,e):i<1024?m(this,t,e):g(this,t,e)},y.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},y.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},y.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=f(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i.strip(),o.strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},n.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},r(b,_),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,_),r(w,_),r(M,_),M.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(v[t])return v[t];if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new w;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return v[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new k(t)},r(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("jIF9i",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,i,r){for(var n=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=r,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var l="le"===e,h=new t(s),u=this.clone();if(l){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-a;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}function g(t,e,i){return new y().mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?d(this,t,e):i<1024?m(this,t,e):g(this,t,e)},y.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},y.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},y.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=f(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i.strip(),o.strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},n.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},r(b,_),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,_),r(w,_),r(M,_),M.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(v[t])return v[t];if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new w;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return v[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new k(t)},r(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("gkrIn",function(t,e){var i;function r(t){this.rand=t}if(t.exports=function(t){return i||(i=new r(null)),i.generate(t)},t.exports.Rand=r,r.prototype.generate=function(t){return this._rand(t)},r.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(r.prototype._rand=function(){throw Error("Not implemented yet")});else try{var n=parcelRequire("9ZyLq");if("function"!=typeof n.randomBytes)throw Error("Not supported");r.prototype._rand=function(t){return n.randomBytes(t)}}catch(t){}}),parcelRegister("lf03h",function(t,e){(e=t.exports=parcelRequire("4IPcP")).Stream=e,e.Readable=e,e.Writable=parcelRequire("9eNKq"),e.Duplex=parcelRequire("de0tP"),e.Transform=parcelRequire("gSlmv"),e.PassThrough=parcelRequire("hmA6G")}),parcelRegister("4IPcP",function(t,e){var i,r,n=parcelRequire("aKNZT"),o=parcelRequire("awsjU");t.exports=x;var a=parcelRequire("ltwEc");x.ReadableState=b,parcelRequire("lxKXz").EventEmitter;var s=function(t,e){return t.listeners(e).length},l=parcelRequire("69eIe"),h=parcelRequire("crFdI").Buffer,u=(void 0!==$parcel$global?$parcel$global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function c(t){return h.from(t)}function f(t){return h.isBuffer(t)||t instanceof u}var d=Object.create(parcelRequire("7uqct"));d.inherits=parcelRequire("dFiDG");var p=parcelRequire("9ZyLq"),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var g=parcelRequire("3bZ9t"),y=parcelRequire("1yh4j");d.inherits(x,l);var v=["error","close","destroy","pause","resume"];function _(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}function b(t,e){i=i||parcelRequire("de0tP"),t=t||{};var n=e instanceof i;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;o||0===o?this.highWaterMark=o:n&&(a||0===a)?this.highWaterMark=a:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(r||(r=parcelRequire("crdnd").StringDecoder),this.decoder=new r(t.encoding),this.encoding=t.encoding)}function x(t){if(i=i||parcelRequire("de0tP"),!(this instanceof x))return new x(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function w(t,e,i,r,n){var o,a=t._readableState;return null===e?(a.reading=!1,T(t,a)):(n||(o=S(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=c(e)),r?a.endEmitted?t.emit("error",Error("stream.unshift() after end event")):M(t,a,e,!0):a.ended?t.emit("error",Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?M(t,a,e,!1):R(t,a)):M(t,a,e,!1))):r||(a.reading=!1)),k(a)}function M(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&A(t)),R(t,e)}function S(t,e){var i;return f(e)||"string"==typeof e||void 0===e||t.objectMode||(i=TypeError("Invalid non-string/buffer chunk")),i}function k(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(x.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),x.prototype.destroy=y.destroy,x.prototype._undestroy=y.undestroy,x.prototype._destroy=function(t,e){this.push(null),e(t)},x.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),i=!0),w(this,t,e,!1,i)},x.prototype.unshift=function(t){return w(this,t,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){return r||(r=parcelRequire("crdnd").StringDecoder),this._readableState.decoder=new r(t),this._readableState.encoding=t,this};var E=8388608;function I(t){return t>=E?t=E:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function P(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=I(t)),t<=e.length)?t:e.ended?e.length:(e.needReadable=!0,0)}function T(t,e){if(!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,A(t)}}function A(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(m("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(C,t):C(t))}function C(t){m("emit readable"),t.emit("readable"),F(t)}function R(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(N,t,e))}function N(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(m("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function z(t){return function(){var e=t._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,F(t))}}function O(t){m("readable nexttick read 0"),t.read(0)}function D(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(B,t,e))}function B(t,e){e.reading||(m("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),F(t),e.flowing&&!e.reading&&t.read(0)}function F(t){var e=t._readableState;for(m("flow",e.flowing);e.flowing&&null!==t.read(););}function j(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=q(t,e.buffer,e.decoder),i)}function q(t,e,i){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?V(t,e):U(t,e),r}function V(t,e){var i=e.head,r=1,n=i.data;for(t-=n.length;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(a===o.length?n+=o:n+=o.slice(0,t),0==(t-=a)){a===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++r}return e.length-=r,n}function U(t,e){var i=h.allocUnsafe(t),r=e.head,n=1;for(r.data.copy(i),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,a),0==(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}function Z(t){var e=t._readableState;if(e.length>0)throw Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick(G,e,t))}function G(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function H(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return -1}x.prototype.read=function(t){m("read",t),t=parseInt(t,10);var e,i=this._readableState,r=t;if(0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&(i.length>=i.highWaterMark||i.ended))return m("read: emitReadable",i.length,i.ended),0===i.length&&i.ended?Z(this):A(this),null;if(0===(t=P(t,i))&&i.ended)return 0===i.length&&Z(this),null;var n=i.needReadable;return m("need readable",n),(0===i.length||i.length-t<i.highWaterMark)&&m("length less than watermark",n=!0),i.ended||i.reading?m("reading or ended",n=!1):n&&(m("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=P(r,i))),null===(e=t>0?j(t,i):null)?(i.needReadable=!0,t=0):i.length-=t,0===i.length&&(i.ended||(i.needReadable=!0),r!==t&&i.ended&&Z(this)),null!==e&&this.emit("data",e),e},x.prototype._read=function(t){this.emit("error",Error("_read() is not implemented"))},x.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,m("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===n.stdout||t===n.stderr?b:h;function l(t,e){m("onunpipe"),t===i&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,f())}function h(){m("onend"),t.end()}r.endEmitted?o.nextTick(a):i.once("end",a),t.on("unpipe",l);var u=z(i);t.on("drain",u);var c=!1;function f(){m("cleanup"),t.removeListener("close",y),t.removeListener("finish",v),t.removeListener("drain",u),t.removeListener("error",g),t.removeListener("unpipe",l),i.removeListener("end",h),i.removeListener("end",b),i.removeListener("data",p),c=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var d=!1;function p(e){m("ondata"),d=!1,!1!==t.write(e)||d||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==H(r.pipes,t))&&!c&&(m("false write response, pause",r.awaitDrain),r.awaitDrain++,d=!0),i.pause())}function g(e){m("onerror",e),b(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",v),b()}function v(){m("onfinish"),t.removeListener("close",y),b()}function b(){m("unpipe"),i.unpipe(t)}return i.on("data",p),_(t,"error",g),t.once("close",y),t.once("finish",v),t.emit("pipe",i),r.flowing||(m("pipe resume"),i.resume()),t},x.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=H(e.pipes,t);return -1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},x.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&A(this):o.nextTick(O,this))}return i},x.prototype.addListener=x.prototype.on,x.prototype.resume=function(){var t=this._readableState;return t.flowing||(m("resume"),t.flowing=!0,D(this,t)),this},x.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},x.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",function(){if(m("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){m("wrapped data"),i.decoder&&(n=i.decoder.write(n)),(!i.objectMode||null!=n)&&(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<v.length;o++)t.on(v[o],this.emit.bind(this,v[o]));return this._read=function(e){m("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),x._fromList=j}),parcelRegister("awsjU",function(t,e){var i=parcelRequire("aKNZT");function r(t,e,r,n){if("function"!=typeof t)throw TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return i.nextTick(t);case 2:return i.nextTick(function(){t.call(null,e)});case 3:return i.nextTick(function(){t.call(null,e,r)});case 4:return i.nextTick(function(){t.call(null,e,r,n)});default:for(o=Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return i.nextTick(function(){t.apply(null,o)})}}void 0!==i&&i.version&&0!==i.version.indexOf("v0.")&&(0!==i.version.indexOf("v1.")||0===i.version.indexOf("v1.8."))?t.exports=i:t.exports={nextTick:r}}),parcelRegister("ltwEc",function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}}),parcelRegister("69eIe",function(t,e){t.exports=parcelRequire("lxKXz").EventEmitter}),parcelRegister("crFdI",function(t,e){var i=parcelRequire("fLiic"),r=i.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(n(i,t.exports),t.exports.Buffer=o),n(r,o),o.from=function(t,e,i){if("number"==typeof t)throw TypeError("Argument must not be a number");return r(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return i.SlowBuffer(t)}}),parcelRegister("7uqct",function(t,e){var i,r,n,o,a,s,l,h,u,c,f,d,p,m,g;function y(t){return Object.prototype.toString.call(t)}$parcel$export(t.exports,"isArray",()=>i,t=>i=t),$parcel$export(t.exports,"isBoolean",()=>r,t=>r=t),$parcel$export(t.exports,"isNull",()=>n,t=>n=t),$parcel$export(t.exports,"isNullOrUndefined",()=>o,t=>o=t),$parcel$export(t.exports,"isNumber",()=>a,t=>a=t),$parcel$export(t.exports,"isString",()=>s,t=>s=t),$parcel$export(t.exports,"isSymbol",()=>l,t=>l=t),$parcel$export(t.exports,"isUndefined",()=>h,t=>h=t),$parcel$export(t.exports,"isRegExp",()=>u,t=>u=t),$parcel$export(t.exports,"isObject",()=>c,t=>c=t),$parcel$export(t.exports,"isDate",()=>f,t=>f=t),$parcel$export(t.exports,"isError",()=>d,t=>d=t),$parcel$export(t.exports,"isFunction",()=>p,t=>p=t),$parcel$export(t.exports,"isPrimitive",()=>m,t=>m=t),$parcel$export(t.exports,"isBuffer",()=>g,t=>g=t),i=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===y(t)},r=function(t){return"boolean"==typeof t},n=function(t){return null===t},o=function(t){return null==t},a=function(t){return"number"==typeof t},s=function(t){return"string"==typeof t},l=function(t){return"symbol"==typeof t},h=function(t){return void 0===t},u=function(t){return"[object RegExp]"===y(t)},c=function(t){return"object"==typeof t&&null!==t},f=function(t){return"[object Date]"===y(t)},d=function(t){return"[object Error]"===y(t)||t instanceof Error},p=function(t){return"function"==typeof t},m=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},g=parcelRequire("fLiic").Buffer.isBuffer}),parcelRegister("3bZ9t",function(t,e){function i(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}var r=parcelRequire("crFdI").Buffer,n=parcelRequire("9ZyLq");function o(t,e,i){t.copy(e,i)}t.exports=function(){function t(){i(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);for(var e=r.allocUnsafe(t>>>0),i=this.head,n=0;i;)o(i.data,e,n),n+=i.data.length,i=i.next;return e},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})}),parcelRegister("1yh4j",function(t,e){var i=parcelRequire("awsjU");function r(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,t)):i.nextTick(o,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,i.nextTick(o,r,t)):i.nextTick(o,r,t):e&&e(t)})),this}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}t.exports={destroy:r,undestroy:n}}),parcelRegister("de0tP",function(t,e){var i=parcelRequire("awsjU"),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var n=Object.create(parcelRequire("7uqct"));n.inherits=parcelRequire("dFiDG");var o=parcelRequire("4IPcP"),a=parcelRequire("9eNKq");n.inherits(u,o);for(var s=r(a.prototype),l=0;l<s.length;l++){var h=s[l];u.prototype[h]||(u.prototype[h]=a.prototype[h])}function u(t){if(!(this instanceof u))return new u(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}}),parcelRegister("9eNKq",function(t,e){var i,r,n=parcelRequire("awsjU");function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){z(e,t)}}t.exports=y;var a=n.nextTick;y.WritableState=g;var s=Object.create(parcelRequire("7uqct"));s.inherits=parcelRequire("dFiDG");var l={deprecate:parcelRequire("7UyBv")},h=parcelRequire("69eIe"),u=parcelRequire("crFdI").Buffer,c=(void 0!==$parcel$global?$parcel$global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function f(t){return u.from(t)}function d(t){return u.isBuffer(t)||t instanceof c}var p=parcelRequire("1yh4j");function m(){}function g(t,e){i=i||parcelRequire("de0tP"),t=t||{};var r=e instanceof i;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,a=t.writableHighWaterMark,s=this.objectMode?16:16384;n||0===n?this.highWaterMark=n:r&&(a||0===a)?this.highWaterMark=a:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){k(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(t){if(i=i||parcelRequire("de0tP"),!r.call(y,this)&&!(this instanceof i))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function v(t,e){var i=Error("write after end");t.emit("error",i),n.nextTick(e,i)}function _(t,e,i,r){var o=!0,a=!1;return null===i?a=TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(a=TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),n.nextTick(r,a),o=!1),o}function b(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,i)),e}function x(t,e,i,r,n,o){if(!i){var a=b(e,r,n);r!==a&&(i=!0,n="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,s,r,n,o);return l}function w(t,e,i,r,n,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function M(t,e,i,r,o){--e.pendingcb,i?(n.nextTick(o,r),n.nextTick(R,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(o(r),t._writableState.errorEmitted=!0,t.emit("error",r),R(t,e))}function S(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function k(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(S(i),e)M(t,i,r,e,n);else{var o=T(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||P(t,i),r?a(E,t,i,o,n):E(t,i,o,n)}}function E(t,e,i,r){i||I(t,e),e.pendingcb--,r(),R(t,e)}function I(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function P(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=Array(e.bufferedRequestCount),n=e.corkedRequestsFree;n.entry=i;for(var a=0,s=!0;i;)r[a]=i,i.isBuf||(s=!1),i=i.next,a+=1;r.allBuffers=s,w(t,e,!0,e.length,r,"",n.finish),e.pendingcb++,e.lastBufferedRequest=null,n.next?(e.corkedRequestsFree=n.next,n.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,h=i.encoding,u=i.callback,c=e.objectMode?1:l.length;if(w(t,e,!1,c,l,h,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function A(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),R(t,e)})}function C(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,n.nextTick(A,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function R(t,e){var i=T(e);return i&&(C(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}function N(t,e,i){e.ending=!0,R(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function z(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}s.inherits(y,h),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!r.call(this,t)||this===y&&t&&t._writableState instanceof g}})):r=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var r=this._writableState,n=!1,o=!r.objectMode&&d(t);return o&&!u.isBuffer(t)&&(t=f(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=m),r.ended?v(this,i):(o||_(this,r,t,i))&&(r.pendingcb++,n=x(this,r,o,t,e,i)),n},y.prototype.cork=function(){var t=this._writableState;t.corked++},y.prototype.uncork=function(){var t=this._writableState;!t.corked||(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||P(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,i){i(Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||N(this,r,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=p.destroy,y.prototype._undestroy=p.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}),parcelRegister("crdnd",function(t,e){$parcel$export(t.exports,"StringDecoder",()=>i,t=>i=t);var i,r=parcelRequire("crFdI").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;if(!t)return"utf8";for(;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a(t){var e=o(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=a(t),this.encoding){case"utf16le":this.text=p,this.end=m,e=4;break;case"utf8":this.fillLast=c,e=4;break;case"base64":this.text=g,this.end=y,e=3;break;default:this.write=v,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function l(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function h(t,e,i){var r=e.length-1;if(r<i)return 0;var n=l(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=l(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=l(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}function u(t,e,i){if((192&e[0])!=128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((192&e[1])!=128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(192&e[2])!=128)return t.lastNeed=2,"�"}}function c(t){var e=this.lastTotal-this.lastNeed,i=u(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length)}function f(t,e){var i=h(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function p(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function m(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function g(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function v(t){return t.toString(this.encoding)}function _(t){return t&&t.length?this.write(t):""}i=s,s.prototype.write=function(t){var e,i;if(0===t.length)return"";if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=d,s.prototype.text=f,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}}),parcelRegister("gSlmv",function(t,e){t.exports=o;var i=parcelRequire("de0tP"),r=Object.create(parcelRequire("7uqct"));function n(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);i.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){s(t,e,i)}):s(this,null,null)}function s(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw Error("Calling transform done when still transforming");return t.push(null)}r.inherits=parcelRequire("dFiDG"),r.inherits(o,i),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var r=this;i.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}}),parcelRegister("hmA6G",function(t,e){t.exports=n;var i=parcelRequire("gSlmv"),r=Object.create(parcelRequire("7uqct"));function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}r.inherits=parcelRequire("dFiDG"),r.inherits(n,i),n.prototype._transform=function(t,e,i){i(null,t)}}),parcelRegister("eiOan",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{u="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void i(!1,"Invalid character in "+t)}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,r,n){for(var o=0,a=0,s=Math.min(t.length,r),l=e;l<s;l++){var h=t.charCodeAt(l)-48;o*=n,a=h>=49?h-49+10:h>=17?h-17+10:h,i(h>=0&&a<n,"Invalid character"),o+=a}return o}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this._strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this._strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){l(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){n.prototype.inspect=h}else n.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u,c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),r=0!==o||a!==this.length-1?c[6-l.length]+l+r:l+r}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var h=f[t],u=d[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(u).toString(t);r=(p=p.idivn(u)).isZero()?m+r:c[h-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},u&&(n.prototype.toBuffer=function(t,e){return this.toArrayLike(u,t,e)}),n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var p=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function m(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}function g(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i._strip()}n.prototype.toArrayLike=function(t,e,r){this._strip();var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var a=p(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,n),a},n.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,o=0;n<this.length;n++){var a=this.words[n]<<o|r;t[i++]=255&a,i<t.length&&(t[i++]=a>>8&255),i<t.length&&(t[i++]=a>>16&255),6===o?(i<t.length&&(t[i++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},n.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,o=0;n<this.length;n++){var a=this.words[n]<<o|r;t[i--]=255&a,i>=0&&(t[i--]=a>>8&255),i>=0&&(t[i--]=a>>16&255),6===o?(i>=0&&(t[i--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this._strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function v(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i._strip()}function _(t,e,i){return v(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=g),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):i<63?g(this,t,e):i<1024?v(this,t,e):_(this,t,e)},b.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},b.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},b.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},b.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),_(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(0|this.words[n])*t,a=(67108863&o)+(67108863&r);r>>=26,r+=(o/67108864|0)+(a>>>26),this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),e?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=m(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this._strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this._strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i._strip(),o._strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var r=67108864%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(0|this.words[o]))%t;return e?-n:n},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*r;this.words[n]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new I(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var x={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function P(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},r(M,w),M.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},M.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(S,w),r(k,w),r(E,w),E.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(x[t])return x[t];if("k256"===t)e=new M;else if("p224"===t)e=new S;else if("p192"===t)e=new k;else if("p25519"===t)e=new E;else throw Error("Unknown prime "+t);return x[t]=e,e},I.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},I.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new P(t)},r(P,I),P.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},P.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},P.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},P.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},P.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("04MZu",function(t,e){t.exports=JSON.parse('{"name":"elliptic","version":"6.5.6","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')}),parcelRegister("g1TeC",function(t,e){var i=t.exports,r=parcelRequire("fyIbt"),n=parcelRequire("8yQDN"),o=parcelRequire("4xH53");function a(t,e,i){var r=Array(Math.max(t.bitLength(),i)+1);for(a=0;a<r.length;a+=1)r[a]=0;var n=1<<e+1,o=t.clone();for(a=0;a<r.length;a++){var a,s,l=o.andln(n-1);o.isOdd()?(s=l>(n>>1)-1?(n>>1)-l:l,o.isubn(s)):s=0,r[a]=s,o.iushrn(1)}return r}function s(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r=0,n=0;t.cmpn(-r)>0||e.cmpn(-n)>0;){var o,a,s,l=t.andln(3)+r&3,h=e.andln(3)+n&3;3===l&&(l=-1),3===h&&(h=-1),a=(1&l)==0?0:(3==(o=t.andln(7)+r&7)||5===o)&&2===h?-l:l,i[0].push(a),s=(1&h)==0?0:(3==(o=e.andln(7)+n&7)||5===o)&&2===l?-h:h,i[1].push(s),2*r===a+1&&(r=1-r),2*n===s+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return i}function l(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}}function h(t){return"string"==typeof t?i.toArray(t,"hex"):t}function u(t){return new r(t,"hex","le")}i.assert=n,i.toArray=o.toArray,i.zero2=o.zero2,i.toHex=o.toHex,i.encode=o.encode,i.getNAF=a,i.getJSF=s,i.cachedProperty=l,i.parseBytes=h,i.intFromLE=u}),parcelRegister("fyIbt",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,i,r){for(var n=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=r,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var l="le"===e,h=new t(s),u=this.clone();if(l){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-a;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}function g(t,e,i){return new y().mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?d(this,t,e):i<1024?m(this,t,e):g(this,t,e)},y.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},y.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},y.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=f(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i.strip(),o.strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},n.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},r(b,_),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,_),r(w,_),r(M,_),M.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(v[t])return v[t];if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new w;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return v[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new k(t)},r(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("4xH53",function(t,e){var i=t.exports;function r(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e){(t=t.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(t="0"+t);for(var r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16))}else for(var r=0;r<t.length;r++){var n=t.charCodeAt(r),o=n>>8,a=255&n;o?i.push(o,a):i.push(a)}return i}function n(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",i=0;i<t.length;i++)e+=n(t[i].toString(16));return e}i.toArray=r,i.zero2=n,i.toHex=o,i.encode=function(t,e){return"hex"===e?o(t):t}}),parcelRegister("4eoJg",function(t,e){var i=t.exports;i.base=parcelRequire("0kqoa"),i.short=parcelRequire("gCwrr"),i.mont=parcelRequire("4TgQh"),i.edwards=parcelRequire("hALqA")}),parcelRegister("0kqoa",function(t,e){var i=parcelRequire("fyIbt"),r=parcelRequire("g1TeC"),n=r.getNAF,o=r.getJSF,a=r.assert;function s(t,e){this.type=t,this.p=new i(e.p,16),this.red=e.prime?i.red(e.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=e.n&&new i(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=s,s.prototype.point=function(){throw Error("Not implemented")},s.prototype.validate=function(){throw Error("Not implemented")},s.prototype._fixedNafMul=function(t,e){a(t.precomputed);var i,r,o=t._getDoubles(),s=n(e,1,this._bitLength),l=(1<<o.step+1)-(o.step%2==0?2:1);l/=3;var h=[];for(i=0;i<s.length;i+=o.step){r=0;for(var u=i+o.step-1;u>=i;u--)r=(r<<1)+s[u];h.push(r)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=l;d>0;d--){for(i=0;i<h.length;i++)(r=h[i])===d?f=f.mixedAdd(o.points[i]):r===-d&&(f=f.mixedAdd(o.points[i].neg()));c=c.add(f)}return c.toP()},s.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var o=r.points,s=n(e,i,this._bitLength),l=this.jpoint(null,null,null),h=s.length-1;h>=0;h--){for(var u=0;h>=0&&0===s[h];h--)u++;if(h>=0&&u++,l=l.dblp(u),h<0)break;var c=s[h];a(0!==c),l="affine"===t.type?c>0?l.mixedAdd(o[c-1>>1]):l.mixedAdd(o[-c-1>>1].neg()):c>0?l.add(o[c-1>>1]):l.add(o[-c-1>>1].neg())}return"affine"===t.type?l.toP():l},s.prototype._wnafMulAdd=function(t,e,i,r,a){var s,l,h,u=this._wnafT1,c=this._wnafT2,f=this._wnafT3,d=0;for(s=0;s<r;s++){var p=(h=e[s])._getNAFPoints(t);u[s]=p.wnd,c[s]=p.points}for(s=r-1;s>=1;s-=2){var m=s-1,g=s;if(1!==u[m]||1!==u[g]){f[m]=n(i[m],u[m],this._bitLength),f[g]=n(i[g],u[g],this._bitLength),d=Math.max(f[m].length,d),d=Math.max(f[g].length,d);continue}var y=[e[m],null,null,e[g]];0===e[m].y.cmp(e[g].y)?(y[1]=e[m].add(e[g]),y[2]=e[m].toJ().mixedAdd(e[g].neg())):0===e[m].y.cmp(e[g].y.redNeg())?(y[1]=e[m].toJ().mixedAdd(e[g]),y[2]=e[m].add(e[g].neg())):(y[1]=e[m].toJ().mixedAdd(e[g]),y[2]=e[m].toJ().mixedAdd(e[g].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],_=o(i[m],i[g]);for(l=0,d=Math.max(_[0].length,d),f[m]=Array(d),f[g]=Array(d);l<d;l++){var b=0|_[0][l],x=0|_[1][l];f[m][l]=v[(b+1)*3+(x+1)],f[g][l]=0,c[m]=y}}var w=this.jpoint(null,null,null),M=this._wnafT4;for(s=d;s>=0;s--){for(var S=0;s>=0;){var k=!0;for(l=0;l<r;l++)M[l]=0|f[l][s],0!==M[l]&&(k=!1);if(!k)break;S++,s--}if(s>=0&&S++,w=w.dblp(S),s<0)break;for(l=0;l<r;l++){var E=M[l];0!==E&&(E>0?h=c[l][E-1>>1]:E<0&&(h=c[l][-E-1>>1].neg()),w="affine"===h.type?w.mixedAdd(h):w.add(h))}}for(s=0;s<r;s++)c[s]=null;return a?w:w.toP()},s.BasePoint=l,l.prototype.eq=function(){throw Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(t,e){t=r.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return r.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var o=0;o<t;o++)r=r.dbl();i.push(r)}return{step:t,points:i}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}}),parcelRegister("gCwrr",function(t,e){var i=parcelRequire("g1TeC"),r=parcelRequire("fyIbt"),n=parcelRequire("dFiDG"),o=parcelRequire("0kqoa"),a=i.assert;function s(t){o.call(this,"short",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function l(t,e,i,n){o.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(e,16),this.y=new r(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(t,e,i,n){o.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(e,16),this.y=new r(i,16),this.z=new r(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}n(s,o),t.exports=s,s.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(t.beta)e=new r(t.beta,16).toRed(this.red);else{var e,i,n,o=this._getEndoRoots(this.p);e=(e=0>o[0].cmp(o[1])?o[0]:o[1]).toRed(this.red)}if(t.lambda)i=new r(t.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))?i=s[0]:(i=s[1],a(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return n=t.basis?t.basis.map(function(t){return{a:new r(t.a,16),b:new r(t.b,16)}}):this._getEndoBasis(i),{beta:e,lambda:i,basis:n}}},s.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:r.mont(t),i=new r(2).toRed(e).redInvm(),n=i.redNeg(),o=new r(3).toRed(e).redNeg().redSqrt().redMul(i);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},s.prototype._getEndoBasis=function(t){for(var e,i,n,o,a,s,l,h,u,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new r(1),m=new r(0),g=new r(0),y=new r(1),v=0;0!==f.cmpn(0);){var _=d.div(f);h=d.sub(_.mul(f)),u=g.sub(_.mul(p));var b=y.sub(_.mul(m));if(!n&&0>h.cmp(c))e=l.neg(),i=p,n=h.neg(),o=u;else if(n&&2==++v)break;l=h,d=f,f=h,g=p,p=u,y=m,m=b}a=h.neg(),s=u;var x=n.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(x)>=0&&(a=e,s=i),n.negative&&(n=n.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:o},{a:a,b:s}]},s.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),a=n.mul(i.a),s=o.mul(r.a),l=n.mul(i.b),h=o.mul(r.b);return{k1:t.sub(a).sub(s),k2:l.add(h).neg()}},s.prototype.pointFromX=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(0!==n.redSqr().redSub(i).cmp(this.zero))throw Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},s.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},s.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],l=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),r[2*o]=s,r[2*o+1]=l,n[2*o]=a.k1,n[2*o+1]=a.k2}for(var h=this._wnafMulAdd(1,r,n,2*o,i),u=0;u<2*o;u++)r[u]=null,n[u]=null;return h},n(l,o.BasePoint),s.prototype.point=function(t,e,i){return new l(this,t,e,i)},s.prototype.pointFromJSON=function(t,e){return l.fromJSON(this,t,e)},l.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(e){return t.point(e[0],e[1],i)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(n))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t)||0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},l.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),o=n.redSqr().redISub(this.x.redAdd(this.x)),a=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(t){return(t=new r(t,16),this.isInfinity())?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},l.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},l.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},l.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},n(h,o.BasePoint),s.prototype.jpoint=function(t,e,i){return new h(this,t,e,i)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(i.redMul(this.z)),s=r.redSub(n),l=o.redSub(a);if(0===s.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),u=h.redMul(s),c=r.redMul(h),f=l.redSqr().redIAdd(u).redISub(c).redISub(c),d=l.redMul(c.redISub(f)).redISub(o.redMul(u)),p=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,d,p)},h.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,o=t.y.redMul(e).redMul(this.z),a=i.redSub(r),s=n.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),h=l.redMul(a),u=i.redMul(l),c=s.redSqr().redIAdd(h).redISub(u).redISub(u),f=s.redMul(u.redISub(c)).redISub(n.redMul(h)),d=this.z.redMul(a);return this.curve.jpoint(c,f,d)},h.prototype.dblp=function(t){if(0===t||this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var e,i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,o=this.x,a=this.y,s=this.z,l=s.redSqr().redSqr(),h=a.redAdd(a);for(e=0;e<t;e++){var u=o.redSqr(),c=h.redSqr(),f=c.redSqr(),d=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(l)),p=o.redMul(c),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=d.redMul(g);y=y.redIAdd(y).redISub(f);var v=h.redMul(s);e+1<t&&(l=l.redMul(f)),o=m,s=v,h=y}return this.curve.jpoint(o,h.redMul(n),s)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){if(this.zOne){var t,e,i,r=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),l=s.redSqr().redISub(a).redISub(a),h=o.redIAdd(o);h=(h=h.redIAdd(h)).redIAdd(h),t=l,e=s.redMul(a.redISub(l)).redISub(h),i=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),c=this.y.redSqr(),f=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(u).redISub(f);d=d.redIAdd(d);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},h.prototype._threeDbl=function(){if(this.zOne){var t,e,i,r=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),l=s.redSqr().redISub(a).redISub(a);t=l;var h=o.redIAdd(o);h=(h=h.redIAdd(h)).redIAdd(h),e=s.redMul(a.redISub(l)).redISub(h),i=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),c=this.y.redSqr(),f=this.x.redMul(c),d=this.x.redSub(u).redMul(this.x.redAdd(u));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(u);var g=c.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,i)},h.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),o=e.redSqr(),a=i.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(n)),l=e.redAdd(e),h=(l=l.redIAdd(l)).redMul(a),u=s.redSqr().redISub(h.redAdd(h)),c=h.redISub(u),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=s.redMul(c).redISub(f),p=i.redAdd(i).redMul(r);return this.curve.jpoint(u,d,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),o=n.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),l=r.redIAdd(r);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var h=n.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(l),u=e.redMul(h);u=(u=u.redIAdd(u)).redIAdd(u);var c=this.x.redMul(s).redISub(u);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.y.redMul(h.redMul(l.redISub(h)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(a).redSqr().redISub(i).redISub(s);return this.curve.jpoint(c,f,d)},h.prototype.mul=function(t,e){return t=new r(t,e),this.curve._wnafMul(this,t)},h.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},h.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}}),parcelRegister("4TgQh",function(t,e){var i=parcelRequire("fyIbt"),r=parcelRequire("dFiDG"),n=parcelRequire("0kqoa"),o=parcelRequire("g1TeC");function a(t){n.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function s(t,e,r){n.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(e,16),this.z=new i(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(a,n),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),r=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},r(s,n.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(o.toArray(t,e),1)},a.prototype.point=function(t,e){return new s(this,t,e)},a.prototype.pointFromJSON=function(t){return s.fromJSON(this,t)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(t,e){return new s(t,e[0],e[1]||t.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},s.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),r=t.redMul(e),n=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,n)},s.prototype.add=function(){throw Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(i),a=n.redMul(r),s=e.z.redMul(o.redAdd(a).redSqr()),l=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,l)},s.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),n=this,o=[];0!==e.cmpn(0);e.iushrn(1))o.push(e.andln(1));for(var a=o.length-1;a>=0;a--)0===o[a]?(i=i.diffAdd(r,n),r=r.dbl()):(r=i.diffAdd(r,n),i=i.dbl());return r},s.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},s.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}),parcelRegister("hALqA",function(t,e){var i=parcelRequire("g1TeC"),r=parcelRequire("fyIbt"),n=parcelRequire("dFiDG"),o=parcelRequire("0kqoa"),a=i.assert;function s(t){this.twisted=(0|t.a)!=1,this.mOneA=this.twisted&&(0|t.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",t),this.a=new r(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=(0|t.c)==1}function l(t,e,i,n,a){o.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(e,16),this.y=new r(i,16),this.z=n?new r(n,16):this.curve.one,this.t=a&&new r(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,!this.curve.extended||this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}n(s,o),t.exports=s,s.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},s.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},s.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},s.prototype.pointFromX=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),n=this.c2.redSub(this.a.redMul(i)),o=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=n.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");var l=s.fromRed().isOdd();return(e&&!l||!e&&l)&&(s=s.redNeg()),this.point(t,s)},s.prototype.pointFromY=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),n=i.redSub(this.c2),o=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(!e)return this.point(this.zero,t);throw Error("invalid point")}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},s.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),r=e.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===r.cmp(n)},n(l,o.BasePoint),s.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},s.prototype.point=function(t,e,i,r){return new l(this,t,e,i,r)},l.fromJSON=function(t,e){return new l(t,e[0],e[1],e[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=r.redAdd(e),a=o.redSub(i),s=r.redSub(e),l=n.redMul(a),h=o.redMul(s),u=n.redMul(s),c=a.redMul(o);return this.curve.point(l,h,c,u)},l.prototype._projDbl=function(){var t,e,i,r,n,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var h=(r=this.curve._mulA(s)).redAdd(l);this.zOne?(t=a.redSub(s).redSub(l).redMul(h.redSub(this.curve.two)),e=h.redMul(r.redSub(l)),i=h.redSqr().redSub(h).redSub(h)):(n=this.z.redSqr(),o=h.redSub(n).redISub(n),t=a.redSub(s).redISub(l).redMul(o),e=h.redMul(r.redSub(l)),i=h.redMul(o))}else r=s.redAdd(l),n=this.curve._mulC(this.z).redSqr(),o=r.redSub(n).redSub(n),t=this.curve._mulC(a.redISub(r)).redMul(o),e=this.curve._mulC(r).redMul(s.redISub(l)),i=r.redMul(o);return this.curve.point(t,e,i)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),o=i.redSub(e),a=n.redSub(r),s=n.redAdd(r),l=i.redAdd(e),h=o.redMul(a),u=s.redMul(l),c=o.redMul(l),f=a.redMul(s);return this.curve.point(h,u,f,c)},l.prototype._projAdd=function(t){var e,i,r=this.z.redMul(t.z),n=r.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),l=n.redSub(s),h=n.redAdd(s),u=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),c=r.redMul(l).redMul(u);return this.curve.twisted?(e=r.redMul(h).redMul(a.redSub(this.curve._mulA(o))),i=l.redMul(h)):(e=r.redMul(h).redMul(a.redSub(o)),i=this.curve._mulC(l).redMul(h)),this.curve.point(c,e,i)},l.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},l.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},l.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},l.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add}),parcelRegister("5Ovd1",function(t,e){var i,r=t.exports,n=parcelRequire("3SHgS"),o=parcelRequire("4eoJg"),a=parcelRequire("g1TeC").assert;function s(t){"short"===t.type?this.curve=new o.short(t):"edwards"===t.type?this.curve=new o.edwards(t):this.curve=new o.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var i=new s(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=s,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=parcelRequire("juaVW")}catch(t){i=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})}),parcelRegister("3SHgS",function(t,e){var i=t.exports;i.utils=parcelRequire("kFfGT"),i.common=parcelRequire("jeL0J"),i.sha=parcelRequire("eiuTL"),i.ripemd=parcelRequire("1Ei1H"),i.hmac=parcelRequire("oovBD"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160}),parcelRegister("kFfGT",function(t,e){$parcel$export(t.exports,"inherits",()=>i,t=>i=t),$parcel$export(t.exports,"toArray",()=>r,t=>r=t),$parcel$export(t.exports,"toHex",()=>n,t=>n=t),$parcel$export(t.exports,"htonl",()=>o,t=>o=t),$parcel$export(t.exports,"toHex32",()=>a,t=>a=t),$parcel$export(t.exports,"zero2",()=>s,t=>s=t),$parcel$export(t.exports,"zero8",()=>l,t=>l=t),$parcel$export(t.exports,"join32",()=>h,t=>h=t),$parcel$export(t.exports,"split32",()=>u,t=>u=t),$parcel$export(t.exports,"rotr32",()=>c,t=>c=t),$parcel$export(t.exports,"rotl32",()=>f,t=>f=t),$parcel$export(t.exports,"sum32",()=>d,t=>d=t),$parcel$export(t.exports,"sum32_3",()=>p,t=>p=t),$parcel$export(t.exports,"sum32_4",()=>m,t=>m=t),$parcel$export(t.exports,"sum32_5",()=>g,t=>g=t),$parcel$export(t.exports,"sum64",()=>y,t=>y=t),$parcel$export(t.exports,"sum64_hi",()=>v,t=>v=t),$parcel$export(t.exports,"sum64_lo",()=>_,t=>_=t),$parcel$export(t.exports,"sum64_4_hi",()=>b,t=>b=t),$parcel$export(t.exports,"sum64_4_lo",()=>x,t=>x=t),$parcel$export(t.exports,"sum64_5_hi",()=>w,t=>w=t),$parcel$export(t.exports,"sum64_5_lo",()=>M,t=>M=t),$parcel$export(t.exports,"rotr64_hi",()=>S,t=>S=t),$parcel$export(t.exports,"rotr64_lo",()=>k,t=>k=t),$parcel$export(t.exports,"shr64_hi",()=>E,t=>E=t),$parcel$export(t.exports,"shr64_lo",()=>I,t=>I=t);var i,r,n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b,x,w,M,S,k,E,I,P=parcelRequire("8yQDN");function T(t,e){return(64512&t.charCodeAt(e))==55296&&!(e<0)&&!(e+1>=t.length)&&(64512&t.charCodeAt(e+1))==56320}function A(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function C(t){return 1===t.length?"0"+t:t}function R(t){if(7===t.length)return"0"+t;if(6===t.length)return"00"+t;if(5===t.length)return"000"+t;if(4===t.length)return"0000"+t;if(3===t.length)return"00000"+t;if(2===t.length)return"000000"+t;if(1===t.length)return"0000000"+t;else return t}i=parcelRequire("dFiDG"),r=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t){if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?i[r++]=o:(o<2048?i[r++]=o>>6|192:(T(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),i[r++]=o>>18|240,i[r++]=o>>12&63|128):i[r++]=o>>12|224,i[r++]=o>>6&63|128),i[r++]=63&o|128)}}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},n=function(t){for(var e="",i=0;i<t.length;i++)e+=C(t[i].toString(16));return e},o=A,a=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=A(n)),i+=R(n.toString(16))}return i},s=C,l=R,h=function(t,e,i,r){var n,o=i-e;P(o%4==0);for(var a=Array(o/4),s=0,l=e;s<a.length;s++,l+=4)n="big"===r?t[l]<<24|t[l+1]<<16|t[l+2]<<8|t[l+3]:t[l+3]<<24|t[l+2]<<16|t[l+1]<<8|t[l],a[s]=n>>>0;return a},u=function(t,e){for(var i=Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var o=t[r];"big"===e?(i[n]=o>>>24,i[n+1]=o>>>16&255,i[n+2]=o>>>8&255,i[n+3]=255&o):(i[n+3]=o>>>24,i[n+2]=o>>>16&255,i[n+1]=o>>>8&255,i[n]=255&o)}return i},c=function(t,e){return t>>>e|t<<32-e},f=function(t,e){return t<<e|t>>>32-e},d=function(t,e){return t+e>>>0},p=function(t,e,i){return t+e+i>>>0},m=function(t,e,i,r){return t+e+i+r>>>0},g=function(t,e,i,r,n){return t+e+i+r+n>>>0},y=function(t,e,i,r){var n=t[e],o=r+t[e+1]>>>0,a=(o<r?1:0)+i+n;t[e]=a>>>0,t[e+1]=o},v=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},_=function(t,e,i,r){return e+r>>>0},b=function(t,e,i,r,n,o,a,s){var l,h=e;return t+i+n+a+(l=0+((h=h+r>>>0)<e?1:0)+((h=h+o>>>0)<o?1:0)+((h=h+s>>>0)<s?1:0))>>>0},x=function(t,e,i,r,n,o,a,s){return e+r+o+s>>>0},w=function(t,e,i,r,n,o,a,s,l,h){var u,c=e;return t+i+n+a+l+(u=0+((c=c+r>>>0)<e?1:0)+((c=c+o>>>0)<o?1:0)+((c=c+s>>>0)<s?1:0)+((c=c+h>>>0)<h?1:0))>>>0},M=function(t,e,i,r,n,o,a,s,l,h){return e+r+o+s+h>>>0},S=function(t,e,i){return(e<<32-i|t>>>i)>>>0},k=function(t,e,i){return(t<<32-i|e>>>i)>>>0},E=function(t,e,i){return t>>>i},I=function(t,e,i){return(t<<32-i|e>>>i)>>>0}}),parcelRegister("jeL0J",function(t,e){$parcel$export(t.exports,"BlockHash",()=>i,t=>i=t);var i,r=parcelRequire("kFfGT"),n=parcelRequire("8yQDN");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}i=o,o.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(o=8,r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0;o<this.padLength;o++)r[n++]=0;return r}}),parcelRegister("eiuTL",function(t,e){var i,r,n,o,a;$parcel$export(t.exports,"sha1",()=>i,t=>i=t),$parcel$export(t.exports,"sha224",()=>r,t=>r=t),$parcel$export(t.exports,"sha256",()=>n,t=>n=t),$parcel$export(t.exports,"sha384",()=>o,t=>o=t),$parcel$export(t.exports,"sha512",()=>a,t=>a=t),i=parcelRequire("jRLdO"),r=parcelRequire("5xG4w"),n=parcelRequire("j4nmk"),o=parcelRequire("71Zdw"),a=parcelRequire("l0Lgs")}),parcelRegister("jRLdO",function(t,e){var i=parcelRequire("kFfGT"),r=parcelRequire("jeL0J"),n=parcelRequire("kfjdV"),o=i.rotl32,a=i.sum32,s=i.sum32_5,l=n.ft_1,h=r.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}i.inherits(c,h),t.exports=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=o(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],h=this.h[1],c=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),m=s(o(n,5),l(p,h,c,f),d,i[r],u[p]);d=f,f=c,c=o(h,30),h=n,n=m}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],h),this.h[2]=a(this.h[2],c),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},c.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}}),parcelRegister("kfjdV",function(t,e){$parcel$export(t.exports,"ft_1",()=>i,t=>i=t),$parcel$export(t.exports,"ch32",()=>r,t=>r=t),$parcel$export(t.exports,"maj32",()=>n,t=>n=t),$parcel$export(t.exports,"s0_256",()=>o,t=>o=t),$parcel$export(t.exports,"s1_256",()=>a,t=>a=t),$parcel$export(t.exports,"g0_256",()=>s,t=>s=t),$parcel$export(t.exports,"g1_256",()=>l,t=>l=t);var i,r,n,o,a,s,l,h=parcelRequire("kFfGT").rotr32;function u(t,e,i){return t&e^~t&i}function c(t,e,i){return t&e^t&i^e&i}function f(t,e,i){return t^e^i}i=function(t,e,i,r){return 0===t?u(e,i,r):1===t||3===t?f(e,i,r):2===t?c(e,i,r):void 0},r=u,n=c,o=function(t){return h(t,2)^h(t,13)^h(t,22)},a=function(t){return h(t,6)^h(t,11)^h(t,25)},s=function(t){return h(t,7)^h(t,18)^t>>>3},l=function(t){return h(t,17)^h(t,19)^t>>>10}}),parcelRegister("5xG4w",function(t,e){var i=parcelRequire("kFfGT"),r=parcelRequire("j4nmk");function n(){if(!(this instanceof n))return new n;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(n,r),t.exports=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}}),parcelRegister("j4nmk",function(t,e){var i=parcelRequire("kFfGT"),r=parcelRequire("jeL0J"),n=parcelRequire("kfjdV"),o=parcelRequire("8yQDN"),a=i.sum32,s=i.sum32_4,l=i.sum32_5,h=n.ch32,u=n.maj32,c=n.s0_256,f=n.s1_256,d=n.g0_256,p=n.g1_256,m=r.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=Array(64)}i.inherits(y,m),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=s(p(i[r-2]),i[r-7],d(i[r-15]),i[r-16]);var n=this.h[0],m=this.h[1],g=this.h[2],y=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],x=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var w=l(x,f(v),h(v,_,b),this.k[r],i[r]),M=a(c(n),u(n,m,g));x=b,b=_,_=v,v=a(y,w),y=g,g=m,m=n,n=a(w,M)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],m),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],_),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],x)},y.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}}),parcelRegister("71Zdw",function(t,e){var i=parcelRequire("kFfGT"),r=parcelRequire("l0Lgs");function n(){if(!(this instanceof n))return new n;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(n,r),t.exports=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}}),parcelRegister("l0Lgs",function(t,e){var i=parcelRequire("kFfGT"),r=parcelRequire("jeL0J"),n=parcelRequire("8yQDN"),o=i.rotr64_hi,a=i.rotr64_lo,s=i.shr64_hi,l=i.shr64_lo,h=i.sum64,u=i.sum64_hi,c=i.sum64_lo,f=i.sum64_4_hi,d=i.sum64_4_lo,p=i.sum64_5_hi,m=i.sum64_5_lo,g=r.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=Array(160)}function _(t,e,i,r,n){var o=t&i^~t&n;return o<0&&(o+=4294967296),o}function b(t,e,i,r,n,o){var a=e&r^~e&o;return a<0&&(a+=4294967296),a}function x(t,e,i,r,n){var o=t&i^t&n^i&n;return o<0&&(o+=4294967296),o}function w(t,e,i,r,n,o){var a=e&r^e&o^r&o;return a<0&&(a+=4294967296),a}function M(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function S(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function k(t,e){var i=o(t,e,14)^o(t,e,18)^o(e,t,9);return i<0&&(i+=4294967296),i}function E(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function I(t,e){var i=o(t,e,1)^o(t,e,8)^s(t,e,7);return i<0&&(i+=4294967296),i}function P(t,e){var i=a(t,e,1)^a(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function T(t,e){var i=o(t,e,19)^o(e,t,29)^s(t,e,6);return i<0&&(i+=4294967296),i}function A(t,e){var i=a(t,e,19)^a(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}i.inherits(v,g),t.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=T(i[r-4],i[r-3]),o=A(i[r-4],i[r-3]),a=i[r-14],s=i[r-13],l=I(i[r-30],i[r-29]),h=P(i[r-30],i[r-29]),u=i[r-32],c=i[r-31];i[r]=f(n,o,a,s,l,h,u,c),i[r+1]=d(n,o,a,s,l,h,u,c)}},v.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,r=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],l=this.h[4],f=this.h[5],d=this.h[6],g=this.h[7],y=this.h[8],v=this.h[9],I=this.h[10],P=this.h[11],T=this.h[12],A=this.h[13],C=this.h[14],R=this.h[15];n(this.k.length===i.length);for(var N=0;N<i.length;N+=2){var z=C,O=R,D=k(y,v),B=E(y,v),F=_(y,v,I,P,T,A),j=b(y,v,I,P,T,A),q=this.k[N],V=this.k[N+1],U=i[N],Z=i[N+1],G=p(z,O,D,B,F,j,q,V,U,Z),H=m(z,O,D,B,F,j,q,V,U,Z);z=M(r,o);var W=u(z,O=S(r,o),D=x(r,o,a,s,l,f),B=w(r,o,a,s,l,f)),X=c(z,O,D,B);C=T,R=A,T=I,A=P,I=y,P=v,y=u(d,g,G,H),v=c(g,g,G,H),d=l,g=f,l=a,f=s,a=r,s=o,r=u(G,H,W,X),o=c(G,H,W,X)}h(this.h,0,r,o),h(this.h,2,a,s),h(this.h,4,l,f),h(this.h,6,d,g),h(this.h,8,y,v),h(this.h,10,I,P),h(this.h,12,T,A),h(this.h,14,C,R)},v.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}}),parcelRegister("1Ei1H",function(t,e){$parcel$export(t.exports,"ripemd160",()=>i,t=>i=t);var i,r=parcelRequire("kFfGT"),n=parcelRequire("jeL0J"),o=r.rotl32,a=r.sum32,s=r.sum32_3,l=r.sum32_4,h=n.BlockHash;function u(){if(!(this instanceof u))return new u;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(u,h),i=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],h=this.h[3],u=this.h[4],v=i,_=r,b=n,x=h,w=u,M=0;M<80;M++){var S=a(o(l(i,c(M,r,n,h),t[p[M]+e],f(M)),g[M]),u);i=u,u=h,h=o(n,10),n=r,r=S,S=a(o(l(v,c(79-M,_,b,x),t[m[M]+e],d(M)),y[M]),w),v=w,w=x,x=o(b,10),b=_,_=S}S=s(this.h[1],n,x),this.h[1]=s(this.h[2],h,w),this.h[2]=s(this.h[3],u,v),this.h[3]=s(this.h[4],i,_),this.h[4]=s(this.h[0],r,b),this.h[0]=S},u.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}),parcelRegister("oovBD",function(t,e){var i=parcelRequire("kFfGT"),r=parcelRequire("8yQDN");function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(e,r))}t.exports=n,n.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),r(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(e=0,this.inner=new this.Hash().update(t);e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},n.prototype.update=function(t,e){return this.inner.update(t,e),this},n.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}}),parcelRegister("juaVW",function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}),parcelRegister("9VEsA",function(t,e){var i=parcelRequire("fyIbt"),r=parcelRequire("6hU2Z"),n=parcelRequire("g1TeC"),o=parcelRequire("5Ovd1"),a=parcelRequire("gkrIn"),s=n.assert,l=parcelRequire("7UqXg"),h=parcelRequire("f5wEj");function u(t){if(!(this instanceof u))return new u(t);"string"==typeof t&&(s(Object.prototype.hasOwnProperty.call(o,t),"Unknown curve "+t),t=o[t]),t instanceof o.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=u,u.prototype.keyPair=function(t){return new l(this,t)},u.prototype.keyFromPrivate=function(t,e){return l.fromPrivate(this,t,e)},u.prototype.keyFromPublic=function(t,e){return l.fromPublic(this,t,e)},u.prototype.genKeyPair=function(t){t||(t={});for(var e=new r({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new i(2));;){var s=new i(e.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},u.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return(i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0)?t.sub(this.n):t},u.prototype.sign=function(t,e,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new i(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),l=t.toArray("be",a),u=new r({hash:this.hash,entropy:s,nonce:l,pers:o.pers,persEnc:o.persEnc||"utf8"}),c=this.n.sub(new i(1)),f=0;;f++){var d=o.k?o.k(f):new i(u.generate(this.n.byteLength()));if(!(0>=(d=this._truncateToN(d,!0)).cmpn(1)||d.cmp(c)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var y=d.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(y=y.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),v^=1),new h({r:g,s:y,recoveryParam:v})}}}}}},u.prototype.verify=function(t,e,r,n){t=this._truncateToN(new i(t,16)),r=this.keyFromPublic(r,n);var o,a=(e=new h(e,"hex")).r,s=e.s;if(0>a.cmpn(1)||a.cmp(this.n)>=0||0>s.cmpn(1)||s.cmp(this.n)>=0)return!1;var l=s.invm(this.n),u=l.mul(t).umod(this.n),c=l.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},u.prototype.recoverPubKey=function(t,e,r,n){s((3&r)===r,"The recovery param is more than two bits"),e=new h(e,n);var o=this.n,a=new i(t),l=e.r,u=e.s,c=1&r,f=r>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw Error("Unable to find sencond key candinate");l=f?this.curve.pointFromX(l.add(this.curve.n),c):this.curve.pointFromX(l,c);var d=e.r.invm(o),p=o.sub(a).mul(d).umod(o),m=u.mul(d).umod(o);return this.g.mulAdd(p,l,m)},u.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new h(e,r)).recoveryParam)return e.recoveryParam;for(var n,o=0;o<4;o++){try{n=this.recoverPubKey(t,e,o)}catch(t){continue}if(n.eq(i))return o}throw Error("Unable to find valid recovery factor")}}),parcelRegister("6hU2Z",function(t,e){var i=parcelRequire("3SHgS"),r=parcelRequire("4xH53"),n=parcelRequire("8yQDN");function o(t){if(!(this instanceof o))return new o(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=r.toArray(t.entropy,t.entropyEnc||"hex"),i=r.toArray(t.nonce,t.nonceEnc||"hex"),a=r.toArray(t.pers,t.persEnc||"hex");n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,a)}t.exports=o,o.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},o.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(t,e,i,o){"string"!=typeof e&&(o=i,i=e,e=null),t=r.toArray(t,e),i=r.toArray(i,o),n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},o.prototype.generate=function(t,e,i,n){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof e&&(n=i,i=e,e=null),i&&(i=r.toArray(i,n||"hex"),this._update(i));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(i),this._reseed++,r.encode(a,e)}}),parcelRegister("7UqXg",function(t,e){var i=parcelRequire("fyIbt"),r=parcelRequire("g1TeC").assert;function n(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=n,n.fromPublic=function(t,e,i){return e instanceof n?e:new n(t,{pub:e,pubEnc:i})},n.fromPrivate=function(t,e,i){return e instanceof n?e:new n(t,{priv:e,privEnc:i})},n.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(t,e){return("string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e)?this.pub.encode(e,t):this.pub},n.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(t,e){this.priv=new i(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(t,e){if(t.x||t.y){"mont"===this.ec.curve.type?r(t.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&r(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,e)},n.prototype.derive=function(t){return t.validate()||r(t.validate(),"public point not validated"),t.mul(this.priv).getX()},n.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},n.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}),parcelRegister("f5wEj",function(t,e){var i=parcelRequire("fyIbt"),r=parcelRequire("g1TeC"),n=r.assert;function o(t,e){if(t instanceof o)return t;this._importDER(t,e)||(n(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function s(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;for(var n=0,o=0,a=e.place;o<r;o++,a++)n<<=8,n|=t[a],n>>>=0;return!(n<=127)&&(e.place=a,n)}function l(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function h(t,e){if(e<128){t.push(e);return}var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}t.exports=o,o.prototype._importDER=function(t,e){t=r.toArray(t,e);var n=new a;if(48!==t[n.place++])return!1;var o=s(t,n);if(!1===o||o+n.place!==t.length||2!==t[n.place++])return!1;var l=s(t,n);if(!1===l)return!1;var h=t.slice(n.place,l+n.place);if(n.place+=l,2!==t[n.place++])return!1;var u=s(t,n);if(!1===u||t.length!==u+n.place)return!1;var c=t.slice(n.place,u+n.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}return this.r=new i(h),this.s=new i(c),this.recoveryParam=null,!0},o.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=l(e),i=l(i);!i[0]&&!(128&i[1]);)i=i.slice(1);var n=[2];h(n,e.length),(n=n.concat(e)).push(2),h(n,i.length);var o=n.concat(i),a=[48];return h(a,o.length),a=a.concat(o),r.encode(a,t)}}),parcelRegister("8MZHb",function(t,e){var i=parcelRequire("3SHgS"),r=parcelRequire("5Ovd1"),n=parcelRequire("g1TeC"),o=n.assert,a=n.parseBytes,s=parcelRequire("f3mVH"),l=parcelRequire("73wiT");function h(t){if(o("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof h))return new h(t);t=r[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=i.sha512}t.exports=h,h.prototype.sign=function(t,e){t=a(t);var i=this.keyFromSecret(e),r=this.hashInt(i.messagePrefix(),t),n=this.g.mul(r),o=this.encodePoint(n),s=this.hashInt(o,i.pubBytes(),t).mul(i.priv()),l=r.add(s).umod(this.curve.n);return this.makeSignature({R:n,S:l,Rencoded:o})},h.prototype.verify=function(t,e,i){if(t=a(t),(e=this.makeSignature(e)).S().gte(e.eddsa.curve.n)||e.S().isNeg())return!1;var r=this.keyFromPublic(i),n=this.hashInt(e.Rencoded(),r.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(r.pub().mul(n)).eq(o)},h.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return n.intFromLE(t.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(t){return s.fromPublic(this,t)},h.prototype.keyFromSecret=function(t){return s.fromSecret(this,t)},h.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},h.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},h.prototype.decodePoint=function(t){var e=(t=n.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),r=(128&t[e])!=0,o=n.intFromLE(i);return this.curve.pointFromY(o,r)},h.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(t){return n.intFromLE(t)},h.prototype.isPoint=function(t){return t instanceof this.pointClass}}),parcelRegister("f3mVH",function(t,e){var i=parcelRequire("g1TeC"),r=i.assert,n=i.parseBytes,o=i.cachedProperty;function a(t,e){this.eddsa=t,this._secret=n(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=n(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(a,"privBytes",function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r}),o(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(t){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return r(this._secret,"KeyPair is public only"),i.encode(this.secret(),t)},a.prototype.getPublic=function(t){return i.encode(this.pubBytes(),t)},t.exports=a}),parcelRegister("73wiT",function(t,e){var i=parcelRequire("fyIbt"),r=parcelRequire("g1TeC"),n=r.assert,o=r.cachedProperty,a=r.parseBytes;function s(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),n(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof i&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}o(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},t.exports=s}),parcelRegister("3meGL",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,i,r){for(var n=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=r,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var l="le"===e,h=new t(s),u=this.clone();if(l){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-a;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}function g(t,e,i){return new y().mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?d(this,t,e):i<1024?m(this,t,e):g(this,t,e)},y.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},y.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},y.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=f(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i.strip(),o.strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},n.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},r(b,_),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,_),r(w,_),r(M,_),M.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(v[t])return v[t];if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new w;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return v[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new k(t)},r(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("8O7sj",function(t,e){var i=parcelRequire("6dg3q"),r=parcelRequire("dFiDG");function n(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}t.exports.define=function(t,e){return new n(t,e)},n.prototype._createNamed=function(t){var e;try{e=parcelRequire("iwbcQ").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(t){e=function(t){this._initNamed(t)}}return r(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},n.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i.decoders[t])),this.decoders[t]},n.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},n.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i.encoders[t])),this.encoders[t]},n.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}}),parcelRegister("6dg3q",function(t,e){var i=t.exports;i.bignum=parcelRequire("3meGL"),i.define=parcelRequire("8O7sj").define,i.base=parcelRequire("7uI0z"),i.constants=parcelRequire("iEX0F"),i.decoders=parcelRequire("8KrSx"),i.encoders=parcelRequire("8Y2qF")}),parcelRegister("7uI0z",function(t,e){var i=t.exports;i.Reporter=parcelRequire("bFli8").Reporter,i.DecoderBuffer=parcelRequire("1W335").DecoderBuffer,i.EncoderBuffer=parcelRequire("1W335").EncoderBuffer,i.Node=parcelRequire("geyFu")}),parcelRegister("bFli8",function(t,e){$parcel$export(t.exports,"Reporter",()=>i,t=>i=t);var i,r=parcelRequire("dFiDG");function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}i=n,n.prototype.isError=function(t){return t instanceof o},n.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},n.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},n.prototype.leaveKey=function(t,e,i){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){var e=this._reporterState,i=e.obj;return e.obj=t,i},n.prototype.error=function(t){var e,i=this._reporterState,r=t instanceof o;if(e=r?t:new o(i.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!i.options.partial)throw e;return r||i.errors.push(e),e},n.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw Error(this.message)}catch(t){this.stack=t.stack}return this}}),parcelRegister("1W335",function(t,e){$parcel$export(t.exports,"DecoderBuffer",()=>i,t=>i=t),$parcel$export(t.exports,"EncoderBuffer",()=>r,t=>r=t);var i,r,n=parcelRequire("dFiDG"),o=parcelRequire("7uI0z").Reporter,a=parcelRequire("fLiic").Buffer;function s(t,e){if(o.call(this,e),!a.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}function l(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof l||(t=new l(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=a.byteLength(t);else{if(!a.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(s,o),i=s,s.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},s.prototype.restore=function(t){var e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,o.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var i=new s(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},r=l,l.prototype.join=function(t,e){return t||(t=new a(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(i){i.join(t,e),e+=i.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):a.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}}),parcelRegister("geyFu",function(t,e){var i=parcelRequire("7uI0z"),r=i.Reporter,i=parcelRequire("7uI0z"),n=i.EncoderBuffer,i=parcelRequire("7uI0z"),o=i.DecoderBuffer,a=parcelRequire("8yQDN"),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),h=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function u(t,e){var i={};this._baseState=i,i.enc=t,i.parent=e||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}t.exports=u;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){var t=this._baseState,e={};c.forEach(function(i){e[i]=t[i]});var i=new this.constructor(e.parent);return i._baseState=e,i},u.prototype._wrap=function(){var t=this._baseState;l.forEach(function(e){this[e]=function(){var i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}},this)},u.prototype._init=function(t){var e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),a.equal(e.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(t){var e=this._baseState,i=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==i.length&&(a(null===e.children),e.children=i,i.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(i){i==(0|i)&&(i|=0),e[t[i]]=i}),e}))},h.forEach(function(t){u.prototype[t]=function(){throw Error(t+" not implemented for encoding: "+this._baseState.enc)}}),s.forEach(function(t){u.prototype[t]=function(){var e=this._baseState,i=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(i),this}}),u.prototype.use=function(t){a(t);var e=this._baseState;return a(null===e.use),e.use=t,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(t){var e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},u.prototype.explicit=function(t){var e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},u.prototype.implicit=function(t){var e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},u.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},u.prototype.key=function(t){var e=this._baseState;return a(null===e.key),e.key=t,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(t){var e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},u.prototype.contains=function(t){var e=this._baseState;return a(null===e.use),e.contains=t,this},u.prototype._decode=function(t,e){var i,r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));var n=r.default,a=!0,s=null;if(null!==r.key&&(s=t.enterKey(r.key)),r.optional){var l=null;if(null!==r.explicit?l=r.explicit:null!==r.implicit?l=r.implicit:null!==r.tag&&(l=r.tag),null!==l||r.any){if(a=this._peekTag(t,l,r.any),t.isError(a))return a}else{var h=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),a=!0}catch(t){a=!1}t.restore(h)}}if(r.obj&&a&&(i=t.enterObject()),a){if(null!==r.explicit){var u=this._decodeTag(t,r.explicit);if(t.isError(u))return u;t=u}var c=t.offset;if(null===r.use&&null===r.choice){if(r.any)var h=t.save();var f=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(f))return f;r.any?n=t.raw(h):t=f}if(e&&e.track&&null!==r.tag&&e.track(t.path(),c,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(n=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(n))return n;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function(i){i._decode(t,e)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var d=new o(n);n=this._getUse(r.contains,t._reporterState.obj)._decode(d,e)}}return r.obj&&a&&(n=t.leaveObject(i)),null!==r.key&&(null!==n||!0===a)?t.leaveKey(s,r.key,n):null!==s&&t.exitKey(s),n},u.prototype._decodeGeneric=function(t,e,i){var r=this._baseState;if("seq"===t||"set"===t)return null;if("seqof"===t||"setof"===t)return this._decodeList(e,t,r.args[0],i);if(/str$/.test(t))return this._decodeStr(e,t,i);if("objid"===t&&r.args)return this._decodeObjid(e,r.args[0],r.args[1],i);if("objid"===t)return this._decodeObjid(e,null,null,i);if("gentime"===t||"utctime"===t)return this._decodeTime(e,t,i);if("null_"===t)return this._decodeNull(e,i);if("bool"===t)return this._decodeBool(e,i);else if("objDesc"===t)return this._decodeStr(e,t,i);else if("int"===t||"enum"===t)return this._decodeInt(e,r.args&&r.args[0],i);return null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},u.prototype._getUse=function(t,e){var i=this._baseState;return i.useDecoder=this._use(t,e),a(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},u.prototype._decodeChoice=function(t,e){var i=this._baseState,r=null,n=!1;return(Object.keys(i.choice).some(function(o){var a=t.save(),s=i.choice[o];try{var l=s._decode(t,e);if(t.isError(l))return!1;r={type:o,value:l},n=!0}catch(e){return t.restore(a),!1}return!0},this),n)?r:t.error("Choice not matched")},u.prototype._createEncoderBuffer=function(t){return new n(t,this.reporter)},u.prototype._encode=function(t,e,i){var r=this._baseState;if(null===r.default||r.default!==t){var n=this._encodeValue(t,e,i);if(void 0!==n&&!this._skipDefault(n,e,i))return n}},u.prototype._encodeValue=function(t,e,i){var n,o=this._baseState;if(null===o.parent)return o.children[0]._encode(t,e||new r);var n=null;if(this.reporter=e,o.optional&&void 0===t){if(null===o.default)return;t=o.default}var a=null,s=!1;if(o.any)n=this._createEncoderBuffer(t);else if(o.choice)n=this._encodeChoice(t,e);else if(o.contains)a=this._getUse(o.contains,i)._encode(t,e),s=!0;else if(o.children)a=o.children.map(function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");var r=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var n=i._encode(t[i._baseState.key],e,t);return e.leaveKey(r),n},this).filter(function(t){return t}),a=this._createEncoderBuffer(a);else if("seqof"===o.tag||"setof"===o.tag){if(!(o.args&&1===o.args.length))return e.error("Too many args for : "+o.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,a=this._createEncoderBuffer(t.map(function(i){var r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)},l))}else null!==o.use?n=this._getUse(o.use,i)._encode(t,e):(a=this._encodePrimitive(o.tag,t),s=!0);if(!o.any&&null===o.choice){var h=null!==o.implicit?o.implicit:o.tag,u=null===o.implicit?"universal":"context";null===h?null===o.use&&e.error("Tag could be omitted only for .use()"):null===o.use&&(n=this._encodeComposite(h,s,u,a))}return null!==o.explicit&&(n=this._encodeComposite(o.explicit,!1,"context",n)),n},u.prototype._encodeChoice=function(t,e){var i=this._baseState,r=i.choice[t.type];return r||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(i.choice))),r._encode(t.value,e)},u.prototype._encodePrimitive=function(t,e){var i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);else if("objDesc"===t)return this._encodeStr(e,t);else throw Error("Unsupported tag: "+t)},u.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},u.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}}),parcelRegister("iEX0F",function(t,e){var i=t.exports;i._reverse=function(t){var e={};return Object.keys(t).forEach(function(i){(0|i)==i&&(i|=0),e[t[i]]=i}),e},i.der=parcelRequire("jAS29")}),parcelRegister("jAS29",function(t,e){$parcel$export(t.exports,"tagClass",()=>i,t=>i=t),$parcel$export(t.exports,"tagClassByName",()=>r,t=>r=t),$parcel$export(t.exports,"tag",()=>n,t=>n=t),$parcel$export(t.exports,"tagByName",()=>o,t=>o=t);var i,r,n,o,a=parcelRequire("iEX0F");i={0:"universal",1:"application",2:"context",3:"private"},r=a._reverse(i),n={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},o=a._reverse(n)}),parcelRegister("8KrSx",function(t,e){var i=t.exports;i.der=parcelRequire("f85GQ"),i.pem=parcelRequire("l0j47")}),parcelRegister("f85GQ",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("6dg3q"),n=r.base,o=r.bignum,a=r.constants.der;function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){n.Node.call(this,"der",t)}function h(t,e){var i=t.readUInt8(e);if(t.isError(i))return i;var r=a.tagClass[i>>6],n=(32&i)==0;if((31&i)==31){var o=i;for(i=0;(128&o)==128;){if(o=t.readUInt8(e),t.isError(o))return o;i<<=7,i|=127&o}}else i&=31;var s=a.tag[i];return{cls:r,primitive:n,tag:i,tagStr:s}}function u(t,e,i){var r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&128===r)return null;if((128&r)==0)return r;var n=127&r;if(n>4)return t.error("length octect is too long");r=0;for(var o=0;o<n;o++){r<<=8;var a=t.readUInt8(i);if(t.isError(a))return a;r|=a}return r}t.exports=s,s.prototype.decode=function(t,e){return t instanceof n.DecoderBuffer||(t=new n.DecoderBuffer(t,e)),this.tree._decode(t,e)},i(l,n.Node),l.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;var r=t.save(),n=h(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(r),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||i)},l.prototype._decodeTag=function(t,e,i){var r=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var n=u(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');var o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(n=t.offset-o.offset,t.restore(o),t.skip(n,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){var i,r=h(t,e);if(t.isError(r))return r;var n=u(t,r.primitive,e);if(t.isError(n))return n;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},l.prototype._decodeList=function(t,e,i,r){for(var n=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var a=i.decode(t,"der",r);if(t.isError(a)&&o)break;n.push(a)}return n},l.prototype._decodeStr=function(t,e){if("bitstr"===e){var i=t.readUInt8();return t.isError(i)?i:{unused:i,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var n="",o=0;o<r.length/2;o++)n+=String.fromCharCode(r.readUInt16BE(2*o));return n}if("numstr"===e){var a=t.raw().toString("ascii");return this._isNumstr(a)?a:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var s=t.raw().toString("ascii");return this._isPrintstr(s)?s:t.error("Decoding of string type: printstr unsupported characters")}if(/str$/.test(e))return t.raw().toString();else return t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,i){for(var r,n=[],o=0;!t.isEmpty();){var a=t.readUInt8();o<<=7,o|=127&a,(128&a)==0&&(n.push(o),o=0)}128&a&&n.push(o);var s=n[0]/40|0,l=n[0]%40;if(r=i?n:[s,l].concat(n.slice(1)),e){var h=e[r.join(" ")];void 0===h&&(h=e[r.join(".")]),void 0!==h&&(r=h)}return r},l.prototype._decodeTime=function(t,e){var i=t.raw().toString();if("gentime"===e)var r=0|i.slice(0,4),n=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),s=0|i.slice(10,12),l=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");var r=0|i.slice(0,2),n=0|i.slice(2,4),o=0|i.slice(4,6),a=0|i.slice(6,8),s=0|i.slice(8,10),l=0|i.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,o,a,s,l,0)},l.prototype._decodeNull=function(t){return null},l.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){var i=new o(t.raw());return e&&(i=e[i.toString(10)]||i),i},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}}),parcelRegister("l0j47",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("fLiic").Buffer,n=parcelRequire("f85GQ");function o(t){n.call(this,t),this.enc="pem"}i(o,n),t.exports=o,o.prototype.decode=function(t,e){for(var i=t.toString().split(/[\r\n]+/g),o=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,l=-1,h=0;h<i.length;h++){var u=i[h].match(a);if(null!==u&&u[2]===o){if(-1===s){if("BEGIN"!==u[1])break;s=h}else{if("END"!==u[1])break;l=h;break}}}if(-1===s||-1===l)throw Error("PEM section not found for: "+o);var c=i.slice(s+1,l).join("");c.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new r(c,"base64");return n.prototype.decode.call(this,f,e)}}),parcelRegister("8Y2qF",function(t,e){var i=t.exports;i.der=parcelRequire("gtjab"),i.pem=parcelRequire("i0Wwx")}),parcelRegister("gtjab",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("fLiic").Buffer,n=parcelRequire("6dg3q"),o=n.base,a=n.constants.der;function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){o.Node.call(this,"der",t)}function h(t){return t<10?"0"+t:t}function u(t,e,i,r){var n;if("seqof"===t?t="seq":"setof"===t&&(t="set"),a.tagByName.hasOwnProperty(t))n=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);n=t}return n>=31?r.error("Multi-octet tag encoding unsupported"):(e||(n|=32),n|=a.tagClassByName[i||"universal"]<<6)}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},i(l,o.Node),l.prototype._encodeComposite=function(t,e,i,n){var o=u(t,e,i,this.reporter);if(n.length<128){var a=new r(2);return a[0]=o,a[1]=n.length,this._createEncoderBuffer([a,n])}for(var s=1,l=n.length;l>=256;l>>=8)s++;var a=new r(2+s);a[0]=o,a[1]=128|s;for(var l=1+s,h=n.length;h>0;l--,h>>=8)a[l]=255&h;return this._createEncoderBuffer([a,n])},l.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var i=new r(2*t.length),n=0;n<t.length;n++)i.writeUInt16BE(t.charCodeAt(n),2*n);return this._createEncoderBuffer(i)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},l.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var n=0;n<t.length;n++)t[n]|=0}else if(Array.isArray(t)){t=t.slice();for(var n=0;n<t.length;n++)t[n]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}for(var o=0,n=0;n<t.length;n++){var a=t[n];for(o++;a>=128;a>>=7)o++}for(var s=new r(o),l=s.length-1,n=t.length-1;n>=0;n--){var a=t[n];for(s[l--]=127&a;(a>>=7)>0;)s[l--]=128|127&a}return this._createEncoderBuffer(s)},l.prototype._encodeTime=function(t,e){var i,r=new Date(t);return"gentime"===e?i=[h(r.getFullYear()),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[h(r.getFullYear()%100),h(r.getUTCMonth()+1),h(r.getUTCDate()),h(r.getUTCHours()),h(r.getUTCMinutes()),h(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!r.isBuffer(t)){var i=t.toArray();!t.sign&&128&i[0]&&i.unshift(0),t=new r(i)}if(r.isBuffer(t)){var n=t.length;0===t.length&&n++;var o=new r(n);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);for(var n=1,a=t;a>=256;a>>=8)n++;for(var o=Array(n),a=o.length-1;a>=0;a--)o[a]=255&t,t>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new r(o))},l.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},l.prototype._skipDefault=function(t,e,i){var r,n=this._baseState;if(null===n.default)return!1;var o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,i).join()),o.length!==n.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==n.defaultBuffer[r])return!1;return!0}}),parcelRegister("i0Wwx",function(t,e){var i=parcelRequire("dFiDG"),r=parcelRequire("gtjab");function n(t){r.call(this,t),this.enc="pem"}i(n,r),t.exports=n,n.prototype.encode=function(t,e){for(var i=r.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"],o=0;o<i.length;o+=64)n.push(i.slice(o,o+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}}),parcelRegister("iwbcQ",function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return -1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,i){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:i})}}catch(t){return function(t,e,i){t[e]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow,r=i.eval,n=i.execScript;!r&&n&&(n.call(i,"null"),r=i.eval),forEach(Object_keys(t),function(e){i[e]=t[e]}),forEach(globals,function(e){t[e]&&(i[e]=t[e])});var o=Object_keys(i),a=r.call(i,this.code);return forEach(Object_keys(i),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=i[e])}),forEach(globals,function(e){e in t||defineProp(t,e,i[e])}),document.body.removeChild(e),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),i=this.runInContext(e);return t&&forEach(Object_keys(e),function(i){t[i]=e[i]}),i},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var i=Script(e);return i[t].apply(i,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(i){e[i]=t[i]}),e}}),parcelRegister("2YrB2",function(t,e){var i=parcelRequire("6dg3q"),r=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),n=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),o=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}),s=i.define("RelativeDistinguishedName",function(){this.setof(n)}),l=i.define("RDNSequence",function(){this.seqof(s)}),h=i.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),u=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),c=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(h),this.key("validity").use(u),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(c).optional())}),d=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())});t.exports=d}),parcelRegister("iWRbR",function(t,e){var i=parcelRequire("fLiic").Buffer,r=parcelRequire("eOncC"),n=parcelRequire("7hHnd");t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function s(t,e,r){Array.isArray(t)||(t=t.toArray());var n=new i(t);if(r&&n.length<r){var o=new i(r-n.length);o.fill(0),n=i.concat([o,n])}return e?n.toString(e):n}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,r){return e=e||"utf8",i.isBuffer(t)||(t=new i(t,e)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),s(i,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",i.isBuffer(t)||(t=new i(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",i.isBuffer(t)||(t=new i(t,e));var r=new n(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}),parcelRegister("eOncC",function(t,e){var i=t.exports;i.version=parcelRequire("04MZu").version,i.utils=parcelRequire("g1TeC"),i.rand=parcelRequire("gkrIn"),i.curve=parcelRequire("4eoJg"),i.curves=parcelRequire("5Ovd1"),i.ec=parcelRequire("9VEsA"),i.eddsa=parcelRequire("8MZHb")}),parcelRegister("7hHnd",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,i,r){for(var n=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=r,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var l="le"===e,h=new t(s),u=this.clone();if(l){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-a;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}function g(t,e,i){return new y().mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?d(this,t,e):i<1024?m(this,t,e):g(this,t,e)},y.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},y.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},y.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=f(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i.strip(),o.strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},n.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},r(b,_),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,_),r(w,_),r(M,_),M.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(v[t])return v[t];if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new w;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return v[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new k(t)},r(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("lpH4d",function(t,e){var i=parcelRequire("frmAS"),r=parcelRequire("1IbV4"),n=parcelRequire("cYT9k"),o=parcelRequire("cbkyC"),a=parcelRequire("1M4eB"),s=parcelRequire("byBjB"),l=parcelRequire("8xNpR"),h=parcelRequire("4SWJf"),u=parcelRequire("8GZk1").Buffer;function c(t,e){var i=t.modulus.byteLength(),l=e.length,h=n("sha1").update(u.alloc(0)).digest(),c=h.length,f=2*c;if(l>i-f-2)throw Error("message too long");var d=u.alloc(i-l-f-2),p=i-c-1,m=r(c),g=a(u.concat([h,d,u.alloc(1,1),e],p),o(m,p)),y=a(m,o(g,c));return new s(u.concat([u.alloc(1),y,g],i))}function f(t,e,i){var r,n=e.length,o=t.modulus.byteLength();if(n>o-11)throw Error("message too long");return r=i?u.alloc(o-n-3,255):d(o-n-3),new s(u.concat([u.from([0,i?1:2]),r,u.alloc(1),e],o))}function d(t){for(var e,i=u.allocUnsafe(t),n=0,o=r(2*t),a=0;n<t;)a===o.length&&(o=r(2*t),a=0),(e=o[a++])&&(i[n++]=e);return i}t.exports=function(t,e,r){n=t.padding?t.padding:r?1:4;var n,o,a=i(t);if(4===n)o=c(a,e);else if(1===n)o=f(a,e,r);else if(3===n){if((o=new s(e)).cmp(a.modulus)>=0)throw Error("data too long for modulus")}else throw Error("unknown padding");return r?h(o,a):l(o,a)}}),parcelRegister("frmAS",function(t,e){var i=parcelRequire("1OC9H"),r=parcelRequire("6isUX"),n=parcelRequire("1sj8P"),o=parcelRequire("hMpyE"),a=parcelRequire("csvUc"),s=parcelRequire("8GZk1").Buffer;function l(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),l=r[t.algorithm.decrypt.cipher.algo.join(".")],h=t.algorithm.decrypt.cipher.iv,u=t.subjectPrivateKey,c=parseInt(l.split("-")[1],10)/8,f=a.pbkdf2Sync(e,i,n,c,"sha1"),d=o.createDecipheriv(l,f,h),p=[];return p.push(d.update(u)),p.push(d.final()),s.concat(p)}function h(t){"object"!=typeof t||s.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=s.from(t));var e,r,o,a=n(t,e),h=a.tag,u=a.data;switch(h){case"CERTIFICATE":o=i.certificate.decode(u,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(o||(o=i.PublicKey.decode(u,"der")),r=o.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(o.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return o.subjectPrivateKey=o.subjectPublicKey,{type:"ec",data:o};case"1.2.840.10040.4.1":return o.algorithm.params.pub_key=i.DSAparam.decode(o.subjectPublicKey.data,"der"),{type:"dsa",data:o.algorithm.params};default:throw Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":u=l(u=i.EncryptedPrivateKey.decode(u,"der"),e);case"PRIVATE KEY":switch(r=(o=i.PrivateKey.decode(u,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(o.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:o.algorithm.curve,privateKey:i.ECPrivateKey.decode(o.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return o.algorithm.params.priv_key=i.DSAparam.decode(o.subjectPrivateKey,"der"),{type:"dsa",params:o.algorithm.params};default:throw Error("unknown key id "+r)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(u,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(u,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(u,"der")};case"EC PRIVATE KEY":return{curve:(u=i.ECPrivateKey.decode(u,"der")).parameters.value,privateKey:u.privateKey};default:throw Error("unknown key type "+h)}}h.signature=i.signature,t.exports=h}),parcelRegister("1OC9H",function(t,e){$parcel$export(t.exports,"certificate",()=>i,t=>i=t),$parcel$export(t.exports,"RSAPrivateKey",()=>r,t=>r=t),$parcel$export(t.exports,"RSAPublicKey",()=>n,t=>n=t),$parcel$export(t.exports,"PublicKey",()=>o,t=>o=t),$parcel$export(t.exports,"PrivateKey",()=>a,t=>a=t),$parcel$export(t.exports,"EncryptedPrivateKey",()=>s,t=>s=t),$parcel$export(t.exports,"DSAPrivateKey",()=>l,t=>l=t),$parcel$export(t.exports,"DSAparam",()=>h,t=>h=t),$parcel$export(t.exports,"ECPrivateKey",()=>u,t=>u=t),$parcel$export(t.exports,"signature",()=>c,t=>c=t);var i,r,n,o,a,s,l,h,u,c,f=parcelRequire("6dg3q");i=parcelRequire("2YrB2"),r=f.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),n=f.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});var d=f.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())});o=f.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())}),a=f.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(d),this.key("subjectPrivateKey").octstr())}),s=f.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),l=f.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}),h=f.define("DSAparam",function(){this.int()});var p=f.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});u=f.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())}),c=f.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})}),parcelRegister("6isUX",function(t,e){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}),parcelRegister("1sj8P",function(t,e){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=parcelRequire("diEuB"),a=parcelRequire("hMpyE"),s=parcelRequire("8GZk1").Buffer;t.exports=function(t,e){var l,h=t.toString(),u=h.match(i);if(u){var c="aes"+u[1],f=s.from(u[2],"hex"),d=s.from(u[3].replace(/[\r\n]/g,""),"base64"),p=o(e,f.slice(0,8),parseInt(u[1],10)).key,m=[],g=a.createDecipheriv(c,p,f);m.push(g.update(d)),m.push(g.final()),l=s.concat(m)}else{var y=h.match(n);l=s.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:h.match(r)[1],data:l}}}),parcelRegister("diEuB",function(t,e){var i=parcelRequire("8GZk1").Buffer,r=parcelRequire("4tt75");function n(t,e,n,o){if(i.isBuffer(t)||(t=i.from(t,"binary")),e&&(i.isBuffer(e)||(e=i.from(e,"binary")),8!==e.length))throw RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,s=i.alloc(a),l=i.alloc(o||0),h=i.alloc(0);a>0||o>0;){var u=new r;u.update(h),u.update(t),e&&u.update(e),h=u.digest();var c=0;if(a>0){var f=s.length-a;c=Math.min(a,h.length),h.copy(s,f,0,c),a-=c}if(c<h.length&&o>0){var d=l.length-o,p=Math.min(o,h.length-c);h.copy(l,d,c,c+p),o-=p}}return h.fill(0),{key:s,iv:l}}t.exports=n}),parcelRegister("hMpyE",function(t,e){$parcel$export(t.exports,"createCipheriv",()=>n,t=>n=t),$parcel$export(t.exports,"createDecipheriv",()=>l,t=>l=t),$parcel$export(t.exports,"getCiphers",()=>u,t=>u=t);var i,r,n,o,a,s,l,h,u,c=parcelRequire("cILkp"),f=parcelRequire("3TKow"),d=parcelRequire("40N8b");function p(){return Object.keys(d)}i=r=c.createCipher,n=o=c.createCipheriv,a=s=f.createDecipher,l=h=f.createDecipheriv,u=p}),parcelRegister("cILkp",function(t,e){$parcel$export(t.exports,"createCipheriv",()=>i,t=>i=t),$parcel$export(t.exports,"createCipher",()=>r,t=>r=t);var i,r,n=parcelRequire("aAGV1"),o=parcelRequire("53SXK"),a=parcelRequire("8GZk1").Buffer,s=parcelRequire("ezs9t"),l=parcelRequire("entWb"),h=parcelRequire("3poiA"),u=parcelRequire("diEuB");function c(t,e,i){l.call(this),this._cache=new d,this._cipher=new h.AES(e),this._prev=a.from(i),this._mode=t,this._autopadding=!0}parcelRequire("dFiDG")(c,l),c.prototype._update=function(t){this._cache.add(t);for(var e,i,r=[];e=this._cache.get();)i=this._mode.encrypt(this,e),r.push(i);return a.concat(r)};var f=a.alloc(16,16);function d(){this.cache=a.allocUnsafe(0)}function p(t,e,i){var r=n[t.toLowerCase()];if(!r)throw TypeError("invalid suite type");if("string"==typeof e&&(e=a.from(e)),e.length!==r.key/8)throw TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=a.from(i)),"GCM"!==r.mode&&i.length!==r.iv)throw TypeError("invalid iv length "+i.length);return"stream"===r.type?new s(r.module,e,i):"auth"===r.type?new o(r.module,e,i):new c(r.module,e,i)}function m(t,e){var i=n[t.toLowerCase()];if(!i)throw TypeError("invalid suite type");var r=u(e,!1,i.key,i.iv);return p(t,r.key,r.iv)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(f))throw this._cipher.scrub(),Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},d.prototype.add=function(t){this.cache=a.concat([this.cache,t])},d.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},d.prototype.flush=function(){for(var t=16-this.cache.length,e=a.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return a.concat([this.cache,e])},i=p,r=m}),parcelRegister("aAGV1",function(t,e){var i={ECB:parcelRequire("1of1m"),CBC:parcelRequire("38dtZ"),CFB:parcelRequire("eKyVo"),CFB8:parcelRequire("7rMJu"),CFB1:parcelRequire("aBfop"),OFB:parcelRequire("gMy3M"),CTR:parcelRequire("inctX"),GCM:parcelRequire("inctX")},r=parcelRequire("40N8b");for(var n in r)r[n].module=i[r[n].mode];t.exports=r}),parcelRegister("40N8b",function(t,e){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')}),parcelRegister("53SXK",function(t,e){var i=parcelRequire("3poiA"),r=parcelRequire("8GZk1").Buffer,n=parcelRequire("entWb"),o=parcelRequire("dFiDG"),a=parcelRequire("7dCIp"),s=parcelRequire("e7MQo"),l=parcelRequire("dZo3k");function h(t,e){var i=0;t.length!==e.length&&i++;for(var r=Math.min(t.length,e.length),n=0;n<r;++n)i+=t[n]^e[n];return i}function u(t,e,i){if(12===e.length)return t._finID=r.concat([e,r.from([0,0,0,1])]),r.concat([e,r.from([0,0,0,2])]);var n=new a(i),o=e.length,s=o%16;n.update(e),s&&(s=16-s,n.update(r.alloc(s,0))),n.update(r.alloc(8,0));var h=8*o,u=r.alloc(8);u.writeUIntBE(h,0,8),n.update(u),t._finID=n.state;var c=r.from(t._finID);return l(c),c}function c(t,e,o,s){n.call(this);var l=r.alloc(4,0);this._cipher=new i.AES(e);var h=this._cipher.encryptBlock(l);this._ghash=new a(h),o=u(this,o,h),this._prev=r.from(o),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}o(c,n),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=r.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw Error("Unsupported state or unable to authenticate data");var t=s(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&h(t,this._authTag))throw Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c}),parcelRegister("3poiA",function(t,e){$parcel$export(t.exports,"AES",()=>i,t=>i=t);var i,r=parcelRequire("8GZk1").Buffer;function n(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,i=Array(e),n=0;n<e;n++)i[n]=t.readUInt32BE(4*n);return i}function o(t){for(var e=0;e<t.length;t++)t[e]=0}function a(t,e,i,r,n){for(var o,a,s,l,h=i[0],u=i[1],c=i[2],f=i[3],d=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],y=4,v=1;v<n;v++)o=h[d>>>24]^u[p>>>16&255]^c[m>>>8&255]^f[255&g]^e[y++],a=h[p>>>24]^u[m>>>16&255]^c[g>>>8&255]^f[255&d]^e[y++],s=h[m>>>24]^u[g>>>16&255]^c[d>>>8&255]^f[255&p]^e[y++],l=h[g>>>24]^u[d>>>16&255]^c[p>>>8&255]^f[255&m]^e[y++],d=o,p=a,m=s,g=l;return o=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^e[y++],a=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&d])^e[y++],[o>>>=0,a>>>=0,s=((r[m>>>24]<<24|r[g>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^e[y++])>>>0,l=((r[g>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^e[y++])>>>0]}var s=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var t=Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var i=[],r=[],n=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,l=0;l<256;++l){var h=s^s<<1^s<<2^s<<3^s<<4;h=h>>>8^255&h^99,i[a]=h,r[h]=a;var u=t[a],c=t[u],f=t[c],d=257*t[h]^16843008*h;n[0][a]=d<<24|d>>>8,n[1][a]=d<<16|d>>>16,n[2][a]=d<<8|d>>>24,n[3][a]=d,d=16843009*f^65537*c^257*u^16843008*a,o[0][h]=d<<24|d>>>8,o[1][h]=d<<16|d>>>16,o[2][h]=d<<8|d>>>24,o[3][h]=d,0===a?a=s=1:(a=u^t[t[t[f^u]]],s^=t[t[s]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:n,INV_SUB_MIX:o}}();function h(t){this._key=n(t),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=(i+1)*4,n=[],o=0;o<e;o++)n[o]=t[o];for(o=e;o<r;o++){var a=n[o-1];o%e==0?(a=a<<8|a>>>24,a=(l.SBOX[a>>>24]<<24|l.SBOX[a>>>16&255]<<16|l.SBOX[a>>>8&255]<<8|l.SBOX[255&a])^s[o/e|0]<<24):e>6&&o%e==4&&(a=l.SBOX[a>>>24]<<24|l.SBOX[a>>>16&255]<<16|l.SBOX[a>>>8&255]<<8|l.SBOX[255&a]),n[o]=n[o-e]^a}for(var h=[],u=0;u<r;u++){var c=r-u,f=n[c-(u%4?0:4)];u<4||c<=4?h[u]=f:h[u]=l.INV_SUB_MIX[0][l.SBOX[f>>>24]]^l.INV_SUB_MIX[1][l.SBOX[f>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[f>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&f]]}this._nRounds=i,this._keySchedule=n,this._invKeySchedule=h},h.prototype.encryptBlockRaw=function(t){return a(t=n(t),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},h.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=r.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},h.prototype.decryptBlock=function(t){var e=(t=n(t))[1];t[1]=t[3],t[3]=e;var i=a(t,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),o=r.allocUnsafe(16);return o.writeUInt32BE(i[0],0),o.writeUInt32BE(i[3],4),o.writeUInt32BE(i[2],8),o.writeUInt32BE(i[1],12),o},h.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},i=h}),parcelRegister("7dCIp",function(t,e){var i=parcelRequire("8GZk1").Buffer,r=i.alloc(16,0);function n(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function o(t){var e=i.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,i=n(this.h),r=[0,0,0,0],a=-1;++a<128;){for((this.state[~~(a/8)]&1<<7-a%8)!=0&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),e=(1&i[3])!=0,t=3;t>0;t--)i[t]=i[t]>>>1|(1&i[t-1])<<31;i[0]=i[0]>>>1,e&&(i[0]=-520093696^i[0])}this.state=o(r)},a.prototype.update=function(t){var e;for(this.cache=i.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(i.concat([this.cache,r],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a}),parcelRegister("ezs9t",function(t,e){var i=parcelRequire("3poiA"),r=parcelRequire("8GZk1").Buffer,n=parcelRequire("entWb");function o(t,e,o,a){n.call(this),this._cipher=new i.AES(e),this._prev=r.from(o),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=a,this._mode=t}parcelRequire("dFiDG")(o,n),o.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},t.exports=o}),parcelRegister("3TKow",function(t,e){$parcel$export(t.exports,"createDecipher",()=>i,t=>i=t),$parcel$export(t.exports,"createDecipheriv",()=>r,t=>r=t);var i,r,n=parcelRequire("53SXK"),o=parcelRequire("8GZk1").Buffer,a=parcelRequire("aAGV1"),s=parcelRequire("ezs9t"),l=parcelRequire("entWb"),h=parcelRequire("3poiA"),u=parcelRequire("diEuB");function c(t,e,i){l.call(this),this._cache=new f,this._last=void 0,this._cipher=new h.AES(e),this._prev=o.from(i),this._mode=t,this._autopadding=!0}function f(){this.cache=o.allocUnsafe(0)}function d(t){var e=t[15];if(e<1||e>16)throw Error("unable to decrypt data");for(var i=-1;++i<e;)if(t[i+(16-e)]!==e)throw Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}function p(t,e,i){var r=a[t.toLowerCase()];if(!r)throw TypeError("invalid suite type");if("string"==typeof i&&(i=o.from(i)),"GCM"!==r.mode&&i.length!==r.iv)throw TypeError("invalid iv length "+i.length);if("string"==typeof e&&(e=o.from(e)),e.length!==r.key/8)throw TypeError("invalid key length "+e.length);return"stream"===r.type?new s(r.module,e,i,!0):"auth"===r.type?new n(r.module,e,i,!0):new c(r.module,e,i)}parcelRequire("dFiDG")(c,l),c.prototype._update=function(t){this._cache.add(t);for(var e,i,r=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),r.push(i);return o.concat(r)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return d(this._mode.decrypt(this,t));if(t)throw Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},f.prototype.flush=function(){if(this.cache.length)return this.cache},i=function(t,e){var i=a[t.toLowerCase()];if(!i)throw TypeError("invalid suite type");var r=u(e,!1,i.key,i.iv);return p(t,r.key,r.iv)},r=p}),parcelRegister("csvUc",function(t,e){var i,r;$parcel$export(t.exports,"pbkdf2",()=>i,t=>i=t),$parcel$export(t.exports,"pbkdf2Sync",()=>r,t=>r=t),i=parcelRequire("eh1fO"),r=parcelRequire("eWdZo")}),parcelRegister("cbkyC",function(t,e){var i=parcelRequire("cYT9k"),r=parcelRequire("8GZk1").Buffer;function n(t){var e=r.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var o,a=r.alloc(0),s=0;a.length<e;)o=n(s++),a=r.concat([a,i("sha1").update(t).update(o).digest()]);return a.slice(0,e)}}),parcelRegister("1M4eB",function(t,e){t.exports=function(t,e){for(var i=t.length,r=-1;++r<i;)t[r]^=e[r];return t}}),parcelRegister("byBjB",function(t,e){!function(t,e){function i(t,e){if(!t)throw Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function n(t,e,i){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(i=e,e=10),this._init(t||0,e||10,i||"be"))}"object"==typeof t?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:parcelRequire("9ZyLq").Buffer}catch(t){}function o(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(t,e,i){var r=o(t,i);return i-1>=e&&(r|=o(t,i-1)<<4),r}function s(t,e,i,r){for(var n=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=r,s>=49?n+=s-49+10:s>=17?n+=s-17+10:n+=s}return n}n.isBN=function(t){return t instanceof n||null!==t&&"object"==typeof t&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,e){return t.cmp(e)>0?t:e},n.min=function(t,e){return 0>t.cmp(e)?t:e},n.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,r):(this._parseBase(t,e,n),"le"===r&&this._initArray(this.toArray(),e,r)))},n.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},n.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var n,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,n=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);else if("le"===r)for(a=0,n=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[n]|=o<<s&67108863,this.words[n+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,n++);return this.strip()},n.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n=0;n<this.length;n++)this.words[n]=0;var o=0,s=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=a(t,e,n)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},n.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var o=t.length-i,a=o%r,l=Math.min(o,o-a)+i,h=0,u=i;u<l;u+=r)h=s(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=s(t,u,t.length,e),u=0;u<a;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t){for(var e=Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}function d(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,l=a/67108864|0;i.words[0]=s;for(var h=1;h<r;h++){for(var u=l>>>26,c=67108863&l,f=Math.min(h,e.length-1),d=Math.max(0,h-t.length+1);d<=f;d++){var p=h-d|0;u+=(a=(n=0|t.words[p])*(o=0|e.words[d])+c)/67108864|0,c=67108863&a}i.words[h]=0|c,l=0|u}return 0!==l?i.words[h]=0|l:i.length--,i.strip()}n.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=((s<<n|o)&16777215).toString(16);r=0!=(o=s>>>24-n&16777215)||a!==this.length-1?h[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(t,e){return i(void 0!==l),this.toArrayLike(l,t,e)},n.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},n.prototype.toArrayLike=function(t,e,r){var n,o,a=this.byteLength(),s=r||Math.max(1,a);i(a<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0"),this.strip();var l="le"===e,h=new t(s),u=this.clone();if(l){for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[o]=n;for(;o<s;o++)h[o]=0}else{for(o=0;o<s-a;o++)h[o]=0;for(o=0;!u.isZero();o++)n=u.andln(255),u.iushrn(8),h[s-o-1]=n}return h},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},n.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return(8191&e)==0&&(i+=13,e>>>=13),(127&e)==0&&(i+=7,e>>>=7),(15&e)==0&&(i+=4,e>>>=4),(3&e)==0&&(i+=2,e>>>=2),(1&e)==0&&i++,i},n.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},n.prototype.ior=function(t){return i((this.negative|t.negative)==0),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},n.prototype.iand=function(t){return i((this.negative|t.negative)==0),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){this.length>t.length?(e=this,i=t):(e=t,i=this);for(var e,i,r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},n.prototype.ixor=function(t){return i((this.negative|t.negative)==0),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},n.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var e,i,r,n=0,o=0;o<r.length;o++)e=(0|i.words[o])+(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<i.length;o++)e=(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},n.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,i,r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(e=this,i=t):(e=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(r=(0|e.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&r;for(;0!==o&&a<e.length;a++)o=(r=(0|e.words[a])+o)>>26,this.words[a]=67108863&r;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,o,a=t.words,s=e.words,l=i.words,h=0,u=0|a[0],c=8191&u,f=u>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,x=_>>>13,w=0|a[4],M=8191&w,S=w>>>13,k=0|a[5],E=8191&k,I=k>>>13,P=0|a[6],T=8191&P,A=P>>>13,C=0|a[7],R=8191&C,N=C>>>13,z=0|a[8],O=8191&z,D=z>>>13,B=0|a[9],F=8191&B,j=B>>>13,q=0|s[0],V=8191&q,U=q>>>13,Z=0|s[1],G=8191&Z,H=Z>>>13,W=0|s[2],X=8191&W,$=W>>>13,Y=0|s[3],K=8191&Y,J=Y>>>13,Q=0|s[4],tt=8191&Q,te=Q>>>13,ti=0|s[5],tr=8191&ti,tn=ti>>>13,to=0|s[6],ta=8191&to,ts=to>>>13,tl=0|s[7],th=8191&tl,tu=tl>>>13,tc=0|s[8],tf=8191&tc,td=tc>>>13,tp=0|s[9],tm=8191&tp,tg=tp>>>13;i.negative=t.negative^e.negative,i.length=19;var ty=(h+(r=Math.imul(c,V))|0)+((8191&(n=(n=Math.imul(c,U))+Math.imul(f,V)|0))<<13)|0;h=((o=Math.imul(f,U))+(n>>>13)|0)+(ty>>>26)|0,ty&=67108863,r=Math.imul(p,V),n=(n=Math.imul(p,U))+Math.imul(m,V)|0,o=Math.imul(m,U);var tv=(h+(r=r+Math.imul(c,G)|0)|0)+((8191&(n=(n=n+Math.imul(c,H)|0)+Math.imul(f,G)|0))<<13)|0;h=((o=o+Math.imul(f,H)|0)+(n>>>13)|0)+(tv>>>26)|0,tv&=67108863,r=Math.imul(y,V),n=(n=Math.imul(y,U))+Math.imul(v,V)|0,o=Math.imul(v,U),r=r+Math.imul(p,G)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,H)|0;var t_=(h+(r=r+Math.imul(c,X)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,X)|0))<<13)|0;h=((o=o+Math.imul(f,$)|0)+(n>>>13)|0)+(t_>>>26)|0,t_&=67108863,r=Math.imul(b,V),n=(n=Math.imul(b,U))+Math.imul(x,V)|0,o=Math.imul(x,U),r=r+Math.imul(y,G)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,H)|0,r=r+Math.imul(p,X)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,$)|0;var tb=(h+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,J)|0)+Math.imul(f,K)|0))<<13)|0;h=((o=o+Math.imul(f,J)|0)+(n>>>13)|0)+(tb>>>26)|0,tb&=67108863,r=Math.imul(M,V),n=(n=Math.imul(M,U))+Math.imul(S,V)|0,o=Math.imul(S,U),r=r+Math.imul(b,G)|0,n=(n=n+Math.imul(b,H)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(y,X)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,$)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,J)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,J)|0;var tx=(h+(r=r+Math.imul(c,tt)|0)|0)+((8191&(n=(n=n+Math.imul(c,te)|0)+Math.imul(f,tt)|0))<<13)|0;h=((o=o+Math.imul(f,te)|0)+(n>>>13)|0)+(tx>>>26)|0,tx&=67108863,r=Math.imul(E,V),n=(n=Math.imul(E,U))+Math.imul(I,V)|0,o=Math.imul(I,U),r=r+Math.imul(M,G)|0,n=(n=n+Math.imul(M,H)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,H)|0,r=r+Math.imul(b,X)|0,n=(n=n+Math.imul(b,$)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,$)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,J)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,J)|0,r=r+Math.imul(p,tt)|0,n=(n=n+Math.imul(p,te)|0)+Math.imul(m,tt)|0,o=o+Math.imul(m,te)|0;var tw=(h+(r=r+Math.imul(c,tr)|0)|0)+((8191&(n=(n=n+Math.imul(c,tn)|0)+Math.imul(f,tr)|0))<<13)|0;h=((o=o+Math.imul(f,tn)|0)+(n>>>13)|0)+(tw>>>26)|0,tw&=67108863,r=Math.imul(T,V),n=(n=Math.imul(T,U))+Math.imul(A,V)|0,o=Math.imul(A,U),r=r+Math.imul(E,G)|0,n=(n=n+Math.imul(E,H)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(M,X)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,$)|0,r=r+Math.imul(b,K)|0,n=(n=n+Math.imul(b,J)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(y,tt)|0,n=(n=n+Math.imul(y,te)|0)+Math.imul(v,tt)|0,o=o+Math.imul(v,te)|0,r=r+Math.imul(p,tr)|0,n=(n=n+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(h+(r=r+Math.imul(c,ta)|0)|0)+((8191&(n=(n=n+Math.imul(c,ts)|0)+Math.imul(f,ta)|0))<<13)|0;h=((o=o+Math.imul(f,ts)|0)+(n>>>13)|0)+(tM>>>26)|0,tM&=67108863,r=Math.imul(R,V),n=(n=Math.imul(R,U))+Math.imul(N,V)|0,o=Math.imul(N,U),r=r+Math.imul(T,G)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(E,X)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,$)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,J)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,r=r+Math.imul(b,tt)|0,n=(n=n+Math.imul(b,te)|0)+Math.imul(x,tt)|0,o=o+Math.imul(x,te)|0,r=r+Math.imul(y,tr)|0,n=(n=n+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,r=r+Math.imul(p,ta)|0,n=(n=n+Math.imul(p,ts)|0)+Math.imul(m,ta)|0,o=o+Math.imul(m,ts)|0;var tS=(h+(r=r+Math.imul(c,th)|0)|0)+((8191&(n=(n=n+Math.imul(c,tu)|0)+Math.imul(f,th)|0))<<13)|0;h=((o=o+Math.imul(f,tu)|0)+(n>>>13)|0)+(tS>>>26)|0,tS&=67108863,r=Math.imul(O,V),n=(n=Math.imul(O,U))+Math.imul(D,V)|0,o=Math.imul(D,U),r=r+Math.imul(R,G)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(N,G)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(T,X)|0,n=(n=n+Math.imul(T,$)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,$)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,J)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,J)|0,r=r+Math.imul(M,tt)|0,n=(n=n+Math.imul(M,te)|0)+Math.imul(S,tt)|0,o=o+Math.imul(S,te)|0,r=r+Math.imul(b,tr)|0,n=(n=n+Math.imul(b,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,r=r+Math.imul(y,ta)|0,n=(n=n+Math.imul(y,ts)|0)+Math.imul(v,ta)|0,o=o+Math.imul(v,ts)|0,r=r+Math.imul(p,th)|0,n=(n=n+Math.imul(p,tu)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,tu)|0;var tk=(h+(r=r+Math.imul(c,tf)|0)|0)+((8191&(n=(n=n+Math.imul(c,td)|0)+Math.imul(f,tf)|0))<<13)|0;h=((o=o+Math.imul(f,td)|0)+(n>>>13)|0)+(tk>>>26)|0,tk&=67108863,r=Math.imul(F,V),n=(n=Math.imul(F,U))+Math.imul(j,V)|0,o=Math.imul(j,U),r=r+Math.imul(O,G)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,H)|0,r=r+Math.imul(R,X)|0,n=(n=n+Math.imul(R,$)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,$)|0,r=r+Math.imul(T,K)|0,n=(n=n+Math.imul(T,J)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(E,tt)|0,n=(n=n+Math.imul(E,te)|0)+Math.imul(I,tt)|0,o=o+Math.imul(I,te)|0,r=r+Math.imul(M,tr)|0,n=(n=n+Math.imul(M,tn)|0)+Math.imul(S,tr)|0,o=o+Math.imul(S,tn)|0,r=r+Math.imul(b,ta)|0,n=(n=n+Math.imul(b,ts)|0)+Math.imul(x,ta)|0,o=o+Math.imul(x,ts)|0,r=r+Math.imul(y,th)|0,n=(n=n+Math.imul(y,tu)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,tu)|0,r=r+Math.imul(p,tf)|0,n=(n=n+Math.imul(p,td)|0)+Math.imul(m,tf)|0,o=o+Math.imul(m,td)|0;var tE=(h+(r=r+Math.imul(c,tm)|0)|0)+((8191&(n=(n=n+Math.imul(c,tg)|0)+Math.imul(f,tm)|0))<<13)|0;h=((o=o+Math.imul(f,tg)|0)+(n>>>13)|0)+(tE>>>26)|0,tE&=67108863,r=Math.imul(F,G),n=(n=Math.imul(F,H))+Math.imul(j,G)|0,o=Math.imul(j,H),r=r+Math.imul(O,X)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(D,X)|0,o=o+Math.imul(D,$)|0,r=r+Math.imul(R,K)|0,n=(n=n+Math.imul(R,J)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(T,tt)|0,n=(n=n+Math.imul(T,te)|0)+Math.imul(A,tt)|0,o=o+Math.imul(A,te)|0,r=r+Math.imul(E,tr)|0,n=(n=n+Math.imul(E,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,r=r+Math.imul(M,ta)|0,n=(n=n+Math.imul(M,ts)|0)+Math.imul(S,ta)|0,o=o+Math.imul(S,ts)|0,r=r+Math.imul(b,th)|0,n=(n=n+Math.imul(b,tu)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,tu)|0,r=r+Math.imul(y,tf)|0,n=(n=n+Math.imul(y,td)|0)+Math.imul(v,tf)|0,o=o+Math.imul(v,td)|0;var tI=(h+(r=r+Math.imul(p,tm)|0)|0)+((8191&(n=(n=n+Math.imul(p,tg)|0)+Math.imul(m,tm)|0))<<13)|0;h=((o=o+Math.imul(m,tg)|0)+(n>>>13)|0)+(tI>>>26)|0,tI&=67108863,r=Math.imul(F,X),n=(n=Math.imul(F,$))+Math.imul(j,X)|0,o=Math.imul(j,$),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,J)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,tt)|0,n=(n=n+Math.imul(R,te)|0)+Math.imul(N,tt)|0,o=o+Math.imul(N,te)|0,r=r+Math.imul(T,tr)|0,n=(n=n+Math.imul(T,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,r=r+Math.imul(E,ta)|0,n=(n=n+Math.imul(E,ts)|0)+Math.imul(I,ta)|0,o=o+Math.imul(I,ts)|0,r=r+Math.imul(M,th)|0,n=(n=n+Math.imul(M,tu)|0)+Math.imul(S,th)|0,o=o+Math.imul(S,tu)|0,r=r+Math.imul(b,tf)|0,n=(n=n+Math.imul(b,td)|0)+Math.imul(x,tf)|0,o=o+Math.imul(x,td)|0;var tP=(h+(r=r+Math.imul(y,tm)|0)|0)+((8191&(n=(n=n+Math.imul(y,tg)|0)+Math.imul(v,tm)|0))<<13)|0;h=((o=o+Math.imul(v,tg)|0)+(n>>>13)|0)+(tP>>>26)|0,tP&=67108863,r=Math.imul(F,K),n=(n=Math.imul(F,J))+Math.imul(j,K)|0,o=Math.imul(j,J),r=r+Math.imul(O,tt)|0,n=(n=n+Math.imul(O,te)|0)+Math.imul(D,tt)|0,o=o+Math.imul(D,te)|0,r=r+Math.imul(R,tr)|0,n=(n=n+Math.imul(R,tn)|0)+Math.imul(N,tr)|0,o=o+Math.imul(N,tn)|0,r=r+Math.imul(T,ta)|0,n=(n=n+Math.imul(T,ts)|0)+Math.imul(A,ta)|0,o=o+Math.imul(A,ts)|0,r=r+Math.imul(E,th)|0,n=(n=n+Math.imul(E,tu)|0)+Math.imul(I,th)|0,o=o+Math.imul(I,tu)|0,r=r+Math.imul(M,tf)|0,n=(n=n+Math.imul(M,td)|0)+Math.imul(S,tf)|0,o=o+Math.imul(S,td)|0;var tT=(h+(r=r+Math.imul(b,tm)|0)|0)+((8191&(n=(n=n+Math.imul(b,tg)|0)+Math.imul(x,tm)|0))<<13)|0;h=((o=o+Math.imul(x,tg)|0)+(n>>>13)|0)+(tT>>>26)|0,tT&=67108863,r=Math.imul(F,tt),n=(n=Math.imul(F,te))+Math.imul(j,tt)|0,o=Math.imul(j,te),r=r+Math.imul(O,tr)|0,n=(n=n+Math.imul(O,tn)|0)+Math.imul(D,tr)|0,o=o+Math.imul(D,tn)|0,r=r+Math.imul(R,ta)|0,n=(n=n+Math.imul(R,ts)|0)+Math.imul(N,ta)|0,o=o+Math.imul(N,ts)|0,r=r+Math.imul(T,th)|0,n=(n=n+Math.imul(T,tu)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,tu)|0,r=r+Math.imul(E,tf)|0,n=(n=n+Math.imul(E,td)|0)+Math.imul(I,tf)|0,o=o+Math.imul(I,td)|0;var tA=(h+(r=r+Math.imul(M,tm)|0)|0)+((8191&(n=(n=n+Math.imul(M,tg)|0)+Math.imul(S,tm)|0))<<13)|0;h=((o=o+Math.imul(S,tg)|0)+(n>>>13)|0)+(tA>>>26)|0,tA&=67108863,r=Math.imul(F,tr),n=(n=Math.imul(F,tn))+Math.imul(j,tr)|0,o=Math.imul(j,tn),r=r+Math.imul(O,ta)|0,n=(n=n+Math.imul(O,ts)|0)+Math.imul(D,ta)|0,o=o+Math.imul(D,ts)|0,r=r+Math.imul(R,th)|0,n=(n=n+Math.imul(R,tu)|0)+Math.imul(N,th)|0,o=o+Math.imul(N,tu)|0,r=r+Math.imul(T,tf)|0,n=(n=n+Math.imul(T,td)|0)+Math.imul(A,tf)|0,o=o+Math.imul(A,td)|0;var tC=(h+(r=r+Math.imul(E,tm)|0)|0)+((8191&(n=(n=n+Math.imul(E,tg)|0)+Math.imul(I,tm)|0))<<13)|0;h=((o=o+Math.imul(I,tg)|0)+(n>>>13)|0)+(tC>>>26)|0,tC&=67108863,r=Math.imul(F,ta),n=(n=Math.imul(F,ts))+Math.imul(j,ta)|0,o=Math.imul(j,ts),r=r+Math.imul(O,th)|0,n=(n=n+Math.imul(O,tu)|0)+Math.imul(D,th)|0,o=o+Math.imul(D,tu)|0,r=r+Math.imul(R,tf)|0,n=(n=n+Math.imul(R,td)|0)+Math.imul(N,tf)|0,o=o+Math.imul(N,td)|0;var tL=(h+(r=r+Math.imul(T,tm)|0)|0)+((8191&(n=(n=n+Math.imul(T,tg)|0)+Math.imul(A,tm)|0))<<13)|0;h=((o=o+Math.imul(A,tg)|0)+(n>>>13)|0)+(tL>>>26)|0,tL&=67108863,r=Math.imul(F,th),n=(n=Math.imul(F,tu))+Math.imul(j,th)|0,o=Math.imul(j,tu),r=r+Math.imul(O,tf)|0,n=(n=n+Math.imul(O,td)|0)+Math.imul(D,tf)|0,o=o+Math.imul(D,td)|0;var tR=(h+(r=r+Math.imul(R,tm)|0)|0)+((8191&(n=(n=n+Math.imul(R,tg)|0)+Math.imul(N,tm)|0))<<13)|0;h=((o=o+Math.imul(N,tg)|0)+(n>>>13)|0)+(tR>>>26)|0,tR&=67108863,r=Math.imul(F,tf),n=(n=Math.imul(F,td))+Math.imul(j,tf)|0,o=Math.imul(j,td);var tN=(h+(r=r+Math.imul(O,tm)|0)|0)+((8191&(n=(n=n+Math.imul(O,tg)|0)+Math.imul(D,tm)|0))<<13)|0;h=((o=o+Math.imul(D,tg)|0)+(n>>>13)|0)+(tN>>>26)|0,tN&=67108863;var tz=(h+(r=Math.imul(F,tm))|0)+((8191&(n=(n=Math.imul(F,tg))+Math.imul(j,tm)|0))<<13)|0;return h=((o=Math.imul(j,tg))+(n>>>13)|0)+(tz>>>26)|0,tz&=67108863,l[0]=ty,l[1]=tv,l[2]=t_,l[3]=tb,l[4]=tx,l[5]=tw,l[6]=tM,l[7]=tS,l[8]=tk,l[9]=tE,l[10]=tI,l[11]=tP,l[12]=tT,l[13]=tA,l[14]=tC,l[15]=tL,l[16]=tR,l[17]=tN,l[18]=tz,0!==h&&(l[19]=h,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,o=0;o<i.length-1;o++){var a=n;n=0;for(var s=67108863&r,l=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=l;h++){var u=o-h,c=(0|t.words[u])*(0|e.words[h]),f=67108863&c;a=a+(c/67108864|0)|0,s=67108863&(f=f+s|0),n+=(a=a+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,r=a,a=n}return 0!==r?i.words[o]=r:i.length--,i.strip()}function g(t,e,i){return new y().mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(p=d),n.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):i<63?d(this,t,e):i<1024?m(this,t,e):g(this,t,e)},y.prototype.makeRBT=function(t){for(var e=Array(t),i=n.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},y.prototype.permute=function(t,e,i,r,n,o){for(var a=0;a<o;a++)r[a]=e[t[a]],n[a]=i[t[a]]},y.prototype.transform=function(t,e,i,r,n,o){this.permute(o,t,e,i,r,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),u=0;u<n;u+=s)for(var c=l,f=h,d=0;d<a;d++){var p=i[u+d],m=r[u+d],g=i[u+d+a],y=r[u+d+a],v=c*g-f*y;y=c*y+f*g,g=v,i[u+d]=p+g,r[u+d]=m+y,i[u+d+a]=p-g,r[u+d+a]=m-y,d!==s&&(v=l*c-h*f,f=l*f+h*c,c=v)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},y.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i((-8192&o)==0)},y.prototype.stub=function(t){for(var e=Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),o=this.stub(r),a=Array(r),s=Array(r),l=Array(r),h=Array(r),u=Array(r),c=Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,h,r),this.transform(a,o,s,l,r,n),this.transform(h,o,u,c,r,n);for(var d=0;d<r;d++){var p=s[d]*u[d]-l[d]*c[d];l[d]=s[d]*c[d]+l[d]*u[d],s[d]=p}return this.conjugate(s,l,r),this.transform(s,l,f,o,r,n),this.conjugate(f,o,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},n.prototype.mul=function(t){var e=new n(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},n.prototype.mulf=function(t){var e=new n(null);return e.words=Array(this.length+t.length),g(this,t,e)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var e=f(t);if(0===e.length)return new n(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var o=i.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(i=i.mul(o));return i},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,e,r){i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var n,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(n-=a,n=Math.max(0,n),l){for(var h=0;h<a;h++)l.words[h]=this.words[h];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var u=0;for(h=this.length-1;h>=0&&(0!==u||h>=n);h--){var c=0|this.words[h];this.words[h]=u<<26-o|c>>>o,u=c&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return(i("number"==typeof t),i(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var l=(0|t.words[n])*e;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(t,e){var i,r=this.length-t.length,o=this.clone(),a=t,s=0|a.words[a.length-1];0!=(r=26-this._countBits(s))&&(a=a.ushln(r),o.iushln(r),s=0|a.words[a.length-1]);var l=o.length-a.length;if("mod"!==e){(i=new n(null)).length=l+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=o.clone()._ishlnsubmul(a,1,l);0===u.negative&&(o=u,i&&(i.words[l]=1));for(var c=l-1;c>=0;c--){var f=(0|o.words[a.length+c])*67108864+(0|o.words[a.length+c-1]);for(f=Math.min(f/s|0,67108863),o._ishlnsubmul(a,f,c);0!==o.negative;)f--,o.negative=0,o._ishlnsubmul(a,1,c),o.isZero()||(o.negative^=1);i&&(i.words[c]=f)}return i&&i.strip(),o.strip(),"div"!==e&&0!==r&&o.iushrn(r),{div:i||null,mod:o}},n.prototype.divmod=function(t,e,r){var o,a,s;return(i(!t.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new n(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new n(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}:this._wordDiv(t,e)},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),o=i.cmp(r);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},n.prototype.modn=function(t){i(t<=67108863);for(var e=67108864%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},n.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new n(1),a=new n(0),s=new n(0),l=new n(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var u=r.clone(),c=e.clone();!e.isZero();){for(var f=0,d=1;(e.words[0]&d)==0&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(u),a.isub(c)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(c)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(s),a.isub(l)):(r.isub(e),s.isub(o),l.isub(a))}return{a:s,b:l,gcd:r.iushln(h)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,r=this,o=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new n(1),s=new n(0),l=o.clone();r.cmpn(1)>0&&o.cmpn(1)>0;){for(var h=0,u=1;(r.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var c=0,f=1;(o.words[0]&f)==0&&c<26;++c,f<<=1);if(c>0)for(o.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(o)>=0?(r.isub(o),a.isub(s)):(o.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var o=e;e=i,i=o}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return -1===this.cmpn(t)},n.prototype.lt=function(t){return -1===this.cmp(t)},n.prototype.lten=function(t){return 0>=this.cmpn(t)},n.prototype.lte=function(t){return 0>=this.cmp(t)},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new S(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new n(null);return t.words=Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,i=t;do this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(e>this.n)var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},r(b,_),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var o=t.words[9];for(n=10,e.words[e.length++]=o&i;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[n-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,_),r(w,_),r(M,_),M.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=(0|t.words[i])*19+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},n._prime=function(t){var e;if(v[t])return v[t];if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new w;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return v[t]=e,e},S.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){i((t.negative|e.negative)==0,"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return 0>i.cmpn(0)&&i.iadd(this.m),i},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new n(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);i(!o.isZero());var s=new n(1).toRed(this),l=s.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(l);)u.redIAdd(l);for(var c=this.pow(u,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<p);var y=this.pow(c,new n(1).iushln(p-g-1));f=f.redMul(y),c=y.redSqr(),d=d.redMul(c),p=g}return f},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new n(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=4,r=Array(16);r[0]=new n(1).toRed(this),r[1]=t;for(var o=2;o<r.length;o++)r[o]=this.mul(r[o-1],t);var a=r[0],s=0,l=0,h=e.bitLength()%26;for(0===h&&(h=26),o=e.length-1;o>=0;o--){for(var u=e.words[o],c=h-1;c>=0;c--){var f=u>>c&1;if(a!==r[0]&&(a=this.sqr(a)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===i||0===o&&0===c)&&(a=this.mul(a,r[s]),l=0,s=0)}h=26}return a},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},n.mont=function(t){return new k(t)},r(k,S),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new n(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}),parcelRegister("8xNpR",function(t,e){var i=parcelRequire("byBjB"),r=parcelRequire("8GZk1").Buffer;function n(t,e){return r.from(t.toRed(i.mont(e.modulus)).redPow(new i(e.publicExponent)).fromRed().toArray())}t.exports=n}),parcelRegister("4SWJf",function(t,e){var i=parcelRequire("fLiic").Buffer,r=parcelRequire("eiOan"),n=parcelRequire("1IbV4");function o(t){var e=a(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}function a(t){var e,i=t.modulus.byteLength();do e=new r(n(i));while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2))return e}function s(t,e){var n=o(e),a=e.modulus.byteLength(),s=new r(t).mul(n.blinder).umod(e.modulus),l=s.toRed(r.mont(e.prime1)),h=s.toRed(r.mont(e.prime2)),u=e.coefficient,c=e.prime1,f=e.prime2,d=l.redPow(e.exponent1).fromRed(),p=h.redPow(e.exponent2).fromRed(),m=d.isub(p).imul(u).umod(c).imul(f);return p.iadd(m).imul(n.unblinder).umod(e.modulus).toArrayLike(i,"be",a)}s.getr=a,t.exports=s}),parcelRegister("7pS8b",function(t,e){var i=parcelRequire("frmAS"),r=parcelRequire("cbkyC"),n=parcelRequire("1M4eB"),o=parcelRequire("byBjB"),a=parcelRequire("4SWJf"),s=parcelRequire("cYT9k"),l=parcelRequire("8xNpR"),h=parcelRequire("8GZk1").Buffer;function u(t,e){var i=t.modulus.byteLength(),o=s("sha1").update(h.alloc(0)).digest(),a=o.length;if(0!==e[0])throw Error("decryption error");var l=e.slice(1,a+1),u=e.slice(a+1),c=n(l,r(u,a)),d=n(u,r(c,i-a-1));if(f(o,d.slice(0,a)))throw Error("decryption error");for(var p=a;0===d[p];)p++;if(1!==d[p++])throw Error("decryption error");return d.slice(p)}function c(t,e,i){for(var r=e.slice(0,2),n=2,o=0;0!==e[n++];)if(n>=e.length){o++;break}var a=e.slice(2,n-1);if(("0002"!==r.toString("hex")&&!i||"0001"!==r.toString("hex")&&i)&&o++,a.length<8&&o++,o)throw Error("decryption error");return e.slice(n)}function f(t,e){t=h.from(t),e=h.from(e);var i=0,r=t.length;t.length!==e.length&&(i++,r=Math.min(t.length,e.length));for(var n=-1;++n<r;)i+=t[n]^e[n];return i}t.exports=function(t,e,r){n=t.padding?t.padding:r?1:4;var n,s,f=i(t),d=f.modulus.byteLength();if(e.length>d||new o(e).cmp(f.modulus)>=0)throw Error("decryption error");s=r?l(new o(e),f):a(e,f);var p=h.alloc(d-s.length);if(s=h.concat([p,s],d),4===n)return u(f,s);if(1===n)return c(f,s,r);if(3===n)return s;throw Error("unknown padding")}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);let $a0f3d463663c82ef$export$75525525b38ea7b3=function(t,e){window.Notification.requestPermission().then(i=>{var r=new window.Notification(t,{body:e});r.onerror=function(t){console.log(t)},r.onclick=function(t){if(window.navigator.mozApps){var e=window.navigator.mozApps.getSelf();e.onsuccess=function(){e.result&&(r.close(),e.result.launch())}}else window.open(document.location.origin,"_blank")},r.onshow=function(){}})};navigator.mozSetMessageHandler&&navigator.mozSetMessageHandler("alarm",function(t){$a0f3d463663c82ef$export$75525525b38ea7b3("Greg",t.data.note)});let $a0f3d463663c82ef$var$queue=[],$a0f3d463663c82ef$var$toast_q=function(t,e){var i=document.querySelector("div#toast");i.innerHTML=$a0f3d463663c82ef$var$queue[0].text,i.style.transform="translate(0px, 0px)",$a0f3d463663c82ef$var$timeout=setTimeout(function(){i.style.transform="translate(0px, -100px)",($a0f3d463663c82ef$var$queue=$a0f3d463663c82ef$var$queue.slice(1)).length>0&&setTimeout(()=>{$a0f3d463663c82ef$var$toast_q(t,e)},1e3)},e)},$a0f3d463663c82ef$var$queue_st=[],$a0f3d463663c82ef$export$6593825dc0f3a767=function(t,e){$a0f3d463663c82ef$var$queue_st.push({text:t,time:e}),1===$a0f3d463663c82ef$var$queue_st.length&&$a0f3d463663c82ef$var$toast_qq(t,e)},$a0f3d463663c82ef$var$toast_qq=function(t,e){var i=document.querySelector("div#side-toast");i.style.opacity="100",i.innerHTML=$a0f3d463663c82ef$var$queue_st[0].text,i.style.transform="translate(0vh, 0vw)",$a0f3d463663c82ef$var$timeout=setTimeout(function(){i.style.transform="translate(-100vw,0px)",($a0f3d463663c82ef$var$queue_st=$a0f3d463663c82ef$var$queue.slice(1)).length>0&&setTimeout(()=>{$a0f3d463663c82ef$var$toast_qq(t,e)},1e3)},e)};var $aEpXh=parcelRequire("aEpXh"),$80d6699e473cee9b$exports={},$a8e8959280fdd5f2$exports={},$9p8hn=parcelRequire("9p8hn");$9p8hn.trust=parcelRequire("dKjnr"),$9p8hn.fragment=parcelRequire("7vpAc"),$a8e8959280fdd5f2$exports=$9p8hn;var $b503da85d80068c1$exports={},$g34Xq=parcelRequire("g34Xq"),$rrN0s=parcelRequire("rrN0s");$b503da85d80068c1$exports=parcelRequire("fRWCN")("undefined"!=typeof window?window:null,$g34Xq,$rrN0s.redraw);var $rrN0s=parcelRequire("rrN0s"),$80d6699e473cee9b$var$m=function(){return $a8e8959280fdd5f2$exports.apply(this,arguments)};$80d6699e473cee9b$var$m.m=$a8e8959280fdd5f2$exports,$80d6699e473cee9b$var$m.trust=$a8e8959280fdd5f2$exports.trust,$80d6699e473cee9b$var$m.fragment=$a8e8959280fdd5f2$exports.fragment,$80d6699e473cee9b$var$m.Fragment="[",$80d6699e473cee9b$var$m.mount=$rrN0s.mount,$80d6699e473cee9b$var$m.route=parcelRequire("jg5Ru"),$80d6699e473cee9b$var$m.render=parcelRequire("gUS83"),$80d6699e473cee9b$var$m.redraw=$rrN0s.redraw,$80d6699e473cee9b$var$m.request=$b503da85d80068c1$exports.request,$80d6699e473cee9b$var$m.jsonp=$b503da85d80068c1$exports.jsonp,$80d6699e473cee9b$var$m.parseQueryString=parcelRequire("6XcN1"),$80d6699e473cee9b$var$m.buildQueryString=parcelRequire("dX0qb"),$80d6699e473cee9b$var$m.parsePathname=parcelRequire("94aos"),$80d6699e473cee9b$var$m.buildPathname=parcelRequire("l6H08"),$80d6699e473cee9b$var$m.vnode=parcelRequire("lH4m8"),$80d6699e473cee9b$var$m.PromisePolyfill=parcelRequire("93ebR"),$80d6699e473cee9b$var$m.censor=parcelRequire("5o6pE"),$80d6699e473cee9b$exports=$80d6699e473cee9b$var$m;const $6c53186a65562402$var$randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var $6c53186a65562402$export$2e2bcd8739ae039={randomUUID:$6c53186a65562402$var$randomUUID};const $d75865a97356644a$var$rnds8=new Uint8Array(16);function $d75865a97356644a$export$2e2bcd8739ae039(){if(!$d75865a97356644a$var$getRandomValues&&!($d75865a97356644a$var$getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $d75865a97356644a$var$getRandomValues($d75865a97356644a$var$rnds8)}const $5af5d2e1844d0b9e$var$byteToHex=[];for(let i=0;i<256;++i)$5af5d2e1844d0b9e$var$byteToHex.push((i+256).toString(16).slice(1));function $5af5d2e1844d0b9e$export$8fb373d660548968(t,e=0){return $5af5d2e1844d0b9e$var$byteToHex[t[e+0]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+1]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+2]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+3]]+"-"+$5af5d2e1844d0b9e$var$byteToHex[t[e+4]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+5]]+"-"+$5af5d2e1844d0b9e$var$byteToHex[t[e+6]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+7]]+"-"+$5af5d2e1844d0b9e$var$byteToHex[t[e+8]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+9]]+"-"+$5af5d2e1844d0b9e$var$byteToHex[t[e+10]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+11]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+12]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+13]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+14]]+$5af5d2e1844d0b9e$var$byteToHex[t[e+15]]}function $f46ca6cda8227c99$var$v4(t,e,i){if($6c53186a65562402$export$2e2bcd8739ae039.randomUUID&&!e&&!t)return $6c53186a65562402$export$2e2bcd8739ae039.randomUUID();let r=(t=t||{}).random||(t.rng||$d75865a97356644a$export$2e2bcd8739ae039)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=r[t];return e}return $5af5d2e1844d0b9e$export$8fb373d660548968(r)}var $f46ca6cda8227c99$export$2e2bcd8739ae039=$f46ca6cda8227c99$var$v4,$aEpXh=parcelRequire("aEpXh"),$79909368fa137f54$var$featureTile=Object.freeze(function(t,e){let i={},r=e.getTileSize(),n=(0,$aEpXh.SVG).create("svg"),o=(0,$aEpXh.SVG).create("g"),a=[];function s(i,r,n){let s=e.getFeatureStyle(i,r,t.z);if(!s)return;let l=e.featureToLayer(i,r,n,s);o.appendChild(l.graphics),a.push(l),e.addFeatureLayer(l)}return n.setAttribute("viewBox",`0 0 ${r.x} ${r.y}`),n.appendChild(o),i.addVectorTile=function(n){return e.getOrderedLayers(Object.keys(n.layers),t.z).forEach(function(t){if(!n.layers[t])return;let e=n.layers[t],i=r.divideBy(e.extent),o=0;for(;o!==e.length;)s(e.feature(o),t,i),o+=1}),i},i.global=e=>t.scaleBy(r).add(e),i.eachFeatureLayer=t=>a.forEach((...e)=>t(...e,i)),i.domElement=()=>n,i.coords=()=>t,i});function $79909368fa137f54$var$getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $79909368fa137f54$var$pointGeometry=$79909368fa137f54$var$Point$1;function $79909368fa137f54$var$Point$1(t,e){this.x=t,this.y=e}$79909368fa137f54$var$Point$1.prototype={clone:function(){return new $79909368fa137f54$var$Point$1(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,n=i*this.x+e*this.y;return this.x=r,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.x+i*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=n,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$79909368fa137f54$var$Point$1.convert=function(t){return t instanceof $79909368fa137f54$var$Point$1?t:Array.isArray(t)?new $79909368fa137f54$var$Point$1(t[0],t[1]):t};var $79909368fa137f54$var$Point=$79909368fa137f54$var$pointGeometry,$79909368fa137f54$var$vectortilefeature=$79909368fa137f54$var$VectorTileFeature$2;function $79909368fa137f54$var$VectorTileFeature$2(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields($79909368fa137f54$var$readFeature,this,e)}function $79909368fa137f54$var$readFeature(t,e,i){1==t?e.id=i.readVarint():2==t?$79909368fa137f54$var$readTag(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function $79909368fa137f54$var$readTag(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}function $79909368fa137f54$var$classifyRings(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=$79909368fa137f54$var$signedArea(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}function $79909368fa137f54$var$signedArea(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],r+=((i=t[a]).x-e.x)*(e.y+i.y);return r}$79909368fa137f54$var$VectorTileFeature$2.types=["Unknown","Point","LineString","Polygon"],$79909368fa137f54$var$VectorTileFeature$2.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=[];t.pos<i;){if(n<=0){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new $79909368fa137f54$var$Point(o,a));else if(7===r)e&&e.push(e[0].clone());else throw Error("unknown command "+r)}return e&&s.push(e),s},$79909368fa137f54$var$VectorTileFeature$2.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,h=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)n+=t.readSVarint(),o+=t.readSVarint(),n<a&&(a=n),n>s&&(s=n),o<l&&(l=o),o>h&&(h=o);else if(7!==i)throw Error("unknown command "+i)}return[a,l,s,h]},$79909368fa137f54$var$VectorTileFeature$2.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),h=$79909368fa137f54$var$VectorTileFeature$2.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e],r=180-(i.y+s)*360/o;t[e]=[(i.x+a)*360/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(r=0;r<l.length;r++)c[r]=l[r][0];u(l=c);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(r=0,l=$79909368fa137f54$var$classifyRings(l);r<l.length;r++)for(n=0;n<l[r].length;n++)u(l[r][n])}1===l.length?l=l[0]:h="Multi"+h;var f={type:"Feature",geometry:{type:h,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var $79909368fa137f54$var$VectorTileFeature$1=$79909368fa137f54$var$vectortilefeature,$79909368fa137f54$var$vectortilelayer=$79909368fa137f54$var$VectorTileLayer$2;function $79909368fa137f54$var$VectorTileLayer$2(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields($79909368fa137f54$var$readLayer,this,e),this.length=this._features.length}function $79909368fa137f54$var$readLayer(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push($79909368fa137f54$var$readValueMessage(i))}function $79909368fa137f54$var$readValueMessage(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}$79909368fa137f54$var$VectorTileLayer$2.prototype.feature=function(t){if(t<0||t>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new $79909368fa137f54$var$VectorTileFeature$1(this._pbf,e,this.extent,this._keys,this._values)};var $79909368fa137f54$var$VectorTileLayer$1=$79909368fa137f54$var$vectortilelayer,$79909368fa137f54$var$vectortile=$79909368fa137f54$var$VectorTile$1;function $79909368fa137f54$var$VectorTile$1(t,e){this.layers=t.readFields($79909368fa137f54$var$readTile,{},e)}function $79909368fa137f54$var$readTile(t,e,i){if(3===t){var r=new $79909368fa137f54$var$VectorTileLayer$1(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}var $79909368fa137f54$var$VectorTile=$79909368fa137f54$var$vectortile,$79909368fa137f54$var$VectorTileFeature=$79909368fa137f54$var$vectortilefeature;function $79909368fa137f54$export$61dd4bf3c05b0794(t,e,i,r){let n=new $aEpXh.Layer(r);return n.feature=t,n.layerName=e,n.properties=t.properties,n.addTo=function(t){n._map=t,n.addInteractiveTarget(n.graphics)},n.removeFrom=function(){n.removeInteractiveTarget(n.graphics),delete n._map},n.scalePoint=function(t){return(0,$aEpXh.point)(t).scaleBy(i)},n.bbox=function(){let[e,i,r,o]=t.bbox();return(0,$aEpXh.bounds)(n.scalePoint([e,i]),n.scalePoint([r,o]))},n.applyOptions=function(t){t.className&&(0,$aEpXh.DomUtil).addClass(n.graphics,t.className),n.setStyle({})},n}function $79909368fa137f54$export$d607bf340be7e831(t,e){e.interactive?(t.setAttribute("pointer-events","auto"),(0,$aEpXh.DomUtil).addClass(t,"leaflet-interactive")):((0,$aEpXh.DomUtil).removeClass(t,"leaflet-interactive"),t.removeAttribute("pointer-events")),e.hidden?t.setAttribute("visibility","hidden"):t.removeAttribute("visibility")}function $79909368fa137f54$export$7dd0b298998c96ba(t,e){return e.stroke?(t.setAttribute("stroke",e.color),t.setAttribute("stroke-opacity",e.opacity),t.setAttribute("stroke-width",e.weight),t.setAttribute("stroke-linecap",e.lineCap),t.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?t.setAttribute("stroke-dasharray",e.dashArray):t.removeAttribute("stroke-dasharray"),e.dashOffset?t.setAttribute("stroke-dashoffset",e.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),e.fill?(t.setAttribute("fill",e.fillColor||e.color),t.setAttribute("fill-opacity",e.fillOpacity),t.setAttribute("fill-rule",e.fillRule||"evenodd")):t.setAttribute("fill","none"),t}function $79909368fa137f54$export$ca1068ea28acc4cc(t,e){e.icon&&(t.setAttribute("width",e.icon.options.iconSize[0]),t.setAttribute("height",e.icon.options.iconSize[1]),t.setAttribute("href",e.icon.options.iconUrl))}function $79909368fa137f54$export$8f7ceaacd6a3a0da(t,e,i,r){let n=$79909368fa137f54$export$61dd4bf3c05b0794(t,e,i,r=(0,$aEpXh.extend)({},$aEpXh.CircleMarker.prototype.options,r)),o=n.scalePoint(t.loadGeometry()[0][0]);return n.graphics=(0,$aEpXh.SVG).create("circle"),n.graphics.setAttribute("cx",o.x),n.graphics.setAttribute("cy",o.y),n.setStyle=function(t){t=(0,$aEpXh.extend)({},r,t),$79909368fa137f54$export$d607bf340be7e831(n.graphics,t),$79909368fa137f54$export$7dd0b298998c96ba(n.graphics,t),n.graphics.setAttribute("r",t.radius)},n.applyOptions(r),n}function $79909368fa137f54$export$406267581ba992b(t,e,i,r){let n=$79909368fa137f54$var$VectorTileFeature.types[t.type],o=$79909368fa137f54$export$61dd4bf3c05b0794(t,e,i,r=(0,$aEpXh.extend)({},"Polygon"===n?$aEpXh.Polygon.prototype.options:$aEpXh.Path.prototype.options,r)),a=t.loadGeometry();return o.graphics=(0,$aEpXh.SVG).create("path"),o.graphics.setAttribute("d",(0,$aEpXh.SVG).pointsToPath(a.map(t=>t.map(o.scalePoint)),"Polygon"===n)),o.setStyle=function(t){t=(0,$aEpXh.extend)({},r,t),$79909368fa137f54$export$d607bf340be7e831(o.graphics,t),$79909368fa137f54$export$7dd0b298998c96ba(o.graphics,t)},o.applyOptions(r),o}function $79909368fa137f54$export$b9a0a224aedb88f8(t,e,i,r){let n=$79909368fa137f54$export$61dd4bf3c05b0794(t,e,i,r);n.setStyle=function(t){t=(0,$aEpXh.extend)({},r,t),$79909368fa137f54$export$d607bf340be7e831(n.graphics,t),$79909368fa137f54$export$ca1068ea28acc4cc(n.graphics,t)},n.graphics=(0,$aEpXh.SVG).create("image");let o=n.scalePoint(t.loadGeometry()[0][0]),a=r.icon.options.iconAnchor||[0,0];return n.graphics.setAttribute("x",o.x-a[0]),n.graphics.setAttribute("y",o.y-a[1]),n.applyOptions(r),n}function $79909368fa137f54$export$6cfc6b89afbaf4b5(t,e,i,r){switch($79909368fa137f54$var$VectorTileFeature.types[t.type]){case"Point":if(r.icon)return $79909368fa137f54$export$b9a0a224aedb88f8(t,e,i,r);return $79909368fa137f54$export$8f7ceaacd6a3a0da(t,e,i,r);case"Polygon":case"LineString":return $79909368fa137f54$export$406267581ba992b(t,e,i,r);default:throw Error("Unknown feature type")}}var $79909368fa137f54$var$ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$79909368fa137f54$var$ieee754$1.read=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,h=l>>1,u=-7,c=i?n-1:0,f=i?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+c],c+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+c],c+=f,u-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=h}return(d?-1:1)*a*Math.pow(2,o-r)},$79909368fa137f54$var$ieee754$1.write=function(t,e,i,r,n,o){var a,s,l,h=8*o-n-1,u=(1<<h)-1,c=u>>1,f=23===n?5960464477539062e-23:0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?e+=f/l:e+=f*Math.pow(2,1-c),e*l>=2&&(a++,l/=2),a+c>=u?(s=0,a=u):a+c>=1?(s=(e*l-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;t[i+d]=255&s,d+=p,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;t[i+d]=255&a,d+=p,a/=256,h-=8);t[i+d-p]|=128*m};var $79909368fa137f54$var$pbf=$79909368fa137f54$var$Pbf,$79909368fa137f54$var$ieee754=$79909368fa137f54$var$ieee754$1;function $79909368fa137f54$var$Pbf(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}$79909368fa137f54$var$Pbf.Varint=0,$79909368fa137f54$var$Pbf.Fixed64=1,$79909368fa137f54$var$Pbf.Bytes=2,$79909368fa137f54$var$Pbf.Fixed32=5;var $79909368fa137f54$var$SHIFT_LEFT_32=4294967296,$79909368fa137f54$var$SHIFT_RIGHT_32=1/$79909368fa137f54$var$SHIFT_LEFT_32,$79909368fa137f54$var$TEXT_DECODER_MIN_LENGTH=12,$79909368fa137f54$var$utf8TextDecoder="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $79909368fa137f54$var$readVarintRemainder(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128||(r|=(127&(n=o[i.pos++]))<<3,n<128)||(r|=(127&(n=o[i.pos++]))<<10,n<128)||(r|=(127&(n=o[i.pos++]))<<17,n<128)||(r|=(127&(n=o[i.pos++]))<<24,n<128)||(r|=(1&(n=o[i.pos++]))<<31,n<128))return $79909368fa137f54$var$toNum(t,r,e);throw Error("Expected varint not more than 10 bytes")}function $79909368fa137f54$var$readPackedEnd(t){return t.type===$79909368fa137f54$var$Pbf.Bytes?t.readVarint()+t.pos:t.pos+1}function $79909368fa137f54$var$toNum(t,e,i){return i?4294967296*e+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function $79909368fa137f54$var$writeBigVarint(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(i=~(-t%4294967296),r=~(-t/4294967296),4294967295^i?i=i+1|0:(i=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");e.realloc(10),$79909368fa137f54$var$writeBigVarintLow(i,r,e),$79909368fa137f54$var$writeBigVarintHigh(r,e)}function $79909368fa137f54$var$writeBigVarintLow(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}function $79909368fa137f54$var$writeBigVarintHigh(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t)&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t)&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))}function $79909368fa137f54$var$makeRoomForExtraLength(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function $79909368fa137f54$var$writePackedVarint(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function $79909368fa137f54$var$writePackedSVarint(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function $79909368fa137f54$var$writePackedFloat(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function $79909368fa137f54$var$writePackedDouble(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function $79909368fa137f54$var$writePackedBoolean(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function $79909368fa137f54$var$writePackedFixed32(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function $79909368fa137f54$var$writePackedSFixed32(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function $79909368fa137f54$var$writePackedFixed64(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function $79909368fa137f54$var$writePackedSFixed64(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function $79909368fa137f54$var$readUInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function $79909368fa137f54$var$writeInt32(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function $79909368fa137f54$var$readInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function $79909368fa137f54$var$readUtf8(t,e,i){for(var r="",n=e;n<i;){var o,a,s,l=t[n],h=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(h=l):2===u?(192&(o=t[n+1]))==128&&(h=(31&l)<<6|63&o)<=127&&(h=null):3===u?(o=t[n+1],a=t[n+2],(192&o)==128&&(192&a)==128&&((h=(15&l)<<12|(63&o)<<6|63&a)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(o=t[n+1],a=t[n+2],s=t[n+3],(192&o)==128&&(192&a)==128&&(192&s)==128&&((h=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),n+=u}return r}function $79909368fa137f54$var$readUtf8TextDecoder(t,e,i){return $79909368fa137f54$var$utf8TextDecoder.decode(t.subarray(e,i))}function $79909368fa137f54$var$writeUtf8(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(n){if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else{r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}$79909368fa137f54$var$Pbf.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=$79909368fa137f54$var$readUInt32(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=$79909368fa137f54$var$readInt32(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=$79909368fa137f54$var$readUInt32(this.buf,this.pos)+$79909368fa137f54$var$readUInt32(this.buf,this.pos+4)*$79909368fa137f54$var$SHIFT_LEFT_32;return this.pos+=8,t},readSFixed64:function(){var t=$79909368fa137f54$var$readUInt32(this.buf,this.pos)+$79909368fa137f54$var$readInt32(this.buf,this.pos+4)*$79909368fa137f54$var$SHIFT_LEFT_32;return this.pos+=8,t},readFloat:function(){var t=$79909368fa137f54$var$ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=$79909368fa137f54$var$ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return(e=127&(i=r[this.pos++]),i<128)?e:(e|=(127&(i=r[this.pos++]))<<7,i<128)?e:(e|=(127&(i=r[this.pos++]))<<14,i<128)?e:(e|=(127&(i=r[this.pos++]))<<21,i<128)?e:$79909368fa137f54$var$readVarintRemainder(e|=(15&(i=r[this.pos]))<<28,t,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?-((t+1)/2):t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return(this.pos=t,t-e>=$79909368fa137f54$var$TEXT_DECODER_MIN_LENGTH&&$79909368fa137f54$var$utf8TextDecoder)?$79909368fa137f54$var$readUtf8TextDecoder(this.buf,e,t):$79909368fa137f54$var$readUtf8(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readVarint(e));var i=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readSVarint());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readBoolean());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readFloat());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readDouble());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readFixed32());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readSFixed32());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readFixed64());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==$79909368fa137f54$var$Pbf.Bytes)return t.push(this.readSFixed64());var e=$79909368fa137f54$var$readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===$79909368fa137f54$var$Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===$79909368fa137f54$var$Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===$79909368fa137f54$var$Pbf.Fixed32)this.pos+=4;else if(e===$79909368fa137f54$var$Pbf.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),$79909368fa137f54$var$writeInt32(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),$79909368fa137f54$var$writeInt32(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),$79909368fa137f54$var$writeInt32(this.buf,-1&t,this.pos),$79909368fa137f54$var$writeInt32(this.buf,Math.floor(t*$79909368fa137f54$var$SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),$79909368fa137f54$var$writeInt32(this.buf,-1&t,this.pos),$79909368fa137f54$var$writeInt32(this.buf,Math.floor(t*$79909368fa137f54$var$SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t||0)>268435455||t<0){$79909368fa137f54$var$writeBigVarint(t,this);return}this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-(2*t)-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=$79909368fa137f54$var$writeUtf8(this.buf,t,this.pos);var i=this.pos-e;i>=128&&$79909368fa137f54$var$makeRoomForExtraLength(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),$79909368fa137f54$var$ieee754.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),$79909368fa137f54$var$ieee754.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&$79909368fa137f54$var$makeRoomForExtraLength(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,$79909368fa137f54$var$Pbf.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedVarint,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedSVarint,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedBoolean,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedFloat,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedDouble,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedFixed32,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedSFixed32,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedFixed64,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,$79909368fa137f54$var$writePackedSFixed64,e)},writeBytesField:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,$79909368fa137f54$var$Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};var $79909368fa137f54$var$Pbf$1=$79909368fa137f54$var$getDefaultExportFromCjs($79909368fa137f54$var$pbf);function $79909368fa137f54$var$err(...t){return Error(t.join(": "))}function $79909368fa137f54$var$load(t,e){return fetch(t,e).then(function(e){if(e.ok)return e.arrayBuffer();if(404!==e.status)throw $79909368fa137f54$var$err(t,e.status,e.statusText)})}function $79909368fa137f54$var$tileId(t){return`${t.x}|${t.y}|${t.z}`}const $79909368fa137f54$var$defaultOptions={featureToLayer:$79909368fa137f54$export$6cfc6b89afbaf4b5,filter:void 0,layerOrder:void 0,layers:void 0,minZoom:0,maxZoom:18,maxDetailZoom:void 0,minDetailZoom:void 0,subdomains:"abc",zoomOffset:0,zoomReverse:!1};var $79909368fa137f54$export$2e2bcd8739ae039=Object.freeze(function(t,e){let i;let r=new $aEpXh.GridLayer(e),n=Object.getPrototypeOf(r),o={};function a(t,i,r){let{getFeatureId:n,vectorTileLayerStyles:a}=e,s=a[i];if(n){let e=n(t);o[e]&&(s=o[e])}if("function"==typeof s&&(s=s(t.properties,r,t.type)),Array.isArray(s)){if(!s.length)return;s=s[0]}return s}"string"==typeof(e=(0,$aEpXh.Util).extend({},$79909368fa137f54$var$defaultOptions,e)).subdomains&&(e.subdomains=e.subdomains.split("")),e.vectorTileLayerStyles&&!e.style&&(e.style=a);let s={};function l(t){let i=Math.abs(t.x+t.y)%e.subdomains.length;return e.subdomains[i]}function h(t){let{minDetailZoom:i,maxDetailZoom:r}=e;return void 0!==i&&t<i?i:void 0!==r&&r<t?r:t}function u(t){let{maxZoom:i,zoomReverse:r,zoomOffset:n}=e;return r&&(t=i-t),h(t+n)}function c(t){Object.keys(s).forEach(e=>s[e].eachFeatureLayer(t))}return r.on("tileunload",function(t){let e=$79909368fa137f54$var$tileId(t.coords),i=s[e];i&&(i.eachFeatureLayer(r.removeFeatureLayer),delete s[e])}),r.onAdd=function(t,...e){return i=t,n.onAdd.call(r,t,...e)},r.onRemove=function(...t){return i=void 0,n.onRemove.call(r,...t)},r.createTile=function(t,i){let n=$79909368fa137f54$var$tileId(t),o=$79909368fa137f54$var$featureTile(t,r);return s[n]=o,$79909368fa137f54$var$load(r.getTileUrl(t),e.fetchOptions).then(function(t){o.addVectorTile(new $79909368fa137f54$var$VectorTile(new $79909368fa137f54$var$Pbf$1(t))),i(null,o)},function(t){i(t,o)}),o.domElement()},r.getTileUrl=function(n){let o={s:l(n),x:n.x,y:n.y,z:u(n.z)};return i.options.crs.infinite||(o["-y"]=r._globalTileRange.max.y-n.y),(0,$aEpXh.Util).template(t,(0,$aEpXh.Util).extend(o,e))},r.setStyle=function(t){return e.style=t,c(function(t,e,i,n){let{feature:o,layerName:a}=t,s=r.getFeatureStyle(o,a,n.coords().z);t.setStyle(s)}),r},r.setFeatureStyle=function(t,i){return o[t]=i,r.setStyle(e.style),r},r.resetFeatureStyle=function(t){return delete o[t],r.setStyle(e.style),r},r.getTileSize=function(){let t=n.getTileSize.call(r),e=r._tileZoom;return void 0===e?t:t.divideBy(i.getZoomScale(h(e),e)).round()},r.getFeatureStyle=function(t,i,r){if(e.filter&&!e.filter(t,i,r))return;let n=e.style;return"function"==typeof n?n(t,i,r):n},r.getOrderedLayers=function(t,i){t=e.layers||t;let r=e.layerOrder;return void 0!==r?r(t,i):t},r.featureToLayer=e.featureToLayer,r.addFeatureLayer=function(t){return t.addTo(i),t.addEventParent(r),r},r.removeFeatureLayer=function(t){return t.removeEventParent(r),t.removeFrom(i),r},r.getBounds=function(){let t;return c(function(e,r,n,o){let a=t=>i.unproject(o.global(t),o.coords().z),s=e.bbox(),l=(0,$aEpXh.latLngBounds)(a(s.min),a(s.max));t?t.extend(l):t=l}),t},r}),$a7bc263d08a7e211$exports={};!function(t,e){"function"==typeof define&&define.amd?define(["leaflet","maplibre-gl"],e):$a7bc263d08a7e211$exports=e(parcelRequire("aEpXh"),parcelRequire("1tTyT"))}("undefined"!=typeof globalThis?globalThis:$a7bc263d08a7e211$exports||self,function(t,e){t.MaplibreGL=t.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(e){t.setOptions(this,e),this._throttledUpdate=t.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(e){this._container||this._initContainer();var i=this.getPaneName();e.getPane(i).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&t.DomEvent.on(e._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(e){this._map._proxy&&this._map.options.zoomAnimation&&t.DomEvent.off(this._map._proxy,t.DomUtil.TRANSITION_END,this._transitionEnd,this);var i=this.getPaneName();e.getPane(i).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getBounds:function(){var e=this.getSize().multiplyBy(.5),i=this._map.latLngToContainerPoint(this._map.getCenter());return t.latLngBounds(this._map.containerPointToLatLng(i.subtract(e)),this._map.containerPointToLatLng(i.add(e)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(t){return{x:Math.round(t.x),y:Math.round(t.y)}},_initContainer:function(){var e=this._container=t.DomUtil.create("div","leaflet-gl-layer"),i=this.getSize(),r=this._map.getSize().multiplyBy(this.options.padding);e.style.width=i.x+"px",e.style.height=i.y+"px";var n=this._map.containerPointToLayerPoint([0,0]).subtract(r);t.DomUtil.setPosition(e,this._roundPoint(n))},_initGL:function(){var i=this._map.getCenter(),r=t.extend({},this.options,{container:this._container,center:[i.lng,i.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new e.Map(r),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var n=this._glMap._actualCanvas;t.DomUtil.addClass(n,"leaflet-image-layer"),t.DomUtil.addClass(n,"leaflet-zoom-animated"),this.options.interactive&&t.DomUtil.addClass(n,"leaflet-interactive"),this.options.className&&t.DomUtil.addClass(n,this.options.className)},_update:function(e){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var i=this.getSize(),r=this._container,n=this._glMap,o=this._map.getSize().multiplyBy(this.options.padding),a=this._map.containerPointToLayerPoint([0,0]).subtract(o);t.DomUtil.setPosition(r,this._roundPoint(a)),this._transformGL(n),n.transform.width!==i.x||n.transform.height!==i.y?(r.style.width=i.x+"px",r.style.height=i.y+"px",null!==n._resize&&void 0!==n._resize?n._resize():n.resize()):null!==n._update&&void 0!==n._update?n._update():n.update()}},_transformGL:function(t){var i=this._map.getCenter(),r=t.transform;r.center=e.LngLat.convert([i.lng,i.lat]),r.zoom=this._map.getZoom()-1},_pinchZoom:function(t){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),r=this._map.getSize().multiplyBy(this.options.padding*i),n=this.getSize()._divideBy(2),o=this._map.project(e.center,e.zoom)._subtract(n)._add(this._map._getMapPanePos().add(r))._round(),a=this._map.project(this._map.getBounds().getNorthWest(),e.zoom)._subtract(o);t.DomUtil.setTransform(this._glMap._actualCanvas,a.subtract(this._offset),i)},_zoomStart:function(t){this._zooming=!0},_zoomEnd:function(){var e=this._map.getZoomScale(this._map.getZoom());t.DomUtil.setTransform(this._glMap._actualCanvas,null,e),this._zooming=!1,this._update()},_transitionEnd:function(e){t.Util.requestAnimFrame(function(){var e=this._map.getZoom(),i=this._map.getCenter(),r=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());t.DomUtil.setTransform(this._glMap._actualCanvas,r,1),this._glMap.once("moveend",t.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:i,zoom:e-1})},this)},_resize:function(t){this._transitionEnd(t)}}),t.maplibreGL=function(e){return new t.MaplibreGL(e)}});var $c997c68b83d6b0f4$exports={},$aKNZT=parcelRequire("aKNZT");!function(t,e){e($c997c68b83d6b0f4$exports)}(0,function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function n(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e,i){return(e=c(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,a,s=[],l=!0,h=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=o.call(i)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,n=t}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(h)throw n}}return s}}(t,e)||l(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function u(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=l(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function c(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var f=6371008.8,d={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:6371008.8/1852,radians:1,yards:6967335.223679999},p={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={type:"Feature"};return(0===i.id||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=e||{},r.geometry=t,r}function g(t,e){switch(t){case"Point":return y(e).geometry;case"LineString":return x(e).geometry;case"Polygon":return _(e).geometry;case"MultiPoint":return k(e).geometry;case"MultiLineString":return S(e).geometry;case"MultiPolygon":return E(e).geometry;default:throw Error(t+" is invalid")}}function y(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(t.length<2)throw Error("coordinates must be at least 2 numbers long");if(!F(t[0])||!F(t[1]))throw Error("coordinates must contain numbers");return m({type:"Point",coordinates:t},e,i)}function v(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(t.map(function(t){return y(t,e)}),i)}function _(t,e){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=u(t);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(o.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw Error("First and last Position are not equivalent.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw Error("First and last Position are not equivalent.")}}catch(t){n.e(t)}finally{n.f()}return m({type:"Polygon",coordinates:t},e,r)}function b(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(t.map(function(t){return _(t,e)}),i)}function x(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length<2)throw Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:t},e,i)}function w(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(t.map(function(t){return x(t,e)}),i)}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function S(t,e){return m({type:"MultiLineString",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function k(t,e){return m({type:"MultiPoint",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function E(t,e){return m({type:"MultiPolygon",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function I(t,e){return m({type:"GeometryCollection",geometries:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&!(e>=0))throw Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",i=d[e];if(!i)throw Error(e+" units is invalid");return t*i}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",i=d[e];if(!i)throw Error(e+" units is invalid");return t/i}function C(t,e){return z(A(t,e))}function R(t){var e=t%360;return e<0&&(e+=360),e}function N(t){return(t%=360)>0?t>180?t-360:t:t<-180?t+360:t}function z(t){return t%(2*Math.PI)*180/Math.PI}function O(t){return t%360*Math.PI/180}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw Error("length must be a positive number");return T(A(t,e),i)}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw Error("area must be a positive number");var r=p[e];if(!r)throw Error("invalid original units");var n=p[i];if(!n)throw Error("invalid final units");return t/r*n}function F(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function j(t){return null!==t&&"object"===e(t)&&!Array.isArray(t)}function q(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!F(t))throw Error("bbox must only contain numbers")})}function V(t){if(!t)throw Error("id is required");if(-1===["string","number"].indexOf(e(t)))throw Error("id must be a number or a string")}var U=Object.freeze({__proto__:null,areaFactors:p,azimuthToBearing:N,bearingToAzimuth:R,convertArea:B,convertLength:D,degreesToRadians:O,earthRadius:6371008.8,factors:d,feature:m,featureCollection:M,geometry:g,geometryCollection:I,isNumber:F,isObject:j,lengthToDegrees:C,lengthToRadians:A,lineString:x,lineStrings:w,multiLineString:S,multiPoint:k,multiPolygon:E,point:y,points:v,polygon:_,polygons:b,radiansToDegrees:z,radiansToLength:T,round:P,validateBBox:q,validateId:V});function Z(t){if(!t)throw Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return s(t.geometry.coordinates);if("Point"===t.type)return s(t.coordinates)}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return s(t);throw Error("coord must be GeoJSON Point or an Array of numbers")}function G(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function H(t){if(t.length>1&&F(t[0])&&F(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return H(t[0]);throw Error("coordinates must only contain numbers")}function W(t,e,i){if(!e||!i)throw Error("type and name required");if(!t||t.type!==e)throw Error("Invalid input to "+i+": must be a "+e+", given "+t.type)}function X(t,e,i){if(!t)throw Error("No feature passed");if(!i)throw Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)}function $(t,e,i){if(!t)throw Error("No featureCollection passed");if(!i)throw Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw Error("Invalid input to "+i+", FeatureCollection required");var r,n=u(t.features);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!o||"Feature"!==o.type||!o.geometry)throw Error("Invalid input to "+i+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw Error("Invalid input to "+i+": must be a "+e+", given "+o.geometry.type)}}catch(t){n.e(t)}finally{n.f()}}function Y(t){return"Feature"===t.type?t.geometry:t}function K(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var J=Object.freeze({__proto__:null,collectionOf:$,containsNumber:H,featureOf:X,geojsonType:W,getCoord:Z,getCoords:G,getGeom:Y,getType:K});function Q(t,e){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final)return function(t,e){return(Q(e,t)+180)%360}(t,e);var i=Z(t),r=Z(e),n=O(i[0]),o=O(r[0]),a=O(i[1]),s=O(r[1]);return z(Math.atan2(Math.sin(o-n)*Math.cos(s),Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(o-n)))}function tt(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=Z(t),o=O(n[0]),a=O(n[1]),s=O(i),l=A(e,r.units),h=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return y([z(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(h))),z(h)],r.properties)}function te(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Z(t),n=Z(e),o=Math.pow(Math.sin(O(n[1]-r[1])/2),2)+Math.pow(Math.sin(O(n[0]-r[0])/2),2)*Math.cos(O(r[1]))*Math.cos(O(n[1]));return T(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),i.units)}function ti(t,e){var i;return(i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?tr(Z(e),Z(t)):tr(Z(t),Z(e)))>180?-(360-i):i}function tr(t,e){var i=O(t[1]),r=O(e[1]),n=O(e[0]-t[0]);return n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI),(z(Math.atan2(n,Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(i/2+Math.PI/4))))+360)%360}function tn(t,e,i){if(null!==t)for(var r,n,o,a,s,l,h,u,c=0,f=0,d=t.type,p="FeatureCollection"===d,m="Feature"===d,g=p?t.features.length:1,y=0;y<g;y++){s=(u=!!(h=p?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=u?h.geometries[v]:h)){l=a.coordinates;var x=a.type;switch(c=i&&("Polygon"===x||"MultiPolygon"===x)?1:0,x){case null:break;case"Point":if(!1===e(l,f,y,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,y,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-c;n++){if(!1===e(l[r][n],f,y,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,n=0;n<l[r].length;n++){for(o=0;o<l[r][n].length-c;o++){if(!1===e(l[r][n][o],f,y,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===tn(a.geometries[r],e,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function to(t,e,i,r){var n=i;return tn(t,function(t,r,o,a,s){n=0===r&&void 0===i?t:e(n,t,r,o,a,s)},r),n}function ta(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function ts(t,e,i){var r=i;return ta(t,function(t,n){r=0===n&&void 0===i?t:e(r,t,n)}),r}function tl(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function th(t,e,i){var r=i;return tl(t,function(t,n){r=0===n&&void 0===i?t:e(r,t,n)}),r}function tu(t){var e=[];return tn(t,function(t){e.push(t)}),e}function tc(t,e){var i,r,n,o,a,s,l,h,u,c,f=0,d="FeatureCollection"===t.type,p="Feature"===t.type,m=d?t.features.length:1;for(i=0;i<m;i++){for(s=d?t.features[i].geometry:p?t.geometry:t,h=d?t.features[i].properties:p?t.properties:{},u=d?t.features[i].bbox:p?t.bbox:void 0,c=d?t.features[i].id:p?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,n=0;n<a;n++)if(null!==(o=l?s.geometries[n]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,h,u,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,h,u,c))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===e(null,f,h,u,c))return!1;f++}}function tf(t,e,i){var r=i;return tc(t,function(t,n,o,a,s){r=0===n&&void 0===i?t:e(r,t,n,o,a,s)}),r}function td(t,e){tc(t,function(t,i,r,n,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(m(t,r,{bbox:n,id:o}),i,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(m({type:a,coordinates:t.coordinates[l]},r),i,l))return!1})}function tp(t,e,i){var r=i;return td(t,function(t,n,o){r=0===n&&0===o&&void 0===i?t:e(r,t,n,o)}),r}function tm(t,e){td(t,function(t,i,r){var n=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,l=0,h=0;return!1!==tn(t,function(o,u,c,f,d){return void 0===a||i>s||f>l||d>h?(a=o,s=i,l=f,h=d,void(n=0)):!1!==e(x([a,o],t.properties),i,r,d,n)&&void(n++,a=o)})&&void 0}}})}function tg(t,e,i){var r=i,n=!1;return tm(t,function(t,o,a,s,l){r=!1===n&&void 0===i?t:e(r,t,o,a,s,l),n=!0}),r}function ty(t,e){if(!t)throw Error("geojson is required");td(t,function(t,i,r){if(null!==t.geometry){var n=t.geometry.type,o=t.geometry.coordinates;switch(n){case"LineString":if(!1===e(t,i,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(x(o[a],t.properties),i,r,a))return!1}}})}function tv(t,e,i){var r=i;return ty(t,function(t,n,o,a){r=0===n&&void 0===i?t:e(r,t,n,o,a)}),r}function t_(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i,r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),x([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),x([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),x([l[n][a],l[n][a+1]],s,e);case"MultiPolygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),a<0&&(a=l[n][o].length-a-1),x([l[n][o][a],l[n][o][a+1]],s,e)}throw Error("geojson is invalid")}function tb(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i,r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":return y(l,s,e);case"MultiPoint":return n<0&&(n=l.length+n),y(l[n],s,e);case"LineString":return a<0&&(a=l.length+a),y(l[a],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),y(l[o][a],s,e);case"MultiLineString":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),y(l[n][a],s,e);case"MultiPolygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),a<0&&(a=l[n][o].length-a),y(l[n][o][a],s,e)}throw Error("geojson is invalid")}var tx=Object.freeze({__proto__:null,coordAll:tu,coordEach:tn,coordReduce:to,featureEach:tl,featureReduce:th,findPoint:tb,findSegment:t_,flattenEach:td,flattenReduce:tp,geomEach:tc,geomReduce:tf,lineEach:ty,lineReduce:tv,propEach:ta,propReduce:ts,segmentEach:tm,segmentReduce:tg});function tw(t){return tf(t,function(t,e){return t+function(t){var e,i=0;switch(t.type){case"Polygon":return tM(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)i+=tM(t.coordinates[e]);return i}return 0}(e)},0)}function tM(t){var e=0;if(t&&t.length>0){e+=Math.abs(tE(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(tE(t[i]))}return e}var tS=f*f/2,tk=Math.PI/180;function tE(t){var e=t.length-1;if(e<=2)return 0;for(var i=0,r=0;r<e;){var n=t[r],o=t[r+1===e?0:r+1],a=t[r+2>=e?(r+2)%e:r+2],s=n[0]*tk,l=o[1]*tk;i+=(a[0]*tk-s)*Math.sin(l),r++}return i*tS}function tI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;var i=[1/0,1/0,-1/0,-1/0];return tn(t,function(t){i[0]>t[0]&&(i[0]=t[0]),i[1]>t[1]&&(i[1]=t[1]),i[2]<t[0]&&(i[2]=t[0]),i[3]<t[1]&&(i[3]=t[1])}),i}function tP(t,e){var i,r,n,o,a,s,l;for(r=1;r<=8;r*=2){for(i=[],o=!(tA(n=t[t.length-1],e)&r),a=0;a<t.length;a++)(l=!(tA(s=t[a],e)&r))!==o&&i.push(tT(n,s,r,e)),l&&i.push(s),n=s,o=l;if(!(t=i).length)break}return i}function tT(t,e,i,r){return 8&i?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&i?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&i?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&i?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function tA(t,e){var i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function tC(t,e){var i,r=[],n=u(t);try{for(n.s();!(i=n.n()).done;){var o=tP(i.value,e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}}catch(t){n.e(t)}finally{n.f()}return r}function tL(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Number(t[0]),r=Number(t[1]),n=Number(t[2]),o=Number(t[3]);if(6===t.length)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[i,r];return _([[a,[n,r],[n,o],[i,o],a]],e.properties,{bbox:t,id:e.id})}var tR=function(){function t(e){i(this,t),this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var r=0;r<this.length;r++)this.points[r].z=this.points[r].z||0;for(var n=0;n<this.length-1;n++){var o=this.points[n],a=this.points[n+1];this.centers.push({x:(o.x+a.x)/2,y:(o.y+a.y)/2,z:(o.z+a.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var s=0;s<this.centers.length-1;s++){var l=this.points[s+1].x-(this.centers[s].x+this.centers[s+1].x)/2,h=this.points[s+1].y-(this.centers[s].y+this.centers[s+1].y)/2,u=this.points[s+1].z-(this.centers[s].y+this.centers[s+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s].x+l),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s].y+h),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s].z+u)},{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s+1].x+l),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s+1].y+h),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s+1].z+u)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return n(t,[{key:"cacheSteps",value:function(t){var e=[],i=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var n=this.pos(r);Math.sqrt((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y)+(n.z-i.z)*(n.z-i.z))>t&&(e.push(r),i=n)}return e}},{key:"vector",value:function(t){var e=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}}},{key:"pos",value:function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function(t,e,i,r,n){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:n.x*o[0]+r.x*o[1]+i.x*o[2]+e.x*o[3],y:n.y*o[0]+r.y*o[1]+i.y*o[2]+e.y*o[3],z:n.z*o[0]+r.z*o[1]+i.z*o[2]+e.z*o[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}]),t}();function tN(t){for(var e,i,r=G(t),n=0,o=1;o<r.length;)e=i||r[0],n+=((i=r[o])[0]-e[0])*(i[1]+e[1]),o++;return n>0}function tz(t,e){for(var i=0,r=0,n=0,o=0,a=0,s=0,l=0,h=0,u=null,c=null,f=t[0],d=t[1],p=e.length;i<p;i++){r=0;var m=e[i].length-1,g=e[i];if((u=g[0])[0]!==g[m][0]&&u[1]!==g[m][1])throw Error("First and last coordinates in a ring must be the same");for(a=u[0]-f,s=u[1]-d;r<m;r++)if(h=(c=g[r+1])[1]-d,s<0&&h<0||s>0&&h>0)s=h,a=(u=c)[0]-f;else{if(l=c[0]-t[0],h>0&&s<=0){if((o=a*h-l*s)>0)n+=1;else if(0===o)return 0}else if(s>0&&h<=0){if((o=a*h-l*s)<0)n+=1;else if(0===o)return 0}else if(0===h&&s<0){if(0==(o=a*h-l*s))return 0}else if(0===s&&h<0){if(0==(o=a*h-l*s))return 0}else if(0===s&&0===h&&(l<=0&&a>=0||a<=0&&l>=0))return 0;u=c,s=h,a=l}}return n%2!=0}function tO(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("point is required");if(!e)throw Error("polygon is required");var r=Z(t),n=Y(e),o=n.type,a=e.bbox,s=n.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var l=!1,h=0;h<s.length;++h){var u=tz(r,s[h]);if(0===u)return!i.ignoreBoundary;u&&(l=!0)}return l}function tD(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Z(t),n=G(e),o=0;o<n.length-1;o++){var a=!1;if(i.ignoreEndVertices&&(0===o&&(a="start"),o===n.length-2&&(a="end"),0===o&&o+1===n.length-1&&(a="both")),tB(n[o],n[o+1],r,a,void 0===i.epsilon?null:i.epsilon))return!0}return!1}function tB(t,e,i,r,n){var o=i[0],a=i[1],s=t[0],l=t[1],h=e[0],u=e[1],c=h-s,f=u-l,d=(i[0]-s)*f-(i[1]-l)*c;if(null!==n){if(Math.abs(d)>n)return!1}else if(0!==d)return!1;return r?"start"===r?Math.abs(c)>=Math.abs(f)?c>0?s<o&&o<=h:h<=o&&o<s:f>0?l<a&&a<=u:u<=a&&a<l:"end"===r?Math.abs(c)>=Math.abs(f)?c>0?s<=o&&o<h:h<o&&o<=s:f>0?l<=a&&a<u:u<a&&a<=l:"both"===r&&(Math.abs(c)>=Math.abs(f)?c>0?s<o&&o<h:h<o&&o<s:f>0?l<a&&a<u:u<a&&a<l):Math.abs(c)>=Math.abs(f)?c>0?s<=o&&o<=h:h<=o&&o<=s:f>0?l<=a&&a<=u:u<=a&&a<=l}function tF(t,e){if("Feature"===t.type&&null===t.geometry||"Feature"===e.type&&null===e.geometry||!tj(tI(t),tI(e)))return!1;var i,r=u(Y(e).coordinates);try{for(r.s();!(i=r.n()).done;){var n,o=u(i.value);try{for(o.s();!(n=o.n()).done;)if(!tO(n.value,t))return!1}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return!0}function tj(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function tq(t,e){return t[0]===e[0]&&t[1]===e[1]}function tV(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var tU=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tZ;if(i(this,t),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}return n(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,i=this.compare,r=e[t];t>0;){var n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&0>i(e[s],a)&&(o=s,a=e[s]),i(a,n)>=0)break;e[t]=a,t=o}e[t]=n}}]),t}();function tZ(t,e){return t<e?-1:t>e?1:0}function tG(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function tH(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}var tW=function(){function t(e,r,n,o){i(this,t),this.p={x:e[0],y:e[1]},this.featureId=r,this.ringId=n,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null}return n(t,[{key:"isSamePoint",value:function(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}]),t}(),tX=0,t$=0,tY=0;function tK(t,e){var i="Feature"===t.type?t.geometry:t,r=i.coordinates;"Polygon"!==i.type&&"MultiLineString"!==i.type||(r=[r]),"LineString"===i.type&&(r=[[r]]);for(var n=0;n<r.length;n++)for(var o=0;o<r[n].length;o++){var a=r[n][o][0],s=null;t$+=1;for(var l=0;l<r[n][o].length-1;l++){s=r[n][o][l+1];var h=new tW(a,tX,t$,tY),u=new tW(s,tX,t$,tY+1);h.otherEvent=u,u.otherEvent=h,tG(h,u)>0?(u.isLeftEndpoint=!0,h.isLeftEndpoint=!1):(h.isLeftEndpoint=!0,u.isLeftEndpoint=!1),e.push(h),e.push(u),a=s,tY+=1}}tX+=1}var tJ=n(function t(e){i(this,t),this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent});function tQ(t,e){if(null===t||null===e||t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;var i=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,n=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,a=e.leftSweepEvent.p.x,s=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,h=e.rightSweepEvent.p.y,u=(h-s)*(n-i)-(l-a)*(o-r),c=(l-a)*(r-s)-(h-s)*(i-a),f=(n-i)*(r-s)-(o-r)*(i-a);if(0===u)return!1;var d=c/u,p=f/u;return d>=0&&d<=1&&p>=0&&p<=1&&[i+d*(n-i),r+d*(o-r)]}var t0=function(t,e){var i=new tU([],tG);return function(t,e){if("FeatureCollection"===t.type)for(var i=t.features,r=0;r<i.length;r++)tK(i[r],e);else tK(t,e)}(t,i),function(t,e){e=e||!1;for(var i=[],r=new tU([],tH);t.length;){var n=t.pop();if(n.isLeftEndpoint){for(var o=new tJ(n),a=0;a<r.data.length;a++){var s=r.data[a];if(!e||s.leftSweepEvent.featureId!==n.featureId){var l=tQ(o,s);!1!==l&&i.push(l)}}r.push(o)}else!1===n.isLeftEndpoint&&r.pop()}return i}(i,e)};function t1(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.removeDuplicates,n=void 0===r||r,o=i.ignoreSelfIntersections,a=void 0!==o&&o,s=[];"FeatureCollection"===t.type?s=s.concat(t.features):"Feature"===t.type?s.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||s.push(m(t)),"FeatureCollection"===e.type?s=s.concat(e.features):"Feature"===e.type?s.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||s.push(m(e));var l=t0(M(s),a),h=[];if(n){var u={};l.forEach(function(t){var e=t.join(",");u[e]||(u[e]=!0,h.push(t))})}else h=l;return M(h.map(function(t){return y(t)}))}function t2(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Y(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),i.type){case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t6(Y(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}(i,e);case"MultiPolygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Y(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},n=[];return i.forEach(function(t){n.push(t6(t,r))}),M(n)}(i,e);default:throw Error("invalid poly")}}function t6(t,e){return t.length>1?S(t,e):x(t[0],e)}function t3(t,e){var i=Y(t),r=Y(e),n=i.type,o=r.type;switch(n){case"MultiPoint":switch(o){case"LineString":return t8(i,r);case"Polygon":return t5(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return t8(r,i);case"LineString":return function(t,e){if(t1(t,e).features.length>0)for(var i=0;i<t.coordinates.length-1;i++)for(var r=0;r<e.coordinates.length-1;r++){var n=!0;if(0!==r&&r!==e.coordinates.length-2||(n=!1),t7(t.coordinates[i],t.coordinates[i+1],e.coordinates[r],n))return!0}return!1}(i,r);case"Polygon":return t4(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return t5(r,i);case"LineString":return t4(r,i);default:throw Error("feature2 "+o+" geometry not supported")}default:throw Error("feature1 "+n+" geometry not supported")}}function t8(t,e){for(var i=!1,r=!1,n=t.coordinates.length,o=0;o<n&&!i&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),t7(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?i=!0:r=!0}o++}return i&&r}function t4(t,e){return t1(t,t2(e)).features.length>0}function t5(t,e){for(var i=!1,r=!1,n=t.coordinates.length,o=0;o<n&&(!i||!r);o++)tO(y(t.coordinates[o]),e)?i=!0:r=!0;return r&&i}function t7(t,e,i,r){var n=i[0]-t[0],o=i[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==n*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:s>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<i[0]&&i[0]<e[0]:e[0]<i[0]&&i[0]<t[0]:s>0?t[1]<i[1]&&i[1]<e[1]:e[1]<i[1]&&i[1]<t[1])}function t9(t,e){var i,r=null!=(i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections)&&i,n=!0;return td(t,function(t){td(e,function(e){if(!1===n)return!1;n=function(t,e,i){var r,n;switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!et(e,t);case"Polygon":return!tO(t,e)}break;case"LineString":switch(e.type){case"Point":return!et(t,e);case"LineString":return!function(t,e,i){return t1(t,e,{ignoreSelfIntersections:i}).features.length>0}(t,e,i);case"Polygon":return!ee(e,t,i)}break;case"Polygon":switch(e.type){case"Point":return!tO(e,t);case"LineString":return!ee(t,e,i);case"Polygon":return!function(t,e,i){var r,n=u(t.coordinates[0]);try{for(n.s();!(r=n.n()).done;)if(tO(r.value,e))return!0}catch(t){n.e(t)}finally{n.f()}var o,a=u(e.coordinates[0]);try{for(a.s();!(o=a.n()).done;)if(tO(o.value,t))return!0}catch(t){a.e(t)}finally{a.f()}return t1(t2(t),t2(e),{ignoreSelfIntersections:i}).features.length>0}(e,t,i)}}return!1}(t.geometry,e.geometry,r)})}),n}function et(t,e){for(var i=0;i<t.coordinates.length-1;i++)if(ei(t.coordinates[i],t.coordinates[i+1],e.coordinates))return!0;return!1}function ee(t,e,i){var r,n=u(e.coordinates);try{for(n.s();!(r=n.n()).done;)if(tO(r.value,t))return!0}catch(t){n.e(t)}finally{n.f()}return t1(e,t2(t),{ignoreSelfIntersections:i}).features.length>0}function ei(t,e,i){var r=i[0]-t[0],n=i[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return 0==r*a-n*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:a>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1])}var er=Object.defineProperty,en=function(t,e){return er(t,"name",{value:e,configurable:!0})},eo=function(){function t(e){var r,n,o;i(this,t),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(r=null==e?void 0:e.precision)?r:17)),this.direction=null!=(n=null==e?void 0:e.direction)&&n,this.compareProperties=null==(o=null==e?void 0:e.compareProperties)||o}return n(t,[{key:"compare",value:function(t,e){var i=this;if(t.type!==e.type||!es(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates);case"Polygon":return this.comparePolygon(t,e);case"GeometryCollection":return this.compareGeometryCollection(t,e);case"Feature":return this.compareFeature(t,e);case"FeatureCollection":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith("Multi")){var r=el(t),n=el(e);return r.every(function(t){return n.some(function(e){return i.compare(t,e)})})}}return!1}},{key:"compareCoord",value:function(t,e){var i=this;return t.length===e.length&&t.every(function(t,r){return Math.abs(t-e[r])<i.precision})}},{key:"compareLine",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!es(t,e))return!1;var n=t,o=e;if(r&&!this.compareCoord(n[0],o[0])){var a=this.fixStartIndex(o,n);if(!a)return!1;o=a}var s=this.compareCoord(n[i],o[i]);return this.direction||s?this.comparePath(n,o):!!this.compareCoord(n[i],o[o.length-(1+i)])&&this.comparePath(n.slice().reverse(),o)}},{key:"fixStartIndex",value:function(t,e){for(var i,r=-1,n=0;n<t.length;n++)if(this.compareCoord(t[n],e[0])){r=n;break}return r>=0&&(i=[].concat(t.slice(r,t.length),t.slice(1,r+1))),i}},{key:"comparePath",value:function(t,e){var i=this;return t.every(function(t,r){return i.compareCoord(t,e[r])})}},{key:"comparePolygon",value:function(t,e){var i=this;if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length);return r.every(function(t){return n.some(function(e){return i.compareLine(t,e,1,!0)})})}return!1}},{key:"compareGeometryCollection",value:function(t,e){var i=this;return es(t.geometries,e.geometries)&&this.compareBBox(t,e)&&t.geometries.every(function(t,r){return i.compare(t,e.geometries[r])})}},{key:"compareFeature",value:function(t,e){return t.id===e.id&&(!this.compareProperties||eu(t.properties,e.properties))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry)}},{key:"compareFeatureCollection",value:function(t,e){var i=this;return es(t.features,e.features)&&this.compareBBox(t,e)&&t.features.every(function(t,r){return i.compare(t,e.features[r])})}},{key:"compareBBox",value:function(t,e){return!!(!t.bbox&&!e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}}]),t}();en(eo,"GeojsonEquality");var ea=eo;function es(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function el(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function eh(t,e,i){return new ea(i).compare(t,e)}function eu(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var n=0,o=i;n<o.length;n++){var a=o[n],s=t[a],l=e[a],h=ec(s)&&ec(l);if(h&&!eu(s,l)||!h&&s!==l)return!1}return!0}en(es,"sameLength"),en(el,"explode"),en(eh,"geojsonEquality"),en(eu,"equal");var ec=en(function(t){return null!=t&&"object"===e(t)},"isObject");function ef(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="object"===e(i)?i.mutate:i;if(!t)throw Error("geojson is required");var n=K(t),o=[];switch(n){case"LineString":o=ed(t,n);break;case"MultiLineString":case"Polygon":G(t).forEach(function(t){o.push(ed(t,n))});break;case"MultiPolygon":G(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(ed(t,n))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var a={};G(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(a,e)||(o.push(t),a[e]=!0)});break;default:throw Error(n+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:n,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):m({type:n,coordinates:o},t.properties,{bbox:t.bbox,id:t.id})}function ed(t,e){var i=G(t);if(2===i.length&&!ep(i[0],i[1]))return i;var r=[],n=i.length-1,o=r.length;r.push(i[0]);for(var a=1;a<n;a++){var s=r[r.length-1];i[a][0]===s[0]&&i[a][1]===s[1]||(r.push(i[a]),(o=r.length)>2&&em(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1))}if(r.push(i[i.length-1]),o=r.length,("Polygon"===e||"MultiPolygon"===e)&&ep(i[0],i[i.length-1])&&o<4)throw Error("invalid polygon");return"LineString"===e&&o<3||em(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1),r}function ep(t,e){return t[0]===e[0]&&t[1]===e[1]}function em(t,e,i){var r=i[0],n=i[1],o=t[0],a=t[1],s=e[0],l=e[1],h=s-o,u=l-a;return 0==(r-o)*u-(n-a)*h&&(Math.abs(h)>=Math.abs(u)?h>0?o<=r&&r<=s:s<=r&&r<=o:u>0?a<=n&&n<=l:l<=n&&n<=a)}function eg(t,e){var i,r=null!=(i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections)&&i,n=!1;return td(t,function(t){td(e,function(e){if(!0===n)return!0;n=!t9(t.geometry,e.geometry,{ignoreSelfIntersections:r})})}),n}function ey(t,e,i,r,n){ev(t,e,i||0,r||t.length-1,n||eb)}function ev(t,e,i,r,n){for(;r>i;){if(r-i>600){var o=r-i+1,a=e-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ev(t,e,Math.max(i,Math.floor(e-a*l/o+h)),Math.min(r,Math.floor(e+(o-a)*l/o+h)),n)}var u=t[e],c=i,f=r;for(e_(t,i,e),n(t[r],u)>0&&e_(t,i,r);c<f;){for(e_(t,c,f),c++,f--;0>n(t[c],u);)c++;for(;n(t[f],u)>0;)f--}0===n(t[i],u)?e_(t,i,f):e_(t,++f,r),f<=e&&(i=f+1),e<=f&&(r=f-1)}}function e_(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function eb(t,e){return t<e?-1:t>e?1:0}var ex=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;i(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return n(t,[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(t){var e=this.data,i=[];if(!eC(t,e))return i;for(var r=this.toBBox,n=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;eC(t,s)&&(e.leaf?i.push(a):eA(t,s)?this._all(a,i):n.push(a))}e=n.pop()}return i}},{key:"collides",value:function(t){var e=this.data;if(!eC(t,e))return!1;for(var i=[];e;){for(var r=0;r<e.children.length;r++){var n=e.children[r],o=e.leaf?this.toBBox(n):n;if(eC(t,o)){if(e.leaf||eA(t,o))return!0;i.push(n)}}e=i.pop()}return!1}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}}else this.data=i;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=eL([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var i,r,n,o=this.data,a=this.toBBox(t),s=[],l=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],i=l.pop(),n=!0),o.leaf){var h=ew(t,o.children,e);if(-1!==h)return o.children.splice(h,1),s.push(o),this._condense(s),this}n||o.leaf||!eA(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(s.push(o),l.push(i),i=0,r=o,o=o.children[0])}return this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,s(t.children)):i.push.apply(i,s(t.children)),t=i.pop();return e}},{key:"_build",value:function(t,e,i,r){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return eM(n=eL(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(n=eL([])).leaf=!1,n.height=r;var s=Math.ceil(o/a),l=s*Math.ceil(Math.sqrt(a));eR(t,e,i,l,this.compareMinX);for(var h=e;h<=i;h+=l){var u=Math.min(h+l-1,i);eR(t,h,u,s,this.compareMinY);for(var c=h;c<=u;c+=s){var f=Math.min(c+s-1,u);n.children.push(this._build(t,c,f,r-1))}}return eM(n,this.toBBox),n}},{key:"_chooseSubtree",value:function(t,e,i,r){for(;r.push(e),!e.leaf&&r.length-1!==i;){for(var n,o,a=1/0,s=1/0,l=void 0,h=0;h<e.children.length;h++){var u=e.children[h],c=eP(u),f=(n=t,(Math.max((o=u).maxX,n.maxX)-Math.min(o.minX,n.minX))*(Math.max(o.maxY,n.maxY)-Math.min(o.minY,n.minY))-c);f<s?(s=f,a=c<a?c:a,l=u):f===s&&c<a&&(a=c,l=u)}e=l||e.children[0]}return e}},{key:"_insert",value:function(t,e,i){var r=i?t:this.toBBox(t),n=[],o=this._chooseSubtree(r,this.data,e,n);for(o.children.push(t),ek(o,r);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(r,n,e)}},{key:"_split",value:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),a=eL(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,eM(i,this.toBBox),eM(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)}},{key:"_splitRoot",value:function(t,e){this.data=eL([t,e]),this.data.height=t.height+1,this.data.leaf=!1,eM(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,i){for(var r,n,o,a,s,l,h,u=1/0,c=1/0,f=e;f<=i-e;f++){var d=eS(t,0,f,this.toBBox),p=eS(t,f,i,this.toBBox),m=(n=d,o=p,a=void 0,s=void 0,l=void 0,h=void 0,a=Math.max(n.minX,o.minX),s=Math.max(n.minY,o.minY),Math.max(0,(l=Math.min(n.maxX,o.maxX))-a)*Math.max(0,(h=Math.min(n.maxY,o.maxY))-s)),g=eP(d)+eP(p);m<u?(u=m,r=f,c=g<c?g:c):m===u&&g<c&&(c=g,r=f)}return r||i-e}},{key:"_chooseSplitAxis",value:function(t,e,i){var r=t.leaf?this.compareMinX:eE,n=t.leaf?this.compareMinY:eI;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)}},{key:"_allDistMargin",value:function(t,e,i,r){t.children.sort(r);for(var n=this.toBBox,o=eS(t,0,e,n),a=eS(t,i-e,i,n),s=eT(o)+eT(a),l=e;l<i-e;l++){var h=t.children[l];ek(o,t.leaf?n(h):h),s+=eT(o)}for(var u=i-e-1;u>=e;u--){var c=t.children[u];ek(a,t.leaf?n(c):c),s+=eT(a)}return s}},{key:"_adjustParentBBoxes",value:function(t,e,i){for(var r=i;r>=0;r--)ek(e[r],t)}},{key:"_condense",value:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():eM(t[i],this.toBBox)}}]),t}();function ew(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return -1}function eM(t,e){eS(t,0,t.children.length,e,t)}function eS(t,e,i,r,n){n||(n=eL(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=e;o<i;o++){var a=t.children[o];ek(n,t.leaf?r(a):a)}return n}function ek(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function eE(t,e){return t.minX-e.minX}function eI(t,e){return t.minY-e.minY}function eP(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function eT(t){return t.maxX-t.minX+(t.maxY-t.minY)}function eA(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function eC(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function eL(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function eR(t,e,i,r,n){for(var o=[e,i];o.length;)if(!((i=o.pop())-(e=o.pop())<=r)){var a=e+Math.ceil((i-e)/r/2)*r;ey(t,a,e,i,n),o.push(e,a,a,i)}}var eN=Object.freeze({__proto__:null,default:ex});function ez(t){var e=new ex(t);return e.insert=function(t){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:tI(t),ex.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:tI(t),e.push(t)}):tl(t,function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:tI(t),e.push(t)}),ex.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:tI(t),ex.prototype.remove.call(this,t,e)},e.clear=function(){return ex.prototype.clear.call(this)},e.search=function(t){return M(ex.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return ex.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return M(ex.prototype.all.call(this))},e.toJSON=function(){return ex.prototype.toJSON.call(this)},e.fromJSON=function(t){return ex.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=tI(t);else{if("FeatureCollection"!==t.type)throw Error("invalid geojson");e=tI(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function eO(t){if(!t)throw Error("geojson is required");var e=[];return td(t,function(t){!function(t,e){var i=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":i=G(r);break;case"LineString":i=[G(r)]}i.forEach(function(i){(function(t,e){var i=[];return t.reduce(function(t,r){var n=x([t,r],e);return n.bbox=function(t,e){var i=t[0],r=t[1],n=e[0],o=e[1];return[i<n?i:n,r<o?r:o,i>n?i:n,r>o?r:o]}(t,r),i.push(n),r}),i})(i,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),M(e)}var eD=Object.defineProperty,eB=Object.defineProperties,eF=Object.getOwnPropertyDescriptors,ej=Object.getOwnPropertySymbols,eq=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,eU=function(t,e,i){return e in t?eD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},eZ=function(t,e){for(var i in e||(e={}))eq.call(e,i)&&eU(t,i,e[i]);if(ej){var r,n=u(ej(e));try{for(n.s();!(r=n.n()).done;)i=r.value,eV.call(e,i)&&eU(t,i,e[i])}catch(t){n.e(t)}finally{n.f()}}return t},eG=function(t,e){return eB(t,eF(e))};function eH(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)throw Error("lines and pt are required arguments");var r=y([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),n=0;return td(t,function(t,o,a){for(var s=G(t),l=0;l<s.length-1;l++){var h=y(s[l]);h.properties.dist=te(e,h,i);var u=y(s[l+1]);u.properties.dist=te(e,u,i);var c=te(h,u,i),f=Math.max(h.properties.dist,u.properties.dist),d=Q(h,u),p=tt(e,f,d+90,i),m=tt(e,f,d-90,i),g=t1(x([p.geometry.coordinates,m.geometry.coordinates]),x([h.geometry.coordinates,u.geometry.coordinates])),v=void 0;g.features.length>0&&g.features[0]&&(v=eG(eZ({},g.features[0]),{properties:{dist:te(e,g.features[0],i),multiFeatureIndex:a,location:n+te(h,g.features[0],i)}})),h.properties.dist<r.properties.dist&&(r=eG(eZ({},h),{properties:eG(eZ({},h.properties),{index:l,multiFeatureIndex:a,location:n})})),u.properties.dist<r.properties.dist&&(r=eG(eZ({},u),{properties:eG(eZ({},u.properties),{index:l+1,multiFeatureIndex:a,location:n+c})})),v&&v.properties.dist<r.properties.dist&&(r=eG(eZ({},v),{properties:eG(eZ({},v.properties),{index:l})})),n+=c}}),r}function eW(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eX(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var i=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}),i}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==$parcel$global||"undefined"!=typeof self&&self;var e$=eW(function t(i,r){if(i===r)return!0;if(i&&r&&"object"==e(i)&&"object"==e(r)){if(i.constructor!==r.constructor)return!1;if(Array.isArray(i)){if((n=i.length)!=r.length)return!1;for(o=n;0!=o--;)if(!t(i[o],r[o]))return!1;return!0}if(i.constructor===RegExp)return i.source===r.source&&i.flags===r.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===r.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===r.toString();if((n=(a=Object.keys(i)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,a[o]))return!1;for(o=n;0!=o--;){var n,o,a,s=a[o];if(!t(i[s],r[s]))return!1}return!0}return i!=i&&r!=r});function eY(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!j(i=i||{}))throw Error("options is invalid");var r,n=i.tolerance||0,o=[],a=ez(),s=eO(t);a.load(s);var l=[];return tm(e,function(t){var e=!1;t&&(tl(a.search(t),function(i){if(!1===e){var o=G(t).sort(),a=G(i).sort();if(e$(o,a))e=!0,r=r?eK(r,t)||r:t;else if(0===n?tD(o[0],i)&&tD(o[1],i):eH(i,o[0]).properties.dist<=n&&eH(i,o[1]).properties.dist<=n)e=!0,r=r?eK(r,t)||r:t;else if(0===n?tD(a[0],t)&&tD(a[1],t):eH(t,a[0]).properties.dist<=n&&eH(t,a[1]).properties.dist<=n){if(r){var s=eK(r,i);s?r=s:l.push(i)}else r=i}}}),!1===e&&r&&(o.push(r),l.length&&(o=o.concat(l),l=[]),r=void 0))}),r&&o.push(r),M(o)}function eK(t,e){var i=G(e),r=G(t),n=r[0],o=r[r.length-1],a=t.geometry.coordinates;if(e$(i[0],n))a.unshift(i[1]);else if(e$(i[0],o))a.push(i[1]);else if(e$(i[1],n))a.unshift(i[0]);else{if(!e$(i[1],o))return;a.push(i[0])}return t}function eJ(t,e){var i=R(ti(t[0],t[1])),r=R(ti(e[0],e[1]));return i===r||(r-i)%180==0}function eQ(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw Error("Invalid GeoJSON object for "+e)}function e0(t,e){return!!e1(e.coordinates[0],t.coordinates)||!!e1(e.coordinates[e.coordinates.length-1],t.coordinates)}function e1(t,e){return t[0]===e[0]&&t[1]===e[1]}function e2(t){return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function e6(t){for(var e=0;e<t.length-1;e++)for(var i=t[e],r=e+1;r<t.length-2;r++)if(tD(i,x([t[r],t[r+1]])))return!0;return!1}function e3(t,e,i){for(var r=_(t),n=i+1;n<e.length;n++)if(!t9(r,_(e[n]))&&t3(r,x(e[n][0])))return!1;return!0}function e8(t,e){var i=Y(t),r=Y(e),n=i.type,o=r.type;switch(n){case"Point":switch(o){case"MultiPoint":return function(t,e){var i,r=!1;for(i=0;i<e.coordinates.length;i++)if(e5(e.coordinates[i],t.coordinates)){r=!0;break}return r}(i,r);case"LineString":return tD(i,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return tO(i,r,{ignoreBoundary:!0});default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var i=0;i<t.coordinates.length;i++){for(var r=!1,n=0;n<e.coordinates.length;n++)e5(t.coordinates[i],e.coordinates[n])&&(r=!0);if(!r)return!1}return!0}(i,r);case"LineString":return function(t,e){for(var i=!1,r=0;r<t.coordinates.length;r++){if(!tD(t.coordinates[r],e))return!1;i||(i=tD(t.coordinates[r],e,{ignoreEndVertices:!0}))}return i}(i,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var i=!0,r=!1,n=0;n<t.coordinates.length;n++){if(!(r=tO(t.coordinates[n],e))){i=!1;break}r=tO(t.coordinates[n],e,{ignoreBoundary:!0})}return i&&r}(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var i=0;i<t.coordinates.length;i++)if(!tD(t.coordinates[i],e))return!1;return!0}(i,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!e4(tI(e),tI(t)))return!1;for(var i=!1,r=0;r<t.coordinates.length;r++){if(!tO(t.coordinates[r],e))return!1;i||(i=tO(t.coordinates[r],e,{ignoreBoundary:!0})),!i&&r<t.coordinates.length-1&&(i=tO(e7(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return i}(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var i=tI(t);if(!e4(tI(e),i))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!tO(t.coordinates[0][r],e))return!1;return!0}(i,r);default:throw Error("feature2 "+o+" geometry not supported")}default:throw Error("feature1 "+n+" geometry not supported")}}function e4(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function e5(t,e){return t[0]===e[0]&&t[1]===e[1]}function e7(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function e9(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=tI(t);return y([(i[0]+i[2])/2,(i[1]+i[3])/2],e.properties,e)}var it={exports:{}};!function(t,i){t.exports=function(){function t(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function n(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t,e,i){return(l=s()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return i&&a(n,i.prototype),n}).apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){var i;if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,o(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,t)})(t)}function u(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,i){if(i&&("object"==e(i)||"function"==typeof i))return i;if(void 0!==i)throw TypeError("Derived constructors may only return object or undefined");return u(t)}function f(t){var e=s();return function(){var i,r=o(t);return i=e?Reflect.construct(r,arguments,o(this).constructor):r.apply(this,arguments),c(this,i)}}function d(t,e,i){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function p(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return g(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function y(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=m(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}var v=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this.setQuadrantSegments(i),this.setEndCapStyle(r)}else if(4==arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(n),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}}},{key:"bufferDistanceError",value:function(t){return 1-Math.cos(Math.PI/2/t/2)}}]),e}();v.CAP_ROUND=1,v.CAP_FLAT=2,v.CAP_SQUARE=3,v.JOIN_ROUND=1,v.JOIN_MITRE=2,v.JOIN_BEVEL=3,v.DEFAULT_QUADRANT_SEGMENTS=8,v.DEFAULT_MITRE_LIMIT=5,v.DEFAULT_SIMPLIFY_FACTOR=.01;var _=function(e){n(o,e);var i=f(o);function o(e){var r;return t(this,o),(r=i.call(this,e)).name="Exception",r}return r(o,[{key:"toString",value:function(){return this.message}}]),o}(h(Error)),b=function(e){n(r,e);var i=f(r);function r(e){var n;return t(this,r),(n=i.call(this,e)).name="IllegalArgumentException",n}return r}(_),x=function(){function e(){t(this,e)}return r(e,[{key:"filter",value:function(t){}}]),e}();function w(){}function M(){}function S(){}var k,E,I,P,T,A,C,R,N=function(){function e(){t(this,e)}return r(e,null,[{key:"equalsWithTolerance",value:function(t,e,i){return Math.abs(t-e)<=i}}]),e}(),z=function(){function e(i,r){t(this,e),this.low=r||0,this.high=i||0}return r(e,null,[{key:"toBinaryString",value:function(t){var e,i="";for(e=2147483648;e>0;e>>>=1)i+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)i+=(t.low&e)===e?"1":"0";return i}}]),e}();function O(){}function D(){}O.NaN=NaN,O.isNaN=function(t){return Number.isNaN(t)},O.isInfinite=function(t){return!Number.isFinite(t)},O.MAX_VALUE=Number.MAX_VALUE,O.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,O.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(A=2146435072,R=new Int32Array((C=new Float64Array(1)).buffer),O.doubleToLongBits=function(t){C[0]=t;var e=0|R[0],i=0|R[1];return(i&A)===A&&0!=(1048575&i)&&0!==e&&(e=0,i=2146959360),new z(i,e)},O.longBitsToDouble=function(t){return R[0]=t.low,R[1]=t.high,C[0]}):(k=1023,E=Math.log2,I=Math.floor,P=Math.pow,T=function(){for(var t=53;t>0;t--){var e=P(2,t)-1;if(I(E(e))+1===t)return e}return 0}(),O.doubleToLongBits=function(t){var e,i,r,n,o,a,s,l,h;if(t<0||1/t===Number.NEGATIVE_INFINITY?(a=-2147483648,t=-t):a=0,0===t)return new z(l=a,h=0);if(t===1/0)return new z(l=2146435072|a,h=0);if(t!=t)return new z(l=2146959360,h=0);if(n=0,h=0,(e=I(t))>1){if(e<=T)(n=I(E(e)))<=20?(h=0,l=e<<20-n&1048575):(h=e%(i=P(2,r=n-20))<<32-r,l=e/i&1048575);else for(r=e,h=0;0!==(r=I(i=r/2));)n++,h>>>=1,h|=(1&l)<<31,l>>>=1,i!==r&&(l|=524288)}if(s=n+k,o=0===e,e=t-e,n<52&&0!==e)for(r=0;;){if((i=2*e)>=1?(e=i-1,o?(s--,o=!1):(r<<=1,r|=1,n++)):(e=i,o?0==--s&&(n++,o=!1):(r<<=1,n++)),20===n)l|=r,r=0;else if(52===n){h|=r;break}if(1===i){n<20?l|=r<<20-n:n<52&&(h|=r<<52-n);break}}return l|=s<<20,new z(l|=a,h)},O.longBitsToDouble=function(t){var e,i,r,n,o=t.high,a=t.low,s=-2147483648&o?-1:1;for(r=((2146435072&o)>>20)-k,n=0,i=524288,e=1;e<=20;e++)o&i&&(n+=P(2,-e)),i>>>=1;for(i=-2147483648,e=21;e<=52;e++)a&i&&(n+=P(2,-e)),i>>>=1;if(-1023===r){if(0===n)return 0*s;r=-1022}else{if(1024===r)return 0===n?s/0:NaN;n+=1}return s*n*P(2,r)});var B=function(e){n(r,e);var i=f(r);function r(e){var n;return t(this,r),(n=i.call(this,e)).name="RuntimeException",n}return r}(_),F=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,null,[{key:"constructor_",value:function(){if(0==arguments.length)B.constructor_.call(this);else if(1==arguments.length){var t=arguments[0];B.constructor_.call(this,t)}}}]),o}(B),j=function(){function e(){t(this,e)}return r(e,null,[{key:"shouldNeverReachHere",value:function(){if(0==arguments.length)e.shouldNeverReachHere(null);else if(1==arguments.length){var t=arguments[0];throw new F("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1==arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2==arguments.length){var i=arguments[1];if(!arguments[0])throw null===i?new F:new F(i)}}},{key:"equals",value:function(){if(2==arguments.length){var t=arguments[0],i=arguments[1];e.equals(t,i,null)}else if(3==arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2];if(!n.equals(r))throw new F("Expected "+r+" but encountered "+n+(null!==o?": "+o:""))}}}]),e}(),q=new ArrayBuffer(8),V=new Float64Array(q),U=new Int32Array(q),Z=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getM",value:function(){return O.NaN}},{key:"setOrdinate",value:function(t,i){switch(t){case e.X:this.x=i;break;case e.Y:this.y=i;break;case e.Z:this.setZ(i);break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1==arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2==arguments.length){var e=arguments[0],i=arguments[1];return!!N.equalsWithTolerance(this.x,e.x,i)&&!!N.equalsWithTolerance(this.y,e.y,i)}}},{key:"setM",value:function(t){throw new b("Invalid ordinate index: "+e.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new b("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||O.isNaN(this.getZ())&&O.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return N.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return j.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,i=this.y-t.y,r=this.getZ()-t.getZ();return Math.sqrt(e*e+i*i+r*r)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}},{key:"hashCode",value:function(){var t=17;return 37*(t=629+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[w,M,S]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0==arguments.length)e.constructor_.call(this,0,0);else if(1==arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2==arguments.length){var i=arguments[0],r=arguments[1];e.constructor_.call(this,i,r,e.NULL_ORDINATE)}else if(3==arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2];this.x=n,this.y=o,this.z=a}}},{key:"hashCode",value:function(t){return V[0]=t,U[0]^U[1]}}]),e}(),G=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"compare",value:function(t,i){var r=e.compare(t.x,i.x);if(0!==r)return r;var n=e.compare(t.y,i.y);return 0!==n?n:this._dimensionsToTest<=2?0:e.compare(t.getZ(),i.getZ())}},{key:"interfaces_",get:function(){return[D]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0==arguments.length)e.constructor_.call(this,2);else if(1==arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new b("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:O.isNaN(t)?O.isNaN(e)?0:-1:O.isNaN(e)?1:0}}]),e}();Z.DimensionalComparator=G,Z.NULL_ORDINATE=O.NaN,Z.X=0,Z.Y=1,Z.Z=2,Z.M=3;var H=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var i=t;return this.isNull()?i.isNull():this._maxx===i.getMaxX()&&this._maxy===i.getMaxY()&&this._minx===i.getMinX()&&this._miny===i.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var i=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny;return new e(i,this._maxx<t._maxx?this._maxx:t._maxx,r,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1==arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var i=arguments[0];return!this.isNull()&&!i.isNull()&&i.getMinX()>=this._minx&&i.getMaxX()<=this._maxx&&i.getMinY()>=this._miny&&i.getMaxY()<=this._maxy}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy}}},{key:"intersects",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Z){var i=arguments[0];return this.intersects(i.x,i.y)}}else if(2==arguments.length){if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var r=arguments[0],n=arguments[1];return!(this.isNull()||(r.x<n.x?r.x:n.x)>this._maxx||(r.x>n.x?r.x:n.x)<this._minx||(r.y<n.y?r.y:n.y)>this._maxy||(r.y>n.y?r.y:n.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||a>this._maxy||a<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1==arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var i=arguments[0];if(i.isNull())return null;this.isNull()?(this._minx=i.getMinX(),this._maxx=i.getMaxX(),this._miny=i.getMinY(),this._maxy=i.getMaxY()):(i._minx<this._minx&&(this._minx=i._minx),i._maxx>this._maxx&&(this._maxx=i._maxx),i._miny<this._miny&&(this._miny=i._miny),i._maxy>this._maxy&&(this._maxy=i._maxy))}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1==arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Z){var i=arguments[0];return this.covers(i)}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}}},{key:"centre",value:function(){return this.isNull()?null:new Z((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0==arguments.length)this.setToNull();else if(1==arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var i=arguments[0];this._minx=i._minx,this._maxx=i._maxx,this._miny=i._miny,this._maxy=i._maxy}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4==arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];o<a?(this._minx=o,this._maxx=a):(this._minx=a,this._maxx=o),s<l?(this._miny=s,this._maxy=l):(this._miny=l,this._maxy=s)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=629+Z.hashCode(this._minx))+Z.hashCode(this._maxx))+Z.hashCode(this._miny))+Z.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[w,S]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0==arguments.length)this.init();else if(1==arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var i=arguments[0];this.init(i)}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4==arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}}},{key:"intersects",value:function(){if(3==arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4==arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),h=Math.min(r.x,n.x),u=Math.max(r.x,n.x);return!(h>l||u<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),h=Math.min(r.y,n.y),u=Math.max(r.y,n.y),h>l||u<s))}}}]),e}(),W=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1==arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2==arguments.length){var i=arguments[0],r=arguments[1];return t=i,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(i,r)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new b("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new H(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var i=t.iterator(),r=e.iterator();i.hasNext()&&r.hasNext();){var n=i.next(),o=r.next(),a=n.compareTo(o);if(0!==a)return a}return i.hasNext()?1:r.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[M,w,S]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();W.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},W.TYPECODE_POINT=0,W.TYPECODE_MULTIPOINT=1,W.TYPECODE_LINESTRING=2,W.TYPECODE_LINEARRING=3,W.TYPECODE_MULTILINESTRING=4,W.TYPECODE_POLYGON=5,W.TYPECODE_MULTIPOLYGON=6,W.TYPECODE_GEOMETRYCOLLECTION=7,W.TYPENAME_POINT="Point",W.TYPENAME_MULTIPOINT="MultiPoint",W.TYPENAME_LINESTRING="LineString",W.TYPENAME_LINEARRING="LinearRing",W.TYPENAME_MULTILINESTRING="MultiLineString",W.TYPENAME_POLYGON="Polygon",W.TYPENAME_MULTIPOLYGON="MultiPolygon",W.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",W.geometryChangedFilter={get interfaces_(){return[x]},filter:function(t){t.geometryChangedAction()}};var X=function(){function e(){t(this,e)}return r(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new b("Unknown location value: "+t)}}]),e}();X.INTERIOR=0,X.BOUNDARY=1,X.EXTERIOR=2,X.NONE=-1;var $=function(){function e(){t(this,e)}return r(e,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),e}(),Y=function(e){n(r,e);var i=f(r);function r(e){var n;return t(this,r),(n=i.call(this,e)).name="NoSuchElementException",n}return r}(_),K=function(e){n(r,e);var i=f(r);function r(e){var n;return t(this,r),(n=i.call(this,e)).name="UnsupportedOperationException",n}return r}(_),J=function(e){n(o,e);var i=f(o);function o(){return t(this,o),i.apply(this,arguments)}return r(o,[{key:"contains",value:function(){}}]),o}($),Q=function(e,i){n(a,e);var o=f(a);function a(e){var i;return t(this,a),(i=o.call(this)).map=new Map,e instanceof $&&i.addAll(e),i}return r(a,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,i=y(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.add(r)}}catch(t){i.e(t)}finally{i.f()}return!0}},{key:"remove",value:function(){throw new K}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new tt(this.map)}},{key:i,value:function(){return this.map}}]),a}(J,Symbol.iterator),tt=function(){function e(i){t(this,e),this.iterator=i.values();var r=this.iterator.next(),n=r.done,o=r.value;this.done=n,this.value=o}return r(e,[{key:"next",value:function(){if(this.done)throw new Y;var t=this.value,e=this.iterator.next(),i=e.done,r=e.value;return this.done=i,this.value=r,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new K}}]),e}(),te=function(){function e(){t(this,e)}return r(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();te.ON=0,te.LEFT=1,te.RIGHT=2;var ti=function(e){n(r,e);var i=f(r);function r(e){var n;return t(this,r),(n=i.call(this,e)).name="EmptyStackException",n}return r}(_),tr=function(e){n(r,e);var i=f(r);function r(e){var n;return t(this,r),(n=i.call(this,e)).name="IndexOutOfBoundsException",n}return r}(_),tn=function(e){n(o,e);var i=f(o);function o(){return t(this,o),i.apply(this,arguments)}return r(o,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),o}($),to=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),(e=i.call(this)).array=[],e}return r(o,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new tr;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(0===this.array.length)throw new ti;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new ti;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),o}(tn);function ta(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var ts=function(){function e(i){t(this,e),this.str=i}return r(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),tl=function(){function e(i){t(this,e),this.value=i}return r(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new e(t)}}]),e}(),th=function(){function e(){t(this,e)}return r(e,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),e}(),tu=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,i){var r=this.abs(),n=e.magnitude(r._hi),o=e.TEN.pow(n);(r=r.divide(o)).gt(e.TEN)?(r=r.divide(e.TEN),n+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),n-=1);for(var a=n+1,s=new ts,l=e.MAX_PRINT_DIGITS-1,h=0;h<=l;h++){t&&h===a&&s.append(".");var u=Math.trunc(r._hi);if(u<0)break;var c=!1,f=0;u>9?(c=!0,f="9"):f="0"+u,s.append(f),r=r.subtract(e.valueOf(u)).multiply(e.TEN),c&&r.selfAdd(e.TEN);var d=!0,p=e.magnitude(r._hi);if(p<0&&Math.abs(p)>=l-h&&(d=!1),!d)break}return i[0]=n,s.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var i=arguments[0];return this.add(-i)}}},{key:"equals",value:function(){if(1==arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var i=arguments[0];return this.isNaN()?this:this.selfAdd(-i,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var i=arguments[0];return this.selfDivide(i,0)}}else if(2==arguments.length){var r=arguments[0],n=arguments[1],o=null,a=null,s=null,l=null,h=null,u=null,c=null,f=null;return h=this._hi/r,f=(o=(u=e.SPLIT*h)-(o=u-h))*(s=(f=e.SPLIT*r)-(s=f-r))-(c=h*r)+o*(l=r-s)+(a=h-o)*s+a*l,f=h+(u=(this._hi-c-f+this._lo-h*n)/r),this._hi=f,this._lo=h-f+u,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t=arguments[0],i=null,r=null,n=null,o=null,a=null,s=null,l=null,h=null;return r=(a=this._hi/t._hi)-(i=(s=e.SPLIT*a)-(i=s-a)),h=i*(n=(h=e.SPLIT*t._hi)-(n=h-t._hi))-(l=a*t._hi)+i*(o=t._hi-n)+r*n+r*o,new e(h=a+(s=(this._hi-l-h+this._lo-a*t._lo)/t._hi),a-h+s)}if("number"==typeof arguments[0]){var u=arguments[0];return O.isNaN(u)?e.createNaN():e.copy(this).selfDivide(u,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var i=new e(this),r=e.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(i),(n/=2)>0&&(i=i.sqr());else r=i;return t<0?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),i=0;return t===this._hi&&(i=Math.ceil(this._lo)),new e(t,i)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var i=arguments[0];return this.init(i),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),i=this._hi*t,r=e.valueOf(i),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)}},{key:"selfAdd",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var i=arguments[0],r=null,n=null,o=null,a=null,s=null,l=null;return a=(o=this._hi+i)-(s=o-this._hi),n=(l=(a=i-s+(this._hi-a))+this._lo)+(o-(r=o+l)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2==arguments.length){var h=arguments[0],u=arguments[1],c=null,f=null,d=null,p=null,m=null,g=null,y=null;p=this._hi+h,f=this._lo+u,m=p-(g=p-this._hi),d=f-(y=f-this._lo);var v=(c=p+(g=(m=h-g+(this._hi-m))+f))+(g=(d=u-y+(this._lo-d))+(g+(p-c))),_=g+(c-v);return this._hi=v,this._lo=_,this}}},{key:"selfMultiply",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var i=arguments[0];return this.selfMultiply(i,0)}}else if(2==arguments.length){var r=arguments[0],n=arguments[1],o=null,a=null,s=null,l=null,h=null,u=null;o=(h=e.SPLIT*this._hi)-this._hi,u=e.SPLIT*r,o=h-o,a=this._hi-o,s=u-r;var c=(h=this._hi*r)+(u=o*(s=u-s)-h+o*(l=r-s)+a*s+a*l+(this._hi*n+this._lo*r)),f=u+(o=h-c);return this._hi=c,this._lo=f,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),i=0;return t===this._hi&&(i=Math.floor(this._lo)),new e(t,i)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var i=arguments[0];return O.isNaN(i)?e.createNaN():e.copy(this).selfMultiply(i,0)}}},{key:"isNaN",value:function(){return O.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var i=[,].fill(null),r=this.extractSignificantDigits(!0,i),n=i[0]+1,o=r;if("."===r.charAt(0))o="0"+r;else if(n<0)o="0."+e.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var a=n-r.length;o=r+e.stringOfChar("0",a)+".0"}return this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var t,i,r,n,o=null,a=null,s=null,l=null;t=(r=1/this._hi)-(o=(s=e.SPLIT*r)-(o=s-r)),a=(l=e.SPLIT*this._hi)-this._hi;var h=r+(s=(1-(n=r*this._hi)-(l=o*(a=l-a)-n+o*(i=this._hi-a)+t*a+t*i)-r*this._lo)/this._hi);return new e(h,r-h+s)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var i=[,].fill(null),r=this.extractSignificantDigits(!1,i),n=e.SCI_NOT_EXPONENT_CHAR+i[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var o="";r.length>1&&(o=r.substring(1));var a=r.charAt(0)+"."+o;return this.isNegative()?"-"+a+n:a+n}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var i=arguments[0];return e.copy(this).selfAdd(i)}}},{key:"init",value:function(){if(1==arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var i=arguments[0];this._hi=i._hi,this._lo=i._lo}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[S,w,M]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0==arguments.length)this.init(0);else if(1==arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var i=arguments[0];this.init(i)}else if("string"==typeof arguments[0]){var r=arguments[0];e.constructor_.call(this,e.parse(r))}}else if(2==arguments.length){var n=arguments[0],o=arguments[1];this.init(n,o)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(i),e.valueOf(r),e.valueOf(n))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var o=arguments[1],a=arguments[2],s=arguments[3];return arguments[0].multiply(s).selfSubtract(o.multiply(a))}}},{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var i=0,r=t.length;th.isWhitespace(t.charAt(i));)i++;var n=!1;if(i<r){var o=t.charAt(i);"-"!==o&&"+"!==o||(i++,"-"===o&&(n=!0))}for(var a=new e,s=0,l=0,h=0,u=!1;!(i>=r);){var c=t.charAt(i);if(i++,th.isDigit(c)){var f=c-"0";a.selfMultiply(e.TEN),a.selfAdd(f),s++}else{if("."!==c){if("e"===c||"E"===c){var d=t.substring(i);try{h=tl.parseInt(d)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+d+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+i+" in string "+t)}l=s,u=!0}}var p=a;u||(l=s);var m=s-l-h;if(0===m)p=a;else if(m>0){var g=e.TEN.pow(m);p=a.divide(g)}else if(m<0){var y=e.TEN.pow(-m);p=a.multiply(y)}return n?p.negate():p}},{key:"createNaN",value:function(){return new e(O.NaN,O.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),i=Math.trunc(Math.floor(Math.log(e)/Math.log(10)));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:"stringOfChar",value:function(t,e){for(var i=new ts,r=0;r<e;r++)i.append(t);return i.toString()}}]),e}();tu.PI=new tu(3.141592653589793,12246467991473532e-32),tu.TWO_PI=new tu(6.283185307179586,24492935982947064e-32),tu.PI_2=new tu(1.5707963267948966,6123233995736766e-32),tu.E=new tu(2.718281828459045,14456468917292502e-32),tu.NaN=new tu(O.NaN,O.NaN),tu.EPS=123259516440783e-46,tu.SPLIT=134217729,tu.MAX_PRINT_DIGITS=32,tu.TEN=tu.valueOf(10),tu.ONE=tu.valueOf(1),tu.SCI_NOT_EXPONENT_CHAR="E",tu.SCI_NOT_ZERO="0.0E0";var tc=function(){function e(){t(this,e)}return r(e,null,[{key:"orientationIndex",value:function(t,i,r){var n=e.orientationIndexFilter(t,i,r);if(n<=1)return n;var o=tu.valueOf(i.x).selfAdd(-t.x),a=tu.valueOf(i.y).selfAdd(-t.y),s=tu.valueOf(r.x).selfAdd(-i.x),l=tu.valueOf(r.y).selfAdd(-i.y);return o.selfMultiply(l).selfSubtract(a.selfMultiply(s)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof tu&&arguments[2]instanceof tu&&arguments[0]instanceof tu&&arguments[1]instanceof tu){var t=arguments[1],e=arguments[2],i=arguments[3];return arguments[0].multiply(i).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1],o=arguments[2],a=arguments[3],s=tu.valueOf(r),l=tu.valueOf(n),h=tu.valueOf(o),u=tu.valueOf(a);return s.multiply(u).selfSubtract(l.multiply(h)).signum()}}},{key:"intersection",value:function(t,e,i,r){var n=new tu(t.y).selfSubtract(e.y),o=new tu(e.x).selfSubtract(t.x),a=new tu(t.x).selfMultiply(e.y).selfSubtract(new tu(e.x).selfMultiply(t.y)),s=new tu(i.y).selfSubtract(r.y),l=new tu(r.x).selfSubtract(i.x),h=new tu(i.x).selfMultiply(r.y).selfSubtract(new tu(r.x).selfMultiply(i.y)),u=o.multiply(h).selfSubtract(l.multiply(a)),c=s.multiply(a).selfSubtract(n.multiply(h)),f=n.multiply(l).selfSubtract(s.multiply(o)),d=u.selfDivide(f).doubleValue(),p=c.selfDivide(f).doubleValue();return O.isNaN(d)||O.isInfinite(d)||O.isNaN(p)||O.isInfinite(p)?null:new Z(d,p)}},{key:"orientationIndexFilter",value:function(t,i,r){var n=null,o=(t.x-r.x)*(i.y-r.y),a=(t.y-r.y)*(i.x-r.x),s=o-a;if(o>0){if(a<=0)return e.signum(s);n=o+a}else{if(!(o<0)||a>=0)return e.signum(s);n=-o-a}var l=e.DP_SAFE_EPSILON*n;return s>=l||-s>=l?e.signum(s):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),e}();tc.DP_SAFE_EPSILON=1e-15;var tf=function(){function e(){t(this,e)}return r(e,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return O.NaN}},{key:"setOrdinate",value:function(t,e,i){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):O.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[M]}}]),e}();tf.X=0,tf.Y=1,tf.Z=2,tf.M=3;var td=function(){function e(){t(this,e)}return r(e,null,[{key:"index",value:function(t,e,i){return tc.orientationIndex(t,e,i)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],i=t.length-1;if(i<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,o=1;o<=i;o++){var a=t[o];a.y>r.y&&(r=a,n=o)}var s=n;do(s-=1)<0&&(s=i);while(t[s].equals2D(r)&&s!==n)var l=n;do l=(l+1)%i;while(t[l].equals2D(r)&&l!==n)var h=t[s],u=t[l];if(h.equals2D(r)||u.equals2D(r)||h.equals2D(u))return!1;var c=e.index(h,r,u);return 0===c?h.x>u.x:c>0}if(ta(arguments[0],tf)){var f=arguments[0],d=f.size()-1;if(d<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var p=f.getCoordinate(0),m=0,g=1;g<=d;g++){var y=f.getCoordinate(g);y.y>p.y&&(p=y,m=g)}var v=null,_=m;do(_-=1)<0&&(_=d),v=f.getCoordinate(_);while(v.equals2D(p)&&_!==m)var x=null,w=m;do w=(w+1)%d,x=f.getCoordinate(w);while(x.equals2D(p)&&w!==m)if(v.equals2D(p)||x.equals2D(p)||v.equals2D(x))return!1;var M=e.index(v,p,x);return 0===M?v.x>x.x:M>0}}}]),e}();td.CLOCKWISE=-1,td.RIGHT=td.CLOCKWISE,td.COUNTERCLOCKWISE=1,td.LEFT=td.COUNTERCLOCKWISE,td.COLLINEAR=0,td.STRAIGHT=td.COLLINEAR;var tp=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();j.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],i=t[this._minIndex+1],r=td.index(this._minCoord,i,e),n=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&r===td.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&r===td.CLOCKWISE)&&(n=!0),n&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length||i[e].y===i[e+1].y)return -1;var r=te.LEFT;return i[e].y<i[e+1].y&&(r=te.RIGHT),r}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();i.isForward()&&this.checkForRightmostCoordinate(i)}j.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===te.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),tm=function(e){n(o,e);var i=f(o);function o(e,r){var n;return t(this,o),(n=i.call(this,r?e+" [ "+r+" ]":e)).pt=r?new Z(r):void 0,n.name="TopologyException",n}return r(o,[{key:"getCoordinate",value:function(){return this.pt}}]),o}(B),tg=function(){function e(){t(this,e),this.array=[]}return r(e,[{key:"addLast",value:function(t){this.array.push(t)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),e}(),ty=function(e,i){n(a,e);var o=f(a);function a(e){var i;return t(this,a),(i=o.call(this)).array=[],e instanceof $&&i.addAll(e),i}return r(a,[{key:"interfaces_",get:function(){return[tn,$]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1==arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,i=y(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.array.push(r)}}catch(t){i.e(t)}finally{i.f()}}},{key:"set",value:function(t,e){var i=this.array[t];return this.array[t]=e,i}},{key:"iterator",value:function(){return new tv(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new tr;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(t){t?this.array.sort(function(e,i){return t.compare(e,i)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,i=this.array.length;e<i;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:i,value:function(){return this.array.values()}}]),a}(tn,Symbol.iterator),tv=function(){function e(i){t(this,e),this.arrayList=i,this.position=0}return r(e,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Y;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),t_=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();){var r=i.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new tm("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var o=n.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(te.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(te.RIGHT)>=1&&0>=e.getDepth(te.LEFT)&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new Q,i=new tg,r=t.getNode();for(i.addLast(r),e.add(r),t.setVisited(!0);!i.isEmpty();){var n=i.removeFirst();e.add(n),this.computeNodeDepth(n);for(var o=n.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(i.addLast(s),e.add(s))}}}}},{key:"compareTo",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new H,e=this._dirEdgeList.iterator();e.hasNext();)for(var i=e.next().getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new to;for(e.add(t);!e.empty();){var i=e.pop();this.add(i,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth(te.LEFT,t.getDepth(te.RIGHT)),e.setDepth(te.RIGHT,t.getDepth(te.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var r=i.next();this._dirEdgeList.add(r);var n=r.getSym().getNode();n.isVisited()||e.push(n)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new ty,this._nodes=new ty,this._rightMostCoord=null,this._env=null,this._finder=new tp}}]),e}(),tb=function(){function e(){t(this,e)}return r(e,null,[{key:"intersection",value:function(t,e,i,r){var n=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,s=t.y>e.y?t.y:e.y,l=i.x<r.x?i.x:r.x,h=i.y<r.y?i.y:r.y,u=i.x>r.x?i.x:r.x,c=i.y>r.y?i.y:r.y,f=((n>l?n:l)+(a<u?a:u))/2,d=((o>h?o:h)+(s<c?s:c))/2,p=t.x-f,m=t.y-d,g=e.x-f,y=e.y-d,v=i.x-f,_=i.y-d,b=r.x-f,x=r.y-d,w=m-y,M=g-p,S=p*y-g*m,k=_-x,E=b-v,I=v*x-b*_,P=w*E-k*M,T=(M*I-E*S)/P,A=(k*S-w*I)/P;return O.isNaN(T)||O.isInfinite(T)||O.isNaN(A)||O.isInfinite(A)?null:new Z(T+f,A+d)}}]),e}(),tx=function(){function e(){t(this,e)}return r(e,null,[{key:"arraycopy",value:function(t,e,i,r,n){for(var o=0,a=e;a<e+n;a++)i[r+o]=t[a],o++}},{key:"getProperty",value:function(t){return({"line.separator":"\n"})[t]}}]),e}(),tw=function(){function e(){t(this,e)}return r(e,null,[{key:"log10",value:function(t){var i=Math.log(t);return O.isInfinite(i)||O.isNaN(i)?i:i/e.LOG_10}},{key:"min",value:function(t,e,i,r){var n=t;return e<n&&(n=e),i<n&&(n=i),r<n&&(n=r),n}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],n=arguments[1],o=arguments[2];return r<n?n:r>o?o:r}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3==arguments.length){var t=arguments[1],e=arguments[2],i=arguments[0];return t>i&&(i=t),e>i&&(i=e),i}if(4==arguments.length){var r=arguments[1],n=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),n>a&&(a=n),o>a&&(a=o),a}}},{key:"average",value:function(t,e){return(t+e)/2}}]),e}();tw.LOG_10=Math.log(10);var tM=function(){function e(){t(this,e)}return r(e,null,[{key:"segmentToSegment",value:function(t,i,r,n){if(t.equals(i))return e.pointToSegment(t,r,n);if(r.equals(n))return e.pointToSegment(n,t,i);var o=!1;if(H.intersects(t,i,r,n)){var a=(i.x-t.x)*(n.y-r.y)-(i.y-t.y)*(n.x-r.x);if(0===a)o=!0;else{var s=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),l=((t.y-r.y)*(i.x-t.x)-(t.x-r.x)*(i.y-t.y))/a,h=s/a;(h<0||h>1||l<0||l>1)&&(o=!0)}}else o=!0;return o?tw.min(e.pointToSegment(t,r,n),e.pointToSegment(i,r,n),e.pointToSegment(r,t,i),e.pointToSegment(n,t,i)):0}},{key:"pointToSegment",value:function(t,e,i){if(e.x===i.x&&e.y===i.y)return t.distance(e);var r=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return n<=0?t.distance(e):n>=1?t.distance(i):Math.abs(((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/r)*Math.sqrt(r)}},{key:"pointToLinePerpendicular",value:function(t,e,i){var r=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y);return Math.abs(((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/r)*Math.sqrt(r)}},{key:"pointToSegmentString",value:function(t,i){if(0===i.length)throw new b("Line array must contain at least one vertex");for(var r=t.distance(i[0]),n=0;n<i.length-1;n++){var o=e.pointToSegment(t,i[n],i[n+1]);o<r&&(r=o)}return r}}]),e}(),tS=function(){function e(){t(this,e)}return r(e,[{key:"create",value:function(){if(1==arguments.length)arguments[0]instanceof Array||ta(arguments[0],tf);else if(2==arguments.length);else if(3==arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),e}(),tk=function(){function e(){t(this,e)}return r(e,[{key:"filter",value:function(t){}}]),e}(),tE=function(){function e(){t(this,e)}return r(e,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var i=0,r=new Z;t.getCoordinate(0,r);for(var n=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,h=s-n,u=l-o;i+=Math.sqrt(h*h+u*u),n=s,o=l}return i}}]),e}(),tI=function e(){t(this,e)},tP=function(){function e(){t(this,e)}return r(e,null,[{key:"copyCoord",value:function(t,e,i,r){for(var n=Math.min(t.getDimension(),i.getDimension()),o=0;o<n;o++)i.setOrdinate(r,o,t.getOrdinate(e,o))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,tf.X)===t.getOrdinate(e-1,tf.X)&&t.getOrdinate(0,tf.Y)===t.getOrdinate(e-1,tf.Y)}},{key:"scroll",value:function(){if(2==arguments.length){if(ta(arguments[0],tf)&&Number.isInteger(arguments[1])){var t=arguments[0],i=arguments[1];e.scroll(t,i,e.isRing(t))}else if(ta(arguments[0],tf)&&arguments[1]instanceof Z){var r=arguments[0],n=arguments[1],o=e.indexOf(n,r);if(o<=0)return null;e.scroll(r,o)}}else if(3==arguments.length){var a=arguments[0],s=arguments[1],l=arguments[2];if(s<=0)return null;for(var h=a.copy(),u=l?a.size()-1:a.size(),c=0;c<u;c++)for(var f=0;f<a.getDimension();f++)a.setOrdinate(c,f,h.getOrdinate((s+c)%u,f));if(l)for(var d=0;d<a.getDimension();d++)a.setOrdinate(u,d,a.getOrdinate(0,d))}}},{key:"isEqual",value:function(t,e){var i=t.size();if(i!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),n=0;n<i;n++)for(var o=0;o<r;o++){var a=t.getOrdinate(n,o),s=e.getOrdinate(n,o);if(!(t.getOrdinate(n,o)===e.getOrdinate(n,o)||O.isNaN(a)&&O.isNaN(s)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1==arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3==arguments.length){for(var i=arguments[0],r=arguments[2],n=-1,o=null,a=arguments[1];a<=r;a++){var s=i.getCoordinate(a);(null===o||o.compareTo(s)>0)&&(o=s,n=a)}return n}}},{key:"extend",value:function(t,i,r){var n=t.create(r,i.getDimension()),o=i.size();if(e.copy(i,0,n,0,o),o>0)for(var a=o;a<r;a++)e.copy(i,o-1,n,a,1);return n}},{key:"reverse",value:function(t){for(var i=t.size()-1,r=Math.trunc(i/2),n=0;n<=r;n++)e.swap(t,n,i-n)}},{key:"swap",value:function(t,e,i){if(e===i)return null;for(var r=0;r<t.getDimension();r++){var n=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(i,r)),t.setOrdinate(i,r,n)}}},{key:"copy",value:function(t,i,r,n,o){for(var a=0;a<o;a++)e.copyCoord(t,i+a,r,n+a)}},{key:"ensureValidRing",value:function(t,i){var r=i.size();return 0===r?i:r<=3?e.createClosedRing(t,i,4):i.getOrdinate(0,tf.X)===i.getOrdinate(r-1,tf.X)&&i.getOrdinate(0,tf.Y)===i.getOrdinate(r-1,tf.Y)?i:e.createClosedRing(t,i,r+1)}},{key:"indexOf",value:function(t,e){for(var i=0;i<e.size();i++)if(t.x===e.getOrdinate(i,tf.X)&&t.y===e.getOrdinate(i,tf.Y))return i;return -1}},{key:"createClosedRing",value:function(t,i,r){var n=t.create(r,i.getDimension()),o=i.size();e.copy(i,0,n,0,o);for(var a=o;a<r;a++)e.copy(i,0,n,a,1);return n}},{key:"minCoordinate",value:function(t){for(var e=null,i=0;i<t.size();i++){var r=t.getCoordinate(i);(null===e||e.compareTo(r)>0)&&(e=r)}return e}}]),e}(),tT=function(){function e(){t(this,e)}return r(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new b("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(th.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new b("Unknown dimension symbol: "+t)}}]),e}();tT.P=0,tT.L=1,tT.A=2,tT.FALSE=-1,tT.TRUE=-2,tT.DONTCARE=-3,tT.SYM_FALSE="F",tT.SYM_TRUE="T",tT.SYM_DONTCARE="*",tT.SYM_P="0",tT.SYM_L="1",tT.SYM_A="2";var tA=function(){function e(){t(this,e)}return r(e,[{key:"filter",value:function(t){}}]),e}(),tC=function(){function e(){t(this,e)}return r(e,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),e}(),tL=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new H:this._points.expandEnvelope(new H)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new a(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),e))return!1;return!0}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var i=this._points.copy();tP.reverse(i),this._points=i}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?tT.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return tP.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return W.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return tE.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1==arguments.length){for(var t=arguments[0],e=0,i=0;e<this._points.size()&&i<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i));if(0!==r)return r;e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2==arguments.length){var n=arguments[0];return arguments[1].compare(this._points,n._points)}}},{key:"apply",value:function(){if(ta(arguments[0],tk))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(ta(arguments[0],tC)){var i=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(i.filter(this._points,r),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else(ta(arguments[0],tA)||ta(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new K}},{key:"isEquivalentClass",value:function(t){return t instanceof a}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return W.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new b("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[tI]}}],[{key:"constructor_",value:function(){if(this._points=null,0==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];W.constructor_.call(this,e),this.init(t)}}}]),a}(W),tR=function e(){t(this,e)},tN=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new H;var t=new H;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new a(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return tT.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return W.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1==arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2==arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(ta(arguments[0],tk)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(ta(arguments[0],tC)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(ta(arguments[0],tA)||ta(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return W.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),j.isTrue(1>=t.size()),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[tR]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];W.constructor_.call(this,e),this.init(t)}}]),a}(W),tz=function(){function e(){t(this,e)}return r(e,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(ta(arguments[0],tf)){var i=arguments[0];return Math.abs(e.ofRingSigned(i))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,r=1;r<t.length-1;r++){var n=t[r].x-i,o=t[r+1].y;e+=n*(t[r-1].y-o)}return e/2}if(ta(arguments[0],tf)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new Z,h=new Z,u=new Z;a.getCoordinate(0,h),a.getCoordinate(1,u);var c=h.x;u.x-=c;for(var f=0,d=1;d<s-1;d++)l.y=h.y,h.x=u.x,h.y=u.y,a.getCoordinate(d+1,u),u.x-=c,f+=h.x*(l.y-u.y);return f/2}}}]),e}(),tO=function(){function e(){t(this,e)}return r(e,null,[{key:"sort",value:function(){var t=arguments,e=arguments[0];if(1==arguments.length)e.sort(function(t,e){return t.compareTo(e)});else if(2==arguments.length)e.sort(function(e,i){return t[1].compare(e,i)});else if(3==arguments.length){var i=e.slice(arguments[1],arguments[2]);i.sort();var r=e.slice(0,arguments[1]).concat(i,e.slice(arguments[2],e.length));e.splice(0,e.length);var n,o=y(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;e.push(a)}}catch(t){o.e(t)}finally{o.f()}}else if(4==arguments.length){var s=e.slice(arguments[1],arguments[2]);s.sort(function(e,i){return t[3].compare(e,i)});var l=e.slice(0,arguments[1]).concat(s,e.slice(arguments[2],e.length));e.splice(0,e.length);var h,u=y(l);try{for(u.s();!(h=u.n()).done;){var c=h.value;e.push(c)}}catch(t){u.e(t)}finally{u.f()}}}},{key:"asList",value:function(t){var e,i=new ty,r=y(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;i.add(n)}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),e}(),tD=function e(){t(this,e)},tB=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=Array(this.getNumPoints()).fill(null),e=-1,i=this._shell.getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];for(var n=0;n<this._holes.length;n++)for(var o=this._holes[n].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t}},{key:"getArea",value:function(){var t;t=0+tz.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=tz.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=Array(this._holes.length).fill(null),i=0;i<this._holes.length;i++)e[i]=this._holes[i].copy();return new a(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),i=0;i<5;i++){var r=t.getX(i);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var n=t.getY(i);if(n!==e.getMinY()&&n!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),h=t.getY(s);if(l!==o==(h!==a))return!1;o=l,a=h}return!0}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t,r=this._shell,n=i._shell;if(!r.equalsExact(n,e)||this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],e))return!1;return!0}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0==arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);tO.sort(this._holes)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];if(e.isEmpty())return null;var r=e.getCoordinateSequence(),n=tP.minCoordinateIndex(r,0,r.size()-2);tP.scroll(r,n,!0),td.isCCW(r)===i&&tP.reverse(r)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=Array(this.getNumInteriorRing()).fill(null),i=0;i<e.length;i++)e[i]=this.getInteriorRingN(i).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return W.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t;t=0+this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var i=t.copy();return this.normalize(i,e),i}},{key:"compareToSameClass",value:function(){if(1==arguments.length){var t=arguments[0],e=this._shell,i=t._shell;return e.compareToSameClass(i)}if(2==arguments.length){var r=arguments[1],n=arguments[0],o=this._shell,a=n._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),h=n.getNumInteriorRing(),u=0;u<l&&u<h;){var c=this.getInteriorRingN(u),f=n.getInteriorRingN(u),d=c.compareToSameClass(f,r);if(0!==d)return d;u++}return u<l?1:u<h?-1:0}}},{key:"apply",value:function(){if(ta(arguments[0],tk)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(ta(arguments[0],tC)){var i=arguments[0];if(this._shell.apply(i),!i.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(ta(arguments[0],tA))arguments[0].filter(this);else if(ta(arguments[0],x)){var n=arguments[0];n.filter(this),this._shell.apply(n);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(n)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return W.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[tD]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(W.constructor_.call(this,i),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),W.hasNullElements(e))throw new b("holes must not contain null elements");if(t.isEmpty()&&W.hasNonEmptyElements(e))throw new b("shell is empty but holes are not");this._shell=t,this._holes=e}}]),a}(W),tF=function(e){n(o,e);var i=f(o);function o(e){var r;return t(this,o),(r=i.call(this)).array=[],e instanceof $&&r.addAll(e),r}return r(o,[{key:"contains",value:function(t){var e,i=y(this.array);try{for(i.s();!(e=i.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){i.e(t)}finally{i.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,i=this.array.length;e<i;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,i=y(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.add(r)}}catch(t){i.e(t)}finally{i.f()}return!0}},{key:"remove",value:function(){throw new K}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new tj(this.array)}}]),o}(function(e){n(r,e);var i=f(r);function r(){return t(this,r),i.apply(this,arguments)}return r}(J)),tj=function(){function e(i){t(this,e),this.array=i,this.position=0}return r(e,[{key:"next",value:function(){if(this.position===this.array.length)throw new Y;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new K}}]),e}(),tq=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"computeEnvelopeInternal",value:function(){for(var t=new H,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=Array(this.getNumPoints()).fill(null),e=-1,i=0;i<this._geometries.length;i++)for(var r=this._geometries[i].getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new a(t,this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var i=t;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],e))return!1;return!0}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();tO.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=tT.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new ty(t),i=0;i<t;i++)e.add(this._geometries[i].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return W.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=tT.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1==arguments.length){var t=arguments[0],e=new tF(tO.asList(this._geometries)),i=new tF(tO.asList(t._geometries));return this.compare(e,i)}if(2==arguments.length){for(var r=arguments[1],n=arguments[0],o=this.getNumGeometries(),a=n.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),h=n.getGeometryN(s),u=l.compareToSameClass(h,r);if(0!==u)return u;s++}return s<o?1:s<a?-1:0}}},{key:"apply",value:function(){if(ta(arguments[0],tk))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(ta(arguments[0],tC)){var i=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(ta(arguments[0],tA)){var n=arguments[0];n.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(n)}else if(ta(arguments[0],x)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}}},{key:"getBoundary",value:function(){return W.checkNotGeometryCollection(this),j.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return W.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];if(W.constructor_.call(this,e),null===t&&(t=[]),W.hasNullElements(t))throw new b("geometries must not contain null elements");this._geometries=t}}}]),a}(W),tV=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new a(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&d(o(a.prototype),"equalsExact",this).call(this,t,e)}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1==arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return d(o(a.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return tT.FALSE}},{key:"getTypeCode",value:function(){return W.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return W.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[tR]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tq.constructor_.call(this,t,e)}}]),a}(tq),tU=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"copyInternal",value:function(){return new a(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return tT.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||d(o(a.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return tP.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return W.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!d(o(a.prototype),"isClosed",this).call(this))throw new b("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<a.MINIMUM_VALID_SIZE)throw new b("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return W.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tL.constructor_.call(this,t,e),this.validateConstruction()}}]),a}(tL);tU.MINIMUM_VALID_SIZE=4;var tZ=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return Z.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y}throw new b("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new b("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0==arguments.length)Z.constructor_.call(this);else if(1==arguments.length){if(arguments[0]instanceof o){var t=arguments[0];Z.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof Z){var e=arguments[0];Z.constructor_.call(this,e.x,e.y)}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];Z.constructor_.call(this,i,r,Z.NULL_ORDINATE)}}}]),o}(Z);tZ.X=0,tZ.Y=1,tZ.Z=-1,tZ.M=-1;var tG=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.M:this._m=e;break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return Z.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new b("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new b("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0==arguments.length)Z.constructor_.call(this),this._m=0;else if(1==arguments.length){if(arguments[0]instanceof o){var t=arguments[0];Z.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof Z){var e=arguments[0];Z.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];Z.constructor_.call(this,i,r,Z.NULL_ORDINATE),this._m=n}}}]),o}(Z);tG.X=0,tG.Y=1,tG.Z=-1,tG.M=2;var tH=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case Z.X:this.x=e;break;case Z.Y:this.y=e;break;case Z.Z:this.z=e;break;case Z.M:this._m=e;break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case Z.X:return this.x;case Z.Y:return this.y;case Z.Z:return this.getZ();case Z.M:return this.getM()}throw new b("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0==arguments.length)Z.constructor_.call(this),this._m=0;else if(1==arguments.length){if(arguments[0]instanceof o){var t=arguments[0];Z.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof Z){var e=arguments[0];Z.constructor_.call(this,e),this._m=this.getM()}}else if(4==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2],a=arguments[3];Z.constructor_.call(this,i,r,n),this._m=a}}}]),o}(Z),tW=function(){function e(){t(this,e)}return r(e,null,[{key:"measures",value:function(t){return t instanceof tZ?0:t instanceof tG||t instanceof tH?1:0}},{key:"dimension",value:function(t){return t instanceof tZ?2:t instanceof tG?3:t instanceof tH?4:3}},{key:"create",value:function(){if(1==arguments.length){var t=arguments[0];return e.create(t,0)}if(2==arguments.length){var i=arguments[0],r=arguments[1];return 2===i?new tZ:3===i&&0===r?new Z:3===i&&1===r?new tG:4===i&&1===r?new tH:new Z}}}]),e}(),tX=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2==arguments.length&&"boolean"==typeof arguments[1]&&ta(arguments[0],$)){for(var t=arguments[1],e=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),t),e=!0;return e}return d(o(a.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=d(o(a.prototype),"clone",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:"toCoordinateArray",value:function(){if(0==arguments.length)return this.toArray(a.coordArrayType);if(1==arguments.length){if(arguments[0])return this.toArray(a.coordArrayType);for(var t=this.size(),e=Array(t).fill(null),i=0;i<t;i++)e[i]=this.get(t-i-1);return e}}},{key:"add",value:function(){if(1==arguments.length){var t=arguments[0];return d(o(a.prototype),"add",this).call(this,t)}if(2==arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],i=arguments[1];return this.add(e,i,!0),!0}if(arguments[0]instanceof Z&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;d(o(a.prototype),"add",this).call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var n=arguments[0],s=arguments[1];return this.add(n,s),!0}}else if(3==arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],h=arguments[1];if(arguments[2])for(var u=0;u<l.length;u++)this.add(l[u],h);else for(var c=l.length-1;c>=0;c--)this.add(l[c],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Z){var f=arguments[0],p=arguments[1];if(!arguments[2]){var m=this.size();if(m>0&&(f>0&&this.get(f-1).equals2D(p)||f<m&&this.get(f).equals2D(p)))return null}d(o(a.prototype),"add",this).call(this,f,p)}}else if(4==arguments.length){var g=arguments[0],y=arguments[1],v=arguments[2],_=arguments[3],b=1;v>_&&(b=-1);for(var x=v;x!==_;x+=b)this.add(g[x],y);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0==arguments.length);else if(1==arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];this.ensureCapacity(e.length),this.add(e,i)}}}]),a}(ty);tX.coordArrayType=[].fill(null);var t$=function(){function e(){t(this,e)}return r(e,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,i){for(var r=0;r<t.length;r++){var n=t[r];if(0>e.indexOf(n,i))return n}return null}},{key:"scroll",value:function(t,i){var r=e.indexOf(i,t);if(r<0)return null;var n=Array(t.length).fill(null);tx.arraycopy(t,r,n,0,t.length-r),tx.arraycopy(t,0,n,t.length-r,r),tx.arraycopy(n,0,t,0,t.length)}},{key:"equals",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3==arguments.length){var r=arguments[0],n=arguments[1],o=arguments[2];if(r===n)return!0;if(null===r||null===n||r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],n[a]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var i=new tX,r=0;r<t.length;r++)e.intersects(t[r])&&i.add(t[r],!0);return i.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,i=0,r=y(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;i=Math.max(i,tW.measures(n))}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return e.hasRepeatedPoints(t)?new tX(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,i=Math.trunc(e/2),r=0;r<=i;r++){var n=t[r];t[r]=t[e-r],t[e-r]=n}}},{key:"removeNull",value:function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++;var r=Array(e).fill(null);if(0===e)return r;for(var n=0,o=0;o<t.length;o++)null!==t[o]&&(r[n++]=t[o]);return r}},{key:"copyDeep",value:function(){if(1==arguments.length){for(var t=arguments[0],e=Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=t[i].copy();return e}if(5==arguments.length)for(var r=arguments[0],n=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=r[n+l].copy()}},{key:"isEqualReversed",value:function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=e[t.length-i-1];if(0!==r.compareTo(n))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new H,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,i=0,r=y(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;i=Math.max(i,tW.dimension(n))}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return -1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,r=t[e].compareTo(t[i]);if(0!==r)return r}return 1}},{key:"compare",value:function(t,e){for(var i=0;i<t.length&&i<e.length;){var r=t[i].compareTo(e[i]);if(0!==r)return r;i++}return i<e.length?-1:i<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e}},{key:"extract",value:function(t,e,i){e=tw.clamp(e,0,t.length);var r=(i=tw.clamp(i,-1,t.length))-e+1;i<0&&(r=0),e>=t.length&&(r=0),i<e&&(r=0);var n=Array(r).fill(null);if(0===r)return n;for(var o=0,a=e;a<=i;a++)n[o++]=t[a];return n}}]),e}(),tY=function(){function e(){t(this,e)}return r(e,[{key:"compare",value:function(t,e){var i=t,r=e;return t$.compare(i,r)}},{key:"interfaces_",get:function(){return[D]}}]),e}(),tK=function(){function e(){t(this,e)}return r(e,[{key:"compare",value:function(t,e){var i=t,r=e;if(i.length<r.length)return -1;if(i.length>r.length)return 1;if(0===i.length)return 0;var n=t$.compare(i,r);return t$.isEqualReversed(i,r)?0:n}},{key:"OLDcompare",value:function(t,e){var i=t,r=e;if(i.length<r.length)return -1;if(i.length>r.length)return 1;if(0===i.length)return 0;for(var n=t$.increasingDirection(i),o=t$.increasingDirection(r),a=n>0?0:i.length-1,s=o>0?0:i.length-1,l=0;l<i.length;l++){var h=i[a].compareTo(r[s]);if(0!==h)return h;a+=n,s+=o}return 0}},{key:"interfaces_",get:function(){return[D]}}]),e}();t$.ForwardComparator=tY,t$.BidirectionalComparator=tK,t$.coordArrayType=[].fill(null);var tJ=function(){function e(i){t(this,e),this.str=i}return r(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),tQ=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():O.NaN}},{key:"setOrdinate",value:function(t,e,i){switch(e){case tf.X:this._coordinates[t].x=i;break;case tf.Y:this._coordinates[t].y=i;break;default:this._coordinates[t].setOrdinate(e,i)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():O.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case tf.X:return this._coordinates[t].x;case tf.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1==arguments.length){var t=arguments[0];return this._coordinates[t]}if(2==arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return tW.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=Array(this.size()).fill(null),i=0;i<this._coordinates.length;i++){var r=this.createCoordinate();r.setCoordinate(this._coordinates[i]),t[i]=r}return new e(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new tJ(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[tf,S]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,t$.dimension(t),t$.measures(t))}else if(Number.isInteger(arguments[0])){var i=arguments[0];this._coordinates=Array(i).fill(null);for(var r=0;r<i;r++)this._coordinates[r]=new Z}else if(ta(arguments[0],tf)){var n=arguments[0];if(null===n)return this._coordinates=[].fill(null),null;this._dimension=n.getDimension(),this._measures=n.getMeasures(),this._coordinates=Array(n.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=n.getCoordinateCopy(o)}}else if(2==arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];e.constructor_.call(this,a,s,t$.measures(a))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],h=arguments[1];this._coordinates=Array(l).fill(null),this._dimension=h;for(var u=0;u<l;u++)this._coordinates[u]=tW.create(h)}}else if(3==arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1],d=arguments[2];this._dimension=f,this._measures=d,this._coordinates=null===c?[].fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],m=arguments[1],g=arguments[2];this._coordinates=Array(p).fill(null),this._dimension=m,this._measures=g;for(var y=0;y<p;y++)this._coordinates[y]=this.createCoordinate()}}}}]),e}(),t0=function(){function e(){t(this,e)}return r(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1==arguments.length){if(arguments[0]instanceof Array||ta(arguments[0],tf))return new tQ(arguments[0])}else{if(2==arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new tQ(arguments[0],t)}if(3==arguments.length){var e=arguments[2],i=arguments[1]-e;return e>1&&(e=1),i>3&&(i=3),i<2&&(i=2),new tQ(arguments[0],i+e,e)}}}},{key:"interfaces_",get:function(){return[tS,S]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();t0.instanceObject=new t0;var t1=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new a(t,this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&d(o(a.prototype),"equalsExact",this).call(this,t,e)}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return W.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new ty,e=0;e<this._geometries.length;e++)for(var i=this._geometries[e].getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var n=Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(n))}},{key:"getGeometryType",value:function(){return W.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[tD]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tq.constructor_.call(this,t,e)}}]),a}(tq),t2=function(){function e(){t(this,e)}return r(e,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),e}(),t6=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),(e=i.call(this)).map=new Map,e}return r(o,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new ty,e=this.map.values(),i=e.next();!i.done;)t.add(i.value),i=e.next();return t}},{key:"entrySet",value:function(){var t=new Q;return this.map.entries().forEach(function(e){return t.add(e)}),t}},{key:"size",value:function(){return this.map.size()}}]),o}(t2),t3=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var i=t;return this._modelType===i._modelType&&this._scale===i._scale}},{key:"compareTo",value:function(t){var e=t,i=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return tl.compare(i,r)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===e.FLOATING?t="Floating":this._modelType===e.FLOATING_SINGLE?t="Floating-Single":this._modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return O.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Z){var i=arguments[0];if(this._modelType===e.FLOATING)return null;i.x=this.makePrecise(i.x),i.y=this.makePrecise(i.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[S,w]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0==arguments.length)this._modelType=e.FLOATING;else if(1==arguments.length){if(arguments[0]instanceof t8){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0];this._modelType=e.FIXED,this.setScale(i)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),e}(),t8=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[S]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();t8.nameToTypeMap=new t6,t3.Type=t8,t3.FIXED=new t8("FIXED"),t3.FLOATING=new t8("FLOATING"),t3.FLOATING_SINGLE=new t8("FLOATING SINGLE"),t3.maximumPreciseValue=9007199254740992;var t4=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new a(t,this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof W){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&d(o(a.prototype),"equalsExact",this).call(this,t,e)}return d(o(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?tT.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return W.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new K}},{key:"getGeometryType",value:function(){return W.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[tI]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tq.constructor_.call(this,t,e)}}]),a}(tq),t5=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"createEmpty",value:function(t){switch(t){case -1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new b("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Z(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Z(t.getMinX(),t.getMinY()),new Z(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Z(t.getMinX(),t.getMinY()),new Z(t.getMinX(),t.getMaxY()),new Z(t.getMaxX(),t.getMaxY()),new Z(t.getMaxX(),t.getMinY()),new Z(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0==arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ta(arguments[0],tf))return new tL(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0==arguments.length?new t4(null,this):1==arguments.length?new t4(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var i=null,r=!1,n=!1,o=t.iterator();o.hasNext();){var a=o.next(),s=a.getTypeCode();null===i&&(i=s),s!==i&&(r=!0),a instanceof tq&&(n=!0)}if(null===i)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(e.toGeometryArray(t));var l=t.iterator().next();if(t.size()>1){if(l instanceof tB)return this.createMultiPolygon(e.toPolygonArray(t));if(l instanceof tL)return this.createMultiLineString(e.toLineStringArray(t));if(l instanceof tN)return this.createMultiPoint(e.toPointArray(t));j.shouldNeverReachHere("Unhandled geometry type: "+l.getGeometryType())}return l}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0==arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(ta(arguments[0],tf))return new tN(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0==arguments.length)return this.createPolygon(null,null);if(1==arguments.length){if(ta(arguments[0],tf)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof tU){var i=arguments[0];return this.createPolygon(i,null)}}else if(2==arguments.length)return new tB(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0==arguments.length?new tq(null,this):1==arguments.length?new tq(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0==arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ta(arguments[0],tf))return new tU(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0==arguments.length?new t1(null,this):1==arguments.length?new t1(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0==arguments.length)return new tV(null,this);if(1==arguments.length){if(arguments[0]instanceof Array)return new tV(arguments[0],this);if(ta(arguments[0],tf)){var t=arguments[0];if(null===t)return this.createMultiPoint([].fill(null));for(var e=Array(t.size()).fill(null),i=0;i<t.size();i++){var r=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());tP.copy(t,i,r,0,1),e[i]=this.createPoint(r)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[S]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0==arguments.length)e.constructor_.call(this,new t3,0);else if(1==arguments.length){if(ta(arguments[0],tS)){var t=arguments[0];e.constructor_.call(this,new t3,0,t)}else if(arguments[0]instanceof t3){var i=arguments[0];e.constructor_.call(this,i,0,e.getDefaultCoordinateSequenceFactory())}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];e.constructor_.call(this,r,n,e.getDefaultCoordinateSequenceFactory())}else if(3==arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this._precisionModel=o,this._coordinateSequenceFactory=s,this._SRID=a}}},{key:"toMultiPolygonArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return t0.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),e}(),t7="XY",t9="XYZ",et="XYM",ee="XYZM",ei={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},er="EMPTY",en=1,eo=2,ea=3,es=4,el=5,eh=6;for(var eu in ei)ei[eu].toUpperCase();var ec=function(){function e(i){t(this,e),this.wkt=i,this.index_=-1}return r(e,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"	"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),i=this.index_,r=e;if("("==e)t=eo;else if(","==e)t=el;else if(")"==e)t=ea;else if(this.isNumeric_(e)||"-"==e)t=es,r=this.readNumber_();else if(this.isAlpha_(e))t=en,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw Error("Unexpected character: "+e);t=eh}return{position:i,value:r,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,i=!1,r=!1;do"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_();while(this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t))return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do t=this.nextChar_();while(this.isAlpha_(t))return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),ef=function(){function e(i,r){t(this,e),this.lexer_=i,this.token_,this.layout_=t7,this.factory=r}return r(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t=t7,e=this.token_;if(this.isTokenType(en)){var i=e.value;"Z"===i?t=t9:"M"===i?t=et:"ZM"===i&&(t=ee),t!==t7&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(eo)){var t=[];do t.push(this.parseGeometry_());while(this.match(el))if(this.match(ea))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(eo)){var t=this.parsePoint_();if(this.match(ea))return t}else if(this.isEmptyGeometry_())return null;throw Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(eo)){var t=this.parsePointList_();if(this.match(ea))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(eo)){var t=this.parseLineStringTextList_();if(this.match(ea))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(eo)){if(t=this.token_.type==eo?this.parsePointTextList_():this.parsePointList_(),this.match(ea))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(eo)){var t=this.parseLineStringTextList_();if(this.match(ea))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(eo)){var t=this.parsePolygonTextList_();if(this.match(ea))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var r=this.token_;if(!this.match(es))break;t.push(r.value)}if(t.length==e)return t;throw Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(el);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(el);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(el);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(el);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(en)&&this.token_.value==er;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var t=this.factory,e=function(t){return l(Z,p(t))},i=function(i){var r=i.map(function(i){return t.createLinearRing(i.map(e))});return r.length>1?t.createPolygon(r[0],r.slice(1)):t.createPolygon(r[0])},r=this.token_;if(this.match(en)){var n=r.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==n){var o=this.parseGeometryCollectionText_();return t.createGeometryCollection(o)}switch(n){case"POINT":var a=this.parsePointText_();return a?t.createPoint(l(Z,p(a))):t.createPoint();case"LINESTRING":var s=this.parseLineStringText_().map(e);return t.createLineString(s);case"LINEARRING":var h=this.parseLineStringText_().map(e);return t.createLinearRing(h);case"POLYGON":var u=this.parsePolygonText_();return u&&0!==u.length?i(u):t.createPolygon();case"MULTIPOINT":var c=this.parseMultiPointText_();if(!c||0===c.length)return t.createMultiPoint();var f=c.map(e).map(function(e){return t.createPoint(e)});return t.createMultiPoint(f);case"MULTILINESTRING":var d=this.parseMultiLineStringText_().map(function(i){return t.createLineString(i.map(e))});return t.createMultiLineString(d);case"MULTIPOLYGON":var m=this.parseMultiPolygonText_();if(!m||0===m.length)return t.createMultiPolygon();var g=m.map(i);return t.createMultiPolygon(g);default:throw Error("Invalid geometry type: "+n)}}throw Error(this.formatErrorMessage_())}}]),e}();function ed(t){if(t.isEmpty())return"";var e=t.getCoordinate(),i=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||i.push(e.z),void 0===e.m||Number.isNaN(e.m)||i.push(e.m),i.join(" ")}function ep(t){for(var e=t.getCoordinates().map(function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),i=[],r=0,n=e.length;r<n;++r)i.push(e[r].join(" "));return i.join(", ")}function em(t){var e=[];e.push("("+ep(t.getExteriorRing())+")");for(var i=0,r=t.getNumInteriorRing();i<r;++i)e.push("("+ep(t.getInteriorRingN(i))+")");return e.join(", ")}var eg={Point:ed,LineString:ep,LinearRing:ep,Polygon:em,MultiPoint:function(t){for(var e=[],i=0,r=t.getNumGeometries();i<r;++i)e.push("("+ed(t.getGeometryN(i))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],i=0,r=t.getNumGeometries();i<r;++i)e.push("("+ep(t.getGeometryN(i))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],i=0,r=t.getNumGeometries();i<r;++i)e.push("("+em(t.getGeometryN(i))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],i=0,r=t.getNumGeometries();i<r;++i)e.push(ey(t.getGeometryN(i)));return e.join(", ")}};function ey(t){var e=t.getGeometryType(),i=eg[e];e=e.toUpperCase();var r=function(t){var e="";if(t.isEmpty())return e;var i=t.getCoordinate();return void 0===i.z||Number.isNaN(i.z)||(e+="Z"),void 0===i.m||Number.isNaN(i.m)||(e+="M"),e}(t);return r.length>0&&(e+=" "+r),t.isEmpty()?e+" "+er:e+" ("+i(t)+")"}var ev=function(){function e(i){t(this,e),this.geometryFactory=i||new t5,this.precisionModel=this.geometryFactory.getPrecisionModel()}return r(e,[{key:"read",value:function(t){return new ef(new ec(t),this.geometryFactory).parse()}},{key:"write",value:function(t){return ey(t)}}]),e}(),e_=function(){function e(i){t(this,e),this.parser=new ev(i)}return r(e,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!=arguments.length)throw Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),e}(),eb=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new tJ;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,i,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,i,r)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0==arguments.length)null===this._intLineIndex&&(this._intLineIndex=[,,].fill().map(function(){return[,,]}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1==arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0==arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1==arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,i){return e.computeEdgeDistance(this._intPt[i],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return e_.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+e_.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=[,,].fill().map(function(){return[,,]}),this._intPt=[,,].fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Z,this._intPt[1]=new Z,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,i){var r=Math.abs(i.x-e.x),n=Math.abs(i.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(i))o=r>n?r:n;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>n?a:s)||t.equals(e)||(o=Math.max(a,s))}return j.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,i){var r=t.x-e.x,n=t.y-e.y,o=Math.sqrt(r*r+n*n);return j.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}}]),e}();eb.DONT_INTERSECT=0,eb.DO_INTERSECT=1,eb.COLLINEAR=2,eb.NO_INTERSECTION=0,eb.POINT_INTERSECTION=1,eb.COLLINEAR_INTERSECTION=2;var ex=function(e){n(a,e);var i=f(a);function a(){return t(this,a),i.call(this)}return r(a,[{key:"isInSegmentEnvelopes",value:function(t){var e=new H(this._inputLines[0][0],this._inputLines[0][1]),i=new H(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&i.contains(t)}},{key:"computeIntersection",value:function(){if(3!=arguments.length)return d(o(a.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],e=arguments[1],i=arguments[2];if(this._isProper=!1,H.intersects(e,i,t)&&0===td.index(e,i,t)&&0===td.index(i,e,t))return this._isProper=!0,(t.equals(e)||t.equals(i))&&(this._isProper=!1),this._result=eb.POINT_INTERSECTION,null;this._result=eb.NO_INTERSECTION}},{key:"intersection",value:function(t,e,i,r){var n=this.intersectionSafe(t,e,i,r);return this.isInSegmentEnvelopes(n)||(n=new Z(a.nearestEndpoint(t,e,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(n),n}},{key:"checkDD",value:function(t,e,i,r,n){var o=tc.intersection(t,e,i,r),a=this.isInSegmentEnvelopes(o);tx.out.println("DD in env = "+a+"  --------------------- "+o),n.distance(o)>1e-4&&tx.out.println("Distance = "+n.distance(o))}},{key:"intersectionSafe",value:function(t,e,i,r){var n=tb.intersection(t,e,i,r);return null===n&&(n=a.nearestEndpoint(t,e,i,r)),n}},{key:"computeCollinearIntersection",value:function(t,e,i,r){var n=H.intersects(t,e,i),o=H.intersects(t,e,r),a=H.intersects(i,r,t),s=H.intersects(i,r,e);return n&&o?(this._intPt[0]=i,this._intPt[1]=r,eb.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,eb.COLLINEAR_INTERSECTION):n&&a?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||o||s?eb.COLLINEAR_INTERSECTION:eb.POINT_INTERSECTION):n&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||a?eb.COLLINEAR_INTERSECTION:eb.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||n||s?eb.COLLINEAR_INTERSECTION:eb.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||n||a?eb.COLLINEAR_INTERSECTION:eb.POINT_INTERSECTION):eb.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,i,r){if(this._isProper=!1,!H.intersects(t,e,i,r))return eb.NO_INTERSECTION;var n=td.index(t,e,i),o=td.index(t,e,r);if(n>0&&o>0||n<0&&o<0)return eb.NO_INTERSECTION;var a=td.index(i,r,t),s=td.index(i,r,e);return a>0&&s>0||a<0&&s<0?eb.NO_INTERSECTION:0===n&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,i,r):(0===n||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(i)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:0===n?this._intPt[0]=new Z(i):0===o?this._intPt[0]=new Z(r):0===a?this._intPt[0]=new Z(t):0===s&&(this._intPt[0]=new Z(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,i,r)),eb.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,i,r){var n=t,o=tM.pointToSegment(t,i,r),a=tM.pointToSegment(e,i,r);return a<o&&(o=a,n=e),(a=tM.pointToSegment(i,t,e))<o&&(o=a,n=i),(a=tM.pointToSegment(r,t,e))<o&&(o=a,n=r),n}}]),a}(eb),ew=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,r=e.x;return i>r&&(i=e.x,r=t.x),this._p.x>=i&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var n=td.index(t,e,this._p);if(n===td.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(n=-n),n===td.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==X.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?X.BOUNDARY:this._crossingCount%2==1?X.INTERIOR:X.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Z&&ta(arguments[1],tf)){for(var t=arguments[1],i=new e(arguments[0]),r=new Z,n=new Z,o=1;o<t.size()&&(t.getCoordinate(o,r),t.getCoordinate(o-1,n),i.countSegment(r,n),!i.isOnSegment());o++);return i.getLocation()}if(arguments[0]instanceof Z&&arguments[1]instanceof Array){for(var a=arguments[1],s=new e(arguments[0]),l=1;l<a.length;l++){var h=a[l],u=a[l-1];if(s.countSegment(h,u),s.isOnSegment())break}return s.getLocation()}}}]),e}(),eM=function(){function e(){t(this,e)}return r(e,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Z&&ta(arguments[1],tf)){for(var t=arguments[0],e=arguments[1],i=new ex,r=new Z,n=new Z,o=e.size(),a=1;a<o;a++)if(e.getCoordinate(a-1,r),e.getCoordinate(a,n),i.computeIntersection(t,r,n),i.hasIntersection())return!0;return!1}if(arguments[0]instanceof Z&&arguments[1]instanceof Array){for(var s=arguments[0],l=arguments[1],h=new ex,u=1;u<l.length;u++){var c=l[u-1],f=l[u];if(h.computeIntersection(s,c,f),h.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return ew.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,i){return e.locateInRing(t,i)!==X.EXTERIOR}}]),e}(),eS=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==X.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===X.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=[,,,].fill(null);e[te.ON]=this.location[te.ON],e[te.LEFT]=X.NONE,e[te.RIGHT]=X.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===X.NONE&&i<t.location.length&&(this.location[i]=t.location[i])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[te.LEFT];this.location[te.LEFT]=this.location[te.RIGHT],this.location[te.RIGHT]=t}},{key:"toString",value:function(){var t=new ts;return this.location.length>1&&t.append(X.toLocationSymbol(this.location[te.LEFT])),t.append(X.toLocationSymbol(this.location[te.ON])),this.location.length>1&&t.append(X.toLocationSymbol(this.location[te.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,i){this.location[te.ON]=t,this.location[te.LEFT]=e,this.location[te.RIGHT]=i}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:X.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===X.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1==arguments.length){var t=arguments[0];this.setLocation(te.ON,t)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];this.location[e]=i}}},{key:"init",value:function(t){this.location=Array(t).fill(null),this.setAllLocations(X.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[te.ON]=i}else if(arguments[0]instanceof e){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var n=0;n<this.location.length;n++)this.location[n]=r.location[n]}}else if(3==arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[te.ON]=o,this.location[te.LEFT]=a,this.location[te.RIGHT]=s}}}]),e}(),ek=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1==arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];this.elt[e].setAllLocationsIfNull(i)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new eS(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1==arguments.length){var t=arguments[0];return this.elt[t].get(te.ON)}if(2==arguments.length){var e=arguments[0],i=arguments[1];return this.elt[e].get(i)}}},{key:"toString",value:function(){var t=new ts;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0==arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1==arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(te.ON,e)}else if(3==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];this.elt[i].setLocation(r,n)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new eS(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=[,,].fill(null),1==arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new eS(t),this.elt[1]=new eS(t)}else if(arguments[0]instanceof e){var i=arguments[0];this.elt[0]=new eS(i.elt[0]),this.elt[1]=new eS(i.elt[1])}}else if(2==arguments.length){var r=arguments[0],n=arguments[1];this.elt[0]=new eS(X.NONE),this.elt[1]=new eS(X.NONE),this.elt[r].setLocation(n)}else if(3==arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new eS(o,a,s),this.elt[1]=new eS(o,a,s)}else if(4==arguments.length){var l=arguments[0],h=arguments[1],u=arguments[2],c=arguments[3];this.elt[0]=new eS(X.NONE,X.NONE,X.NONE),this.elt[1]=new eS(X.NONE,X.NONE,X.NONE),this.elt[l].setLocations(h,u,c)}}},{key:"toLineLabel",value:function(t){for(var i=new e(X.NONE),r=0;r<2;r++)i.setLocation(r,t.getLocation(r));return i}}]),e}(),eE=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=td.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,i=!0;do{if(null===e)throw new tm("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new tm("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();j.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe)this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,i){var r=t.getCoordinates();if(e){var n=1;i&&(n=0);for(var o=n;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;i&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!eM.isInRing(t,e.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1==arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2==arguments.length){var e=arguments[1],i=arguments[0].getLocation(e,te.RIGHT);if(i===X.NONE)return null;if(this._label.getLocation(e)===X.NONE)return this._label.setLocation(e,i),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)e[i]=this._holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ty,this._pts=new ty,this._label=new ek(X.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ty,this._geometryFactory=null,0==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),e}(),eI=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];eE.constructor_.call(this,t,e)}}]),o}(eE),eP=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"buildMinimalRings",value:function(){var t=new ty,e=this._startDe;do{if(null===e.getMinEdgeRing()){var i=new eI(e,this._geometryFactory);t.add(i)}e=e.getNext()}while(e!==this._startDe)return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext();while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];eE.constructor_.call(this,t,e)}}]),o}(eE),eT=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){j.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this._label=t}}}]),e}(),eA=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var i=X.NONE;if(i=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);i!==X.BOUNDARY&&(i=r)}return i}},{key:"setLabel",value:function(){if(2!=arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return d(o(a.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new ek(t,e):this._label.setLocation(t,e)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof a){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof ek)for(var e=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(e,i);this._label.getLocation(i)===X.NONE&&this._label.setLocation(i,r)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=X.NONE;null!==this._label&&(e=this._label.getLocation(t));var i=null;switch(e){case X.BOUNDARY:i=X.INTERIOR;break;case X.INTERIOR:default:i=X.BOUNDARY}this._label.setLocation(t,i)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new ek(0,X.NONE)}}]),a}(eT);function eC(t){return null==t?0:t.color}function eL(t){return null==t?null:t.parent}function eR(t,e){null!==t&&(t.color=e)}function eN(t){return null==t?null:t.left}function ez(t){return null==t?null:t.right}var eO=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),(e=i.call(this)).root_=null,e.size_=0,e}return r(o,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,r,n=this.root_;do if(i=n,(r=t.compareTo(n.key))<0)n=n.left;else{if(!(r>0)){var o=n.value;return n.value=e,o}n=n.right}while(null!==n)var a={key:t,left:null,right:null,value:e,parent:i,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?i.left=a:i.right=a,this.fixAfterInsertion(a),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)eL(t)===eN(eL(eL(t)))?1===eC(e=ez(eL(eL(t))))?(eR(eL(t),0),eR(e,0),eR(eL(eL(t)),1),t=eL(eL(t))):(t===ez(eL(t))&&(t=eL(t),this.rotateLeft(t)),eR(eL(t),0),eR(eL(eL(t)),1),this.rotateRight(eL(eL(t)))):1===eC(e=eN(eL(eL(t))))?(eR(eL(t),0),eR(e,0),eR(eL(eL(t)),1),t=eL(eL(t))):(t===eN(eL(t))&&(t=eL(t),this.rotateRight(t)),eR(eL(t),0),eR(eL(eL(t)),1),this.rotateLeft(eL(eL(t))));this.root_.color=0}},{key:"values",value:function(){var t=new ty,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=o.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=o.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var i=t;null!==e&&i===e.right;)i=e,e=e.parent;return e}}]),o}(function(e){n(r,e);var i=f(r);function r(){return t(this,r),i.apply(this,arguments)}return r}(t2)),eD=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof Z){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof eA){var i=arguments[0],r=this.nodeMap.get(i.getCoordinate());return null===r?(this.nodeMap.put(i.getCoordinate(),i),i):(r.mergeLabel(i),r)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new ty,i=this.iterator();i.hasNext();){var r=i.next();r.getLabel().getLocation(t)===X.BOUNDARY&&e.add(r)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new eO,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),e}(),eB=function(){function e(){t(this,e)}return r(e,null,[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return -1;var i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i}},{key:"isInHalfPlane",value:function(t,i){return i===e.SE?t===e.SE||t===e.SW:t===i||t===i+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],i=arguments[1];if(0===t&&0===i)throw new b("Cannot compute the quadrant for point ( "+t+", "+i+" )");return t>=0?i>=0?e.NE:e.SE:i>=0?e.NW:e.SW}if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new b("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?e.NE:e.SE:n.y>=r.y?e.NW:e.SW}}}]),e}();eB.NE=0,eB.NW=1,eB.SW=2,eB.SE=3;var eF=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:td.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),r=i.lastIndexOf("."),n=i.substring(r+1);t.print("  "+n+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=eB.quadrant(this._dx,this._dy),j.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1==arguments.length){var t=arguments[0];this._edge=t}else if(3==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];e.constructor_.call(this,i,r,n,null)}else if(4==arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];e.constructor_.call(this,o),this.init(a,s),this._label=l}}}]),e}(),ej=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new ek(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new tm("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,te.LEFT)===X.INTERIOR&&this._label.getLocation(e,te.RIGHT)===X.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){d(o(a.prototype),"print",this).call(this,t),t.print(" "+this._depth[te.LEFT]+"/"+this._depth[te.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,X.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,X.EXTERIOR);return t&&e&&i}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var r=1;t===te.LEFT&&(r=-1);var n=te.opposite(t),o=e+i*r;this.setDepth(t,e),this.setDepth(n,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(eF.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var i=t.getNumPoints()-1;this.init(t.getCoordinate(i),t.getCoordinate(i-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===X.EXTERIOR&&e===X.INTERIOR?1:t===X.INTERIOR&&e===X.EXTERIOR?-1:0}}]),a}(eF),eq=function(){function e(){t(this,e)}return r(e,[{key:"createNode",value:function(t){return new eA(t,null)}}]),e}(),eV=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var i=this._edges.get(e);i.print(t),i.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof eA){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Z){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){tx.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var i=this._nodes.find(e);if(null===i)return!1;var r=i.getLabel();return null!==r&&r.getLocation(t)===X.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,i,r){return!!t.equals(i)&&td.index(t,e,r)===td.COLLINEAR&&eB.quadrant(t,e)===eB.quadrant(i,r)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){tx.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i),n=r.getCoordinates();if(this.matchInSameDirection(t,e,n[0],n[1])||this.matchInSameDirection(t,e,n[n.length-1],n[n.length-2]))return r}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next();if(i.getEdge()===t)return i}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this._edges.add(i);var r=new ej(i,!0),n=new ej(i,!1);r.setSym(n),n.setSym(r),this.add(r),this.add(n)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i),n=r.getCoordinates();if(t.equals(n[0])&&e.equals(n[1]))return r}return null}}],[{key:"constructor_",value:function(){if(this._edges=new ty,this._nodes=null,this._edgeEndList=new ty,0==arguments.length)this._nodes=new eD(new eq);else if(1==arguments.length){var t=arguments[0];this._nodes=new eD(t)}}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),e}(),eU=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"sortShellsAndHoles",value:function(t,e,i){for(var r=t.iterator();r.hasNext();){var n=r.next();n.isHole()?i.add(n):e.add(n)}}},{key:"computePolygons",value:function(t){for(var e=new ty,i=t.iterator();i.hasNext();){var r=i.next().toPolygon(this._geometryFactory);e.add(r)}return e}},{key:"placeFreeHoles",value:function(t,i){for(var r=i.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var o=e.findEdgeRingContaining(n,t);if(null===o)throw new tm("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(o)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,i){for(var r=new ty,n=t.iterator();n.hasNext();){var o=n.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):i.addAll(a)}else r.add(o)}return r}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new ty,i=t.iterator();i.hasNext();){var r=i.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var n=new eP(r,this._geometryFactory);e.add(n),n.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var i=e.iterator();i.hasNext();){var r=i.next();r.isHole()&&r.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,i=null,r=t.iterator();r.hasNext();){var n=r.next();n.isHole()||(i=n,e++)}return j.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i}},{key:"add",value:function(){if(1==arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2==arguments.length){var e=arguments[0],i=arguments[1];eV.linkResultDirectedEdges(i);var r=this.buildMaximalEdgeRings(e),n=new ty,o=this.buildMinimalEdgeRings(r,this._shellList,n);this.sortShellsAndHoles(o,this._shellList,n),this.placeFreeHoles(this._shellList,n)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new ty;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var i=t.getLinearRing(),r=i.getEnvelopeInternal(),n=i.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),h=l.getLinearRing(),u=h.getEnvelopeInternal();if(!u.equals(r)&&u.contains(r)){n=t$.ptNotInList(i.getCoordinates(),h.getCoordinates());var c=!1;eM.isInRing(n,h.getCoordinates())&&(c=!0),c&&(null===o||a.contains(u))&&(a=(o=l).getLinearRing().getEnvelopeInternal())}}return o}}]),e}(),eZ=function(){function e(){t(this,e)}return r(e,[{key:"getBounds",value:function(){}}]),e}(),eG=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[eZ,S]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),e}(),eH=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,i=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&0>this._items.get(e+1).compareTo(this._items.get(e))&&e++,0>this._items.get(e).compareTo(i));t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);0>t.compareTo(this._items.get(Math.trunc(e/2)));e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ty,this._items.add(null)}}]),e}(),eW=function(){function e(){t(this,e)}return r(e,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),e}(),eX=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){j.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[eZ,S]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new ty,this._bounds=null,this._level=null,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this._level=t}}}]),e}(),e$={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return e$.sort(t),t.get(0)},sort:function(t,e){var i=t.toArray();e?tO.sort(i,e):tO.sort(i);for(var r=t.iterator(),n=0,o=i.length;n<o;n++)r.next(),r.set(i[n])},singletonList:function(t){var e=new ty;return e.add(t),e}},eY=function(){function e(){t(this,e)}return r(e,null,[{key:"maxDistance",value:function(t,i,r,n,o,a,s,l){var h=e.distance(t,i,o,a);return Math.max(h=Math.max(h=Math.max(h,e.distance(t,i,s,l)),e.distance(r,n,o,a)),e.distance(r,n,s,l))}},{key:"distance",value:function(t,e,i,r){var n=i-t,o=r-e;return Math.sqrt(n*n+o*o)}},{key:"maximumDistance",value:function(t,i){var r=Math.min(t.getMinX(),i.getMinX()),n=Math.min(t.getMinY(),i.getMinY()),o=Math.max(t.getMaxX(),i.getMaxX()),a=Math.max(t.getMaxY(),i.getMaxY());return e.distance(r,n,o,a)}},{key:"minMaxDistance",value:function(t,i){var r=t.getMinX(),n=t.getMinY(),o=t.getMaxX(),a=t.getMaxY(),s=i.getMinX(),l=i.getMinY(),h=i.getMaxX(),u=i.getMaxY(),c=e.maxDistance(r,n,r,a,s,l,s,u);return Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c,e.maxDistance(r,n,r,a,s,l,h,l)),e.maxDistance(r,n,r,a,h,u,s,u)),e.maxDistance(r,n,r,a,h,u,h,l)),e.maxDistance(r,n,o,n,s,l,s,u)),e.maxDistance(r,n,o,n,s,l,h,l)),e.maxDistance(r,n,o,n,h,u,s,u)),e.maxDistance(r,n,o,n,h,u,h,l)),e.maxDistance(o,a,r,a,s,l,s,u)),e.maxDistance(o,a,r,a,s,l,h,l)),e.maxDistance(o,a,r,a,h,u,s,u)),e.maxDistance(o,a,r,a,h,u,h,l)),e.maxDistance(o,a,o,n,s,l,s,u)),e.maxDistance(o,a,o,n,s,l,h,l)),e.maxDistance(o,a,o,n,h,u,s,u)),e.maxDistance(o,a,o,n,h,u,h,l))}}]),e}(),eK=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"maximumDistance",value:function(){return eY.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,i){var r=e.isComposite(this._boundable1),n=e.isComposite(this._boundable2);if(r&&n)return e.area(this._boundable1)>e.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,!1,t,i):this.expand(this._boundable2,this._boundable1,!0,t,i),null;if(r)return this.expand(this._boundable1,this._boundable2,!1,t,i),null;if(n)return this.expand(this._boundable2,this._boundable1,!0,t,i),null;throw new b("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,i,r,n,o){for(var a=t.getChildBoundables().iterator();a.hasNext();){var s=a.next(),l=null;(l=r?new e(i,s,this._itemDistance):new e(s,i,this._itemDistance)).getDistance()<o&&n.add(l)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof eX}}]),e}(),eJ=function(){function e(){t(this,e)}return r(e,[{key:"visitItem",value:function(t){}}]),e}(),eQ=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"queryInternal",value:function(){if(ta(arguments[2],eJ)&&arguments[0]instanceof Object&&arguments[1]instanceof eX)for(var t=arguments[0],e=arguments[2],i=arguments[1].getChildBoundables(),r=0;r<i.size();r++){var n=i.get(r);this.getIntersectsOp().intersects(n.getBounds(),t)&&(n instanceof eX?this.queryInternal(t,n,e):n instanceof eG?e.visitItem(n.getItem()):j.shouldNeverReachHere())}else if(ta(arguments[2],tn)&&arguments[0]instanceof Object&&arguments[1]instanceof eX)for(var o=arguments[0],a=arguments[2],s=arguments[1].getChildBoundables(),l=0;l<s.size();l++){var h=s.get(l);this.getIntersectsOp().intersects(h.getBounds(),o)&&(h instanceof eX?this.queryInternal(o,h,a):h instanceof eG?a.add(h.getItem()):j.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0==arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1==arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof eX?t+=this.size(i):i instanceof eG&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var i=null,r=t.getChildBoundables().iterator();r.hasNext();){var n=r.next();n instanceof eG&&n.getItem()===e&&(i=n)}return null!==i&&(t.getChildBoundables().remove(i),!0)}},{key:"itemsTree",value:function(){if(0==arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new ty:t}if(1==arguments.length){for(var e=arguments[0],i=new ty,r=e.getChildBoundables().iterator();r.hasNext();){var n=r.next();if(n instanceof eX){var o=this.itemsTree(n);null!==o&&i.add(o)}else n instanceof eG?i.add(n.getItem()):j.shouldNeverReachHere()}return 0>=i.size()?null:i}}},{key:"insert",value:function(t,e){j.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new eG(t,e))}},{key:"boundablesAtLevel",value:function(){if(1==arguments.length){var t=arguments[0],e=new ty;return this.boundablesAtLevel(t,this._root,e),e}if(3==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2];if(j.isTrue(i>-2),r.getLevel()===i)return n.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof eX?this.boundablesAtLevel(i,a,n):(j.isTrue(a instanceof eG),-1===i&&n.add(a))}return null}}},{key:"query",value:function(){if(1==arguments.length){var t=arguments[0];this.build();var e=new ty;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2==arguments.length){var i=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.queryInternal(i,this._root,r)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2],o=this.removeItem(r,n);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof eX&&(o=this.remove(i,l,n))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}}},{key:"createHigherLevels",value:function(t,e){j.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)}},{key:"depth",value:function(){if(0==arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1==arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof eX){var r=this.depth(i);r>t&&(t=r)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){j.isTrue(!t.isEmpty());var i=new ty;i.add(this.createNode(e));var r=new ty(t);e$.sort(r,this.getComparator());for(var n=r.iterator();n.hasNext();){var o=n.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(o)}return i}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[S]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ty,this._nodeCapacity=null,0==arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1==arguments.length){var t=arguments[0];j.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();eQ.IntersectsOp=function(){},eQ.DEFAULT_NODE_CAPACITY=10;var e0=function(){function e(){t(this,e)}return r(e,[{key:"distance",value:function(t,e){}}]),e}(),e1=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){j.isTrue(t.length>0);for(var i=new ty,r=0;r<t.length;r++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return i}},{key:"nearestNeighbourK",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,O.POSITIVE_INFINITY,e)}if(3==arguments.length){var i=arguments[0],r=arguments[2],n=arguments[1],o=new eH;o.add(i);for(var s=new eH;!o.isEmpty()&&n>=0;){var l=o.poll(),h=l.getDistance();if(h>=n)break;l.isLeaves()?s.size()<r?s.add(l):(s.peek().getDistance()>h&&(s.poll(),s.add(l)),n=s.peek().getDistance()):l.expandToQueue(o,n)}return a.getItems(s)}}},{key:"createNode",value:function(t){return new e2(t)}},{key:"size",value:function(){return 0==arguments.length?d(o(a.prototype),"size",this).call(this):d(o(a.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2==arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof H))return d(o(a.prototype),"insert",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;d(o(a.prototype),"insert",this).call(this,t,e)}},{key:"getIntersectsOp",value:function(){return a.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var i=Math.trunc(Math.ceil(t.size()/e)),r=Array(e).fill(null),n=t.iterator(),o=0;o<e;o++){r[o]=new ty;for(var a=0;n.hasNext()&&a<i;){var s=n.next();r[o].add(s),a++}}return r}},{key:"query",value:function(){if(1==arguments.length){var t=arguments[0];return d(o(a.prototype),"query",this).call(this,t)}if(2==arguments.length){var e=arguments[0],i=arguments[1];d(o(a.prototype),"query",this).call(this,e,i)}}},{key:"getComparator",value:function(){return a.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,e){return d(o(a.prototype),"createParentBoundables",this).call(this,t,e)}},{key:"remove",value:function(){if(2==arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof H){var t=arguments[0],e=arguments[1];return d(o(a.prototype),"remove",this).call(this,t,e)}return d(o(a.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0==arguments.length?d(o(a.prototype),"depth",this).call(this):d(o(a.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){j.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new ty(t);e$.sort(r,a.xComparator);var n=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(n,e)}},{key:"nearestNeighbour",value:function(){if(1==arguments.length){if(ta(arguments[0],e0)){var t=arguments[0];if(this.isEmpty())return null;var e=new eK(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof eK){var i=arguments[0],r=O.POSITIVE_INFINITY,n=null,o=new eH;for(o.add(i);!o.isEmpty()&&r>0;){var a=o.poll(),s=a.getDistance();if(s>=r)break;a.isLeaves()?(r=s,n=a):a.expandToQueue(o,r)}return null===n?null:[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]}}else{if(2==arguments.length){var l=arguments[0],h=arguments[1];if(this.isEmpty()||l.isEmpty())return null;var u=new eK(this.getRoot(),l.getRoot(),h);return this.nearestNeighbour(u)}if(3==arguments.length){var c=arguments[2],f=new eG(arguments[0],arguments[1]),d=new eK(this.getRoot(),f,c);return this.nearestNeighbour(d)[0]}if(4==arguments.length){var p=arguments[2],m=arguments[3],g=new eG(arguments[0],arguments[1]),y=new eK(this.getRoot(),g,p);return this.nearestNeighbourK(y,m)}}}},{key:"isWithinDistance",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1],i=O.POSITIVE_INFINITY,r=new eH;for(r.add(t);!r.isEmpty();){var n=r.poll(),o=n.getDistance();if(o>e)break;if(n.maximumDistance()<=e)return!0;if(n.isLeaves()){if((i=o)<=e)return!0}else n.expandToQueue(r,i)}return!1}if(3==arguments.length){var a=arguments[0],s=arguments[1],l=arguments[2],h=new eK(this.getRoot(),a.getRoot(),s);return this.isWithinDistance(h,l)}}},{key:"interfaces_",get:function(){return[eW,S]}}],[{key:"constructor_",value:function(){if(0==arguments.length)a.constructor_.call(this,a.DEFAULT_NODE_CAPACITY);else if(1==arguments.length){var t=arguments[0];eQ.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return a.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=Array(t.size()).fill(null),i=0;!t.isEmpty();){var r=t.poll();e[i]=r.getBoundable(0).getItem(),i++}return e}},{key:"centreY",value:function(t){return a.avg(t.getMinY(),t.getMaxY())}}]),a}(eQ),e2=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var i=e.next();null===t?t=new H(i.getBounds()):t.expandToInclude(i.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];eX.constructor_.call(this,t)}}]),o}(eX);e1.STRtreeNode=e2,e1.xComparator=new(function(){function e(){t(this,e)}return r(e,[{key:"interfaces_",get:function(){return[D]}},{key:"compare",value:function(t,e){return eQ.compareDoubles(e1.centreX(t.getBounds()),e1.centreX(e.getBounds()))}}]),e}()),e1.yComparator=new(function(){function e(){t(this,e)}return r(e,[{key:"interfaces_",get:function(){return[D]}},{key:"compare",value:function(t,e){return eQ.compareDoubles(e1.centreY(t.getBounds()),e1.centreY(e.getBounds()))}}]),e}()),e1.intersectsOp=new(function(){function e(){t(this,e)}return r(e,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,e){return t.intersects(e)}}]),e}()),e1.DEFAULT_NODE_CAPACITY=10;var e6=function(){function e(){t(this,e)}return r(e,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,i,r){if(i.equals2D(r))return 0;var n=e.relativeSign(i.x,r.x),o=e.relativeSign(i.y,r.y);switch(t){case 0:return e.compareValue(n,o);case 1:return e.compareValue(o,n);case 2:return e.compareValue(o,-n);case 3:return e.compareValue(-n,o);case 4:return e.compareValue(-n,-o);case 5:return e.compareValue(-o,-n);case 6:return e.compareValue(-o,n);case 7:return e.compareValue(n,-o)}return j.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),e}(),e3=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?e6.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3];this._segString=t,this.coord=new Z(e),this.segmentIndex=i,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(i))}}]),e}(),e8=function(){function e(){t(this,e)}return r(e,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),e}(),e4=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getSplitCoordinates",value:function(){var t=new tX;this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(i,r,t),i=r}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new ty;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var i=e.next().intValue();this.add(this._edge.getCoordinate(i),i)}}},{key:"createSplitEdgePts",value:function(t,e){var i=e.segmentIndex-t.segmentIndex+2;if(2===i)return[new Z(t.coord),new Z(e.coord)];var r=this._edge.getCoordinate(e.segmentIndex),n=e.isInterior()||!e.coord.equals2D(r);n||i--;var o=Array(i).fill(null),a=0;o[a++]=new Z(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return n&&(o[a]=new Z(e.coord)),o}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var i=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var r=this._edge.getCoordinate(e+2);i.equals2D(r)&&t.add(tl.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,i){var r=this.createSplitEdgePts(t,e);i.add(r,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),i=e.next();e.hasNext();){var r=e.next(),n=this.createSplitEdge(i,r);t.add(n),i=r}}},{key:"findCollapseIndex",value:function(t,e,i){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(i[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=[,].fill(null),i=this.iterator(),r=i.next();i.hasNext();){var n=i.next();this.findCollapseIndex(r,n,e)&&t.add(tl.valueOf(e[0])),r=n}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){return new it(this.createSplitEdgePts(t,e),this._edge.getData())}},{key:"add",value:function(t,e){var i=new e3(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(i);return null!==r?(j.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(i,i),i)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new B("bad split edge start point at "+i);var r=t.get(t.size()-1).getCoordinates(),n=r[r.length-1];if(!n.equals2D(e[e.length-1]))throw new B("bad split edge end point at "+n)}}],[{key:"constructor_",value:function(){this._nodeMap=new eO,this._edge=null;var t=arguments[0];this._edge=t}}]),e}(),e5=function(){function e(){t(this,e)}return r(e,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],i=arguments[1];if(0===t&&0===i)throw new b("Cannot compute the octant for point ( "+t+", "+i+" )");var r=Math.abs(t),n=Math.abs(i);return t>=0?i>=0?r>=n?0:1:r>=n?7:6:i>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var o=arguments[0],a=arguments[1],s=a.x-o.x,l=a.y-o.y;if(0===s&&0===l)throw new b("Cannot compute the octant for two identical points "+o);return e.octant(s,l)}}}]),e}(),e7=function(){function e(){t(this,e)}return r(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}}]),e}(),e9=function(){function e(){t(this,e)}return r(e,[{key:"addIntersection",value:function(t,e){}},{key:"interfaces_",get:function(){return[e7]}}]),e}(),it=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:e5.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4==arguments.length){var i=arguments[1],r=arguments[3],n=new Z(arguments[0].getIntersection(r));this.addIntersection(n,i)}}},{key:"toString",value:function(){return e_.toLineString(new tQ(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var i=e,r=i+1;if(r<this._pts.length){var n=this._pts[r];t.equals2D(n)&&(i=r)}return this._nodeList.add(t,i)}},{key:"addIntersections",value:function(t,e,i){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,i,r)}},{key:"interfaces_",get:function(){return[e9]}}],[{key:"constructor_",value:function(){this._nodeList=new e4(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(1==arguments.length){var t=arguments[0],i=new ty;return e.getNodedSubstrings(t,i),i}if(2==arguments.length)for(var r=arguments[1],n=arguments[0].iterator();n.hasNext();)n.next().getNodeList().addSplitEdges(r)}}]),e}(),ie=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof e){var t=arguments[0],i=td.index(this.p0,this.p1,t.p0),r=td.index(this.p0,this.p1,t.p1);return i>=0&&r>=0||i<=0&&r<=0?Math.max(i,r):0}if(arguments[0]instanceof Z){var n=arguments[0];return td.index(this.p0,this.p1,n)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var i=t;return this.p0.equals(i.p0)&&this.p1.equals(i.p1)}},{key:"intersection",value:function(t){var e=new ex;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Z(t);var i=this.projectionFactor(t),r=new Z;return r.x=this.p0.x+i*(this.p1.x-this.p0.x),r.y=this.p0.y+i*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof e){var n=arguments[0],o=this.projectionFactor(n.p0),a=this.projectionFactor(n.p1);if(o>=1&&a>=1||o<=0&&a<=0)return null;var s=this.project(n.p0);o<0&&(s=this.p0),o>1&&(s=this.p1);var l=this.project(n.p1);return a<0&&(l=this.p0),a>1&&(l=this.p1),new e(s,l)}}},{key:"normalize",value:function(){0>this.p1.compareTo(this.p0)&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return tM.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,r=e*e+i*i;return r<=0?O.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/r}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var i=[,,].fill(null),r=O.MAX_VALUE,n=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),i[0]=o,i[1]=t.p0;var a=this.closestPoint(t.p1);(n=a.distance(t.p1))<r&&(r=n,i[0]=a,i[1]=t.p1);var s=t.closestPoint(this.p0);(n=s.distance(this.p0))<r&&(r=n,i[0]=this.p0,i[1]=s);var l=t.closestPoint(this.p1);return(n=l.distance(this.p1))<r&&(r=n,i[0]=this.p1,i[1]=l),i}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return tb.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),n=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(n*n+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*n/a,l=e*o/a}return new Z(i-l,r+s)}},{key:"setCoordinates",value:function(){if(1==arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||O.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),i=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),n=e*e+i*i,o=e*e-i*i,a=t.getX(),s=t.getY();return new Z((-o*a-2*e*i*s-2*e*r)/n,(o*s-2*e*i*a-2*i*r)/n)}},{key:"distance",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return tM.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Z){var i=arguments[0];return tM.pointToSegment(i,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new Z;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=O.doubleToLongBits(this.p0.x),e=Math.trunc(t^=31*O.doubleToLongBits(this.p0.y))^Math.trunc(t>>32),i=O.doubleToLongBits(this.p1.x);return e^Math.trunc(i^=31*O.doubleToLongBits(this.p1.y))^Math.trunc(i>>32)}},{key:"interfaces_",get:function(){return[w,S]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0==arguments.length)e.constructor_.call(this,new Z,new Z);else if(1==arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this.p0=i,this.p1=r}else if(4==arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e.constructor_.call(this,new Z(n,o),new Z(a,s))}}},{key:"midPoint",value:function(t,e){return new Z((t.x+e.x)/2,(t.y+e.y)/2)}}]),e}(),ii=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"overlap",value:function(){if(2==arguments.length);else if(4==arguments.length){var t=arguments[1],e=arguments[2],i=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ie,this._overlapSeg2=new ie}}]),e}(),ir=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,i,r){var n=this._pts[e],o=this._pts[i];if(i-e==1)return r.select(this,e),null;if(!t.intersects(n,o))return null;var a=Math.trunc((e+i)/2);e<a&&this.computeSelect(t,e,a,r),a<i&&this.computeSelect(t,a,i,r)}},{key:"getCoordinates",value:function(){for(var t=Array(this._end-this._start+1).fill(null),e=0,i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t}},{key:"computeOverlaps",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6==arguments.length){var i=arguments[0],r=arguments[1],n=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(r-i==1&&a-o==1)return s.overlap(this,i,n,o),null;if(!this.overlaps(i,r,n,o,a))return null;var l=Math.trunc((i+r)/2),h=Math.trunc((o+a)/2);i<l&&(o<h&&this.computeOverlaps(i,l,n,o,h,s),h<a&&this.computeOverlaps(i,l,n,h,a,s)),l<r&&(o<h&&this.computeOverlaps(l,r,n,o,h,s),h<a&&this.computeOverlaps(l,r,n,h,a,s))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new H(t,e)}return this._env}},{key:"overlaps",value:function(t,e,i,r,n){return H.intersects(this._pts[t],this._pts[e],i._pts[r],i._pts[n])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=i,this._context=r}}]),e}(),io=function(){function e(){t(this,e)}return r(e,null,[{key:"findChainEnd",value:function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var r=eB.quadrant(t[i],t[i+1]),n=e+1;n<t.length&&(t[n-1].equals2D(t[n])||eB.quadrant(t[n-1],t[n])===r);)n++;return n-1}},{key:"getChains",value:function(){if(1==arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2==arguments.length){var i=arguments[0],r=arguments[1],n=new ty,o=0;do{var a=e.findChainEnd(i,o),s=new ir(i,o,a,r);n.add(s),o=a}while(o<i.length-1)return n}}}]),e}(),ia=function(){function e(){t(this,e)}return r(e,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}}]),e}(),is=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"interfaces_",get:function(){return[ia]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),e}(),il=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return it.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=io.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var i=e.next();i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new ih(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var i=e.next(),r=this._index.query(i.getEnvelope()).iterator();r.hasNext();){var n=r.next();if(n.getId()>i.getId()&&(i.computeOverlaps(n,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new ty,this._index=new e1,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0==arguments.length);else if(1==arguments.length){var t=arguments[0];is.constructor_.call(this,t)}}}]),o}(is),ih=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"overlap",value:function(){if(4!=arguments.length)return d(o(a.prototype),"overlap",this).apply(this,arguments);var t=arguments[1],e=arguments[2],i=arguments[3],r=arguments[0].getContext(),n=e.getContext();this._si.processIntersections(r,t,n,i)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),a}(ii);il.SegmentOverlapAction=ih;var iu=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"isDeletable",value:function(t,e,i,r){var n=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[i];return!!this.isConcave(n,o,a)&&!!this.isShallow(n,o,a,r)&&this.isShallowSampled(n,o,t,i,r)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,i=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(i),n=!1;r<this._inputLine.length;){var o=!1;this.isDeletable(t,i,r,this._distanceTol)&&(this._isDeleted[i]=e.DELETE,o=!0,n=!0),t=o?r:i,i=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(i)}return n}},{key:"isShallowConcavity",value:function(t,e,i,r){return td.index(t,e,i)===this._angleOrientation&&tM.pointToSegment(e,t,i)<r}},{key:"isShallowSampled",value:function(t,i,r,n,o){var a=Math.trunc((n-r)/e.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var s=r;s<n;s+=a)if(!this.isShallow(t,i,this._inputLine[s],o))return!1;return!0}},{key:"isConcave",value:function(t,e,i){return td.index(t,e,i)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=td.CLOCKWISE),this._isDeleted=Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e)return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var i=t+1;i<this._inputLine.length&&this._isDeleted[i]===e.DELETE;)i++;return i}},{key:"isShallow",value:function(t,e,i,r){return tM.pointToSegment(e,t,i)<r}},{key:"collapseLine",value:function(){for(var t=new tX,i=0;i<this._inputLine.length;i++)this._isDeleted[i]!==e.DELETE&&t.add(this._inputLine[i]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=td.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,i){return new e(t).simplify(i)}}]),e}();iu.INIT=0,iu.DELETE=1,iu.KEEP=1,iu.NUM_PTS_TO_CHECK=10;var ic=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new Z(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])}},{key:"isRedundant",value:function(t){if(1>this._ptList.size())return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new t5).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(1>this._ptList.size())return null;var t=new Z(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ty}}]),e}();ic.COORDINATE_ARRAY_TYPE=[].fill(null);var id=function(){function e(){t(this,e)}return r(e,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1==arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2==arguments.length){var e=arguments[0],i=arguments[1],r=i.x-e.x;return Math.atan2(i.y-e.y,r)}}},{key:"isAcute",value:function(t,e,i){var r=t.x-e.x,n=t.y-e.y;return r*(i.x-e.x)+n*(i.y-e.y)>0}},{key:"isObtuse",value:function(t,e,i){var r=t.x-e.x,n=t.y-e.y;return r*(i.x-e.x)+n*(i.y-e.y)<0}},{key:"interiorAngle",value:function(t,i,r){var n=e.angle(i,t);return Math.abs(e.angle(i,r)-n)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,i,r){var n=e.angle(i,t),o=e.angle(i,r);return e.diff(n,o)}},{key:"diff",value:function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,i){var r=Math.sin(i-t);return r>0?e.COUNTERCLOCKWISE:r<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,i,r){var n=e.angle(i,t),o=e.angle(i,r)-n;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}]),e}();id.PI_TIMES_2=2*Math.PI,id.PI_OVER_2=Math.PI/2,id.PI_OVER_4=Math.PI/4,id.COUNTERCLOCKWISE=td.COUNTERCLOCKWISE,id.CLOCKWISE=td.CLOCKWISE,id.NONE=td.COLLINEAR;var ip=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=td.index(this._s0,this._s1,this._s2),r=i===td.CLOCKWISE&&this._side===te.LEFT||i===td.COUNTERCLOCKWISE&&this._side===te.RIGHT;0===i?this.addCollinear(e):r?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)}},{key:"addLineEndCap",value:function(t,e){var i=new ie(t,e),r=new ie;this.computeOffsetSegment(i,te.LEFT,this._distance,r);var n=new ie;this.computeOffsetSegment(i,te.RIGHT,this._distance,n);var o=e.x-t.x,a=Math.atan2(e.y-t.y,o);switch(this._bufParams.getEndCapStyle()){case v.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,td.CLOCKWISE,this._distance),this._segList.addPt(n.p1);break;case v.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(n.p1);break;case v.CAP_SQUARE:var s=new Z;s.x=Math.abs(this._distance)*Math.cos(a),s.y=Math.abs(this._distance)*Math.sin(a);var l=new Z(r.p1.x+s.x,r.p1.y+s.y),h=new Z(n.p1.x+s.x,n.p1.y+s.y);this._segList.addPt(l),this._segList.addPt(h)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,i,r){var n=tb.intersection(e.p0,e.p1,i.p0,i.p1);if(null!==n&&(r<=0?1:n.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(n),null;this.addLimitedMitreJoin(e,i,r,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,i){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===v.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===v.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(i&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new Z(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Z(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Z(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Z(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,i,r,n){var o=e.x-t.x,a=Math.atan2(e.y-t.y,o),s=i.x-t.x,l=Math.atan2(i.y-t.y,s);r===td.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,l,r,n),this._segList.addPt(i)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,i,r){var n=this._seg0.p1,o=id.angle(n,this._seg0.p0),a=id.angleBetweenOriented(this._seg0.p0,n,this._seg1.p1)/2,s=id.normalize(o+a),l=id.normalize(s+Math.PI),h=r*i,u=i-h*Math.abs(Math.sin(a)),c=new Z(n.x+h*Math.cos(l),n.y+h*Math.sin(l)),f=new ie(n,c),d=f.pointAlongOffset(1,u),p=f.pointAlongOffset(1,-u);this._side===te.LEFT?(this._segList.addPt(d),this._segList.addPt(p)):(this._segList.addPt(p),this._segList.addPt(d))}},{key:"addDirectedFillet",value:function(t,e,i,r,n){var o=r===td.CLOCKWISE?-1:1,a=Math.abs(e-i),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,h=new Z,u=0;u<s;u++){var c=e+o*u*l;h.x=t.x+n*Math.cos(c),h.y=t.y+n*Math.sin(c),this._segList.addPt(h)}}},{key:"computeOffsetSegment",value:function(t,e,i,r){var n=e===te.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=n*i*o/s,h=n*i*a/s;r.p0.x=t.p0.x-h,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-h,r.p1.y=t.p1.y+l}},{key:"addInsideTurn",value:function(t,i){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new Z((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new Z((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new Z(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ic,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===v.JOIN_BEVEL||this._bufParams.getJoinStyle()===v.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,td.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ie,this._seg1=new ie,this._offset0=new ie,this._offset1=new ie,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],i=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=i,this._li=new ex,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===v.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)}}]),e}();ip.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,ip.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,ip.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,ip.MAX_CLOSING_SEG_LEN_FACTOR=80;var im=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var i=e<0,r=Math.abs(e),n=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],n):this.computeOffsetCurve(t,i,n);var o=n.getCoordinates();return i&&t$.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(t,e,i){var r=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);var n=iu.simplify(t,-r),o=n.length-1;i.initSideSegments(n[o],n[o-1],te.LEFT),i.addFirstSegment();for(var a=o-2;a>=0;a--)i.addNextSegment(n[a],!0)}else{i.addSegments(t,!1);var s=iu.simplify(t,r),l=s.length-1;i.initSideSegments(s[0],s[1],te.LEFT),i.addFirstSegment();for(var h=2;h<=l;h++)i.addNextSegment(s[h],!0)}i.addLastSegment(),i.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,i){var r=this.simplifyTolerance(this._distance);e===te.RIGHT&&(r=-r);var n=iu.simplify(t,r),o=n.length-1;i.initSideSegments(n[o-1],n[0],e);for(var a=1;a<=o;a++){var s=1!==a;i.addNextSegment(n[a],s)}i.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var i=this.simplifyTolerance(this._distance),r=iu.simplify(t,i),n=r.length-1;e.initSideSegments(r[0],r[1],te.LEFT);for(var o=2;o<=n;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[n-1],r[n]);var a=iu.simplify(t,-i),s=a.length-1;e.initSideSegments(a[s],a[s-1],te.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case v.CAP_ROUND:e.createCircle(t);break;case v.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var i=Math.abs(e),r=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var n=e<0;this.computeSingleSidedBufferCurve(t,n,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,i,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,i,n),n.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,i){var r=this.simplifyTolerance(this._distance);if(e){var n=iu.simplify(t,-r),o=n.length-1;i.initSideSegments(n[o],n[o-1],te.LEFT),i.addFirstSegment();for(var a=o-2;a>=0;a--)i.addNextSegment(n[a],!0)}else{var s=iu.simplify(t,r),l=s.length-1;i.initSideSegments(s[0],s[1],te.LEFT),i.addFirstSegment();for(var h=2;h<=l;h++)i.addNextSegment(s[h],!0)}i.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new ip(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new Z(t[i]);return e}}]),e}(),ig=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"findStabbedSegments",value:function(){if(1==arguments.length){for(var t=arguments[0],e=new ty,i=this._subgraphs.iterator();i.hasNext();){var r=i.next(),n=r.getEnvelope();t.y<n.getMinY()||t.y>n.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3==arguments.length){if(ta(arguments[2],tn)&&arguments[0]instanceof Z&&arguments[1]instanceof ej){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),h=0;h<l.length-1;h++)if(this._seg.p0=l[h],this._seg.p1=l[h+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||td.index(this._seg.p0,this._seg.p1,o)===td.RIGHT)){var u=a.getDepth(te.LEFT);this._seg.p0.equals(l[h])||(u=a.getDepth(te.RIGHT));var c=new iy(this._seg,u);s.add(c)}}else if(ta(arguments[2],tn)&&arguments[0]instanceof Z&&ta(arguments[1],tn))for(var f=arguments[0],d=arguments[2],p=arguments[1].iterator();p.hasNext();){var m=p.next();m.isForward()&&this.findStabbedSegments(f,m,d)}}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:e$.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ie;var t=arguments[0];this._subgraphs=t}}]),e}(),iy=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"compareTo",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return -1;var i=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==i||0!=(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(t,e){var i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new ie(t),this._leftDepth=e}}]),e}();ig.DepthSegment=iy;var iv=function(e){n(o,e);var i=f(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(u(e),arguments),e}return r(o,null,[{key:"constructor_",value:function(){_.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),o}(_),i_=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getY",value:function(){var t=this.y/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new iv;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new iv;return t}},{key:"getCoordinate",value:function(){var t=new Z;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0==arguments.length)this.x=0,this.y=0,this.w=1;else if(1==arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2==arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this.x=i,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var n=arguments[0],o=arguments[1];this.x=n.y*o.w-o.y*n.w,this.y=o.x*n.w-n.x*o.w,this.w=n.x*o.y-o.x*n.y}else if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3==arguments.length){var l=arguments[0],h=arguments[1],u=arguments[2];this.x=l,this.y=h,this.w=u}else if(4==arguments.length){var c=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3],m=c.y-f.y,g=f.x-c.x,y=c.x*f.y-f.x*c.y,v=d.y-p.y,_=p.x-d.x,b=d.x*p.y-p.x*d.y;this.x=g*b-_*y,this.y=v*y-m*b,this.w=m*_-v*g}}}]),e}(),ib=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new b("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.p0=t,this.p1=e,this.p2=i}},{key:"area",value:function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)}},{key:"signedArea",value:function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2}},{key:"det",value:function(t,e,i,r){return t*r-e*i}},{key:"interpolateZ",value:function(t,e,i,r){var n=e.x,o=e.y,a=i.x-n,s=r.x-n,l=i.y-o,h=r.y-o,u=a*h-s*l,c=t.x-n,f=t.y-o,d=(h*c-s*f)/u,p=(-l*c+a*f)/u;return e.getZ()+d*(i.getZ()-e.getZ())+p*(r.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,i){var r=t.distance(e),n=e.distance(i),o=i.distance(t),a=r;return n>a&&(a=n),o>a&&(a=o),a}},{key:"circumcentreDD",value:function(t,e,i){var r=tu.valueOf(t.x).subtract(i.x),n=tu.valueOf(t.y).subtract(i.y),o=tu.valueOf(e.x).subtract(i.x),a=tu.valueOf(e.y).subtract(i.y),s=tu.determinant(r,n,o,a).multiply(2),l=r.sqr().add(n.sqr()),h=o.sqr().add(a.sqr()),u=tu.determinant(n,l,a,h),c=tu.determinant(r,l,o,h);return new Z(tu.valueOf(i.x).subtract(u.divide(s)).doubleValue(),tu.valueOf(i.y).add(c.divide(s)).doubleValue())}},{key:"isAcute",value:function(t,e,i){return!!id.isAcute(t,e,i)&&!!id.isAcute(e,i,t)&&!!id.isAcute(i,t,e)}},{key:"circumcentre",value:function(t,i,r){var n=r.x,o=r.y,a=t.x-n,s=t.y-o,l=i.x-n,h=i.y-o,u=2*e.det(a,s,l,h);return new Z(n-e.det(s,a*a+s*s,h,l*l+h*h)/u,o+e.det(a,a*a+s*s,l,l*l+h*h)/u)}},{key:"perpendicularBisector",value:function(t,e){var i=e.x-t.x,r=e.y-t.y,n=new i_(t.x+i/2,t.y+r/2,1),o=new i_(t.x-r+i/2,t.y+i+r/2,1);return new i_(n,o)}},{key:"angleBisector",value:function(t,e,i){var r=e.distance(t),n=r/(r+e.distance(i)),o=i.x-t.x,a=i.y-t.y;return new Z(t.x+n*o,t.y+n*a)}},{key:"area3D",value:function(t,e,i){var r=e.x-t.x,n=e.y-t.y,o=e.getZ()-t.getZ(),a=i.x-t.x,s=i.y-t.y,l=i.getZ()-t.getZ(),h=n*l-o*s,u=o*a-r*l,c=r*s-n*a;return Math.sqrt(h*h+u*u+c*c)/2}},{key:"centroid",value:function(t,e,i){return new Z((t.x+e.x+i.x)/3,(t.y+e.y+i.y)/3)}},{key:"inCentre",value:function(t,e,i){var r=e.distance(i),n=t.distance(i),o=t.distance(e),a=r+n+o;return new Z((r*t.x+n*e.x+o*i.x)/a,(r*t.y+n*e.y+o*i.y)/a)}}]),e}(),ix=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"addRingSide",value:function(t,e,i,r,n){if(0===e&&t.length<tU.MINIMUM_VALID_SIZE)return null;var o=r,a=n;t.length>=tU.MINIMUM_VALID_SIZE&&td.isCCW(t)&&(o=n,a=r,i=te.opposite(i));var s=this._curveBuilder.getRingCurve(t,i,e);this.addCurve(s,o,a)}},{key:"addRingBothSides",value:function(t,e){this.addRingSide(t,e,te.LEFT,X.EXTERIOR,X.INTERIOR),this.addRingSide(t,e,te.RIGHT,X.INTERIOR,X.EXTERIOR)}},{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,X.EXTERIOR,X.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,i=te.LEFT;this._distance<0&&(e=-this._distance,i=te.RIGHT);var r=t.getExteriorRing(),n=t$.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance)||this._distance<=0&&n.length<3)return null;this.addRingSide(n,e,i,X.EXTERIOR,X.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=t$.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addRingSide(s,e,te.opposite(i),X.INTERIOR,X.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var i=new ib(t[0],t[1],t[2]),r=i.inCentre();return tM.pointToSegment(r,i.p0,i.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=t$.removeRepeatedPoints(t.getCoordinates());if(t$.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,X.EXTERIOR,X.INTERIOR)}}},{key:"addCurve",value:function(t,e,i){if(null===t||t.length<2)return null;var r=new it(t,new ek(0,X.BOUNDARY,e,i));this._curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof tB)this.addPolygon(t);else if(t instanceof tL)this.addLineString(t);else if(t instanceof tN)this.addPoint(t);else if(t instanceof tV)this.addCollection(t);else if(t instanceof t4)this.addCollection(t);else if(t instanceof t1)this.addCollection(t);else{if(!(t instanceof tq))throw new K(t.getGeometryType());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);var r=t.getEnvelopeInternal(),n=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>n}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ty;var t=arguments[0],e=arguments[1],i=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=i}}]),e}(),iw=function(){function e(){t(this,e)}return r(e,[{key:"locate",value:function(t){}}]),e}(),iM=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Y;var t=this._parent.getGeometryN(this._index++);return t instanceof tq?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new K(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[e8]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof tq)}}]),e}(),iS=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"locate",value:function(t){return e.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[iw]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,i){if(i.isEmpty())return X.EXTERIOR;var r=i.getExteriorRing(),n=e.locatePointInRing(t,r);if(n!==X.INTERIOR)return n;for(var o=0;o<i.getNumInteriorRing();o++){var a=i.getInteriorRingN(o),s=e.locatePointInRing(t,a);if(s===X.BOUNDARY)return X.BOUNDARY;if(s===X.INTERIOR)return X.EXTERIOR}return X.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?eM.locateInRing(t,e.getCoordinates()):X.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,i){return X.EXTERIOR!==e.locatePointInPolygon(t,i)}},{key:"locateInGeometry",value:function(t,i){if(i instanceof tB)return e.locatePointInPolygon(t,i);if(i instanceof tq)for(var r=new iM(i);r.hasNext();){var n=r.next();if(n!==i){var o=e.locateInGeometry(t,n);if(o!==X.EXTERIOR)return o}}return X.EXTERIOR}},{key:"isContained",value:function(t,i){return X.EXTERIOR!==e.locate(t,i)}},{key:"locate",value:function(t,i){return i.isEmpty()?X.EXTERIOR:i.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,i):X.EXTERIOR}}]),e}(),ik=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,i=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var n=this._resultAreaEdgeList.get(r),o=n.getSym();if(n.getLabel().isArea())switch(null===t&&n.isInResult()&&(t=n),i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!n.isInResult())continue;e.setNext(n),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new tm("no outgoing dirEdge found",this.getCoordinate());j.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var i=t.get(0);if(1===e)return i;var r=t.get(e-1),n=i.getQuadrant(),o=r.getQuadrant();return eB.isNorthern(n)&&eB.isNorthern(o)?i:eB.isNorthern(n)||eB.isNorthern(o)?0!==i.getDy()?i:0!==r.getDy()?r:(j.shouldNeverReachHere("found two horizontal edges incident on node"),null):r}},{key:"print",value:function(t){tx.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ty;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,i=this._edgeList.size()-1;i>=0;i--){var r=this._edgeList.get(i),n=r.getSym();null===e&&(e=n),null!==t&&n.setNext(t),t=r}e.setNext(t)}},{key:"computeDepths",value:function(){if(1==arguments.length){var t=arguments[0],e=this.findIndex(t),i=t.getDepth(te.LEFT),r=t.getDepth(te.RIGHT),n=this.computeDepths(e+1,this._edgeList.size(),i);if(this.computeDepths(0,e,n)!==r)throw new tm("depth mismatch at "+t.getCoordinate())}else if(3==arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(te.RIGHT,a),a=l.getDepth(te.LEFT)}return a}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,i=null,r=this._SCANNING_FOR_INCOMING,n=this._resultAreaEdgeList.size()-1;n>=0;n--){var o=this._resultAreaEdgeList.get(n),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;i.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(j.isTrue(null!==e,"found null for first outgoing dirEdge"),j.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0==arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1==arguments.length){for(var i=arguments[0],r=0,n=this.iterator();n.hasNext();)n.next().getEdgeRing()===i&&r++;return r}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=X.NONE,e=this.iterator();e.hasNext();){var i=e.next(),r=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){t=X.INTERIOR;break}if(r.isInResult()){t=X.EXTERIOR;break}}}if(t===X.NONE)return null;for(var n=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(n===X.INTERIOR):(a.isInResult()&&(n=X.EXTERIOR),s.isInResult()&&(n=X.INTERIOR))}}},{key:"computeLabelling",value:function(t){d(o(a.prototype),"computeLabelling",this).call(this,t),this._label=new ek(X.NONE);for(var e=this.iterator();e.hasNext();)for(var i=e.next().getEdge().getLabel(),r=0;r<2;r++){var n=i.getLocation(r);n!==X.INTERIOR&&n!==X.BOUNDARY||this._label.setLocation(r,X.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),a}(function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)}},{key:"propagateSideLabels",value:function(t){for(var e=X.NONE,i=this.iterator();i.hasNext();){var r=i.next().getLabel();r.isArea(t)&&r.getLocation(t,te.LEFT)!==X.NONE&&(e=r.getLocation(t,te.LEFT))}if(e===X.NONE)return null;for(var n=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,te.ON)===X.NONE&&s.setLocation(t,te.ON,n),s.isArea(t)){var l=s.getLocation(t,te.LEFT),h=s.getLocation(t,te.RIGHT);if(h!==X.NONE){if(h!==n)throw new tm("side location conflict",a.getCoordinate());l===X.NONE&&j.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),n=l}else j.isTrue(s.getLocation(t,te.LEFT)===X.NONE,"found single null side"),s.setLocation(t,te.RIGHT,n),s.setLocation(t,te.LEFT,n)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){tx.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(0>=e.size())return!0;var i=e.size()-1,r=e.get(i).getLabel().getLocation(t,te.LEFT);j.isTrue(r!==X.NONE,"Found unlabelled area edge");for(var n=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();j.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,te.LEFT),l=a.getLocation(t,te.RIGHT);if(s===l||l!==n)return!1;n=s}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return -1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new ty(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,i){return this._ptInAreaLocation[t]===X.NONE&&(this._ptInAreaLocation[t]=iS.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new ts;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var i=e.next();t.append(i),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var r=i.next().getLabel(),n=0;n<2;n++)r.isLine(n)&&r.getLocation(n)===X.BOUNDARY&&(e[n]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var h=X.NONE;if(e[l])h=X.EXTERIOR;else{var u=a.getCoordinate();h=this.getLocation(l,u,t)}s.setAllLocationsIfNull(l,h)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new eO,this._edgeList=null,this._ptInAreaLocation=[X.NONE,X.NONE]}}]),e}()),iE=function(e){n(o,e);var i=f(o);function o(){return t(this,o),i.call(this)}return r(o,[{key:"createNode",value:function(t){return new eA(t,new ik)}}]),o}(eq),iI=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"compareTo",value:function(t){var i=t;return e.compareOriented(this._pts,this._orientation,i._pts,i._orientation)}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:"orientation",value:function(t){return 1===t$.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,i,r){for(var n=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?i.length:-1,l=e?0:t.length-1,h=r?0:i.length-1;;){var u=t[l].compareTo(i[h]);if(0!==u)return u;var c=(l+=n)===a,f=(h+=o)===s;if(c&&!f)return -1;if(!c&&f)return 1;if(c&&f)return 0}}}]),e}(),iP=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=i.getCoordinates(),n=0;n<r.length;n++)n>0&&t.print(","),t.print(r[n].x+" "+r[n].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return -1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new iI(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new iI(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:"constructor_",value:function(){this._edges=new ty,this._ocaMap=new eO}}]),e}(),iT=function(){function e(){t(this,e)}return r(e,[{key:"processIntersections",value:function(t,e,i,r){}},{key:"isDone",value:function(){}}]),e}(),iA=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"isTrivialIntersection",value:function(t,i,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(i,n))return!0;if(t.isClosed()){var o=t.size()-1;if(0===i&&n===o||0===n&&i===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,i,r){if(t===i&&e===r)return null;this.numTests++;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[r],s=i.getCoordinates()[r+1];this._li.computeIntersection(n,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[iT]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),e}(),iC=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new Z(t),this.segmentIndex=e,this.dist=i}}]),e}(),iL=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var r=e.next(),n=this.createSplitEdge(i,r);t.add(n),i=r}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],n=e.dist>0||!e.coord.equals2D(r);n||i--;var o=Array(i).fill(null),a=0;o[a++]=new Z(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return n&&(o[a]=e.coord),new iB(o,new ek(this.edge._label))}},{key:"add",value:function(t,e,i){var r=new iC(t,e,i),n=this._nodeMap.get(r);return null!==n?n:(this._nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new eO,this.edge=null;var t=arguments[0];this.edge=t}}]),e}(),iR=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])||e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))&&this._matrix[X.EXTERIOR][X.INTERIOR]===tT.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===tT.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])||e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))&&this._matrix[X.INTERIOR][X.EXTERIOR]===tT.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===tT.FALSE}},{key:"set",value:function(){if(1==arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var i=Math.trunc(e/3),r=e%3;this._matrix[i][r]=tT.toDimensionValue(t.charAt(e))}else if(3==arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2];this._matrix[n][o]=a}}},{key:"isContains",value:function(){return e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.EXTERIOR][X.INTERIOR]===tT.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===tT.FALSE}},{key:"setAtLeast",value:function(){if(1==arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var i=Math.trunc(e/3),r=e%3;this.setAtLeast(i,r,tT.toDimensionValue(t.charAt(e)))}else if(3==arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2];this._matrix[n][o]<a&&(this._matrix[n][o]=a)}}},{key:"setAtLeastIfValid",value:function(t,e,i){t>=0&&e>=0&&this.setAtLeast(t,e,i)}},{key:"isWithin",value:function(){return e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.INTERIOR][X.EXTERIOR]===tT.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===tT.FALSE}},{key:"isTouches",value:function(t,i){return t>i?this.isTouches(i,t):(t===tT.A&&i===tT.A||t===tT.L&&i===tT.L||t===tT.L&&i===tT.A||t===tT.P&&i===tT.A||t===tT.P&&i===tT.L)&&this._matrix[X.INTERIOR][X.INTERIOR]===tT.FALSE&&(e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))}},{key:"isOverlaps",value:function(t,i){return t===tT.P&&i===tT.P||t===tT.A&&i===tT.A?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR]):t===tT.L&&i===tT.L&&1===this._matrix[X.INTERIOR][X.INTERIOR]&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR])}},{key:"isEquals",value:function(t,i){return t===i&&e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.INTERIOR][X.EXTERIOR]===tT.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===tT.FALSE&&this._matrix[X.EXTERIOR][X.INTERIOR]===tT.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===tT.FALSE}},{key:"toString",value:function(){for(var t=new tJ("123456789"),e=0;e<3;e++)for(var i=0;i<3;i++)t.setCharAt(3*e+i,tT.toDimensionSymbol(this._matrix[e][i]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var i=0;i<3;i++)this._matrix[e][i]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new b("Should be length 9: "+t);for(var i=0;i<3;i++)for(var r=0;r<3;r++)if(!e.matches(this._matrix[i][r],t.charAt(3*i+r)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var i=0;i<3;i++)this.setAtLeast(e,i,t.get(e,i))}},{key:"isDisjoint",value:function(){return this._matrix[X.INTERIOR][X.INTERIOR]===tT.FALSE&&this._matrix[X.INTERIOR][X.BOUNDARY]===tT.FALSE&&this._matrix[X.BOUNDARY][X.INTERIOR]===tT.FALSE&&this._matrix[X.BOUNDARY][X.BOUNDARY]===tT.FALSE}},{key:"isCrosses",value:function(t,i){return t===tT.P&&i===tT.L||t===tT.P&&i===tT.A||t===tT.L&&i===tT.A?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR]):t===tT.L&&i===tT.P||t===tT.A&&i===tT.P||t===tT.A&&i===tT.L?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR]):t===tT.L&&i===tT.L&&0===this._matrix[X.INTERIOR][X.INTERIOR]}},{key:"interfaces_",get:function(){return[M]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0==arguments.length)this._matrix=[,,,].fill().map(function(){return[,,,]}),this.setAll(tT.FALSE);else if(1==arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var i=arguments[0];e.constructor_.call(this),this._matrix[X.INTERIOR][X.INTERIOR]=i._matrix[X.INTERIOR][X.INTERIOR],this._matrix[X.INTERIOR][X.BOUNDARY]=i._matrix[X.INTERIOR][X.BOUNDARY],this._matrix[X.INTERIOR][X.EXTERIOR]=i._matrix[X.INTERIOR][X.EXTERIOR],this._matrix[X.BOUNDARY][X.INTERIOR]=i._matrix[X.BOUNDARY][X.INTERIOR],this._matrix[X.BOUNDARY][X.BOUNDARY]=i._matrix[X.BOUNDARY][X.BOUNDARY],this._matrix[X.BOUNDARY][X.EXTERIOR]=i._matrix[X.BOUNDARY][X.EXTERIOR],this._matrix[X.EXTERIOR][X.INTERIOR]=i._matrix[X.EXTERIOR][X.INTERIOR],this._matrix[X.EXTERIOR][X.BOUNDARY]=i._matrix[X.EXTERIOR][X.BOUNDARY],this._matrix[X.EXTERIOR][X.EXTERIOR]=i._matrix[X.EXTERIOR][X.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],i=arguments[1];return i===tT.SYM_DONTCARE||i===tT.SYM_TRUE&&(t>=0||t===tT.TRUE)||i===tT.SYM_FALSE&&t===tT.FALSE||i===tT.SYM_P&&t===tT.P||i===tT.SYM_L&&t===tT.L||i===tT.SYM_A&&t===tT.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var r=arguments[1];return new e(arguments[0]).matches(r)}}},{key:"isTrue",value:function(t){return t>=0||t===tT.TRUE}}]),e}(),iN=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),tx.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=tO.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=Array(this._size).fill(null);return tx.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0==arguments.length)e.constructor_.call(this,10);else if(1==arguments.length){var t=arguments[0];this._data=Array(t).fill(null)}}}]),e}(),iz=function(){function e(){t(this,e)}return r(e,[{key:"getChainStartIndices",value:function(t){var e=0,i=new iN(Math.trunc(t.length/2));i.add(e);do{var r=this.findChainEnd(t,e);i.add(r),e=r}while(e<t.length-1)return i.toArray()}},{key:"findChainEnd",value:function(t,e){for(var i=eB.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&eB.quadrant(t[r-1],t[r])===i;)r++;return r-1}},{key:"OLDgetChainStartIndices",value:function(t){var i=0,r=new ty;r.add(i);do{var n=this.findChainEnd(t,i);r.add(n),i=n}while(i<t.length-1)return e.toIntArray(r)}}],[{key:"toIntArray",value:function(t){for(var e=Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e}}]),e}(),iO=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i}},{key:"computeIntersectsForChain",value:function(){if(4==arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],r)}else if(6==arguments.length){var n=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],h=arguments[5];if(o-n==1&&l-s==1)return h.addIntersections(this.e,n,a.e,s),null;if(!this.overlaps(n,o,a,s,l))return null;var u=Math.trunc((n+o)/2),c=Math.trunc((s+l)/2);n<u&&(s<c&&this.computeIntersectsForChain(n,u,a,s,c,h),c<l&&this.computeIntersectsForChain(n,u,a,c,l,h)),u<o&&(s<c&&this.computeIntersectsForChain(u,o,a,s,c,h),c<l&&this.computeIntersectsForChain(u,o,a,c,l,h))}}},{key:"overlaps",value:function(t,e,i,r,n){return H.intersects(this.pts[t],this.pts[e],i.pts[r],i.pts[n])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(i,t,r,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new iz;this.startIndex=e.getChainStartIndices(this.pts)}}]),e}(),iD=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,i){this._depth[t][e]=i}},{key:"isNull",value:function(){if(0==arguments.length){for(var t=0;t<2;t++)for(var i=0;i<3;i++)if(this._depth[t][i]!==e.NULL_VALUE)return!1;return!0}if(1==arguments.length){var r=arguments[0];return this._depth[r][1]===e.NULL_VALUE}if(2==arguments.length){var n=arguments[0],o=arguments[1];return this._depth[n][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var r=0;this._depth[t][i]>e&&(r=1),this._depth[t][i]=r}}}},{key:"getDelta",value:function(t){return this._depth[t][te.RIGHT]-this._depth[t][te.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?X.EXTERIOR:X.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1==arguments.length)for(var t=arguments[0],i=0;i<2;i++)for(var r=1;r<3;r++){var n=t.getLocation(i,r);n!==X.EXTERIOR&&n!==X.INTERIOR||(this.isNull(i,r)?this._depth[i][r]=e.depthAtLocation(n):this._depth[i][r]+=e.depthAtLocation(n))}else if(3==arguments.length){var o=arguments[0],a=arguments[1];arguments[2]===X.INTERIOR&&this._depth[o][a]++}}}],[{key:"constructor_",value:function(){this._depth=[,,].fill().map(function(){return[,,,]});for(var t=0;t<2;t++)for(var i=0;i<3;i++)this._depth[t][i]=e.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===X.EXTERIOR?0:t===X.INTERIOR?1:e.NULL_VALUE}}]),e}();iD.NULL_VALUE=-1;var iB=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=[,,].fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new a(t,ek.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof a))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var i=!0,r=!0,n=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(i=!1),this.pts[o].equals2D(e.pts[--n])||(r=!1),!i&&!r)return!1;return!0}},{key:"getCoordinate",value:function(){if(0==arguments.length)return this.pts.length>0?this.pts[0]:null;if(1==arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){a.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new iO(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new H;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,i,r){var n=new Z(t.getIntersection(r)),o=e,a=t.getEdgeDistance(i,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];n.equals2D(l)&&(o=s,a=0)}this.eiList.add(n,o,a)}},{key:"toString",value:function(){var t=new tJ;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,i){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,i,r)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new iL(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new iD,this._depthDelta=0,1==arguments.length){var t=arguments[0];a.constructor_.call(this,t,null)}else if(2==arguments.length){var e=arguments[0],i=arguments[1];this.pts=e,this._label=i}}},{key:"updateIM",value:function(){if(!(2==arguments.length&&arguments[1]instanceof iR&&arguments[0]instanceof ek))return d(o(a),"updateIM",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,te.ON),t.getLocation(1,te.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,te.LEFT),t.getLocation(1,te.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,te.RIGHT),t.getLocation(1,te.RIGHT),2))}}]),a}(eT),iF=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var i=this._edgeList.findEqualEdge(t);if(null!==i){var r=i.getLabel(),n=t.getLabel();i.isPointwiseEqual(t)||(n=new ek(t.getLabel())).flip(),r.merge(n);var o=e.depthDelta(n),a=i.getDepthDelta()+o;i.setDepthDelta(a)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var i=new ty,r=t.iterator();r.hasNext();){var n=r.next(),o=n.getRightmostCoordinate(),a=new ig(i).getDepth(o);n.computeDepth(a),n.findResultEdges(),i.add(n),e.add(n.getDirectedEdges(),n.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new ty,i=t.getNodes().iterator();i.hasNext();){var r=i.next();if(!r.isVisited()){var n=new t_;n.create(r),e.add(n)}}return e$.sort(e,e$.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new il,i=new ex;return i.setPrecisionModel(t),e.setSegmentIntersector(new iA(i)),e}},{key:"buffer",value:function(t,e){var i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new ix(t,e,new im(i,this._bufParams)).getCurves();if(0>=r.size())return this.createEmptyResultGeometry();this.computeNodedEdges(r,i),this._graph=new eV(new iE),this._graph.addEdges(this._edgeList.getEdges());var n=this.createSubgraphs(this._graph),o=new eU(this._geomFact);this.buildSubgraphs(n,o);var a=o.getPolygons();return 0>=a.size()?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:"computeNodedEdges",value:function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var r=i.getNodedSubstrings().iterator();r.hasNext();){var n=r.next(),o=n.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=n.getData(),s=new iB(n.getCoordinates(),new ek(a));this.insertUniqueEdge(s)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new iP;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,te.LEFT),i=t.getLocation(0,te.RIGHT);return e===X.INTERIOR&&i===X.EXTERIOR?1:e===X.EXTERIOR&&i===X.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new t5,i=new ty;t.hasNext();){var r=t.next(),n=e.createLineString(r.getCoordinates());i.add(n)}return e.buildGeometry(i)}}]),e}(),ij=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"rescale",value:function(){if(ta(arguments[0],$))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],r=0;r<i.length;r++)i[r].x=i[r].x/this._scaleFactor+this._offsetX,i[r].y=i[r].y/this._scaleFactor+this._offsetY;2===i.length&&i[0].equals2D(i[1])&&tx.out.println(i)}}},{key:"scale",value:function(){if(ta(arguments[0],$)){for(var t=arguments[0],e=new ty(t.size()),i=t.iterator();i.hasNext();){var r=i.next();e.add(new it(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var n=arguments[0],o=Array(n.length).fill(null),a=0;a<n.length;a++)o[a]=new Z(Math.round((n[a].x-this._offsetX)*this._scaleFactor),Math.round((n[a].y-this._offsetY)*this._scaleFactor),n[a].getZ());return t$.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[ia]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2==arguments.length){var t=arguments[0],i=arguments[1];e.constructor_.call(this,t,i,0,0)}else if(4==arguments.length){var r=arguments[0],n=arguments[1];this._noder=r,this._scaleFactor=n,this._isScaled=!this.isIntegerPrecision()}}}]),e}(),iq=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2==arguments.length){for(var i=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var n=r.next().getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new B("found endpt/interior pt intersection at index "+o+" :pt "+i)}}},{key:"checkInteriorIntersections",value:function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var r=i.next();this.checkInteriorIntersections(e,r)}else if(2==arguments.length)for(var n=arguments[0],o=arguments[1],a=n.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var h=0;h<s.length-1;h++)this.checkInteriorIntersections(n,l,o,h);else if(4==arguments.length){var u=arguments[0],c=arguments[1],f=arguments[2],d=arguments[3];if(u===f&&c===d)return null;var p=u.getCoordinates()[c],m=u.getCoordinates()[c+1],g=f.getCoordinates()[d],y=f.getCoordinates()[d+1];if(this._li.computeIntersection(p,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,m)||this.hasInteriorIntersection(this._li,g,y)))throw new B("found non-noded intersection at "+p+"-"+m+" and "+g+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1==arguments.length)for(var i=arguments[0].getCoordinates(),r=0;r<i.length-2;r++)this.checkCollapse(i[r],i[r+1],i[r+2])}},{key:"hasInteriorIntersection",value:function(t,e,i){for(var r=0;r<t.getIntersectionNum();r++){var n=t.getIntersection(r);if(!n.equals(e)&&!n.equals(i))return!0}return!1}},{key:"checkCollapse",value:function(t,i,r){if(t.equals(r))throw new B("found non-noded collapse at "+e.fact.createLineString([t,i,r]))}}],[{key:"constructor_",value:function(){this._li=new ex,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),e}();iq.fact=new t5;var iV=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"intersectsScaled",value:function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.x,e.x),n=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<i||this._minx>r||this._maxy<n||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return j.isTrue(!(a&&s),"Found bad envelope test"),s}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new Z(this._maxx,this._maxy),this._corner[1]=new Z(this._minx,this._maxy),this._corner[2]=new Z(this._minx,this._miny),this._corner[3]=new Z(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new H(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var i=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&r||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var i=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(i,r)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=[,,,,].fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new b("Scale factor must be non-zero");1!==e&&(this._pt=new Z(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Z,this._p1Scaled=new Z),this.initCorners(this._pt)}}]),e}();iV.SAFE_ENV_EXPANSION_FACTOR=.75;var iU=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"select",value:function(){if(1==arguments.length);else if(2==arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ie}}]),e}(),iZ=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"snap",value:function(){if(1==arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3==arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2],a=i.getSafeEnvelope(),s=new iG(i,n,o);return this._index.query(a,new(function(){function e(){t(this,e)}return r(e,[{key:"interfaces_",get:function(){return[eJ]}},{key:"visitItem",value:function(t){t.select(a,s)}}]),e}())),s.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),e}(),iG=function(e){n(a,e);var i=f(a);function a(){var e;return t(this,a),e=i.call(this),a.constructor_.apply(u(e),arguments),e}return r(a,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2==arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof ir))return d(o(a.prototype),"select",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=i}}]),a}(iU);iZ.HotPixelSnapAction=iG;var iH=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"processIntersections",value:function(t,e,i,r){if(t===i&&e===r)return null;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=i.getCoordinates()[r],s=i.getCoordinates()[r+1];if(this._li.computeIntersection(n,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),i.addIntersections(this._li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[iT]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new ty}}]),e}(),iW=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"checkCorrectness",value:function(t){var e=new iq(it.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof _))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return it.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var i=new iH(e);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(ta(arguments[0],$))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof it)for(var i=arguments[0],r=i.getCoordinates(),n=0;n<r.length;n++){var o=new iV(r[n],this._scaleFactor,this._li);this._pointSnapper.snap(o,i,n)&&i.addIntersection(r[n],n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new il,this._pointSnapper=new iZ(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var i=new iV(e.next(),this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"interfaces_",get:function(){return[ia]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ex,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),e}(),iX=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return r(e,[{key:"bufferFixedPrecision",value:function(t){var e=new ij(new iW(new t3(1)),t.getScale()),i=new iF(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0==arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof tm))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1==arguments.length){var i=arguments[0],r=new t3(e.precisionScaleFactor(this._argGeom,this._distance,i));this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===t3.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new iF(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof B))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new v,this._resultGeometry=null,this._saveException=null,1==arguments.length){var t=arguments[0];this._argGeom=t}else if(2==arguments.length){var e=arguments[0],i=arguments[1];this._argGeom=e,this._bufParams=i}}},{key:"bufferOp",value:function(){if(2==arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3==arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof W&&"number"==typeof arguments[1]){var i=arguments[1],r=arguments[2],n=new e(arguments[0]);return n.setQuadrantSegments(r),n.getResultGeometry(i)}if(arguments[2]instanceof v&&arguments[0]instanceof W&&"number"==typeof arguments[1]){var o=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4==arguments.length){var a=arguments[1],s=arguments[2],l=arguments[3],h=new e(arguments[0]);return h.setQuadrantSegments(s),h.setEndCapStyle(l),h.getResultGeometry(a)}}},{key:"precisionScaleFactor",value:function(t,e,i){var r=t.getEnvelopeInternal();return Math.pow(10,i-Math.trunc(Math.log(tw.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0))/Math.log(10)+1))}}]),e}();iX.CAP_ROUND=v.CAP_ROUND,iX.CAP_BUTT=v.CAP_FLAT,iX.CAP_FLAT=v.CAP_FLAT,iX.CAP_SQUARE=v.CAP_SQUARE,iX.MAX_PRECISION_DIGITS=12;var i$=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],iY=function(){function e(i){t(this,e),this.geometryFactory=i||new t5}return r(e,[{key:"read",value:function(t){var e,i=(e="string"==typeof t?JSON.parse(t):t).type;if(!iK[i])throw Error("Unknown GeoJSON type: "+e.type);return -1!==i$.indexOf(i)?iK[i].call(this,e.coordinates):"GeometryCollection"===i?iK[i].call(this,e.geometries):iK[i].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!iJ[e])throw Error("Geometry is not supported");return iJ[e].call(this,t)}}]),e}(),iK={Feature:function(t){var e={};for(var i in t)e[i]=t[i];if(t.geometry){if(!iK[t.geometry.type])throw Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=iK.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(l(Z,p(r)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Z(t[0],t[1]),new Z(t[2],t[1]),new Z(t[2],t[3]),new Z(t[0],t[3]),new Z(t[0],t[1])])},Point:function(t){var e=l(Z,p(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(iK.Point.call(this,t[i]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=iK.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(iK.LineString.call(this,t[i]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=iK.coordinates.call(this,t[0]),i=this.geometryFactory.createLinearRing(e),r=[],n=1;n<t.length;++n){var o=t[n],a=iK.coordinates.call(this,o),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(i,r)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(iK.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},iJ={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:iJ.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=iJ.Point.call(this,r);e.push(n.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),r=0;r<i.length;++r){var n=i[r];e.push(iJ.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=iJ.LineString.call(this,r);e.push(n.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=iJ.LineString.call(this,t._shell);e.push(i.coordinates);for(var r=0;r<t._holes.length;++r){var n=t._holes[r],o=iJ.LineString.call(this,n);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=iJ.Polygon.call(this,r);e.push(n.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var r=t._geometries[i],n=r.getGeometryType();e.push(iJ[n].call(this,r))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:iX,GeoJSONReader:function(){function e(i){t(this,e),this.parser=new iY(i||new t5)}return r(e,[{key:"read",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function e(){t(this,e),this.parser=new iY(this.geometryFactory)}return r(e,[{key:"write",value:function(t){return this.parser.write(t)}}]),e}()}}()}(it);var ie=eW(it.exports);function ii(){return new ir}function ir(){this.reset()}ir.prototype={constructor:ir,reset:function(){this.s=this.t=0},add:function(t){ia(io,t,this.t),ia(this,io.s,this.s),this.s?this.t+=io.t:this.s=io.t},valueOf:function(){return this.s}};var io=new ir;function ia(t,e,i){var r=t.s=e+i,n=r-e,o=r-n;t.t=e-o+(i-n)}var is=1e-6,il=Math.PI,ih=il/2,iu=il/4,ic=2*il,id=180/il,ip=il/180,im=Math.abs,ig=Math.atan,iy=Math.atan2,iv=Math.cos,i_=Math.sin,ib=Math.sqrt;function ix(t){return t>1?0:t<-1?il:Math.acos(t)}function iw(t){return t>1?ih:t<-1?-ih:Math.asin(t)}function iM(){}function iS(t,e){t&&iP.hasOwnProperty(t.type)&&iP[t.type](t,e)}var ik,iE,iI={Feature:function(t,e){iS(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,r=-1,n=i.length;++r<n;)iS(i[r].geometry,e)}},iP={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)t=i[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){iT(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)iT(i[r],e,0)},Polygon:function(t,e){iA(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)iA(i[r],e)},GeometryCollection:function(t,e){for(var i=t.geometries,r=-1,n=i.length;++r<n;)iS(i[r],e)}};function iT(t,e,i){var r,n=-1,o=t.length-i;for(e.lineStart();++n<o;)r=t[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function iA(t,e){var i=-1,r=t.length;for(e.polygonStart();++i<r;)iT(t[i],e,1);e.polygonEnd()}function iC(t){return[iy(t[1],t[0]),iw(t[2])]}function iL(t){var e=t[0],i=t[1],r=iv(i);return[r*iv(e),r*i_(e),i_(i)]}function iR(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function iN(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function iz(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function iO(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function iD(t){var e=ib(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function iB(t,e){function i(i,r){return e((i=t(i,r))[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,r){return(i=e.invert(i,r))&&t.invert(i[0],i[1])}),i}function iF(t,e){return[t>il?t-ic:t<-il?t+ic:t,e]}function ij(t){return function(e,i){return[(e+=t)>il?e-ic:e<-il?e+ic:e,i]}}function iq(t){var e=ij(t);return e.invert=ij(-t),e}function iV(t,e){var i=iv(t),r=i_(t),n=iv(e),o=i_(e);function a(t,e){var a=iv(e),s=iv(t)*a,l=i_(t)*a,h=i_(e),u=h*i+s*r;return[iy(l*n-u*o,s*i-h*r),iw(u*n+l*o)]}return a.invert=function(t,e){var a=iv(e),s=iv(t)*a,l=i_(t)*a,h=i_(e),u=h*n-l*o;return[iy(l*n+h*o,s*i+u*r),iw(u*i-s*r)]},a}function iU(t,e){(e=iL(e))[0]-=t,iD(e);var i=ix(-e[1]);return((0>-e[2]?-i:i)+ic-is)%ic}function iZ(){var t,e=[];return{point:function(e,i){t.push([e,i])},lineStart:function(){e.push(t=[])},lineEnd:iM,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function iG(t,e){return im(t[0]-e[0])<is&&im(t[1]-e[1])<is}function iH(t,e,i,r){this.x=t,this.z=e,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function iW(t,e,i,r,n){var o,a,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i,r=t[0],a=t[e];if(iG(r,a)){for(n.lineStart(),o=0;o<e;++o)n.point((r=t[o])[0],r[1]);n.lineEnd()}else s.push(i=new iH(r,t,null,!0)),l.push(i.o=new iH(r,null,i,!1)),s.push(i=new iH(a,t,null,!1)),l.push(i.o=new iH(a,null,i,!0))}}),s.length){for(l.sort(e),iX(s),iX(l),o=0,a=l.length;o<a;++o)l[o].e=i=!i;for(var h,u,c=s[0];;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;h=f.z,n.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=h.length;o<a;++o)n.point((u=h[o])[0],u[1]);else r(f.x,f.n.x,1,n);f=f.n}else{if(d)for(o=(h=f.p.z).length-1;o>=0;--o)n.point((u=h[o])[0],u[1]);else r(f.x,f.p.x,-1,n);f=f.p}h=(f=f.o).z,d=!d}while(!f.v)n.lineEnd()}}}function iX(t){if(e=t.length){for(var e,i,r=0,n=t[0];++r<e;)n.n=i=t[r],i.p=n,n=i;n.n=i=t[0],i.p=n}}function i$(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function iY(t){for(var e,i,r,n=t.length,o=-1,a=0;++o<n;)a+=t[o].length;for(i=Array(a);--n>=0;)for(e=(r=t[n]).length;--e>=0;)i[--a]=r[e];return i}ii(),ii(),ii(),iF.invert=iF,1===(ik=i$).length&&(iE=ik,ik=function(t,e){return i$(iE(t),e)});var iK=1e9,iJ=-1e9;function iQ(t,e,i,r){function n(n,o){return t<=n&&n<=i&&e<=o&&o<=r}function o(n,o,s,h){var u=0,c=0;if(null==n||(u=a(n,s))!==(c=a(o,s))||0>l(n,o)^s>0)do h.point(0===u||3===u?t:i,u>1?r:e);while((u=(u+s+4)%4)!==c)else h.point(o[0],o[1])}function a(r,n){return im(r[0]-t)<is?n>0?0:3:im(r[0]-i)<is?n>0?2:1:im(r[1]-e)<is?n>0?1:0:n>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var i=a(t,1),r=a(e,1);return i!==r?i-r:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(a){var l,h,u,c,f,d,p,m,g,y,v,_=a,b=iZ(),x={point:w,lineStart:function(){x.point=M,h&&h.push(u=[]),y=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(M(c,f),d&&g&&b.rejoin(),l.push(b.result())),x.point=w,g&&_.lineEnd()},polygonStart:function(){_=b,l=[],h=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,i=0,n=h.length;i<n;++i)for(var o,a,s=h[i],l=1,u=s.length,c=s[0],f=c[0],d=c[1];l<u;++l)o=f,a=d,f=(c=s[l])[0],d=c[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),i=v&&e,n=(l=iY(l)).length;(i||n)&&(a.polygonStart(),i&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&iW(l,s,e,o,a),a.polygonEnd()),_=a,l=h=u=null}};function w(t,e){n(t,e)&&_.point(t,e)}function M(o,a){var s=n(o,a);if(h&&u.push([o,a]),y)c=o,f=a,d=s,y=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&g)_.point(o,a);else{var l=[p=Math.max(iJ,Math.min(iK,p)),m=Math.max(iJ,Math.min(iK,m))],b=[o=Math.max(iJ,Math.min(iK,o)),a=Math.max(iJ,Math.min(iK,a))];!function(t,e,i,r,n,o){var a,s=t[0],l=t[1],h=0,u=1,c=e[0]-s,f=e[1]-l;if(a=i-s,c||!(a>0)){if(a/=c,c<0){if(a<h)return;a<u&&(u=a)}else if(c>0){if(a>u)return;a>h&&(h=a)}if(a=n-s,c||!(a<0)){if(a/=c,c<0){if(a>u)return;a>h&&(h=a)}else if(c>0){if(a<h)return;a<u&&(u=a)}if(a=r-l,f||!(a>0)){if(a/=f,f<0){if(a<h)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>h&&(h=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>h&&(h=a)}else if(f>0){if(a<h)return;a<u&&(u=a)}return h>0&&(t[0]=s+h*c,t[1]=l+h*f),u<1&&(e[0]=s+u*c,e[1]=l+u*f),!0}}}}}(l,b,t,e,i,r)?s&&(_.lineStart(),_.point(o,a),v=!1):(g||(_.lineStart(),_.point(l[0],l[1])),_.point(b[0],b[1]),s||_.lineEnd(),v=!1)}p=o,m=a,g=s}return x}}var i0=ii();function i1(t){return t}ii(),ii(),ii();var i2=1/0,i6=1/0,i3=-1/0,i8=i3,i4={point:function(t,e){t<i2&&(i2=t),t>i3&&(i3=t),e<i6&&(i6=e),e>i8&&(i8=e)},lineStart:iM,lineEnd:iM,polygonStart:iM,polygonEnd:iM,result:function(){var t=[[i2,i6],[i3,i8]];return i3=i8=-(i6=i2=1/0),t}};function i5(t,e,i,r){return function(n,o){var a,s,l,h=e(o),u=n.invert(r[0],r[1]),c=iZ(),f=e(c),d=!1,p={point:m,lineStart:y,lineEnd:v,polygonStart:function(){p.point=_,p.lineStart=b,p.lineEnd=x,s=[],a=[]},polygonEnd:function(){p.point=m,p.lineStart=y,p.lineEnd=v,s=iY(s);var t=function(t,e){var i=e[0],r=e[1],n=[i_(i),-iv(i),0],o=0,a=0;i0.reset();for(var s=0,l=t.length;s<l;++s)if(u=(h=t[s]).length)for(var h,u,c=h[u-1],f=c[0],d=c[1]/2+iu,p=i_(d),m=iv(d),g=0;g<u;++g,f=v,p=b,m=x,c=y){var y=h[g],v=y[0],_=y[1]/2+iu,b=i_(_),x=iv(_),w=v-f,M=w>=0?1:-1,S=M*w,k=S>il,E=p*b;if(i0.add(iy(E*M*i_(S),m*x+E*iv(S))),o+=k?w+M*ic:w,k^f>=i^v>=i){var I=iN(iL(c),iL(y));iD(I);var P=iN(n,I);iD(P);var T=(k^w>=0?-1:1)*iw(P[2]);(r>T||r===T&&(I[0]||I[1]))&&(a+=k^w>=0?1:-1)}}return(o<-is||o<is&&i0<-is)^1&a}(a,u);s.length?(d||(o.polygonStart(),d=!0),iW(s,i9,t,i,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(e,i){var r=n(e,i);t(e=r[0],i=r[1])&&o.point(e,i)}function g(t,e){var i=n(t,e);h.point(i[0],i[1])}function y(){p.point=g,h.lineStart()}function v(){p.point=m,h.lineEnd()}function _(t,e){l.push([t,e]);var i=n(t,e);f.point(i[0],i[1])}function b(){f.lineStart(),l=[]}function x(){_(l[0][0],l[0][1]),f.lineEnd();var t,e,i,r,n=f.clean(),h=c.result(),u=h.length;if(l.pop(),a.push(l),l=null,u){if(1&n){if((e=(i=h[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),t=0;t<e;++t)o.point((r=i[t])[0],r[1]);o.lineEnd()}}else u>1&&2&n&&h.push(h.pop().concat(h.shift())),s.push(h.filter(i7))}}return p}}function i7(t){return t.length>1}function i9(t,e){return((t=t.x)[0]<0?t[1]-ih-is:ih-t[1])-((e=e.x)[0]<0?e[1]-ih-is:ih-e[1])}ii();var rt=i5(function(){return!0},function(t){var e,i=NaN,r=NaN,n=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?il:-il,l=im(o-i);im(l-il)<is?(t.point(i,r=(r+a)/2>0?ih:-ih),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):n!==s&&l>=il&&(im(i-n)<is&&(i-=n*is),im(o-s)<is&&(o-=s*is),r=function(t,e,i,r){var n,o,a=i_(t-i);return im(a)>is?ig((i_(e)*(o=iv(r))*i_(i)-i_(r)*(n=iv(e))*i_(t))/(n*o*a)):(e+r)/2}(i,r,o,a),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(i=o,r=a),n=s},lineEnd:function(){t.lineEnd(),i=r=NaN},clean:function(){return 2-e}}},function(t,e,i,r){var n;if(null==t)n=i*ih,r.point(-il,n),r.point(0,n),r.point(il,n),r.point(il,0),r.point(il,-n),r.point(0,-n),r.point(-il,-n),r.point(-il,0),r.point(-il,n);else if(im(t[0]-e[0])>is){var o=t[0]<e[0]?il:-il;n=i*o/2,r.point(-o,n),r.point(0,n),r.point(o,n)}else r.point(e[0],e[1])},[-il,-ih]);function re(t,e){var i=iv(t),r=i>0,n=im(i)>is;function o(t,e){return iv(t)*iv(e)>i}function a(t,e,r){var n=[1,0,0],o=iN(iL(t),iL(e)),a=iR(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var h=i*a/l,u=-i*s/l,c=iN(n,o),f=iO(n,h);iz(f,iO(o,u));var d=c,p=iR(f,d),m=iR(d,d),g=p*p-m*(iR(f,f)-1);if(!(g<0)){var y=ib(g),v=iO(d,(-p-y)/m);if(iz(v,f),v=iC(v),!r)return v;var _,b=t[0],x=e[0],w=t[1],M=e[1];x<b&&(_=b,b=x,x=_);var S=x-b,k=im(S-il)<is;if(!k&&M<w&&(_=w,w=M,M=_),k||S<is?k?w+M>0^v[1]<(im(v[0]-b)<is?w:M):w<=v[1]&&v[1]<=M:S>il^(b<=v[0]&&v[0]<=x)){var E=iO(d,(-p+y)/m);return iz(E,f),[v,iC(E)]}}}function s(e,i){var n=r?t:il-t,o=0;return e<-n?o|=1:e>n&&(o|=2),i<-n?o|=4:i>n&&(o|=8),o}return i5(o,function(t){var e,i,l,h,u;return{lineStart:function(){h=l=!1,u=1},point:function(c,f){var d,p,m=[c,f],g=o(c,f),y=r?g?0:s(c,f):g?s(c+(c<0?il:-il),f):0;(!e&&(h=l=g)&&t.lineStart(),g!==l&&(!(p=a(e,m))||iG(e,p)||iG(m,p))&&(m[0]+=is,m[1]+=is,g=o(m[0],m[1])),g!==l)?(u=0,g?(t.lineStart(),p=a(m,e),t.point(p[0],p[1])):(p=a(e,m),t.point(p[0],p[1]),t.lineEnd()),e=p):n&&e&&r^g&&!(y&i)&&(d=a(m,e,!0))&&(u=0,r?(t.lineStart(),t.point(d[0][0],d[0][1]),t.point(d[1][0],d[1][1]),t.lineEnd()):(t.point(d[1][0],d[1][1]),t.lineEnd(),t.lineStart(),t.point(d[0][0],d[0][1]))),!g||e&&iG(e,m)||t.point(m[0],m[1]),e=m,l=g,i=y},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(h&&l)<<1}}},function(i,r,n,o){!function(t,e,i,r,n,o){if(i){var a=iv(e),s=i_(e),l=r*i;null==n?(n=e+r*ic,o=e-l/2):(n=iU(a,n),o=iU(a,o),(r>0?n<o:n>o)&&(n+=r*ic));for(var h,u=n;r>0?u>o:u<o;u-=l)h=iC([a,-s*iv(u),-s*i_(u)]),t.point(h[0],h[1])}}(o,t,e,n,i,r)},r?[0,-t]:[-il,t-il])}function ri(t){return function(e){var i=new rr;for(var r in t)i[r]=t[r];return i.stream=e,i}}function rr(){}function rn(t,e,i){var r=e[1][0]-e[0][0],n=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&iI.hasOwnProperty(t.type)?iI[t.type](t,e):iS(t,e)}(i,t.stream(i4));var a=i4.result(),s=Math.min(r/(a[1][0]-a[0][0]),n/(a[1][1]-a[0][1])),l=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,h=+e[0][1]+(n-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,h])}rr.prototype={constructor:rr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ro=16,ra=iv(30*ip);function rs(t,e){return+e?function(t,e){function i(r,n,o,a,s,l,h,u,c,f,d,p,m,g){var y=h-r,v=u-n,_=y*y+v*v;if(_>4*e&&m--){var b=a+f,x=s+d,w=l+p,M=ib(b*b+x*x+w*w),S=iw(w/=M),k=im(im(w)-1)<is||im(o-c)<is?(o+c)/2:iy(x,b),E=t(k,S),I=E[0],P=E[1],T=I-r,A=P-n,C=v*T-y*A;(C*C/_>e||im((y*T+v*A)/_-.5)>.3||a*f+s*d+l*p<ra)&&(i(r,n,o,a,s,l,I,P,k,b/=M,x/=M,w,m,g),g.point(I,P),i(I,P,k,b,x,w,h,u,c,f,d,p,m,g))}}return function(e){var r,n,o,a,s,l,h,u,c,f,d,p,m={point:g,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function g(i,r){i=t(i,r),e.point(i[0],i[1])}function y(){u=NaN,m.point=v,e.lineStart()}function v(r,n){var o=iL([r,n]),a=t(r,n);i(u,c,h,f,d,p,u=a[0],c=a[1],h=r,f=o[0],d=o[1],p=o[2],ro,e),e.point(u,c)}function _(){m.point=g,e.lineEnd()}function b(){y(),m.point=x,m.lineEnd=w}function x(t,e){v(r=t,e),n=u,o=c,a=f,s=d,l=p,m.point=v}function w(){i(u,c,h,f,d,p,n,o,r,a,s,l,ro,e),m.lineEnd=_,_()}return m}}(t,e):function(t){return ri({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}(t)}var rl=ri({point:function(t,e){this.stream.point(t*ip,e*ip)}});function rh(t){return(function(t){var e,i,r,n,o,a,s,l,h,u,c=150,f=480,d=250,p=0,m=0,g=0,y=0,v=0,_=null,b=rt,x=null,w=i1,M=.5,S=rs(I,.5);function k(t){return[(t=o(t[0]*ip,t[1]*ip))[0]*c+i,r-t[1]*c]}function E(t){return(t=o.invert((t[0]-i)/c,(r-t[1])/c))&&[t[0]*id,t[1]*id]}function I(t,n){return[(t=e(t,n))[0]*c+i,r-t[1]*c]}function P(){o=iB(n=function(t,e,i){return(t%=ic)?e||i?iB(iq(t),iV(e,i)):iq(t):e||i?iV(e,i):iF}(g,y,v),e);var t=e(p,m);return i=f-t[0]*c,r=d+t[1]*c,T()}function T(){return h=u=null,k}return k.stream=function(t){return h&&u===t?h:h=rl(b(n,S(w(u=t))))},k.clipAngle=function(t){return arguments.length?(b=+t?re(_=t*ip,6*ip):(_=null,rt),T()):_*id},k.clipExtent=function(t){return arguments.length?(w=null==t?(x=a=s=l=null,i1):iQ(x=+t[0][0],a=+t[0][1],s=+t[1][0],l=+t[1][1]),T()):null==x?null:[[x,a],[s,l]]},k.scale=function(t){return arguments.length?(c=+t,P()):c},k.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],P()):[f,d]},k.center=function(t){return arguments.length?(p=t[0]%360*ip,m=t[1]%360*ip,P()):[p*id,m*id]},k.rotate=function(t){return arguments.length?(g=t[0]%360*ip,y=t[1]%360*ip,v=t.length>2?t[2]%360*ip:0,P()):[g*id,y*id,v*id]},k.precision=function(t){return arguments.length?(S=rs(I,M=t*t),T()):ib(M)},k.fitExtent=function(t,e){return rn(k,t,e)},k.fitSize=function(t,e){return function(t,e,i){return rn(t,[[0,0],e],i)}(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&E,P()}})(function(){return t})()}function ru(t){return function(e,i){var r=iv(e),n=iv(i),o=t(r*n);return[o*n*i_(e),o*i_(i)]}}function rc(t){return function(e,i){var r=ib(e*e+i*i),n=t(r),o=i_(n);return[iy(e*o,r*iv(n)),iw(r&&i*o/r)]}}ru(function(t){return ib(2/(1+t))}).invert=rc(function(t){return 2*iw(t/2)});var rf=ru(function(t){return(t=ix(t))&&t/i_(t)});function rd(){return rh(rf).scale(79.4188).clipAngle(179.999)}function rp(t,e){return[t,e]}rf.invert=rc(function(t){return t}),rp.invert=rp;var rm=ie.BufferOp,rg=ie.GeoJSONReader,ry=ie.GeoJSONWriter;function rv(t,e,i,r){var n=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return tc(t,function(t){var n=rv(t,e,i,r);n&&a.push(n)}),M(a)}var s=function(t){var e=e9(t).geometry.coordinates,i=[-e[0],-e[1]];return rd().rotate(i).scale(f)}(o),l={type:o.type,coordinates:rb(o.coordinates,s)},h=(new rg).read(l),u=T(A(e,i),"meters"),c=rm.bufferOp(h,u,r);if(!r_((c=(new ry).write(c)).coordinates))return m({type:c.type,coordinates:rx(c.coordinates,s)},n)}function r_(t){return Array.isArray(t[0])?r_(t[0]):isNaN(t[0])}function rb(t,i){return"object"!==e(t[0])?i(t):t.map(function(t){return rb(t,i)})}function rx(t,i){return"object"!==e(t[0])?i.invert(t):t.map(function(t){return rx(t,i)})}function rw(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=0,r=0,n=0;return tc(t,function(t,o,a){var s=e.weight?null==a?void 0:a[e.weight]:void 0;if(!F(s=null==s?1:s))throw Error("weight value must be a number for feature index "+o);(s=Number(s))>0&&tn(t,function(t){i+=t[0]*s,r+=t[1]*s,n+=s})}),y([i/n,r/n],e.properties,e)}function rM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=0,r=0,n=0;return tn(t,function(t){i+=t[0],r+=t[1],n++},!0),y([i/n,r/n],e.properties)}function rS(t,e,i,r,n){var o=r.tolerance||.001,a=0,s=0,l=0,h=0;if(tl(i,function(e){var i,r=null==(i=e.properties)?void 0:i.weight,n=null==r?1:r;if(!F(n=Number(n)))throw Error("weight value must be a number");if(n>0){h+=1;var o=n*te(e,t);0===o&&(o=1);var u=n/o;a+=e.geometry.coordinates[0]*u,s+=e.geometry.coordinates[1]*u,l+=u}}),h<1)throw Error("no features to measure");var u=a/l,c=s/l;return 1===h||0===n||Math.abs(u-e[0])<o&&Math.abs(c-e[1])<o?y([u,c],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([u,c]),rS([u,c],t,i,r,n-1))}var rk={exports:{}},rE=eX(eN);function rI(t,e){return t<e?-1:t>e?1:0}var rP=eX(Object.freeze({__proto__:null,default:function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rI;if(i(this,t),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}return n(t,[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,i=this.compare,r=e[t];t>0;){var n=t-1>>1,o=e[n];if(i(r,o)>=0)break;e[t]=o,t=n}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&0>i(e[s],a)&&(o=s,a=e[s]),i(a,n)>=0)break;e[t]=a,t=o}e[t]=n}}]),t}()})),rT={exports:{}},rA=function(t,e,i,r){var n=t[0],o=t[1],a=!1;void 0===i&&(i=0),void 0===r&&(r=e.length);for(var s=(r-i)/2,l=0,h=s-1;l<s;h=l++){var u=e[i+2*l+0],c=e[i+2*l+1],f=e[i+2*h+0],d=e[i+2*h+1];c>o!=d>o&&n<(f-u)*(o-c)/(d-c)+u&&(a=!a)}return a},rC=function(t,e,i,r){var n=t[0],o=t[1],a=!1;void 0===i&&(i=0),void 0===r&&(r=e.length);for(var s=r-i,l=0,h=s-1;l<s;h=l++){var u=e[l+i][0],c=e[l+i][1],f=e[h+i][0],d=e[h+i][1];c>o!=d>o&&n<(f-u)*(o-c)/(d-c)+u&&(a=!a)}return a};rT.exports=function(t,e,i,r){return e.length>0&&Array.isArray(e[0])?rC(t,e,i,r):rA(t,e,i,r)},rT.exports.nested=rC,rT.exports.flat=rA;var rL=rT.exports,rR={};!function(t,e){!function(t){var e=134217729,i=33306690738754706e-32;function r(t,e,i,r,n){var o,a,s,l,h=e[0],u=r[0],c=0,f=0;u>h==u>-h?(o=h,h=e[++c]):(o=u,u=r[++f]);var d=0;if(c<t&&f<i)for(u>h==u>-h?(s=o-((a=h+o)-h),h=e[++c]):(s=o-((a=u+o)-u),u=r[++f]),o=a,0!==s&&(n[d++]=s);c<t&&f<i;)u>h==u>-h?(s=o-((a=o+h)-(l=a-o))+(h-l),h=e[++c]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++f]),o=a,0!==s&&(n[d++]=s);for(;c<t;)s=o-((a=o+h)-(l=a-o))+(h-l),h=e[++c],o=a,0!==s&&(n[d++]=s);for(;f<i;)s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++f],o=a,0!==s&&(n[d++]=s);return 0===o&&0!==d||(n[d++]=o),d}function n(t){return new Float64Array(t)}var o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,l=n(4),h=n(8),u=n(12),c=n(16),f=n(4);t.orient2d=function(t,n,d,p,m,g){var y=(n-g)*(d-m),v=(t-m)*(p-g),_=y-v;if(0===y||0===v||y>0!=v>0)return _;var b=Math.abs(y+v);return Math.abs(_)>=o*b?_:-function(t,n,o,d,p,m,g){var y,v,_,b,x,w,M,S,k,E,I,P,T,A,C,R,N,z,O=t-p,D=o-p,B=n-m,F=d-m;x=(C=(S=O-(M=(w=e*O)-(w-O)))*(E=F-(k=(w=e*F)-(w-F)))-((A=O*F)-M*k-S*k-M*E))-(I=C-(N=(S=B-(M=(w=e*B)-(w-B)))*(E=D-(k=(w=e*D)-(w-D)))-((R=B*D)-M*k-S*k-M*E))),l[0]=C-(I+x)+(x-N),x=(T=A-((P=A+I)-(x=P-A))+(I-x))-(I=T-R),l[1]=T-(I+x)+(x-R),x=(z=P+I)-P,l[2]=P-(z-x)+(I-x),l[3]=z;var j=function(t,e){for(var i=e[0],r=1;r<4;r++)i+=e[r];return i}(0,l),q=a*g;if(j>=q||-j>=q||(y=t-(O+(x=t-O))+(x-p),_=o-(D+(x=o-D))+(x-p),v=n-(B+(x=n-B))+(x-m),b=d-(F+(x=d-F))+(x-m),0===y&&0===v&&0===_&&0===b)||(q=s*g+i*Math.abs(j),(j+=O*b+F*y-(B*_+D*v))>=q||-j>=q))return j;x=(C=(S=y-(M=(w=e*y)-(w-y)))*(E=F-(k=(w=e*F)-(w-F)))-((A=y*F)-M*k-S*k-M*E))-(I=C-(N=(S=v-(M=(w=e*v)-(w-v)))*(E=D-(k=(w=e*D)-(w-D)))-((R=v*D)-M*k-S*k-M*E))),f[0]=C-(I+x)+(x-N),x=(T=A-((P=A+I)-(x=P-A))+(I-x))-(I=T-R),f[1]=T-(I+x)+(x-R),x=(z=P+I)-P,f[2]=P-(z-x)+(I-x),f[3]=z;var V=r(4,l,4,f,h);x=(C=(S=O-(M=(w=e*O)-(w-O)))*(E=b-(k=(w=e*b)-(w-b)))-((A=O*b)-M*k-S*k-M*E))-(I=C-(N=(S=B-(M=(w=e*B)-(w-B)))*(E=_-(k=(w=e*_)-(w-_)))-((R=B*_)-M*k-S*k-M*E))),f[0]=C-(I+x)+(x-N),x=(T=A-((P=A+I)-(x=P-A))+(I-x))-(I=T-R),f[1]=T-(I+x)+(x-R),x=(z=P+I)-P,f[2]=P-(z-x)+(I-x),f[3]=z;var U=r(V,h,4,f,u);x=(C=(S=y-(M=(w=e*y)-(w-y)))*(E=b-(k=(w=e*b)-(w-b)))-((A=y*b)-M*k-S*k-M*E))-(I=C-(N=(S=v-(M=(w=e*v)-(w-v)))*(E=_-(k=(w=e*_)-(w-_)))-((R=v*_)-M*k-S*k-M*E))),f[0]=C-(I+x)+(x-N),x=(T=A-((P=A+I)-(x=P-A))+(I-x))-(I=T-R),f[1]=T-(I+x)+(x-R),x=(z=P+I)-P,f[2]=P-(z-x)+(I-x),f[3]=z;var Z=r(U,u,4,f,c);return c[Z-1]}(t,n,d,p,m,g,b)},t.orient2dfast=function(t,e,i,r,n,o){return(e-o)*(i-n)-(t-n)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,rR);var rN=rE,rz=rP,rO=rL,rD=rR.orient2d;function rB(t,e,i){e=Math.max(0,void 0===e?2:e),i=i||0;var r=function(t){for(var e=t[0],i=t[0],r=t[0],n=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<i[1]&&(i=a),a[1]>n[1]&&(n=a)}var s=[e,i,r,n],l=s.slice();for(o=0;o<t.length;o++)rO(t[o],s)||l.push(t[o]);return function(t){t.sort(rY);for(var e=[],i=0;i<t.length;i++){for(;e.length>=2&&0>=rZ(e[e.length-2],e[e.length-1],t[i]);)e.pop();e.push(t[i])}for(var r=[],n=t.length-1;n>=0;n--){for(;r.length>=2&&0>=rZ(r[r.length-2],r[r.length-1],t[n]);)r.pop();r.push(t[n])}return r.pop(),e.pop(),e.concat(r)}(l)}(t),n=new rN(16);n.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},n.compareMinX=function(t,e){return t[0]-e[0]},n.compareMinY=function(t,e){return t[1]-e[1]},n.load(t);for(var o,a=[],s=0;s<r.length;s++){var l=r[s];n.remove(l),o=rH(l,o),a.push(o)}var h=new rN(16);for(s=0;s<a.length;s++)h.insert(rG(a[s]));for(var u=e*e,c=i*i;a.length;){var f=a.shift(),d=f.p,p=f.next.p,m=rW(d,p);if(!(m<c)){var g=m/u;(l=rF(n,f.prev.p,d,p,f.next.next.p,g,h))&&Math.min(rW(l,d),rW(l,p))<=g&&(a.push(f),a.push(rH(l,f)),n.remove(l),h.remove(f),h.insert(rG(f)),h.insert(rG(f.next)))}}f=o;var y=[];do y.push(f.p),f=f.next;while(f!==o)return y.push(f.p),y}function rF(t,e,i,r,n,o,a){for(var s=new rz([],rj),l=t.data;l;){for(var h=0;h<l.children.length;h++){var u=l.children[h],c=l.leaf?rX(u,i,r):rq(i,r,u);c>o||s.push({node:u,dist:c})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),d=f.node,p=rX(d,e,i),m=rX(d,r,n);if(f.dist<p&&f.dist<m&&rU(i,d,a)&&rU(r,d,a))return d}(l=s.pop())&&(l=l.node)}return null}function rj(t,e){return t.dist-e.dist}function rq(t,e,i){if(rV(t,i)||rV(e,i))return 0;var r=r$(t[0],t[1],e[0],e[1],i.minX,i.minY,i.maxX,i.minY);if(0===r)return 0;var n=r$(t[0],t[1],e[0],e[1],i.minX,i.minY,i.minX,i.maxY);if(0===n)return 0;var o=r$(t[0],t[1],e[0],e[1],i.maxX,i.minY,i.maxX,i.maxY);if(0===o)return 0;var a=r$(t[0],t[1],e[0],e[1],i.minX,i.maxY,i.maxX,i.maxY);return 0===a?0:Math.min(r,n,o,a)}function rV(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function rU(t,e,i){for(var r,n,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),h=Math.max(t[0],e[0]),u=Math.max(t[1],e[1]),c=i.search({minX:s,minY:l,maxX:h,maxY:u}),f=0;f<c.length;f++)if(r=c[f].p,n=c[f].next.p,o=t,r!==(a=e)&&n!==o&&rZ(r,n,o)>0!=rZ(r,n,a)>0&&rZ(o,a,r)>0!=rZ(o,a,n)>0)return!1;return!0}function rZ(t,e,i){return rD(t[0],t[1],e[0],e[1],i[0],i[1])}function rG(t){var e=t.p,i=t.next.p;return t.minX=Math.min(e[0],i[0]),t.minY=Math.min(e[1],i[1]),t.maxX=Math.max(e[0],i[0]),t.maxY=Math.max(e[1],i[1]),t}function rH(t,e){var i={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function rW(t,e){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function rX(t,e,i){var r=e[0],n=e[1],o=i[0]-r,a=i[1]-n;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-n)*a)/(o*o+a*a);s>1?(r=i[0],n=i[1]):s>0&&(r+=o*s,n+=a*s)}return(o=t[0]-r)*o+(a=t[1]-n)*a}function r$(t,e,i,r,n,o,a,s){var l,h,u,c,f=i-t,d=r-e,p=a-n,m=s-o,g=t-n,y=e-o,v=f*f+d*d,_=f*p+d*m,b=p*p+m*m,x=f*g+d*y,w=p*g+m*y,M=v*b-_*_,S=M,k=M;0===M?(h=0,S=1,c=w,k=b):(c=v*w-_*x,(h=_*w-b*x)<0?(h=0,c=w,k=b):h>S&&(h=S,c=w+_,k=b)),c<0?(c=0,0>-x?h=0:-x>v?h=S:(h=-x,S=v)):c>k&&(c=k,-x+_<0?h=0:-x+_>v?h=S:(h=-x+_,S=v));var E=(1-(u=0===c?0:c/k))*n+u*a-((1-(l=0===h?0:h/S))*t+l*i),I=(1-u)*o+u*s-((1-l)*e+l*r);return E*E+I*I}function rY(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}rz.default&&(rz=rz.default),rk.exports=rB,rk.exports.default=rB;var rK=eW(rk.exports);function rJ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var i=[];if(tn(t,function(t){i.push([t[0],t[1]])}),!i.length)return null;var r=rK(i,e.concavity);return r.length>3?_([r]):null}function rQ(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.steps||64,n=i.properties?i.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<r;a++)o.push(tt(t,e,-360*a/r,i).geometry.coordinates);return o.push(o[0]),_([o],n)}function r0(t){if(!t)throw Error("geojson is required");switch(t.type){case"Feature":return r1(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(i){switch(i){case"type":case"features":return;default:e[i]=t[i]}}),e.features=t.features.map(function(t){return r1(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return r6(t);default:throw Error("unknown GeoJSON type")}}function r1(t){var e={type:"Feature"};return Object.keys(t).forEach(function(i){switch(i){case"type":case"properties":case"geometry":return;default:e[i]=t[i]}}),e.properties=r2(t.properties),null==t.geometry?e.geometry=null:e.geometry=r6(t.geometry),e}function r2(t){var i={};return t&&Object.keys(t).forEach(function(r){var n=t[r];"object"===e(n)?null===n?i[r]=null:Array.isArray(n)?i[r]=n.map(function(t){return t}):i[r]=r2(n):i[r]=n}),i}function r6(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return r6(t)}):e.coordinates=r3(t.coordinates),e}function r3(t){var i=t;return"object"!==e(i[0])?i.slice():i.map(function(t){return r3(t)})}function r8(t,e){if(!t)throw Error("geojson is required");if("FeatureCollection"!==t.type)throw Error("geojson must be a FeatureCollection");if(null==e)throw Error("filter is required");var i=[];return tl(t,function(t){r9(t.properties,e)&&i.push(t)}),M(i)}function r4(t,e,i){if(!t)throw Error("geojson is required");if("FeatureCollection"!==t.type)throw Error("geojson must be a FeatureCollection");if(null==e)throw Error("property is required");for(var r=r7(t,e),n=Object.keys(r),o=0;o<n.length;o++){for(var a=n[o],s=r[a],l=[],h=0;h<s.length;h++)l.push(t.features[s[h]]);i(M(l),a,o)}}function r5(t,e,i,r){var n=r;return r4(t,e,function(t,e,o){n=0===o&&void 0===r?t:i(n,t,e,o)}),n}function r7(t,e){var i={};return tl(t,function(t,r){var n=t.properties||{};if(Object.prototype.hasOwnProperty.call(n,String(e))){var o=n[e];Object.prototype.hasOwnProperty.call(i,o)?i[o].push(r):i[o]=[r]}}),i}function r9(t,i){if(void 0===t)return!1;var r=e(i);if("number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(t,i);if(Array.isArray(i)){for(var n=0;n<i.length;n++)if(!r9(t,i[n]))return!1;return!0}return nt(t,i)}function nt(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++){var n=i[r];if(t[n]!==e[n])return!1}return!0}function ne(t,e){if(!e||!e.length)return{};for(var i={},r=0;r<e.length;r++){var n=e[r];Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}var ni=Object.freeze({__proto__:null,applyFilter:r9,clusterEach:r4,clusterReduce:r5,createBins:r7,filterProperties:ne,getCluster:r8,propertiesContainsFilter:nt}),nr=ex,nn=function(t,e,i){for(var r=t.length,n=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);n+=a*a}return i?Math.sqrt(n):n},no=nn,na=function(t,e,i){var r=Math.abs(t-e);return i?r:r*r},ns=nn,nl=function(t,e){for(var i={},r=[],n=e<<2,o=t.length,a=t[0].length>0;r.length<e&&n-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;i[l]||(i[l]=!0,r.push(s))}if(r.length<e)throw Error("Error initializating clusters");return r},nh=function(t,e){var i=t[0].length?no:na,r=[],n=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*n)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],l=r.length,h=0,u=[],c=0;c<n;c++){for(var f=1/0,d=0;d<l;d++){var p=i(t[c],r[d]);p<=f&&(f=p)}s[c]=f}for(var m=0;m<n;m++)h+=s[m];for(var g=0;g<n;g++)u[g]={i:g,v:t[g],pr:s[g]/h,cs:0};u.sort(function(t,e){return t.pr-e.pr}),u[0].cs=u[0].pr;for(var y=1;y<n;y++)u[y].cs=u[y-1].cs+u[y].pr;for(var v=Math.random(),_=0;_<n-1&&u[_++].cs<v;);r.push(u[_-1].v)}return r};function nu(t,e,i){i=i||[];for(var r=0;r<t;r++)i[r]=e;return i}var nc=eW(function(t,e,i,r){var n=[],o=[],a=[],s=[],l=!1,h=r||1e4,u=t.length,c=t[0].length,f=c>0,d=[];if(i)n="kmrand"==i?nl(t,e):"kmpp"==i?nh(t,e):i;else for(var p={};n.length<e;){var m=Math.floor(Math.random()*u);p[m]||(p[m]=!0,n.push(t[m]))}do{nu(e,0,d);for(var g=0;g<u;g++){for(var y=1/0,v=0,_=0;_<e;_++)(s=f?ns(t[g],n[_]):Math.abs(t[g]-n[_]))<=y&&(y=s,v=_);a[g]=v,d[v]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?nu(c,0,b[x]):0,o[x]=n[x];if(f){for(var w=0;w<e;w++)n[w]=[];for(var M=0;M<u;M++)for(var S=b[a[M]],k=t[M],E=0;E<c;E++)S[E]+=k[E];l=!0;for(var I=0;I<e;I++){for(var P=n[I],T=b[I],A=o[I],C=d[I],R=0;R<c;R++)P[R]=T[R]/C||0;if(l){for(var N=0;N<c;N++)if(A[N]!=P[N]){l=!1;break}}}}else{for(var z=0;z<u;z++)b[a[z]]+=t[z];for(var O=0;O<e;O++)n[O]=b[O]/d[O]||0;l=!0;for(var D=0;D<e;D++)if(o[D]!=n[D]){l=!1;break}}l=l||--h<=0}while(!l)return{it:1e4-h,k:e,idxs:a,centroids:n}}),nf=ex;function nd(t,e){var i=!1;return M((function(t){if(t.length<3)return[];t.sort(nm);for(var e,i,r,n,o,a=t.length-1,s=t[a].x,l=t[0].x,h=t[a].y,u=h,c=1e-12;a--;)t[a].y<h&&(h=t[a].y),t[a].y>u&&(u=t[a].y);var f,d=l-s,p=u-h,m=d>p?d:p,g=.5*(l+s),y=.5*(u+h),v=[new np({__sentinel:!0,x:g-20*m,y:y-m},{__sentinel:!0,x:g,y:y+20*m},{__sentinel:!0,x:g+20*m,y:y-m})],_=[],b=[];for(a=t.length;a--;){for(b.length=0,f=v.length;f--;)(d=t[a].x-v[f].x)>0&&d*d>v[f].r?(_.push(v[f]),v.splice(f,1)):d*d+(p=t[a].y-v[f].y)*p>v[f].r||(b.push(v[f].a,v[f].b,v[f].b,v[f].c,v[f].c,v[f].a),v.splice(f,1));for(ng(b),f=b.length;f;)i=b[--f],e=b[--f],r=t[a],n=i.x-e.x,o=i.y-e.y,Math.abs(2*(n*(r.y-i.y)-o*(r.x-i.x)))>c&&v.push(new np(e,i,r))}for(Array.prototype.push.apply(_,v),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _})(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(i=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],n=[t.c.x,t.c.y],o={};return i?(e.push(t.a.z),r.push(t.b.z),n.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},_([[e,r,n,e]],o)}))}var np=n(function t(e,r,n){i(this,t),this.a=e,this.b=r,this.c=n;var o,a,s=r.x-e.x,l=r.y-e.y,h=n.x-e.x,u=n.y-e.y,c=s*(e.x+r.x)+l*(e.y+r.y),f=h*(e.x+n.x)+u*(e.y+n.y),d=2*(s*(n.y-r.y)-l*(n.x-r.x));this.x=(u*c-l*f)/d,this.y=(s*f-h*c)/d,o=this.x-e.x,a=this.y-e.y,this.r=o*o+a*a});function nm(t,e){return e.x-t.x}function ng(t){var e,i,r,n,o,a=t.length;e:for(;a;)for(i=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(n=t[--r])&&i===o||e===o&&i===n){t.splice(a,2),t.splice(r,2),a-=2;continue e}}function ny(t){return t}function nv(t,e){var i=function(t){if(null==t)return ny;var e,i,r=t.scale[0],n=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=i=0);var l=2,h=t.length,u=Array(h);for(u[0]=(e+=t[0])*r+o,u[1]=(i+=t[1])*n+a;l<h;)u[l]=t[l],++l;return u}}(t.transform),r=t.arcs;function n(t,e){e.length&&e.pop();for(var n=r[t<0?~t:t],o=0,a=n.length;o<a;++o)e.push(i(n[o],o));t<0&&function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i}(e,a)}function o(t){return i(t)}function a(t){for(var e=[],i=0,r=t.length;i<r;++i)n(t[i],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var i,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":i=o(e.coordinates);break;case"MultiPoint":i=e.coordinates.map(o);break;case"LineString":i=a(e.arcs);break;case"MultiLineString":i=e.arcs.map(a);break;case"Polygon":i=l(e.arcs);break;case"MultiPolygon":i=e.arcs.map(l);break;default:return null}return{type:r,coordinates:i}}(e)}function n_(t,e){var i={},r={},n={},o=[],a=-1;function s(t,e){for(var r in t){var n=t[r];delete e[n.start],delete n.start,delete n.end,n.forEach(function(t){i[t<0?~t:t]=1}),o.push(n)}}return e.forEach(function(i,r){var n,o=t.arcs[i<0?~i:i];!(o.length<3)||o[1][0]||o[1][1]||(n=e[++a],e[a]=i,e[r]=n)}),e.forEach(function(e){var i,o,a=function(e){var i,r=t.arcs[e<0?~e:e],n=r[0];return t.transform?(i=[0,0],r.forEach(function(t){i[0]+=t[0],i[1]+=t[1]})):i=r[r.length-1],e<0?[i,n]:[n,i]}(e),s=a[0],l=a[1];if(i=n[s]){if(delete n[i.end],i.push(e),i.end=l,o=r[l]){delete r[o.start];var h=o===i?i:i.concat(o);r[h.start=i.start]=n[h.end=o.end]=h}else r[i.start]=n[i.end]=i}else if(i=r[l]){if(delete r[i.start],i.unshift(e),i.start=s,o=n[s]){delete n[o.end];var u=o===i?i:o.concat(i);r[u.start=o.start]=n[u.end=i.end]=u}else r[i.start]=n[i.end]=i}else r[(i=[e]).start=s]=n[i.end=l]=i}),s(n,r),s(r,n),e.forEach(function(t){i[t<0?~t:t]||o.push([t])}),o}function nb(t){return nv(t,nx.apply(this,arguments))}function nx(t,e){var i={},r=[],n=[];function o(t){t.forEach(function(e){e.forEach(function(e){(i[e=e<0?~e:e]||(i[e]=[])).push(t)})}),r.push(t)}function a(e){return function(t){for(var e,i=-1,r=t.length,n=t[r-1],o=0;++i<r;)e=n,n=t[i],o+=e[0]*n[1]-e[1]*n[0];return Math.abs(o)}(nv(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),r.forEach(function(t){if(!t._){var e=[],r=[t];for(t._=1,n.push(e);t=r.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){i[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:n.map(function(e){var r,n=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){i[t<0?~t:t].length<2&&n.push(t)})})}),(r=(n=n_(t,n)).length)>1)for(var o,s,l=1,h=a(n[0]);l<r;++l)(o=a(n[l]))>h&&(s=n[0],n[0]=n[l],n[l]=s,h=o);return n}).filter(function(t){return t.length>0})}}var nw=Object.prototype.hasOwnProperty;function nM(t,e,i,r,n,o){3==arguments.length&&(r=o=Array,n=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),l=t-1,h=0;h<t;++h)a[h]=n;return{set:function(r,o){for(var h=e(r)&l,u=a[h],c=0;u!=n;){if(i(u,r))return s[h]=o;if(++c>=t)throw Error("full hashmap");u=a[h=h+1&l]}return a[h]=r,s[h]=o,o},maybeSet:function(r,o){for(var h=e(r)&l,u=a[h],c=0;u!=n;){if(i(u,r))return s[h];if(++c>=t)throw Error("full hashmap");u=a[h=h+1&l]}return a[h]=r,s[h]=o,o},get:function(r,o){for(var h=e(r)&l,u=a[h],c=0;u!=n;){if(i(u,r))return s[h];if(++c>=t)break;u=a[h=h+1&l]}return o},keys:function(){for(var t=[],e=0,i=a.length;e<i;++e){var r=a[e];r!=n&&t.push(r)}return t}}}function nS(t,e){return t[0]===e[0]&&t[1]===e[1]}var nk=new ArrayBuffer(16),nE=new Float64Array(nk),nI=new Uint32Array(nk);function nP(t){nE[0]=t[0],nE[1]=t[1];var e=nI[0]^nI[1];return 2147483647&(e=e<<5^e>>7^nI[2]^nI[3])}function nT(t){var e,i,r,n,o=t.coordinates,a=t.lines,s=t.rings,l=function(){for(var t=nM(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),i=0,r=o.length;i<r;++i)e[i]=t.maybeSet(i,i);return e}(),h=new Int32Array(o.length),u=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),d=0;for(e=0,i=o.length;e<i;++e)h[e]=u[e]=c[e]=-1;for(e=0,i=a.length;e<i;++e){var p=a[e],m=p[0],g=p[1];for(r=l[m],n=l[++m],++d,f[r]=1;++m<=g;)b(e,r,r=n,n=l[m]);++d,f[n]=1}for(e=0,i=o.length;e<i;++e)h[e]=-1;for(e=0,i=s.length;e<i;++e){var y=s[e],v=y[0]+1,_=y[1];for(b(e,l[_-1],r=l[v-1],n=l[v]);++v<=_;)b(e,r,r=n,n=l[v])}function b(t,e,i,r){if(h[i]!==t){h[i]=t;var n=u[i];if(n>=0){var o=c[i];n===e&&o===r||n===r&&o===e||(++d,f[i]=1)}else u[i]=e,c[i]=r}}function x(t){return nP(o[t])}function w(t,e){return nS(o[t],o[e])}h=u=c=null;var M,S=function(t,e,i,r,n){3==arguments.length&&(r=Array,n=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=n;return{add:function(r){for(var s=e(r)&a,l=o[s],h=0;l!=n;){if(i(l,r))return!0;if(++h>=t)throw Error("full hashset");l=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,l=o[s],h=0;l!=n;){if(i(l,r))return!0;if(++h>=t)break;l=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,i=o.length;e<i;++e){var r=o[e];r!=n&&t.push(r)}return t}}}(1.4*d,nP,nS);for(e=0,i=o.length;e<i;++e)f[M=l[e]]&&S.add(o[M]);return S}function nA(t,e,i,r){nC(t,e,i),nC(t,e,e+r),nC(t,e+r,i)}function nC(t,e,i){for(var r,n=e+(i---e>>1);e<n;++e,--i)r=t[e],t[e]=t[i],t[i]=r}function nL(t){var e,i,r={};for(e in t)r[e]=null==(i=t[e])?{type:null}:("FeatureCollection"===i.type?nR:"Feature"===i.type?nN:nz)(i);return r}function nR(t){var e={type:"GeometryCollection",geometries:t.features.map(nN)};return null!=t.bbox&&(e.bbox=t.bbox),e}function nN(t){var e,i=nz(t.geometry);for(e in null!=t.id&&(i.id=t.id),null!=t.bbox&&(i.bbox=t.bbox),t.properties){i.properties=t.properties;break}return i}function nz(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(nz)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function nO(t,e){var i=function(t){var e=1/0,i=1/0,r=-1/0,n=-1/0;function o(t){null!=t&&nw.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(h)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<i&&(i=a),a>n&&(n=a)}function l(t){t.forEach(s)}function h(t){t.forEach(l)}for(var u in t)o(t[u]);return r>=e&&n>=i?[e,i,r,n]:void 0}(t=nL(t)),r=e>0&&i&&function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=o-r?(i-1)/(o-r):1,l=a-n?(i-1)/(a-n):1;function h(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-n)*l)]}function u(t,e){for(var i,o,a,h,u,c=-1,f=0,d=t.length,p=Array(d);++c<d;)h=Math.round(((i=t[c])[0]-r)*s),u=Math.round((i[1]-n)*l),h===o&&u===a||(p[f++]=[o=h,a=u]);for(p.length=f;f<e;)f=p.push([p[0][0],p[0][1]]);return p}function c(t){return u(t,2)}function f(t){return u(t,4)}function d(t){return t.map(f)}function p(t){null!=t&&nw.call(m,t.type)&&m[t.type](t)}var m={GeometryCollection:function(t){t.geometries.forEach(p)},Point:function(t){t.coordinates=h(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(h)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=d(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(d)}};for(var g in t)p(t[g]);return{scale:[1/s,1/l],translate:[r,n]}}(t,i,e),n=function(t){var e,i,r,n,o=t.coordinates,a=t.lines,s=t.rings,l=a.length+s.length;for(delete t.lines,delete t.rings,r=0,n=a.length;r<n;++r)for(e=a[r];e=e.next;)++l;for(r=0,n=s.length;r<n;++r)for(i=s[r];i=i.next;)++l;var h=nM(2*l*1.4,nP,nS),u=t.arcs=[];for(r=0,n=a.length;r<n;++r){e=a[r];do c(e);while(e=e.next)}for(r=0,n=s.length;r<n;++r)if((i=s[r]).next)do c(i);while(i=i.next)else f(i);function c(t){var e,i,r,n,a,s,l,c;if(r=h.get(e=o[t[0]])){for(l=0,c=r.length;l<c;++l)if(d(n=r[l],t))return t[0]=n[0],void(t[1]=n[1])}if(a=h.get(i=o[t[1]])){for(l=0,c=a.length;l<c;++l)if(p(s=a[l],t))return t[1]=s[0],void(t[0]=s[1])}r?r.push(t):h.set(e,[t]),a?a.push(t):h.set(i,[t]),u.push(t)}function f(t){var e,i,r,n,a;if((i=h.get(o[t[0]]))||(i=h.get(e=o[t[0]+y(t)])))for(n=0,a=i.length;n<a;++n){if(m(r=i[n],t))return t[0]=r[0],void(t[1]=r[1]);if(g(r,t))return t[0]=r[1],void(t[1]=r[0])}i?i.push(t):h.set(e,[t]),u.push(t)}function d(t,e){var i=t[0],r=e[0],n=t[1];if(i-n!=r-e[1])return!1;for(;i<=n;++i,++r)if(!nS(o[i],o[r]))return!1;return!0}function p(t,e){var i=t[0],r=e[0],n=t[1],a=e[1];if(i-n!=r-a)return!1;for(;i<=n;++i,--a)if(!nS(o[i],o[a]))return!1;return!0}function m(t,e){var i=t[0],r=e[0],n=t[1]-i;if(n!==e[1]-r)return!1;for(var a=y(t),s=y(e),l=0;l<n;++l)if(!nS(o[i+(l+a)%n],o[r+(l+s)%n]))return!1;return!0}function g(t,e){var i=t[0],r=e[0],n=t[1],a=e[1],s=n-i;if(s!==a-r)return!1;for(var l=y(t),h=s-y(e),u=0;u<s;++u)if(!nS(o[i+(u+l)%s],o[a-(u+h)%s]))return!1;return!0}function y(t){for(var e=t[0],i=t[1],r=e,n=r,a=o[r];++r<i;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(n=r,a=s)}return n-e}return t}(function(t){var e,i,r,n=nT(t),o=t.coordinates,a=t.lines,s=t.rings;for(i=0,r=a.length;i<r;++i)for(var l=a[i],h=l[0],u=l[1];++h<u;)n.has(o[h])&&(e={0:h,1:l[1]},l[1]=h,l=l.next=e);for(i=0,r=s.length;i<r;++i)for(var c=s[i],f=c[0],d=f,p=c[1],m=n.has(o[f]);++d<p;)n.has(o[d])&&(m?(e={0:d,1:c[1]},c[1]=d,c=c.next=e):(nA(o,f,p,p-d),o[p]=o[f],m=!0,d=f));return t}(function(t){var e=-1,i=[],r=[],n=[];function o(t){t&&nw.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};function s(t){for(var r=0,o=t.length;r<o;++r)n[++e]=t[r];var a={0:e-o+1,1:e};return i.push(a),a}function l(t){for(var i=0,o=t.length;i<o;++i)n[++e]=t[i];var a={0:e-o+1,1:e};return r.push(a),a}function h(t){return t.map(l)}for(var u in t)o(t[u]);return{type:"Topology",coordinates:n,lines:i,rings:r,objects:t}}(t))),o=n.coordinates,a=nM(1.4*n.arcs.length,nD,nB);function s(t){t&&nw.call(l,t.type)&&l[t.type](t)}t=n.objects,n.bbox=i,n.arcs=n.arcs.map(function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)}),delete n.coordinates,o=null;var l={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=t.arcs.map(h)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function h(t){var e=[];do{var i=a.get(t);e.push(t[0]<t[1]?i:~i)}while(t=t.next)return e}function u(t){return t.map(h)}for(var c in t)s(t[c]);return r&&(n.transform=r,n.arcs=function(t){for(var e=-1,i=t.length;++e<i;){for(var r,n,o=t[e],a=0,s=1,l=o.length,h=o[0],u=h[0],c=h[1];++a<l;)r=(h=o[a])[0],n=h[1],r===u&&n===c||(o[s++]=[r-u,n-c],u=r,c=n);1===s&&(o[s++]=[0,0]),o.length=s}return t}(n.arcs)),n}function nD(t){var e,i=t[0],r=t[1];return r<i&&(e=i,i=r,r=e),i+31*r}function nB(t,e){var i,r=t[0],n=t[1],o=e[0],a=e[1];return n<r&&(i=r,r=n,n=i),a<o&&(i=o,o=a,a=i),r===o&&n===a}function nF(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(e=e||{}))throw Error("options is invalid");var i=e.mutate;if("FeatureCollection"!==K(t))throw Error("geojson must be a FeatureCollection");if(!t.features.length)throw Error("geojson is empty");!1!==i&&void 0!==i||(t=r0(t));var r=[],n=tv(t,function(t,e){return function(t,e){var i,r=t.geometry.coordinates,n=e.geometry.coordinates,o=nj(r[0]),a=nj(r[r.length-1]),s=nj(n[0]),l=nj(n[n.length-1]);if(o===l)i=n.concat(r.slice(1));else if(s===a)i=r.concat(n.slice(1));else if(o===s)i=r.slice(1).reverse().concat(n);else{if(a!==l)return null;i=r.concat(n.reverse().slice(1))}return x(i)}(t,e)||(r.push(t),e)});return n&&r.push(n),r.length?1===r.length?r[0]:S(r.map(function(t){return t.coordinates})):null}function nj(t){return t[0].toString()+","+t[1].toString()}function nq(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(e=e||{}))throw Error("options is invalid");var i=e.mutate;if("FeatureCollection"!==K(t))throw Error("geojson must be a FeatureCollection");if(!t.features.length)throw Error("geojson is empty");!1!==i&&void 0!==i||(t=r0(t));var r=function(t){var e={};td(t,function(t){e[t.geometry.type]=!0});var i=Object.keys(e);return 1===i.length?i[0]:null}(t);if(!r)throw Error("geojson must be homogenous");var n=t;switch(r){case"LineString":return nF(n,e);case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("FeatureCollection"!==K(t))throw Error("geojson must be a FeatureCollection");if(!t.features.length)throw Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=r0(t));var i=[];td(t,function(t){i.push(t.geometry)});var r=nO({geoms:I(i).geometry});return nb(r,r.objects.geoms.geometries)}(n,e);default:throw Error(r+" is not supported")}}/**
   * splaytree v3.1.2
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */function nV(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var nU=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function nZ(t,e){return t>e?1:t<e?-1:0}function nG(t,e,i){for(var r=new nU(null,null),n=r,o=r;;){var a=i(t,e.key);if(a<0){if(null===e.left)break;if(0>i(t,e.left.key)){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,o=e,e=e.left}else{if(!(a>0)||null===e.right||i(t,e.right.key)>0&&(s=e.right,e.right=s.left,s.left=e,null===(e=s).right))break;n.right=e,n=e,e=e.right}}return n.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function nH(t,e,i,r){var n=new nU(t,e);if(null===i)return n.left=n.right=null,n;var o=r(t,(i=nG(t,i,r)).key);return o<0?(n.left=i.left,n.right=i,i.left=null):o>=0&&(n.right=i.right,n.left=i,i.right=null),n}function nW(t,e,i){var r=null,n=null;if(e){var o=i((e=nG(t,e,i)).key,t);0===o?(r=e.left,n=e.right):o<0?(n=e.right,e.right=null,r=e):(r=e.left,e.left=null,n=e)}return{left:r,right:n}}function nX(t,e,i,r,n){if(t){r(e+(i?"└── ":"├── ")+n(t)+"\n");var o=e+(i?"    ":"│   ");t.left&&nX(t.left,o,!1,r,n),t.right&&nX(t.right,o,!0,r,n)}}var n$=function(){function t(t){void 0===t&&(t=nZ),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=nH(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var i=new nU(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var r=this._comparator,n=nG(t,this._root,r),o=r(t,n.key);return 0===o?this._root=n:(o<0?(i.left=n.left,i.right=n,n.left=null):o>0&&(i.right=n.right,i.left=n,n.right=null),this._size++,this._root=i),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,i){var r;return null===e?null:0===i(t,(e=nG(t,e,i)).key)?(null===e.left?r=e.right:(r=nG(t,e.left,i)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=nG(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,i=this._comparator;e;){var r=i(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=nG(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,i=this._comparator;e;){var r=i(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var i=this._root,r=[],n=!1;!n;)null!==i?(r.push(i),i=i.left):0!==r.length?(i=r.pop(),t.call(e,i),i=i.right):n=!0;return this},t.prototype.range=function(t,e,i,r){for(var n=[],o=this._comparator,a=this._root;0!==n.length||a;)if(a)n.push(a),a=a.left;else{if(o((a=n.pop()).key,e)>0)break;if(o(a.key,t)>=0&&i.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var i=e.key;return t.push(i)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var i=e.data;return t.push(i)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,i=!1,r=0,n=[];!i;)if(e)n.push(e),e=e.left;else if(n.length>0){if(e=n.pop(),r===t)return e;r++,e=e.right}else i=!0;return null},t.prototype.next=function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var r=this._comparator;e;){var n=r(t.key,e.key);if(0===n)break;n<0?(i=e,e=e.left):e=e.right}return i},t.prototype.prev=function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var r=this._comparator;e;){var n=r(t.key,e.key);if(0===n)break;n<0?e=e.left:(i=e,e=e.right)}return i},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,i=[],r=!1,n=new nU(null,null),o=n;!r;)e?(i.push(e),e=e.left):i.length>0?e=(e=o=o.next=i.pop()).right:r=!0;return o.next=null,n.next}(this._root)},t.prototype.load=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=!1);var r=t.length,n=this._comparator;if(i&&nJ(t,e,0,r-1,n),null===this._root)this._root=nY(t,e,0,r),this._size=r;else{var o=function(t,e,i){for(var r=new nU(null,null),n=r,o=t,a=e;null!==o&&null!==a;)0>i(o.key,a.key)?(n.next=o,o=o.next):(n.next=a,a=a.next),n=n.next;return null!==o?n.next=o:null!==a&&(n.next=a),r.next}(this.toList(),function(t,e){for(var i=new nU(null,null),r=i,n=0;n<t.length;n++)r=r.next=new nU(t[n],e[n]);return r.next=null,i.next}(t,e),n);r=this._size+r,this._root=nK({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return nX(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,i){var r=this._comparator,n=nW(t,this._root,r),o=n.left,a=n.right;0>r(t,e)?a=nH(e,i,a,r):o=nH(e,i,o,r),this._root=function(t,e,i){return null===e?t:(null===t||((e=nG(t.key,e,i)).left=t),e)}(o,a,r)},t.prototype.split=function(t){return nW(t,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var t,e,i;return nV(this,function(r){switch(r.label){case 0:t=this._root,e=[],i=!1,r.label=1;case 1:return i?[3,6]:null===t?[3,2]:(e.push(t),t=t.left,[3,5]);case 2:return 0===e.length?[3,4]:[4,t=e.pop()];case 3:return r.sent(),t=t.right,[3,5];case 4:i=!0,r.label=5;case 5:return[3,1];case 6:return[2]}})},t}();function nY(t,e,i,r){var n=r-i;if(n>0){var o=i+Math.floor(n/2),a=new nU(t[o],e[o]);return a.left=nY(t,e,i,o),a.right=nY(t,e,o+1,r),a}return null}function nK(t,e,i){var r=i-e;if(r>0){var n=e+Math.floor(r/2),o=nK(t,e,n),a=t.head;return a.left=o,t.head=t.head.next,a.right=nK(t,n+1,i),a}return null}function nJ(t,e,i,r,n){if(!(i>=r)){for(var o=t[i+r>>1],a=i-1,s=r+1;;){do a++;while(0>n(t[a],o))do s--;while(n(t[s],o)>0)if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}nJ(t,e,i,s,n),nJ(t,e,s+1,r,n)}}function nQ(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function n0(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n1(t,e,i){return e&&n0(t.prototype,e),i&&n0(t,i),t}var n2=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},n6=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},n3=Number.EPSILON;void 0===n3&&(n3=2220446049250313e-31);var n8=n3*n3,n4=function(t,e){if(-n3<t&&t<n3&&-n3<e&&e<n3)return 0;var i=t-e;return i*i<n8*t*e?0:t<e?-1:1},n5=function(){function t(){nQ(this,t),this.reset()}return n1(t,[{key:"reset",value:function(){this.xRounder=new n7,this.yRounder=new n7}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),n7=function(){function t(){nQ(this,t),this.tree=new n$,this.round(0)}return n1(t,[{key:"round",value:function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===n4(e.key,i.key))return this.tree.remove(t),i.key;var r=this.tree.next(e);return null!==r&&0===n4(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),n9=new n5,ot=function(t,e){return t.x*e.y-t.y*e.x},oe=function(t,e){return t.x*e.x+t.y*e.y},oi=function(t,e,i){return n4(ot({x:e.x-t.x,y:e.y-t.y},{x:i.x-t.x,y:i.y-t.y}),0)},or=function(t){return Math.sqrt(oe(t,t))},on=function(t,e,i){var r={x:e.x-t.x,y:e.y-t.y},n={x:i.x-t.x,y:i.y-t.y};return oe(n,r)/or(n)/or(r)},oo=function(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}},oa=function(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}},os=function(){function t(e,i){nQ(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=i}return n1(t,null,[{key:"compare",value:function(e,i){var r=t.comparePoints(e.point,i.point);return 0!==r?r:(e.point!==i.point&&e.link(i),e.isLeft!==i.isLeft?e.isLeft?1:-1:oh.compare(e.segment,i.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n1(t,[{key:"link",value:function(t){if(t.point===this.point)throw Error("Tried to link already linked events");for(var e=t.point.events,i=0,r=e.length;i<r;i++){var n=e[i];this.point.events.push(n),n.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var r=e+1;r<t;r++){var n=this.point.events[r];void 0===n.consumedBy&&i.otherSE.point.events===n.otherSE.point.events&&i.segment.consume(n.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,i=new Map,r=function(r){var n,o,a,s,l,h=r.otherSE;i.set(r,{sine:(n=e.point,o=t.point,a=h.point,s={x:o.x-n.x,y:o.y-n.y},ot(l={x:a.x-n.x,y:a.y-n.y},s)/or(l)/or(s)),cosine:on(e.point,t.point,h.point)})};return function(t,e){i.has(t)||r(t),i.has(e)||r(e);var n=i.get(t),o=n.sine,a=n.cosine,s=i.get(e),l=s.sine,h=s.cosine;return o>=0&&l>=0?a<h?1:a>h?-1:0:o<0&&l<0?a<h?-1:a>h?1:0:l<o?-1:l>o?1:0}}}]),t}(),ol=0,oh=function(){function t(e,i,r,n){nQ(this,t),this.id=++ol,this.leftSE=e,e.segment=this,e.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=e,this.rings=r,this.windings=n}return n1(t,null,[{key:"compare",value:function(t,e){var i=t.leftSE.point.x,r=e.leftSE.point.x,n=t.rightSE.point.x,o=e.rightSE.point.x;if(o<i)return 1;if(n<r)return -1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,h=e.rightSE.point.y;if(i<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return -1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(u>0)return -1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(i>r){if(a<s&&a<h)return -1;if(a>s&&a>h)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(a<s)return -1;if(a>s)return 1;if(n<o){var p=e.comparePoint(t.rightSE.point);if(0!==p)return p}if(n>o){var m=t.comparePoint(e.rightSE.point);if(m<0)return 1;if(m>0)return -1}if(n!==o){var g=l-a,y=n-i,v=h-s,_=o-r;if(g>y&&v<_)return 1;if(g<y&&v>_)return -1}return n>o?1:n<o||l<h?-1:l>h?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n1(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,r=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;var n=(t.y-e.y)/r.y,o=e.x+n*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),i=t.bbox(),r=n6(e,i);if(null===r)return null;var n=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=n2(e,a)&&0===this.comparePoint(a),h=n2(i,n)&&0===t.comparePoint(n),u=n2(e,s)&&0===this.comparePoint(s),c=n2(i,o)&&0===t.comparePoint(o);if(h&&l)return c&&!u?o:!c&&u?s:null;if(h)return u&&n.x===s.x&&n.y===s.y?null:n;if(l)return c&&o.x===a.x&&o.y===a.y?null:a;if(c&&u)return null;if(c)return o;if(u)return s;var f=function(t,e,i,r){if(0===e.x)return oa(i,r,t.x);if(0===r.x)return oa(t,e,i.x);if(0===e.y)return oo(i,r,t.y);if(0===r.y)return oo(t,e,i.y);var n=ot(e,r);if(0==n)return null;var o={x:i.x-t.x,y:i.y-t.y},a=ot(o,e)/n,s=ot(o,r)/n;return{x:(t.x+s*e.x+(i.x+a*r.x))/2,y:(t.y+s*e.y+(i.y+a*r.y))/2}}(n,this.vector(),a,t.vector());return null===f?null:n2(r,f)?n9.round(f.x,f.y):null}},{key:"split",value:function(e){var i=[],r=void 0!==e.events,n=new os(e,!0),o=new os(e,!1),a=this.rightSE;this.replaceRightSE(o),i.push(o),i.push(n);var s=new t(n,a,this.rings.slice(),this.windings.slice());return os.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),os.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(n.checkForConsuming(),o.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var i=this,r=e;i.consumedBy;)i=i.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var n=t.compare(i,r);if(0!==n){if(n>0){var o=i;i=r,r=o}if(i.prev===r){var a=i;i=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var h=r.rings[s],u=r.windings[s],c=i.rings.indexOf(h);-1===c?(i.rings.push(h),i.windings.push(u)):i.windings[c]+=u}r.rings=null,r.windings=null,r.consumedBy=i,r.leftSE.consumedBy=i.leftSE,r.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,r=this._afterState.multiPolys,n=0,o=this.rings.length;n<o;n++){var a=this.rings[n],s=this.windings[n],l=e.indexOf(a);-1===l?(e.push(a),i.push(s)):i[l]+=s}for(var h=[],u=[],c=0,f=e.length;c<f;c++)if(0!==i[c]){var d=e[c],p=d.poly;if(-1===u.indexOf(p)){if(d.isExterior)h.push(p);else{-1===u.indexOf(p)&&u.push(p);var m=h.indexOf(d.poly);-1!==m&&h.splice(m,1)}}}for(var g=0,y=h.length;g<y;g++){var v=h[g].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t,e,i=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(o_.type){case"union":var n=0===i.length,o=0===r.length;this._isInResult=n!==o;break;case"intersection":i.length<r.length?(t=i.length,e=r.length):(t=r.length,e=i.length),this._isInResult=e===o_.numMultiPolys&&t<e;break;case"xor":var a=Math.abs(i.length-r.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(i)!==s(r);break;default:throw Error("Unrecognized operation type found ".concat(o_.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,i,r){var n,o,a,s=os.comparePoints(e,i);if(s<0)n=e,o=i,a=1;else{if(!(s>0))throw Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));n=i,o=e,a=-1}return new t(new os(n,!0),new os(o,!1),[r],[a])}}]),t}(),ou=function(){function t(e,i,r){if(nQ(this,t),!Array.isArray(e)||0===e.length||(this.poly=i,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1]))throw Error("Input geometry is not a valid Polygon or MultiPolygon");var n=n9.round(e[0][0],e[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};for(var o=n,a=1,s=e.length;a<s;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw Error("Input geometry is not a valid Polygon or MultiPolygon");var l=n9.round(e[a][0],e[a][1]);l.x===o.x&&l.y===o.y||(this.segments.push(oh.fromRing(o,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),o=l)}n.x===o.x&&n.y===o.y||this.segments.push(oh.fromRing(o,n,this))}return n1(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),oc=function(){function t(e,i){if(nQ(this,t),!Array.isArray(e))throw Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ou(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,n=e.length;r<n;r++){var o=new ou(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=i}return n1(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var r=this.interiorRings[e].getSweepEvents(),n=0,o=r.length;n<o;n++)t.push(r[n]);return t}}]),t}(),of=function(){function t(e,i){if(nQ(this,t),!Array.isArray(e))throw Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,n=e.length;r<n;r++){var o=new oc(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=i}return n1(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var r=this.polys[e].getSweepEvents(),n=0,o=r.length;n<o;n++)t.push(r[n]);return t}}]),t}(),od=function(){function t(e){nQ(this,t),this.events=e;for(var i=0,r=e.length;i<r;i++)e[i].segment.ringOut=this;this.poly=null}return n1(t,null,[{key:"factory",value:function(e){for(var i=[],r=0,n=e.length;r<n;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,h=[s],u=s.point,c=[];a=s,s=l,h.push(s),s.point!==u;)for(;;){var f=s.getAvailableLinkedEvents();if(0===f.length){var d=h[0].point,p=h[h.length-1].point;throw Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(p.x,", ").concat(p.y,"]."))}if(1===f.length){l=f[0].otherSE;break}for(var m=null,g=0,y=c.length;g<y;g++)if(c[g].point===s.point){m=g;break}if(null===m){c.push({index:h.length,point:s.point});var v=s.getLeftmostComparator(a);l=f.sort(v)[0].otherSE;break}var _=c.splice(m)[0],b=h.splice(_.index);b.unshift(b[0].otherSE),i.push(new t(b.reverse()))}i.push(new t(h))}}return i}}]),n1(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],i=1,r=this.events.length-1;i<r;i++){var n=this.events[i].point;0!==oi(n,t,this.events[i+1].point)&&(e.push(n),t=n)}if(1===e.length)return null;0===oi(e[0],t,e[1])&&e.shift(),e.push(e[0]);for(var o=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,l=[],h=a;h!=s;h+=o)l.push([e[h].x,e[h].y]);return l}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var r=this.events[e];os.compare(t,r)>0&&(t=r)}for(var n=t.segment.prevInResult(),o=n?n.prevInResult():null;;){if(!n)return null;if(!o)return n.ringOut;if(o.ringOut!==n.ringOut)return o.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();o=(n=o.prevInResult())?n.prevInResult():null}}}]),t}(),op=function(){function t(e){nQ(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return n1(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),om=function(){function t(e){nQ(this,t),this.rings=e,this.polys=this._composePolys(e)}return n1(t,[{key:"getGeom",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];if(!n.poly){if(n.isExteriorRing())e.push(new op(n));else{var o=n.enclosingRing();o.poly||e.push(new op(o)),o.poly.addInterior(n)}}}return e}}]),t}(),og=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oh.compare;nQ(this,t),this.queue=e,this.tree=new n$(i),this.segments=[]}return n1(t,[{key:"process",value:function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var n=r,o=r,a=void 0,s=void 0;void 0===a;)null===(n=this.tree.prev(n))?a=null:void 0===n.key.consumedBy&&(a=n.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var h=a.getIntersection(e);if(null!==h&&(e.isAnEndpoint(h)||(l=h),!a.isAnEndpoint(h)))for(var u=this._splitSafely(a,h),c=0,f=u.length;c<f;c++)i.push(u[c])}var d=null;if(s){var p=s.getIntersection(e);if(null!==p&&(e.isAnEndpoint(p)||(d=p),!s.isAnEndpoint(p)))for(var m=this._splitSafely(s,p),g=0,y=m.length;g<y;g++)i.push(m[g])}if(null!==l||null!==d){var v=null;v=null===l?d:null===d?l:0>=os.comparePoints(l,d)?l:d,this.queue.remove(e.rightSE),i.push(e.rightSE);for(var _=e.split(v),b=0,x=_.length;b<x;b++)i.push(_[b])}i.length>0?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var M=this._splitSafely(a,w),S=0,k=M.length;S<k;S++)i.push(M[S]);if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),I=0,P=E.length;I<P;I++)i.push(E[I])}}this.tree.remove(e)}return i}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var r=t.split(e);return r.push(i),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),oy=1e6,ov=1e6,o_=new(function(){function t(){nQ(this,t)}return n1(t,[{key:"run",value:function(t,e,i){o_.type=t,n9.reset();for(var r=[new of(e,!0)],n=0,o=i.length;n<o;n++)r.push(new of(i[n],!1));if(o_.numMultiPolys=r.length,"difference"===o_.type)for(var a=r[0],s=1;s<r.length;)null!==n6(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===o_.type){for(var l=0,h=r.length;l<h;l++)for(var u=r[l],c=l+1,f=r.length;c<f;c++)if(null===n6(u.bbox,r[c].bbox))return[]}for(var d=new n$(os.compare),p=0,m=r.length;p<m;p++)for(var g=r[p].getSweepEvents(),y=0,v=g.length;y<v;y++)if(d.insert(g[y]),d.size>oy)throw Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new og(d),b=d.size,x=d.pop();x;){var w=x.key;if(d.size===b){var M=w.segment;throw Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(M.id," ")+"[".concat(M.leftSE.point.x,", ").concat(M.leftSE.point.y,"] -> ")+"[".concat(M.rightSE.point.x,", ").concat(M.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>oy)throw Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>ov)throw Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var S=_.process(w),k=0,E=S.length;k<E;k++){var I=S[k];void 0===I.consumedBy&&d.insert(I)}b=d.size,x=d.pop()}return n9.reset(),new om(od.factory(_.segments)).getGeom()}}]),t}()),ob={union:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return o_.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return o_.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return o_.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return o_.run("difference",t,i)}};function ox(t){if(!t)throw Error("geojson is required");var e=[];return td(t,function(t){e.push(t)}),M(e)}function ow(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=Z(t),n=Z(e),o=r[0]-n[0],a=r[1]-n[1];return 1===i?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,i)+Math.pow(a,i),1/i)}function oM(t,e){var i,r,n=(e=e||{}).threshold||1e4,o=e.p||2,a=null!=(i=e.binary)&&i,s=e.alpha||-1,l=null!=(r=e.standardization)&&r,h=[];tl(t,function(t){h.push(rM(t))});for(var u=[],c=0;c<h.length;c++)u[c]=[];for(var f=0;f<h.length;f++)for(var d=f;d<h.length;d++){f===d&&(u[f][d]=0);var p=ow(h[f],h[d],o);u[f][d]=p,u[d][f]=p}for(var m=0;m<h.length;m++)for(var g=0;g<h.length;g++){var y=u[m][g];0!==y&&(u[m][g]=a?y<=n?1:0:y<=n?Math.pow(y,s):0)}if(l)for(var v=0;v<h.length;v++)for(var _=u[v].reduce(function(t,e){return t+e},0),b=0;b<h.length;b++)u[v][b]=u[v][b]/_;return u}function oS(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=e<0,o=D(Math.abs(e),r.units,"meters");n&&(o=-Math.abs(o));var a=Z(t),s=function(t,e,i,r){var n=e/(r=void 0===r?f:Number(r)),o=t[0]*Math.PI/180,a=O(t[1]),s=O(i),l=n*Math.cos(s),h=a+l;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);var u=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(a/2+Math.PI/4));return[(180*(o+n*Math.sin(s)/(Math.abs(u)>1e-11?l/u:Math.cos(a)))/Math.PI+540)%360-180,180*h/Math.PI]}(a,o,i);return s[0]+=s[0]-a[0]>180?-360:a[0]-s[0]>180?360:0,y(s,r.properties)}function ok(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Z(t),n=Z(e);return n[0]+=n[0]-r[0]>180?-360:r[0]-n[0]>180?360:0,D(function(t,e,i){var r=i=void 0===i?f:Number(i),n=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-n,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),h=Math.abs(l)>1e-11?a/l:Math.cos(n);return Math.sqrt(a*a+h*h*s*s)*r}(r,n),"meters",i.units)}function oE(t,e,i){if(!j(i=i||{}))throw Error("options is invalid");var r=i.pivot,n=i.mutate;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("angle is required");if(0===e)return t;var o=null!=r?r:rM(t);return!1!==n&&void 0!==n||(t=r0(t)),tn(t,function(t){var i=ti(o,t)+e,r=ok(o,t),n=G(oS(o,r,i));t[0]=n[0],t[1]=n[1]}),t}function oI(t,e,i,r){var n=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||t,l=r.properties||{};if(!t)throw Error("center is required");if(!e)throw Error("xSemiAxis is required");if(!i)throw Error("ySemiAxis is required");if(!j(r))throw Error("options must be an object");if(!F(n))throw Error("steps must be a number");if(!F(a))throw Error("angle must be a number");var h=Z(t);if("degrees"!==o){var u=oS(t,e,90,{units:o}),c=oS(t,i,0,{units:o});e=Z(u)[0]-h[0],i=Z(c)[1]-h[1]}for(var f=[],d=0;d<n;d+=1){var p=-360*d/n,m=e*i/Math.sqrt(Math.pow(i,2)+Math.pow(e,2)*Math.pow(oP(p),2)),g=e*i/Math.sqrt(Math.pow(e,2)+Math.pow(i,2)/Math.pow(oP(p),2));if(p<-90&&p>=-270&&(m=-m),p<-180&&p>=-360&&(g=-g),"degrees"===o){var y=O(a),v=m*Math.cos(y)+g*Math.sin(y),b=g*Math.cos(y)-m*Math.sin(y);m=v,g=b}f.push([m+h[0],g+h[1]])}return f.push(f[0]),"degrees"===o?_([f],l):oE(_([f],l),a,{pivot:s})}function oP(t){return Math.tan(t*Math.PI/180)}function oT(t){return tL(tI(t))}function oA(t){var e=[];return"FeatureCollection"===t.type?tl(t,function(t){tn(t,function(i){e.push(y(i,t.properties))})}):"Feature"===t.type?tn(t,function(i){e.push(y(i,t.properties))}):tn(t,function(t){e.push(y(t))}),M(e)}var oC=Math.PI/180,oL=180/Math.PI,oR=function(t,e){this.lon=t,this.lat=e,this.x=oC*t,this.y=oC*e};oR.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},oR.prototype.antipode=function(){var t=-1*this.lat;return new oR(this.lon<0?180+this.lon:-1*(180-this.lon),t)};var oN=function(){this.coords=[],this.length=0};oN.prototype.move_to=function(t){this.length++,this.coords.push(t)};var oz=function(t){this.properties=t||{},this.geometries=[]};oz.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},oz.prototype.wkt=function(){for(var t="",e="LINESTRING(",i=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(i),t+=e.substring(0,e.length-1)+")"}return t};var oO=function(t,e,i){if(!t||void 0===t.x||void 0===t.y||!e||void 0===e.x||void 0===e.y)throw Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new oR(t.x,t.y),this.end=new oR(e.x,e.y),this.properties=i||{};var r=this.start.x-this.end.x,n=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(n)),this.g===Math.PI)throw Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw Error("could not calculate great circle between "+t+" and "+e)};/*!
   * Copyright (c) 2019, Dane Springmeyer
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are
   * met:
   *
   *     * Redistributions of source code must retain the above copyright
   *       notice, this list of conditions and the following disclaimer.
   *     * Redistributions in binary form must reproduce the above copyright
   *       notice, this list of conditions and the following disclaimer in
   *       the documentation and/or other materials provided with the
   *       distribution.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
   * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
   * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
   * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
   * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */function oD(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];if(tc(t,function(t){i.push(t.coordinates)}),i.length<2)throw Error("Must specify at least 2 geometries");var r=ob.intersection.apply(ob,[i[0]].concat(s(i.slice(1))));return 0===r.length?null:1===r.length?_(r[0],e.properties):E(r,e.properties)}function oB(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=JSON.stringify(i.properties||{}),n=a(t,4),o=n[0],s=n[1],l=n[2],h=n[3],u=(s+h)/2,c=(o+l)/2,f=2*e/te([o,u],[l,u],i)*(l-o),d=2*e/te([c,s],[c,h],i)*(h-s),p=f/2,m=2*p,g=Math.sqrt(3)/2*d,y=l-o,v=h-s,_=3/4*m,b=g,x=Math.floor((y-m)/(m-p/2)),w=(x*_-p/2-y)/2-p/2+_/2,S=Math.floor((v-g)/g),k=(v-S*g)/2,E=S*g-v>g/2;E&&(k-=g/4);for(var I=[],P=[],T=0;T<6;T++){var A=2*Math.PI/6*T;I.push(Math.cos(A)),P.push(Math.sin(A))}for(var C=[],R=0;R<=x;R++)for(var N=0;N<=S;N++){var z=R%2==1;if((0!==N||!z)&&(0!==N||!E)){var O=R*_+o-w,D=N*b+s+k;if(z&&(D-=g/2),!0===i.triangles)oj([O,D],f/2,d/2,JSON.parse(r),I,P).forEach(function(t){i.mask?oD(M([i.mask,t]))&&C.push(t):C.push(t)});else{var B=oF([O,D],f/2,d/2,JSON.parse(r),I,P);i.mask?oD(M([i.mask,B]))&&C.push(B):C.push(B)}}}return M(C)}function oF(t,e,i,r,n,o){for(var a=[],s=0;s<6;s++){var l=t[0]+e*n[s],h=t[1]+i*o[s];a.push([l,h])}return a.push(a[0].slice()),_([a],r)}function oj(t,e,i,r,n,o){for(var a=[],s=0;s<6;s++){var l=[];l.push(t),l.push([t[0]+e*n[s],t[1]+i*o[s]]),l.push([t[0]+e*n[(s+1)%6],t[1]+i*o[(s+1)%6]]),l.push(t),a.push(_([l],r))}return a}function oq(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.mask&&!i.units&&(i.units="kilometers");for(var r=[],n=t[0],o=t[1],a=t[2],s=t[3],l=e/te([n,o],[a,o],i)*(a-n),h=e/te([n,o],[n,s],i)*(s-o),u=a-n,c=s-o,f=Math.floor(u/l),d=(c-Math.floor(c/h)*h)/2,p=n+(u-f*l)/2;p<=a;){for(var m=o+d;m<=s;){var g=y([p,m],i.properties);i.mask?e8(g,i.mask)&&r.push(g):r.push(g),m+=h}p+=l}return M(r)}function oV(t,e,i){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=[],o=t[0],a=t[1],s=t[2],l=t[3],h=s-o,u=D(e,r.units,"degrees"),c=l-a,f=D(i,r.units,"degrees"),d=Math.floor(Math.abs(h)/u),p=Math.floor(Math.abs(c)/f),m=(c-p*f)/2,g=o+(h-d*u)/2,y=0;y<d;y++){for(var v=a+m,b=0;b<p;b++){var x=_([[[g,v],[g,v+f],[g+u,v+f],[g+u,v],[g,v]]],r.properties);r.mask?eg(r.mask,x)&&n.push(x):n.push(x),v+=f}g+=u}return M(n)}function oU(t,e){return oV(t,e,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function oZ(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],n=e/te([t[0],t[1]],[t[2],t[1]],i)*(t[2]-t[0]),o=e/te([t[0],t[1]],[t[0],t[3]],i)*(t[3]-t[1]),a=0,s=t[0];s<=t[2];){for(var l=0,h=t[1];h<=t[3];){var u=null,c=null;a%2==0&&l%2==0?(u=_([[[s,h],[s,h+o],[s+n,h],[s,h]]],i.properties),c=_([[[s,h+o],[s+n,h+o],[s+n,h],[s,h+o]]],i.properties)):a%2==0&&l%2==1?(u=_([[[s,h],[s+n,h+o],[s+n,h],[s,h]]],i.properties),c=_([[[s,h],[s,h+o],[s+n,h+o],[s,h]]],i.properties)):l%2==0&&a%2==1?(u=_([[[s,h],[s,h+o],[s+n,h+o],[s,h]]],i.properties),c=_([[[s,h],[s+n,h+o],[s+n,h],[s,h]]],i.properties)):l%2==1&&a%2==1&&(u=_([[[s,h],[s,h+o],[s+n,h],[s,h]]],i.properties),c=_([[[s,h+o],[s+n,h+o],[s+n,h],[s,h+o]]],i.properties)),i.mask?(oD(M([i.mask,u]))&&r.push(u),oD(M([i.mask,c]))&&r.push(c)):(r.push(u),r.push(c)),h+=o,l++}a++,s+=n}return M(r)}/*!
  * MarchingSquaresJS
  * version 1.3.3
  * https://github.com/RaumZeit/MarchingSquares.js
  *
  * @license GNU Affero General Public License.
  * Copyright (c) 2015-2019 Ronny Lorenz <ronny@tbi.univie.ac.at>
  */function oG(t,e,i){return t<e?(i-t)/(e-t):(t-i)/(t-e)}function oH(t,e,i,r){var n;return i>r&&(n=i,i=r,r=n),t<e?t<i?(i-t)/(e-t):(r-t)/(e-t):t>r?(t-r)/(t-e):(t-i)/(t-e)}function oW(t,e,i,r){return t<e?(i-t)/(e-t):(t-r)/(t-e)}function oX(t,e,i,r){return t<e?(r-t)/(e-t):(t-i)/(t-e)}function o$(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function oY(t,e,i,r){var n=[];return t.polygons.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=i}),r.linearRing&&t.push(t[0]),n.push(t)}),n}function oK(t,e,i,r){return 0===i?(t+=1,e+=r[0][1]):1===i?t+=r[0][0]:2===i?e+=r[0][1]:3===i&&(t+=r[0][0],e+=1),[t,e]}function oJ(t,e,i){return 0===i?t++:1===i||(2===i?e++:3===i&&(t++,e++)),[t,e]}function oQ(t,e,i,r,n){var o=r,a=n,s=0,l=0;if(this.x=e,this.y=i,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===r&&1===n)this.lowerBound=Math.min(t[i][e],t[i][e+1],t[i+1][e+1],t[i+1][e]),this.upperBound=Math.max(t[i][e],t[i][e+1],t[i+1][e+1],t[i+1][e]);else{if(r>1){for(;0!==o;)o>>=1,s++;r===1<<s-1&&s--,o=1<<s-1}if(n>1){for(;0!==a;)a>>=1,l++;n===1<<l-1&&l--,a=1<<l-1}this.childA=new oQ(t,e,i,o,a),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,r-o>0&&(this.childB=new oQ(t,e+o,i,r-o,a),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),n-a>0&&(this.childC=new oQ(t,e+o,i+a,r-o,n-a),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),n-a>0&&(this.childD=new oQ(t,e,i+a,o,n-a),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function o0(t){var e,i;if(!t)throw Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw Error("data must contain at least two rows");if((i=t[0].length)<2)throw Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw Error("Row "+e+" is not an array");if(t[e].length!=i)throw Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new oQ(t,0,0,t[0].length-1,t.length-1)}function o1(t,i,r){var n,o,a,s=!1,l=!1,h=null,u=null,c=null,f=null,d=null,p=[];if(!t)throw Error("data is required");if(null==i)throw Error("threshold is required");if(r&&"object"!==e(r))throw Error("options must be an object");if(n=function(t){var e,i,r,n,o;for(n=new o$,t=t||{},o=Object.keys(n),e=0;e<o.length;e++)null!=(r=t[i=o[e]])&&(n[i]=r);return n.polygons_full=!n.polygons,n.interpolate=oG,n}(r),t instanceof o0)h=t,u=t.root,c=t.data,n.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=t}if(Array.isArray(i)){for(l=!0,n.noQuadTree||(s=!0),o=0;o<i.length;o++)if(isNaN(+i[o]))throw Error("threshold["+o+"] is not a number")}else{if(isNaN(+i))throw Error("threshold must be a number or array of numbers");i=[i]}return s&&!u&&(u=(h=new o0(c)).root,c=h.data),n.verbose&&(n.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),l&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),i.forEach(function(t,i){if(d=[],n.threshold=t,n.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),n.polygons){if(s)u.cellsBelowThreshold(n.threshold,!0).forEach(function(t){d=d.concat(oY(o2(c,t.x,t.y,n),t.x,t.y,n))});else for(a=0;a<c.length-1;++a)for(i=0;i<c[0].length-1;++i)d=d.concat(oY(o2(c,i,a,n),i,a,n))}else{for(f=[],i=0;i<c[0].length-1;++i)f[i]=[];if(s)u.cellsBelowThreshold(n.threshold,!1).forEach(function(t){f[t.x][t.y]=o2(c,t.x,t.y,n)});else for(i=0;i<c[0].length-1;++i)for(a=0;a<c.length-1;++a)f[i][a]=o2(c,i,a,n);d=function(t,i,r){var n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_=[],b=t.length-1,x=t[0].length-1,w=["right","bottom","left","top"],M=[0,-1,0,1],S=[-1,0,1,0],k={bottom:1,left:2,top:3,right:0};return r.noFrame||function(t,e){var i,r,n,o,a;for(i=!0,r=t[0].length,n=t.length,a=0;a<n;a++)if(t[a][0]>=e||t[a][r-1]>=e){i=!1;break}if(i&&(t[n-1][0]>=e||t[n-1][r-1]>=e)&&(i=!1),i){for(o=0;o<r-1;o++)if(t[0][o]>=e||t[n-1][o]>e){i=!1;break}}return i}(t,r.threshold)&&(r.linearRing?_.push([[0,0],[0,b],[x,b],[x,0],[0,0]]):_.push([[0,0],[0,b],[x,b],[x,0]])),i.forEach(function(t,E){t.forEach(function(t,I){for(n=null,o=0;o<4;o++)if(n=w[o],"object"===e(t.edges[n])){for(l=[],a=t.edges[n],h=n,u=E,c=I,f=!1,d=[E+a.path[0][0],I+a.path[0][1]],l.push(d);!f&&"object"===e((s=i[u][c]).edges[h]);)if(a=s.edges[h],delete s.edges[h],(p=a.path[1])[0]+=u,p[1]+=c,l.push(p),h=a.move.enter,u+=a.move.x,c+=a.move.y,void 0===i[u]||void 0===i[u][c]){if(!r.linearRing)break;if(m=0,g=0,u===x?(u--,m=0):u<0?(u++,m=2):c===b?(c--,m=3):c<0&&(c++,m=1),u===E&&c===I&&m===k[n]){f=!0,h=n;break}for(;;){if(y=!1,g>4)throw Error("Direction change counter overflow! This should never happen!");if(void 0!==i[u]&&void 0!==i[u][c]&&(s=i[u][c],v=w[m],"object"===e(s.edges[v]))){a=s.edges[v],l.push(oK(u,c,m,a.path)),h=v,y=!0;break}if(y)break;if(l.push(oJ(u,c,m)),c+=S[m],void 0!==i[u+=M[m]]&&void 0!==i[u][c]||(0===m&&c<0||1===m&&u<0||2===m&&c===b||3===m&&u===x)&&(u-=M[m],c-=S[m],m=(m+1)%4,g++),u===E&&c===I&&m===k[n]){f=!0,h=n;break}}}r.linearRing&&(l[l.length-1][0]!==d[0]||l[l.length-1][1]!==d[1])&&l.push(d),_.push(l)}})}),_}(c,f,n)}l?p.push(d):p=d,"function"==typeof n.successCallback&&n.successCallback(p,t)}),p}function o2(t,e,i,r){var n,o,a,s,l,h,u=0,c=t[i+1][e],f=t[i+1][e+1],d=t[i][e+1],p=t[i][e],m=r.threshold;if(!(isNaN(p)||isNaN(d)||isNaN(f)||isNaN(c))){switch(u|=c>=m?8:0,u|=f>=m?4:0,u|=d>=m?2:0,h={cval:u=+(u|=p>=m?1:0),polygons:[],edges:{},x0:p,x1:d,x2:f,x3:c},u){case 0:r.polygons&&h.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:n=r.interpolate(p,c,m),s=r.interpolate(p,d,m),r.polygons_full&&(h.edges.left={path:[[0,n],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&h.polygons.push([[0,0],[0,n],[s,0]]);break;case 13:s=r.interpolate(p,d,m),o=r.interpolate(d,f,m),r.polygons_full&&(h.edges.bottom={path:[[s,0],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&h.polygons.push([[s,0],[1,o],[1,0]]);break;case 11:o=r.interpolate(d,f,m),a=r.interpolate(c,f,m),r.polygons_full&&(h.edges.right={path:[[1,o],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&h.polygons.push([[1,o],[a,1],[1,1]]);break;case 7:n=r.interpolate(p,c,m),a=r.interpolate(c,f,m),r.polygons_full&&(h.edges.top={path:[[a,1],[0,n]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&h.polygons.push([[a,1],[0,n],[0,1]]);break;case 1:n=r.interpolate(p,c,m),s=r.interpolate(p,d,m),r.polygons_full&&(h.edges.bottom={path:[[s,0],[0,n]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&h.polygons.push([[s,0],[0,n],[0,1],[1,1],[1,0]]);break;case 2:s=r.interpolate(p,d,m),o=r.interpolate(d,f,m),r.polygons_full&&(h.edges.right={path:[[1,o],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&h.polygons.push([[0,0],[0,1],[1,1],[1,o],[s,0]]);break;case 4:o=r.interpolate(d,f,m),a=r.interpolate(c,f,m),r.polygons_full&&(h.edges.top={path:[[a,1],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&h.polygons.push([[0,0],[0,1],[a,1],[1,o],[1,0]]);break;case 8:n=r.interpolate(p,c,m),a=r.interpolate(c,f,m),r.polygons_full&&(h.edges.left={path:[[0,n],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&h.polygons.push([[0,0],[0,n],[a,1],[1,1],[1,0]]);break;case 12:n=r.interpolate(p,c,m),o=r.interpolate(d,f,m),r.polygons_full&&(h.edges.left={path:[[0,n],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&h.polygons.push([[0,0],[0,n],[1,o],[1,0]]);break;case 9:s=r.interpolate(p,d,m),a=r.interpolate(c,f,m),r.polygons_full&&(h.edges.bottom={path:[[s,0],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&h.polygons.push([[s,0],[a,1],[1,1],[1,0]]);break;case 3:n=r.interpolate(p,c,m),o=r.interpolate(d,f,m),r.polygons_full&&(h.edges.right={path:[[1,o],[0,n]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&h.polygons.push([[0,n],[0,1],[1,1],[1,o]]);break;case 6:s=r.interpolate(p,d,m),a=r.interpolate(c,f,m),r.polygons_full&&(h.edges.top={path:[[a,1],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&h.polygons.push([[0,0],[0,1],[a,1],[s,0]]);break;case 10:n=r.interpolate(p,c,m),o=r.interpolate(d,f,m),s=r.interpolate(p,d,m),a=r.interpolate(c,f,m),l=(p+d+f+c)/4,r.polygons_full&&(l<m?(h.edges.left={path:[[0,n],[a,1]],move:{x:0,y:1,enter:"bottom"}},h.edges.right={path:[[1,o],[s,0]],move:{x:0,y:-1,enter:"top"}}):(h.edges.right={path:[[1,o],[a,1]],move:{x:0,y:1,enter:"bottom"}},h.edges.left={path:[[0,n],[s,0]],move:{x:0,y:-1,enter:"top"}})),r.polygons&&(l<m?h.polygons.push([[0,0],[0,n],[a,1],[1,1],[1,o],[s,0]]):(h.polygons.push([[0,0],[0,n],[s,0]]),h.polygons.push([[a,1],[1,1],[1,o]])));break;case 5:n=r.interpolate(p,c,m),o=r.interpolate(d,f,m),s=r.interpolate(p,d,m),a=r.interpolate(c,f,m),l=(p+d+f+c)/4,r.polygons_full&&(l<m?(h.edges.bottom={path:[[s,0],[0,n]],move:{x:-1,y:0,enter:"right"}},h.edges.top={path:[[a,1],[1,o]],move:{x:1,y:0,enter:"left"}}):(h.edges.top={path:[[a,1],[0,n]],move:{x:-1,y:0,enter:"right"}},h.edges.bottom={path:[[s,0],[1,o]],move:{x:1,y:0,enter:"left"}})),r.polygons&&(l<m?h.polygons.push([[0,n],[0,1],[a,1],[1,o],[1,0],[s,0]]):(h.polygons.push([[0,n],[0,1],[a,1]]),h.polygons.push([[s,0],[1,o],[1,0]])))}return h}}oO.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),i=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),n=e*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),o=oL*Math.atan2(e*Math.sin(this.start.y)+i*Math.sin(this.end.y),Math.sqrt(Math.pow(r,2)+Math.pow(n,2)));return[oL*Math.atan2(n,r),o]},oO.prototype.Arc=function(t,e){var i=[];if(!t||t<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),n=0;n<t;++n){var o=r*n,a=this.interpolate(o);i.push(a)}for(var s=!1,l=0,h=e&&e.offset?e.offset:10,u=180-h,c=-180+h,f=360-h,d=1;d<i.length;++d){var p=i[d-1][0],m=i[d][0],g=Math.abs(m-p);g>f&&(m>u&&p<c||p>u&&m<c)?s=!0:g>l&&(l=g)}var y=[];if(s&&l<h){var v=[];y.push(v);for(var _=0;_<i.length;++_){var b=parseFloat(i[_][0]);if(_>0&&Math.abs(b-i[_-1][0])>f){var x=parseFloat(i[_-1][0]),w=parseFloat(i[_-1][1]),M=parseFloat(i[_][0]),S=parseFloat(i[_][1]);if(x>-180&&x<c&&180===M&&_+1<i.length&&i[_-1][0]>-180&&i[_-1][0]<c){v.push([-180,i[_][1]]),_++,v.push([i[_][0],i[_][1]]);continue}if(x>u&&x<180&&-180===M&&_+1<i.length&&i[_-1][0]>u&&i[_-1][0]<180){v.push([180,i[_][1]]),_++,v.push([i[_][0],i[_][1]]);continue}if(x<c&&M>u){var k=x;x=M,M=k;var E=w;w=S,S=E}if(x>u&&M<c&&(M+=360),x<=180&&M>=180&&x<M){var I=(180-x)/(M-x),P=I*S+(1-I)*w;v.push([i[_-1][0]>u?180:-180,P]),(v=[]).push([i[_-1][0]>u?-180:180,P]),y.push(v)}else v=[],y.push(v);v.push([b,i[_][1]])}else v.push([i[_][0],i[_][1]])}}else{var T=[];y.push(T);for(var A=0;A<i.length;++A)T.push([i[A][0],i[A][1]])}for(var C=new oz(this.properties),R=0;R<y.length;++R){var N=new oN;C.geometries.push(N);for(var z=y[R],O=0;O<z.length;++O)N.move_to(z[O])}return C},oQ.prototype.cellsInBand=function(t,e,i){var r=[];return i=void 0===i||i,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(r=r.concat(this.childA.cellsInBand(t,e,i))),this.childB&&(r=r.concat(this.childB.cellsInBand(t,e,i))),this.childD&&(r=r.concat(this.childD.cellsInBand(t,e,i))),this.childC&&(r=r.concat(this.childC.cellsInBand(t,e,i)))):(i||this.lowerBound<=t||this.upperBound>=e)&&r.push({x:this.x,y:this.y})),r},oQ.prototype.cellsBelowThreshold=function(t,e){var i=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(i=i.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(i=i.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(i=i.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(i=i.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&i.push({x:this.x,y:this.y})),i};var o6={square:function(t,e,i,r,n,o){o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,0]])},triangle_bl:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,s],[a,0],[0,0]])},triangle_br:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[1,s]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[a,0],[1,s],[1,0]])},triangle_tr:function(t,e,i,r,n,o){var a=o.interpolate(i,r,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[s,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[1,a],[s,1],[1,1]])},triangle_tl:function(t,e,i,r,n,o){var a=o.interpolate(n,r,o.minV,o.maxV),s=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1]])},tetragon_t:function(t,e,i,r,n,o){var a=o.interpolate(i,r,o.minV,o.maxV),s=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[1,1],[1,a]])},tetragon_r:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[a,0],[s,1],[1,1],[1,0]])},tetragon_b:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[1,s]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[1,s],[1,0]])},tetragon_l:function(t,e,i,r,n,o){var a=o.interpolate(n,r,o.minV,o.maxV),s=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[a,1],[s,0]])},tetragon_bl:function(t,e,i,r,n,o){var a=o.interpolate_a(e,i,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV),h=o.interpolate_b(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[a,0],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,h],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[a,0],[0,l],[0,h],[s,0]])},tetragon_br:function(t,e,i,r,n,o){var a=o.interpolate_a(e,i,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(i,r,o.minV,o.maxV),h=o.interpolate_b(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[a,0],[1,h]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[a,0],[1,h],[1,l],[s,0]])},tetragon_tr:function(t,e,i,r,n,o){var a=o.interpolate_a(n,r,o.minV,o.maxV),s=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rb={path:[[1,h],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[s,1],[1,l]],move:{x:1,y:0,enter:"lt"}}),o.polygons&&t.polygons.push([[1,h],[a,1],[s,1],[1,l]])},tetragon_tl:function(t,e,i,r,n,o){var a=o.interpolate_a(n,r,o.minV,o.maxV),s=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_b(e,n,o.minV,o.maxV),h=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[s,1],[0,h]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[a,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[s,1],[0,h],[0,l],[a,1]])},tetragon_lr:function(t,e,i,r,n,o){var a=o.interpolate_a(e,n,o.minV,o.maxV),s=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,s],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,h],[0,a]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,a],[0,s],[1,l],[1,h]])},tetragon_tb:function(t,e,i,r,n,o){var a=o.interpolate_a(n,r,o.minV,o.maxV),s=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV),h=o.interpolate_a(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[s,1],[l,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[h,0],[a,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[h,0],[a,1],[s,1],[l,0]])},pentagon_tr:function(t,e,i,r,n,o){var a=o.interpolate(n,r,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,s]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[a,1],[1,s],[1,0]])},pentagon_tl:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[s,1],[1,1],[1,0]])},pentagon_br:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,s],[a,0]])},pentagon_bl:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[1,1],[1,0],[s,0]])},pentagon_tr_rl:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,h],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[s,1],[1,l],[1,h]])},pentagon_rb_bt:function(t,e,i,r,n,o){var a=o.interpolate(i,r,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(e,i,o.minV,o.maxV),h=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[s,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[l,0],[h,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[h,1],[1,1],[1,a],[s,0],[l,0]])},pentagon_bl_lr:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate_a(e,n,o.minV,o.maxV),l=o.interpolate_b(e,n,o.minV,o.maxV),h=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[1,h]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[a,0],[0,s],[0,l],[1,h],[1,0]])},pentagon_lt_tb:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate_b(n,r,o.minV,o.maxV),h=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[l,1],[h,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[s,1],[l,1],[h,0]])},pentagon_bl_tb:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV),h=o.interpolate_a(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[h,0],[0,a]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[s,1],[l,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[s,1],[l,0],[h,0]])},pentagon_lt_rl:function(t,e,i,r,n,o){var a=o.interpolate_a(e,n,o.minV,o.maxV),s=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV),h=o.interpolate(i,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,s],[l,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,h],[0,a]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,a],[0,s],[l,1],[1,1],[1,h]])},pentagon_tr_bt:function(t,e,i,r,n,o){var a=o.interpolate_a(n,r,o.minV,o.maxV),s=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV),h=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[h,0],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[s,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[a,1],[s,1],[1,l],[1,0],[h,0]])},pentagon_rb_lr:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate_a(i,r,o.minV,o.maxV),h=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[1,s]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[h,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[1,s],[1,l],[h,0]])},hexagon_lt_tr:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate_b(n,r,o.minV,o.maxV),h=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[l,1],[1,h]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[s,1],[l,1],[1,h],[1,0]])},hexagon_bl_lt:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate_a(e,n,o.minV,o.maxV),l=o.interpolate_b(e,n,o.minV,o.maxV),h=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[a,0],[0,s],[0,l],[h,1],[1,1],[1,0]])},hexagon_bl_rb:function(t,e,i,r,n,o){var a=o.interpolate_a(e,i,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV),h=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[a,0],[0,l]],move:{x:-1,y:0,enter:"rt"}},t.edges.rt={path:[[1,h],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[a,0],[0,l],[0,1],[1,1],[1,h],[s,0]])},hexagon_tr_rb:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,h],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[1,l],[1,h],[a,0]])},hexagon_lt_rb:function(t,e,i,r,n,o){var a=o.interpolate(e,n,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV),h=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,l],[h,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[s,1],[1,1],[1,l],[h,0]])},hexagon_bl_tr:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(e,n,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV),h=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[l,1],[1,h]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[a,0],[0,s],[0,1],[l,1],[1,h],[1,0]])},heptagon_tr:function(t,e,i,r,n,o){var a=o.interpolate_a(e,i,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV),h=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),c=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[a,0],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,h],[u,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,c],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[a,0],[0,l],[0,h],[u,1],[1,1],[1,c],[s,0]])},heptagon_bl:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate(e,n,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV),h=o.interpolate_b(n,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),c=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[l,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[h,1],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[l,1],[h,1],[1,u],[1,c],[a,0]])},heptagon_tl:function(t,e,i,r,n,o){var a=o.interpolate_a(e,i,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV),h=o.interpolate(n,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),c=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[a,0],[0,l]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[h,1],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,c],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[a,0],[0,l],[0,1],[h,1],[1,u],[1,c],[s,0]])},heptagon_br:function(t,e,i,r,n,o){var a=o.interpolate(e,i,o.minV,o.maxV),s=o.interpolate_a(e,n,o.minV,o.maxV),l=o.interpolate_b(e,n,o.minV,o.maxV),h=o.interpolate_a(n,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),c=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[u,1],[1,c]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[a,0],[0,s],[0,l],[h,1],[u,1],[1,c],[1,0]])},octagon:function(t,e,i,r,n,o){var a=o.interpolate_a(e,i,o.minV,o.maxV),s=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV),h=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),c=o.interpolate_b(n,r,o.minV,o.maxV),f=o.interpolate_b(i,r,o.minV,o.maxV),d=o.interpolate_a(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[a,0],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,h],[u,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[c,1],[1,f]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,d],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[a,0],[0,l],[0,h],[u,1],[c,1],[1,f],[1,d],[s,0]])}};function o3(t,i,r,n){var o,a,s,l=!1,h=null,u=null,c=null,f=null,d=!1,p=[],m=[],g=[];if(!t)throw Error("data is required");if(null==i)throw Error("lowerBound is required");if(null==r)throw Error("bandWidth is required");if(n&&"object"!==e(n))throw Error("options must be an object");if(s=function(t){var e,i,r,n,o;for(n=new o$,t=t||{},o=Object.keys(n),e=0;e<o.length;e++)null!=(r=t[i=o[e]])&&(n[i]=r);return n.polygons_full=!n.polygons,n.interpolate=oH,n.interpolate_a=oW,n.interpolate_b=oX,n}(n),t instanceof o0)h=t,u=t.root,c=t.data,s.noQuadTree||(l=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=t}if(Array.isArray(i)){for(d=!0,s.noQuadTree||(l=!0),o=0;o<i.length;o++)if(isNaN(+i[o]))throw Error("lowerBound["+o+"] is not a number");if(Array.isArray(r)){if(i.length!==r.length)throw Error("lowerBound and bandWidth have unequal lengths");for(o=0;o<r.length;o++)if(isNaN(+r[o]))throw Error("bandWidth["+o+"] is not a number")}else{if(isNaN(+r))throw Error("bandWidth must be a number");for(p=[],o=0;o<i.length;o++)p.push(r);r=p}}else{if(isNaN(+i))throw Error("lowerBound must be a number");if(i=[i],isNaN(+r))throw Error("bandWidth must be a number");r=[r]}return l&&!u&&(u=(h=new o0(c)).root,c=h.data),s.verbose&&(s.polygons?console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"):console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),d&&console.log("MarchingSquaresJS-isoBands: multiple bands requested, returning array of band polygons instead of polygons for a single band")),i.forEach(function(t,i){if(m=[],s.minV=t,s.maxV=t+r[i],s.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+r[i])+"]"),s.polygons){if(l)u.cellsInBand(s.minV,s.maxV,!0).forEach(function(t){m=m.concat(oY(o4(c,t.x,t.y,s),t.x,t.y,s))});else for(a=0;a<c.length-1;++a)for(o=0;o<c[0].length-1;++o)m=m.concat(oY(o4(c,o,a,s),o,a,s))}else{for(f=[],o=0;o<c[0].length-1;++o)f[o]=[];if(l)u.cellsInBand(s.minV,s.maxV,!1).forEach(function(t){f[t.x][t.y]=o4(c,t.x,t.y,s)});else for(o=0;o<c[0].length-1;++o)for(a=0;a<c.length-1;++a)f[o][a]=o4(c,o,a,s);m=function(t,i,r){var n,o,a,s,l,h,u,c,f,d,p,m,g,y,v,_,b=[],x=t.length-1,w=t[0].length-1,M=[["rt","rb"],["br","bl"],["lb","lt"],["tl","tr"]],S=[0,-1,0,1],k=[-1,0,1,0],E=["bl","lb","lt","tl","tr","rt","rb","br"],I={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0};return function(t,e,i){var r,n,o,a,s;for(r=!0,n=t[0].length,o=t.length,s=0;s<o;s++)if(t[s][0]<e||t[s][0]>i||t[s][n-1]<e||t[s][n-1]>i){r=!1;break}if(r&&(t[o-1][0]<e||t[o-1][0]>i||t[o-1][n-1]<e||t[o-1][n-1]>i)&&(r=!1),r){for(a=0;a<n-1;a++)if(t[0][a]<e||t[0][a]>i||t[o-1][a]<e||t[o-1][a]>i){r=!1;break}}return r}(t,r.minV,r.maxV)&&(r.linearRing?b.push([[0,0],[0,x],[w,x],[w,0],[0,0]]):b.push([[0,0],[0,x],[w,x],[w,0]])),i.forEach(function(t,P){t.forEach(function(t,T){for(n=null,a=0;a<8;a++)if(n=E[a],"object"===e(t.edges[n])){for(o=[],s=t.edges[n],u=n,c=P,f=T,d=!1,p=[P+s.path[0][0],T+s.path[0][1]],o.push(p);!d&&"object"===e((m=i[c][f]).edges[u]);)if(s=m.edges[u],delete m.edges[u],(v=s.path[1])[0]+=c,v[1]+=f,o.push(v),u=s.move.enter,c+=s.move.x,f+=s.move.y,void 0===i[c]||void 0===i[c][f]){if(g=0,y=0,c===w)c--,g=0;else if(c<0)c++,g=2;else if(f===x)f--,g=3;else{if(!(f<0))throw Error("Left the grid somewhere in the interior!");f++,g=1}if(c===P&&f===T&&g===I[n]){d=!0,u=n;break}for(;;){if(_=!1,y>4)throw Error("Direction change counter overflow! This should never happen!");if(void 0!==i[c]&&void 0!==i[c][f]){for(m=i[c][f],l=0;l<M[g].length;l++)if(h=M[g][l],"object"===e(m.edges[h])){s=m.edges[h],o.push(oK(c,f,g,s.path)),u=h,_=!0;break}}if(_)break;if(o.push(oJ(c,f,g)),f+=k[g],void 0!==i[c+=S[g]]&&void 0!==i[c][f]||(0===g&&f<0||1===g&&c<0||2===g&&f===x||3===g&&c===w)&&(c-=S[g],f-=k[g],g=(g+1)%4,y++),c===P&&f===T&&g===I[n]){d=!0,u=n;break}}}r.linearRing&&(o[o.length-1][0]!==p[0]||o[o.length-1][1]!==p[1])&&o.push(p),b.push(o)}})}),b}(c,f,s)}d?g.push(m):g=m,"function"==typeof s.successCallback&&s.successCallback(g,t,r[i])}),g}function o8(t,e,i,r,n,o){var a=(r+i+e+t)/4;return a>o?2:a<n?0:1}function o4(t,e,i,r){var n,o,a=0,s=t[i+1][e],l=t[i+1][e+1],h=t[i][e+1],u=t[i][e],c=r.minV,f=r.maxV;if(!(isNaN(u)||isNaN(h)||isNaN(l)||isNaN(s))){switch(a|=s<c?0:s>f?128:64,a|=l<c?0:l>f?32:16,a|=h<c?0:h>f?8:4,o=0,n={cval:a=+(a|=u<c?0:u>f?2:1),polygons:[],edges:{},x0:u,x1:h,x2:l,x3:s,x:e,y:i},a){case 85:o6.square(n,u,h,l,s,r);case 0:case 170:break;case 169:case 1:o6.triangle_bl(n,u,h,l,s,r);break;case 166:case 4:o6.triangle_br(n,u,h,l,s,r);break;case 154:case 16:o6.triangle_tr(n,u,h,l,s,r);break;case 106:case 64:o6.triangle_tl(n,u,h,l,s,r);break;case 168:case 2:o6.tetragon_bl(n,u,h,l,s,r);break;case 162:case 8:o6.tetragon_br(n,u,h,l,s,r);break;case 138:case 32:o6.tetragon_tr(n,u,h,l,s,r);break;case 42:case 128:o6.tetragon_tl(n,u,h,l,s,r);break;case 5:case 165:o6.tetragon_b(n,u,h,l,s,r);break;case 20:case 150:o6.tetragon_r(n,u,h,l,s,r);break;case 80:case 90:o6.tetragon_t(n,u,h,l,s,r);break;case 65:case 105:o6.tetragon_l(n,u,h,l,s,r);break;case 160:case 10:o6.tetragon_lr(n,u,h,l,s,r);break;case 130:case 40:o6.tetragon_tb(n,u,h,l,s,r);break;case 101:case 69:o6.pentagon_tr(n,u,h,l,s,r);break;case 149:case 21:o6.pentagon_tl(n,u,h,l,s,r);break;case 86:case 84:o6.pentagon_bl(n,u,h,l,s,r);break;case 89:case 81:o6.pentagon_br(n,u,h,l,s,r);break;case 96:case 74:o6.pentagon_tr_rl(n,u,h,l,s,r);break;case 24:case 146:o6.pentagon_rb_bt(n,u,h,l,s,r);break;case 6:case 164:o6.pentagon_bl_lr(n,u,h,l,s,r);break;case 129:case 41:o6.pentagon_lt_tb(n,u,h,l,s,r);break;case 66:case 104:o6.pentagon_bl_tb(n,u,h,l,s,r);break;case 144:case 26:o6.pentagon_lt_rl(n,u,h,l,s,r);break;case 36:case 134:o6.pentagon_tr_bt(n,u,h,l,s,r);break;case 9:case 161:o6.pentagon_rb_lr(n,u,h,l,s,r);break;case 37:case 133:o6.hexagon_lt_tr(n,u,h,l,s,r);break;case 148:case 22:o6.hexagon_bl_lt(n,u,h,l,s,r);break;case 82:case 88:o6.hexagon_bl_rb(n,u,h,l,s,r);break;case 73:case 97:o6.hexagon_tr_rb(n,u,h,l,s,r);break;case 145:case 25:o6.hexagon_lt_rb(n,u,h,l,s,r);break;case 70:case 100:o6.hexagon_bl_tr(n,u,h,l,s,r);break;case 17:0===(o=o8(u,h,l,s,c,f))?(o6.triangle_bl(n,u,h,l,s,r),o6.triangle_tr(n,u,h,l,s,r)):o6.hexagon_lt_rb(n,u,h,l,s,r);break;case 68:0===(o=o8(u,h,l,s,c,f))?(o6.triangle_tl(n,u,h,l,s,r),o6.triangle_br(n,u,h,l,s,r)):o6.hexagon_bl_tr(n,u,h,l,s,r);break;case 153:2===(o=o8(u,h,l,s,c,f))?(o6.triangle_bl(n,u,h,l,s,r),o6.triangle_tr(n,u,h,l,s,r)):o6.hexagon_lt_rb(n,u,h,l,s,r);break;case 102:2===(o=o8(u,h,l,s,c,f))?(o6.triangle_tl(n,u,h,l,s,r),o6.triangle_br(n,u,h,l,s,r)):o6.hexagon_bl_tr(n,u,h,l,s,r);break;case 152:2===(o=o8(u,h,l,s,c,f))?(o6.triangle_tr(n,u,h,l,s,r),o6.tetragon_bl(n,u,h,l,s,r)):o6.heptagon_tr(n,u,h,l,s,r);break;case 137:2===(o=o8(u,h,l,s,c,f))?(o6.triangle_bl(n,u,h,l,s,r),o6.tetragon_tr(n,u,h,l,s,r)):o6.heptagon_bl(n,u,h,l,s,r);break;case 98:2===(o=o8(u,h,l,s,c,f))?(o6.triangle_tl(n,u,h,l,s,r),o6.tetragon_br(n,u,h,l,s,r)):o6.heptagon_tl(n,u,h,l,s,r);break;case 38:2===(o=o8(u,h,l,s,c,f))?(o6.triangle_br(n,u,h,l,s,r),o6.tetragon_tl(n,u,h,l,s,r)):o6.heptagon_br(n,u,h,l,s,r);break;case 18:0===(o=o8(u,h,l,s,c,f))?(o6.triangle_tr(n,u,h,l,s,r),o6.tetragon_bl(n,u,h,l,s,r)):o6.heptagon_tr(n,u,h,l,s,r);break;case 33:0===(o=o8(u,h,l,s,c,f))?(o6.triangle_bl(n,u,h,l,s,r),o6.tetragon_tr(n,u,h,l,s,r)):o6.heptagon_bl(n,u,h,l,s,r);break;case 72:0===(o=o8(u,h,l,s,c,f))?(o6.triangle_tl(n,u,h,l,s,r),o6.tetragon_br(n,u,h,l,s,r)):o6.heptagon_tl(n,u,h,l,s,r);break;case 132:0===(o=o8(u,h,l,s,c,f))?(o6.triangle_br(n,u,h,l,s,r),o6.tetragon_tl(n,u,h,l,s,r)):o6.heptagon_br(n,u,h,l,s,r);break;case 136:0===(o=o8(u,h,l,s,c,f))?(o6.tetragon_tl(n,u,h,l,s,r),o6.tetragon_br(n,u,h,l,s,r)):1===o?o6.octagon(n,u,h,l,s,r):(o6.tetragon_bl(n,u,h,l,s,r),o6.tetragon_tr(n,u,h,l,s,r));break;case 34:0===(o=o8(u,h,l,s,c,f))?(o6.tetragon_bl(n,u,h,l,s,r),o6.tetragon_tr(n,u,h,l,s,r)):1===o?o6.octagon(n,u,h,l,s,r):(o6.tetragon_tl(n,u,h,l,s,r),o6.tetragon_br(n,u,h,l,s,r))}return n}}var o5=Object.defineProperty,o7=Object.getOwnPropertySymbols,o9=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,ae=function(t,e,i){return e in t?o5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},ai=function(t,e){for(var i in e||(e={}))o9.call(e,i)&&ae(t,i,e[i]);if(o7){var r,n=u(o7(e));try{for(n.s();!(r=n.n()).done;)i=r.value,at.call(e,i)&&ae(t,i,e[i])}catch(t){n.e(t)}finally{n.f()}}return t};function ar(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i=e.zProperty||"elevation",r=e.flip,n=e.flags;$(t,"Point","input must contain Points");for(var o=function(t,e){var i={};return tl(t,function(t){var e=G(t)[1];i[e]||(i[e]=[]),i[e].push(t)}),Object.keys(i).map(function(t){return i[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,i){return e?G(t[0])[1]-G(i[0])[1]:G(i[0])[1]-G(t[0])[1]})}(t,r),a=[],s=0;s<o.length;s++){for(var l=o[s],h=[],u=0;u<l.length;u++){var c=l[u];c.properties[i]?h.push(c.properties[i]):h.push(0),!0===n&&(c.properties.matrixPosition=[s,u])}a.push(h)}return a}function an(t){var e=t.map(function(t){return{ring:t,area:tw(_([t]))}});return e.sort(function(t,e){return e.area-t.area}),e.map(function(t){return t.ring})}function ao(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),i=[];!as(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var n=[];n.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=_([e[r].lrCoordinates]),a=r+1;a<e.length;a++)!e[a].grouped&&aa(_([e[a].lrCoordinates]),o)&&(n.push(e[a].lrCoordinates),e[a].grouped=!0);i.push(n)}return i}function aa(t,e){for(var i=oA(t),r=0;r<i.features.length;r++)if(!tO(i.features[r],e))return!1;return!0}function as(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}var al=Object.defineProperty,ah=Object.getOwnPropertySymbols,au=Object.prototype.hasOwnProperty,ac=Object.prototype.propertyIsEnumerable,af=function(t,e,i){return e in t?al(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},ad=function(t,e){for(var i in e||(e={}))au.call(e,i)&&af(t,i,e[i]);if(ah){var r,n=u(ah(e));try{for(n.s();!(r=n.n()).done;)i=r.value,ac.call(e,i)&&af(t,i,e[i])}catch(t){n.e(t)}finally{n.f()}}return t};function ap(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i=e.zProperty||"elevation",r=e.flip,n=e.flags;$(t,"Point","input must contain Points");for(var o=function(t,e){var i={};return tl(t,function(t){var e=G(t)[1];i[e]||(i[e]=[]),i[e].push(t)}),Object.keys(i).map(function(t){return i[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,i){return e?G(t[0])[1]-G(i[0])[1]:G(i[0])[1]-G(t[0])[1]})}(t,r),a=[],s=0;s<o.length;s++){for(var l=o[s],h=[],u=0;u<l.length;u++){var c=l[u];c.properties[i]?h.push(c.properties[i]):h.push(0),!0===n&&(c.properties.matrixPosition=[s,u])}a.push(h)}return a}function am(t,e,i,r,n,o,a,s){var l,h,u,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(s-o)*(i-t)-(a-n)*(r-e))?null!==f.x&&null!==f.y&&f:(c=(i-t)*(h=e-o)-(r-e)*(u=t-n),h=((a-n)*h-(s-o)*u)/l,u=c/l,f.x=t+h*(i-t),f.y=e+h*(r-e),h>=0&&h<=1&&(f.onLine1=!0),u>=0&&u<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function ag(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tg(t,function(t,i){var r=i.geometry.coordinates;return t+te(r[0],r[1],e)},0)}function ay(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=n.steps||64,a=av(i),s=av(r),l=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(a===s)return x(rQ(t,e,n).geometry.coordinates[0],l);for(var h=a,u=a<s?s:s+360,c=h,f=[],d=0,p=(u-h)/o;c<=u;)f.push(tt(t,e,c,n).geometry.coordinates),c=h+ ++d*p;return x(f,l)}function av(t){var e=t%360;return e<0&&(e+=360),e}function a_(t,e,i,r){if(!j(r=r||{}))throw Error("options is invalid");var n,o=[];if("Feature"===t.type)n=t.geometry.coordinates;else{if("LineString"!==t.type)throw Error("input must be a LineString Feature or Geometry");n=t.coordinates}for(var a,s,l,h=n.length,u=0,c=0;c<n.length&&!(e>=u&&c===n.length-1);c++){if(u>e&&0===o.length){if(!(a=e-u))return o.push(n[c]),x(o);s=Q(n[c],n[c-1])-180,l=tt(n[c],a,s,r),o.push(l.geometry.coordinates)}if(u>=i)return(a=i-u)?(s=Q(n[c],n[c-1])-180,l=tt(n[c],a,s,r),o.push(l.geometry.coordinates)):o.push(n[c]),x(o);if(u>=e&&o.push(n[c]),c===n.length-1)return x(o);u+=te(n[c],n[c+1],r)}if(u<e&&n.length===h)throw Error("Start position is beyond line");var f=n[n.length-1];return x([f,f])}function ab(t){var e=t[0],i=t[1];return[i[0]-e[0],i[1]-e[1]]}function ax(t,e){return t[0]*e[1]-e[0]*t[1]}function aw(t,e){return!function(t,e){return 0===ax(ab(t),ab(e))}(t,e)&&function(t,e){var i,r,n=t[0],o=ab(t),a=e[0],s=ab(e),l=ax(o,s);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(ax((r=n,[(i=a)[0]-r[0],i[1]-r[1]]),s)/l,o))}(t,e)}function aM(t,e,i){var r=[],n=C(e,i),o=G(t),a=[];return o.forEach(function(t,e){if(e!==o.length-1){var i,s,l,h,u,c,f=(i=t,s=o[e+1],l=n,h=Math.sqrt((i[0]-s[0])*(i[0]-s[0])+(i[1]-s[1])*(i[1]-s[1])),u=i[0]+l*(s[1]-i[1])/h,c=s[0]+l*(s[1]-i[1])/h,[[u,i[1]+l*(i[0]-s[0])/h],[c,s[1]+l*(i[0]-s[0])/h]]);if(r.push(f),e>0){var d=r[e-1],p=aw(f,d);!1!==p&&(d[1]=p,f[0]=p),a.push(d[0]),e===o.length-2&&(a.push(f[0]),a.push(f[1]))}2===o.length&&(a.push(f[0]),a.push(f[1]))}}),x(a,t.properties)}function aS(t){var e=t[0],i=t[1],r=t[2],n=t[3];if(te(t.slice(0,2),[r,i])>=te(t.slice(0,2),[e,n])){var o=(i+n)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(n-i)/2,i,a+(n-i)/2,n]}function ak(t,e){if(!j(e=null!=e?e:{}))throw Error("options is invalid");var i=e.precision,r=e.coordinates,n=e.mutate;if(i=null==i||isNaN(i)?6:i,r=null==r||isNaN(r)?3:r,!t)throw Error("<geojson> is required");if("number"!=typeof i)throw Error("<precision> must be a number");if("number"!=typeof r)throw Error("<coordinates> must be a number");!1!==n&&void 0!==n||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,i);return tn(t,function(t){!function(t,e,i){t.length>i&&t.splice(i,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function aE(t,e){var i=[],r=ez();return td(e,function(e){if(i.forEach(function(t,e){t.id=e}),i.length){var n=r.search(e);if(n.features.length){var o=aP(e,n);i=i.filter(function(t){return t.id!==o.id}),r.remove(o),tl(aI(o,e),function(t){i.push(t),r.insert(t)})}}else(i=aI(t,e).features).forEach(function(t){t.bbox||(t.bbox=aS(tI(t)))}),r.load(M(i))}),M(i)}function aI(t,e){var i=[],r=G(t)[0],n=G(t)[t.geometry.coordinates.length-1];if(aT(r,Z(e))||aT(n,Z(e)))return M([t]);var o=ez(),a=eO(t);o.load(a);var s=o.search(e);if(!s.features.length)return M([t]);var l=aP(e,s),h=th(a,function(t,r,n){var o=G(r)[1],a=Z(e);return n===l.id?(t.push(a),i.push(x(t)),aT(a,o)?[a]:[a,o]):(t.push(o),t)},[r]);return h.length>1&&i.push(x(h)),M(i)}function aP(t,e){if(!e.features.length)throw Error("lines must contain features");if(1===e.features.length)return e.features[0];var i,r=1/0;return tl(e,function(e){var n=eH(e,t).properties.dist;n<r&&(i=e,r=n)}),i}function aT(t,e){return t[0]===e[0]&&t[1]===e[1]}function aA(t,e,i,r){e=e||("Feature"===t.type?t.properties:{});var n=Y(t),o=n.coordinates,a=n.type;if(!o.length)throw Error("line must contain coordinates");switch(a){case"LineString":return i&&(o=aC(o)),_([o],e);case"MultiLineString":var s=[],l=0;return o.forEach(function(t){if(i&&(t=aC(t)),r){var e=function(t){var e=t[0],i=t[1];return Math.abs(e-t[2])*Math.abs(i-t[3])}(tI(x(t)));e>l?(s.unshift(t),l=e):s.push(t)}else s.push(t)}),_(s,e);default:throw Error("geometry type "+a+" is not supported")}}function aC(t){var e=t[0],i=e[0],r=e[1],n=t[t.length-1],o=n[0],a=n[1];return i===o&&r===a||t.push(e),t}function aL(t){return E(t)}function aR(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return t&&(e="Feature"===t.type?t.geometry.coordinates:t.coordinates),_(e)}function aN(t){var e,i=0,r=u(t);try{for(r.s();!(e=r.n()).done;)i+=e.value}catch(t){r.e(t)}finally{r.f()}return i/t.length}var az=Object.defineProperty,aO=Object.defineProperties,aD=Object.getOwnPropertyDescriptors,aB=Object.getOwnPropertySymbols,aF=Object.prototype.hasOwnProperty,aj=Object.prototype.propertyIsEnumerable,aq=function(t,e,i){return e in t?az(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},aV=function(t,e){for(var i in e||(e={}))aF.call(e,i)&&aq(t,i,e[i]);if(aB){var r,n=u(aB(e));try{for(n.s();!(r=n.n()).done;)i=r.value,aj.call(e,i)&&aq(t,i,e[i])}catch(t){n.e(t)}finally{n.f()}}return t},aU=function(t,e){return aO(t,aD(e))};function aZ(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("targetPoint is required");if(!e)throw Error("points is required");var r=1/0,n=0;tl(e,function(e,o){var a=te(t,e,i);a<r&&(n=o,r=a)});var o=r0(e.features[n]);return aU(aV({},o),{properties:aU(aV({},o.properties),{featureIndex:n,distanceToPoint:r})})}function aG(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i.method||(i.method="geodesic"),i.units||(i.units="kilometers"),!t)throw Error("pt is required");if(Array.isArray(t)?t=y(t):"Point"===t.type?t=m(t):X(t,"Point","point"),!e)throw Error("line is required");Array.isArray(e)?e=x(e):"LineString"===e.type?e=m(e):X(e,"LineString","line");var r=1/0,n=t.geometry.coordinates;return tm(e,function(t){var e=function(t,e,i,r){var n=[i[0]-e[0],i[1]-e[1]],o=aH([t[0]-e[0],t[1]-e[1]],n);if(o<=0)return aW(t,e,{method:r.method,units:"degrees"});var a=aH(n,n);if(a<=o)return aW(t,i,{method:r.method,units:"degrees"});var s=o/a;return aW(t,[e[0]+s*n[0],e[1]+s*n[1]],{method:r.method,units:"degrees"})}(n,t.geometry.coordinates[0],t.geometry.coordinates[1],i);e<r&&(r=e)}),D(r,"degrees",i.units)}function aH(t,e){return t[0]*e[0]+t[1]*e[1]}function aW(t,e,i){return"planar"===i.method?ok(t,e,i):te(t,e,i)}var aX=Object.defineProperty,a$=Object.getOwnPropertySymbols,aY=Object.prototype.hasOwnProperty,aK=Object.prototype.propertyIsEnumerable,aJ=function(t,e,i){return e in t?aX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i},aQ=function(t,e){for(var i in e||(e={}))aY.call(e,i)&&aJ(t,i,e[i]);if(a$){var r,n=u(a$(e));try{for(n.s();!(r=n.n()).done;)i=r.value,aK.call(e,i)&&aJ(t,i,e[i])}catch(t){n.e(t)}finally{n.f()}}return t};function a0(t,e,i,r,n,o){return Math.sqrt((n-i)*(n-i)+(o-r)*(o-r))===Math.sqrt((t-i)*(t-i)+(e-r)*(e-r))+Math.sqrt((n-t)*(n-t)+(o-e)*(o-e))}function a1(t,e){var i=[];return tl(t,function(t){var r=!1;if("Point"===t.geometry.type)tc(e,function(e){tO(t,e)&&(r=!0)}),r&&i.push(t);else{if("MultiPoint"!==t.geometry.type)throw Error("Input geometry must be a Point or MultiPoint");var n=[];tc(e,function(e){tn(t,function(t){tO(t,e)&&(r=!0,n.push(t))})}),r&&i.push(k(n,t.properties))}}),M(i)}function a2(t,e,i){var r=e[0]-t[0],n=e[1]-t[1],o=i[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(i[1]-e[1])-o*n)}function a6(t,e){return e.geometry.coordinates[0].every(function(e){return tO(y(e),t)})}var a3=function(){function t(e){i(this,t),this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n(t,[{key:"removeInnerEdge",value:function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})}},{key:"removeOuterEdge",value:function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})}},{key:"addOuterEdge",value:function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1}},{key:"sortOuterEdges",value:function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,i){var r=e.to,n=i.to;if(r.coordinates[0]-t.coordinates[0]>=0&&n.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&n.coordinates[0]-t.coordinates[0]>=0)return -1;if(r.coordinates[0]-t.coordinates[0]==0&&n.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||n.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-n.coordinates[1]:n.coordinates[1]-r.coordinates[1];var o=a2(t.coordinates,r.coordinates,n.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)}},{key:"getOuterEdges",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:"getOuterEdge",value:function(t){return this.sortOuterEdges(),this.outerEdges[t]}},{key:"addInnerEdge",value:function(t){this.innerEdges.push(t)}}],[{key:"buildId",value:function(t){return t.join(",")}}]),t}(),a8=function(){function t(e,r){i(this,t),this.from=e,this.to=r,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n(t,[{key:"getSymetric",value:function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:"deleteEdge",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:"isEqual",value:function(t){return this.from.id===t.from.id&&this.to.id===t.to.id}},{key:"toString",value:function(){return"Edge { ".concat(this.from.id," -> ").concat(this.to.id," }")}},{key:"toLineString",value:function(){return x([this.from.coordinates,this.to.coordinates])}},{key:"compareTo",value:function(t){return a2(t.from.coordinates,t.to.coordinates,this.to.coordinates)}}]),t}(),a4=function(){function t(){i(this,t),this.edges=[],this.polygon=void 0,this.envelope=void 0}return n(t,[{key:"push",value:function(t){this.edges.push(t),this.polygon=this.envelope=void 0}},{key:"get",value:function(t){return this.edges[t]}},{key:"length",get:function(){return this.edges.length}},{key:"forEach",value:function(t){this.edges.forEach(t)}},{key:"map",value:function(t){return this.edges.map(t)}},{key:"some",value:function(t){return this.edges.some(t)}},{key:"isValid",value:function(){return!0}},{key:"isHole",value:function(){var t=this,e=this.edges.reduce(function(e,i,r){return i.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),i=(0===e?this.length:e)-1,r=(e+1)%this.length,n=a2(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===n?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:n>0}},{key:"toMultiPoint",value:function(){return k(this.edges.map(function(t){return t.from.coordinates}))}},{key:"toPolygon",value:function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=_([t])}},{key:"getEnvelope",value:function(){return this.envelope?this.envelope:this.envelope=oT(this.toPolygon())}},{key:"inside",value:function(t){return tO(t,this.toPolygon())}}],[{key:"findEdgeRingContaining",value:function(t,e){var i,r,n=t.getEnvelope();return e.forEach(function(e){var o,a,s,l,h,c,f=e.getEnvelope();if(r&&(i=r.getEnvelope()),a=n,s=(o=f).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),h=a.geometry.coordinates[0].map(function(t){return t[0]}),c=a.geometry.coordinates[0].map(function(t){return t[1]}),(Math.max.apply(null,s)!==Math.max.apply(null,h)||Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.min.apply(null,s)!==Math.min.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,c))&&a6(f,n)){var d,p,m=u(t.map(function(t){return t.from.coordinates}));try{var g=function(){var t=p.value;e.some(function(e){var i,r;return i=t,r=e.from.coordinates,i[0]===r[0]&&i[1]===r[1]})||(d=t)};for(m.s();!(p=m.n()).done;)g()}catch(t){m.e(t)}finally{m.f()}d&&e.inside(y(d))&&(r&&!a6(i,f)||(r=e))}}),r}}]),t}(),a5=function(){function t(){i(this,t),this.edges=[],this.nodes={}}return n(t,[{key:"getNode",value:function(t){var e=a3.buildId(t),i=this.nodes[e];return i||(i=this.nodes[e]=new a3(t)),i}},{key:"addEdge",value:function(t,e){var i=new a8(t,e),r=i.getSymetric();this.edges.push(i),this.edges.push(r)}},{key:"deleteDangles",value:function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})}},{key:"_removeIfDangle",value:function(t){var e=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),i.forEach(function(t){return e._removeIfDangle(t)})}}},{key:"deleteCutEdges",value:function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})}},{key:"_computeNextCWEdges",value:function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,i){t.getOuterEdge((0===i?t.getOuterEdges().length:i)-1).symetric.next=e})}},{key:"_computeNextCCWEdges",value:function(t,e){for(var i,r,n=t.getOuterEdges(),o=n.length-1;o>=0;--o){var a=n[o],s=a.symetric,l=void 0,h=void 0;a.label===e&&(l=a),s.label===e&&(h=s),l&&h&&(h&&(r=h),l&&(r&&(r.next=l,r=void 0),i||(i=l)))}r&&(r.next=i)}},{key:"_findLabeledEdgeRings",value:function(){var t=[],e=0;return this.edges.forEach(function(i){if(!(i.label>=0)){t.push(i);var r=i;do r.label=e,r=r.next;while(!i.isEqual(r))e++}}),t}},{key:"getEdgeRings",value:function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(i){t._computeNextCCWEdges(i,e.label)})});var e=[];return this.edges.forEach(function(i){i.ring||e.push(t._findEdgeRing(i))}),e}},{key:"_findIntersectionNodes",value:function(t){var e=[],i=t,r=function(){var r=0;i.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(i.from),i=i.next};do r();while(!t.isEqual(i))return e}},{key:"_findEdgeRing",value:function(t){var e=t,i=new a4;do i.push(e),e.ring=i,e=e.next;while(!t.isEqual(e))return i}},{key:"removeNode",value:function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]}},{key:"removeEdge",value:function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()}}],[{key:"fromGeoJson",value:function(e){!function(t){if(!t)throw Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw Error("Invalid input type '".concat(t.type,"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}(e);var i=new t;return td(e,function(t){X(t,"LineString","Graph::fromGeoJson"),to(t,function(t,e){if(t){var r=i.getNode(t),n=i.getNode(e);i.addEdge(r,n)}return e})}),i}}]),t}();function a7(t,e){var i,r;tn(t,function(t,n,o,a,s){if(r!==s)e.push([]);else{var l=i[0],h=i[1],u=t[0],c=t[1];e[s].push([.75*l+.25*u,.75*h+.25*c]),e[s].push([.25*l+.75*u,.25*h+.75*c])}i=t,r=s},!1),e.forEach(function(t){t.push(t[0])})}function a9(t,e){var i,r,n;tn(t,function(t,o,a,s,l){if(r!==s)e.push([[]]);else if(n!==l)e[s].push([]);else{var h=i[0],u=i[1],c=t[0],f=t[1];e[s][l].push([.75*h+.25*c,.75*u+.25*f]),e[s][l].push([.25*h+.75*c,.25*u+.75*f])}i=t,r=s,n=l},!1),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function st(t,e,i,r,n){for(var o=0;o<t.length;o++){var a=t[o],s=t[o+1];o===t.length-1&&(s=t[0]);var l=si(a,s,e);i<=0&&l>0?0>si(e,a,r)||(r=a):i>0&&l<=0&&(se(e,a,n)||(n=a)),i=l}return[r,n]}function se(t,e,i){return si(t,e,i)>0}function si(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function sr(t){return so(t,"mercator",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function sn(t){return so(t,"wgs84",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function so(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(i=i||{}).mutate;if(!t)throw Error("geojson is required");return Array.isArray(t)&&F(t[0])?t="mercator"===e?sa(t):ss(t):(!0!==r&&(t=r0(t)),tn(t,function(t){var i="mercator"===e?sa(t):ss(t);t[0]=i[0],t[1]=i[1]})),t}function sa(t){var e,i=Math.PI/180,r=6378137,n=20037508.342789244,o=[6378137*(180>=Math.abs(t[0])?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*i,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*i))];return o[0]>n&&(o[0]=n),o[0]<-n&&(o[0]=-n),o[1]>n&&(o[1]=n),o[1]<-n&&(o[1]=-n),o}function ss(t){var e=180/Math.PI,i=6378137;return[t[0]*e/i,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/i)))*e]}var sl=Object.freeze({__proto__:null,toMercator:sr,toWgs84:sn}),sh={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function su(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function sc(t){var e=[];return function t(i){return 0===i||1===i?1:e[i]>0?e[i]:e[i]=t(i-1)*i}(t)}function sf(t){return sp(t),sd(t)}function sd(t){return Array.isArray(t)?s_(t):t&&t.bbox?s_(t.bbox):[360*sv(),180*sv()]}function sp(t){null!=t&&(Array.isArray(t)?q(t):null!=t.bbox&&q(t.bbox))}function sm(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sp(e.bbox),null==t&&(t=1);for(var i=[],r=0;r<t;r++)i.push(y(sd(e.bbox)));return M(i)}function sg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sp(e.bbox),null==t&&(t=1),void 0!==e.bbox&&null!==e.bbox||(e.bbox=[-180,-90,180,90]),F(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),F(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);var i=Math.min(Math.abs(e.bbox[0]-e.bbox[2])/2,Math.abs(e.bbox[1]-e.bbox[3])/2);if(e.max_radial_length>i)throw Error("max_radial_length is greater than the radius of the bbox");for(var r=[e.bbox[0]+e.max_radial_length,e.bbox[1]+e.max_radial_length,e.bbox[2]-e.max_radial_length,e.bbox[3]-e.max_radial_length],n=[],o=function(){var t,i=[],o=s(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,i){i[e]=e>0?t+i[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var r=Math.random();i.push([r*(e.max_radial_length||10)*Math.sin(t),r*(e.max_radial_length||10)*Math.cos(t)])}),i[i.length-1]=i[0],i=i.map((t=sd(r),function(e){return[e[0]+t[0],e[1]+t[1]]})),n.push(_([i]))},a=0;a<t;a++)o();return M(n)}function sy(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(e=e||{}))throw Error("options is invalid");var i=e.bbox;sp(i);var r=e.num_vertices,n=e.max_length,o=e.max_rotation;null==t&&(t=1),(!F(r)||void 0===r||r<2)&&(r=10),F(n)&&void 0!==n||(n=1e-4),F(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],s=0;s<t;s++){for(var l=[sd(i)],h=0;h<r-1;h++){var u=(0===h?2*Math.random()*Math.PI:Math.tan((l[h][1]-l[h-1][1])/(l[h][0]-l[h-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*n;l.push([l[h][0]+c*Math.cos(u),l[h][1]+c*Math.sin(u)])}a.push(x(l))}return M(a)}function sv(){return Math.random()-.5}function s_(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var sb=Object.freeze({__proto__:null,randomLineString:sy,randomPoint:sm,randomPolygon:sg,randomPosition:sf});function sx(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return tc(t,function(t){sx(t,e)}),t;case"LineString":return sw(G(t),e),t;case"Polygon":return sM(G(t),e),t;case"MultiLineString":return G(t).forEach(function(t){sw(t,e)}),t;case"MultiPolygon":return G(t).forEach(function(t){sM(t,e)}),t;case"Point":case"MultiPoint":return t}}function sw(t,e){tN(t)===e&&t.reverse()}function sM(t,e){tN(t[0])!==e&&t[0].reverse();for(var i=1;i<t.length;i++)tN(t[i])===e&&t[i].reverse()}function sS(t){var e=t%360;return e<0&&(e+=360),e}function sk(t,i,r){if(!j(r=r||{}))throw Error("options is invalid");var n=r.origin||"centroid",o=r.mutate||!1;if(!t)throw Error("geojson required");if("number"!=typeof i||i<=0)throw Error("invalid factor");var a=Array.isArray(n)||"object"===e(n);return!0!==o&&(t=r0(t)),"FeatureCollection"!==t.type||a?sE(t,i,n):(tl(t,function(e,r){t.features[r]=sE(e,i,n)}),t)}function sE(t,i,r){var n="Point"===K(t),o=function(t,i){if(null==i&&(i="centroid"),Array.isArray(i)||"object"===e(i))return Z(i);var r=t.bbox?t.bbox:tI(t,{recompute:!0}),n=r[0],o=r[1],a=r[2],s=r[3];switch(i){case"sw":case"southwest":case"westsouth":case"bottomleft":return y([n,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return y([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return y([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return y([a,s]);case"center":return e9(t);case void 0:case null:case"centroid":return rM(t);default:throw Error("invalid origin")}}(t,r);return 1===i||n||(tn(t,function(t){var e=ok(o,t),r=ti(o,t),n=G(oS(o,e*i,r));t[0]=n[0],t[1]=n[1],3===t.length&&(t[2]*=i)}),delete t.bbox),t}function sI(t){for(var e=t,i=[];e.parent;)i.unshift(e),e=e.parent;return i}var sP={search:function(t,e,i,r){t.cleanDirty();var n,o=(r=r||{}).heuristic||sP.heuristics.manhattan,a=null!=(n=r.closest)&&n,s=new sC(function(t){return t.f}),l=e;for(e.h=o(e,i),s.push(e);s.size()>0;){var h=s.pop();if(h===i)return sI(h);h.closed=!0;for(var u=t.neighbors(h),c=0,f=u.length;c<f;++c){var d=u[c];if(!d.closed&&!d.isWall()){var p=h.g+d.getCost(h),m=d.visited;(!m||p<d.g)&&(d.visited=!0,d.parent=h,d.h=d.h||o(d,i),d.g=p,d.f=d.g+d.h,t.markDirty(d),a&&(d.h<l.h||d.h===l.h&&d.g<l.g)&&(l=d),m?s.rescoreElement(d):s.push(d))}}}return a?sI(l):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var i=Math.sqrt(2),r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1*(r+n)+(i-2)*Math.min(r,n)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function sT(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var r=0,n=t[i];r<n.length;r++){var o=new sA(i,r,n[r]);this.grid[i][r]=o,this.nodes.push(o)}}this.init()}function sA(t,e,i){this.x=t,this.y=e,this.weight=i}function sC(t){this.content=[],this.scoreFunction=t}function sL(t,e){for(var i=0;i<e.features.length;i++)if(tO(t,e.features[i]))return!0;return!1}function sR(t,e,i){var r=e[0],n=e[1],o=i[0]-r,a=i[1]-n;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-n)*a)/(o*o+a*a);s>1?(r=i[0],n=i[1]):s>0&&(r+=o*s,n+=a*s)}return(o=t[0]-r)*o+(a=t[1]-n)*a}function sN(t,e,i,r,n){for(var o,a=r,s=e+1;s<i;s++){var l=sR(t[s],t[e],t[i]);l>a&&(o=s,a=l)}a>r&&(o-e>1&&sN(t,e,o,r,n),n.push(t[o]),i-o>1&&sN(t,o,i,r,n))}function sz(t,e){var i=t.length-1,r=[t[0]];return sN(t,0,i,e,r),r.push(t[i]),r}function sO(t,e,i){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=sz(t=i?t:function(t,e){for(var i,r,n,o,a,s=t[0],l=[s],h=1,u=t.length;h<u;h++)i=t[h],n=s,o=void 0,a=void 0,(o=(r=i)[0]-n[0])*o+(a=r[1]-n[1])*a>e&&(l.push(i),s=i);return s!==i&&l.push(i),l}(t,r),r)}function sD(t,e,i){return t.map(function(t){if(t.length<4)throw Error("invalid polygon");for(var r=e,n=sO(t,r,i);!sB(n);)n=sO(t,r-=.01*r,i);return n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),n})}function sB(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function sF(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}sT.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)sP.cleanNode(this.nodes[t])},sT.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)sP.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},sT.prototype.markDirty=function(t){this.dirtyNodes.push(t)},sT.prototype.neighbors=function(t){var e=[],i=t.x,r=t.y,n=this.grid;return n[i-1]&&n[i-1][r]&&e.push(n[i-1][r]),n[i+1]&&n[i+1][r]&&e.push(n[i+1][r]),n[i]&&n[i][r-1]&&e.push(n[i][r-1]),n[i]&&n[i][r+1]&&e.push(n[i][r+1]),this.diagonal&&(n[i-1]&&n[i-1][r-1]&&e.push(n[i-1][r-1]),n[i+1]&&n[i+1][r-1]&&e.push(n[i+1][r-1]),n[i-1]&&n[i-1][r+1]&&e.push(n[i-1][r+1]),n[i+1]&&n[i+1][r+1]&&e.push(n[i+1][r+1])),e},sT.prototype.toString=function(){for(var t,e,i,r,n=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],i=0,r=(e=o[a]).length;i<r;i++)t.push(e[i].weight);n.push(t.join(" "))}return n.join("\n")},sA.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},sA.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},sA.prototype.isWall=function(){return 0===this.weight},sC.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,r=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[i]=e,this.content[t]=r,t=i}},bubbleUp:function(t){for(var e=this.content.length,i=this.content[t],r=this.scoreFunction(i);;){var n,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(n=this.scoreFunction(l))<r&&(s=a)}if(o<e){var h=this.content[o];this.scoreFunction(h)<(null===s?r:n)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=i,t=s}}};var sj={exports:{}};function sq(t,e,i){i=i||2;var r,n,o,a,s,l,h,u=e&&e.length,c=u?e[0]*i:t.length,f=sV(t,0,c,i,!0),d=[];if(!f||f.next===f.prev)return d;if(u&&(f=function(t,e,i,r){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=sV(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(sQ(a));for(s.sort(s$),n=0;n<s.length;n++)i=sY(s[n],i);return i}(t,e,f,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var p=i;p<c;p+=i)(s=t[p])<r&&(r=s),(l=t[p+1])<n&&(n=l),s>o&&(o=s),l>a&&(a=l);h=0!==(h=Math.max(o-r,a-n))?32767/h:0}return sZ(f,d,i,r,n,h,0),d}function sV(t,e,i,r,n){var o,a;if(n===li(t,e,i,r)>0)for(o=e;o<i;o+=r)a=s9(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=s9(o,t[o],t[o+1],a);return a&&s6(a,a.next)&&(lt(a),a=a.next),a}function sU(t,e){if(!t)return t;e||(e=t);var i,r=t;do if(i=!1,r.steiner||!s6(r,r.next)&&0!==s2(r.prev,r,r.next))r=r.next;else{if(lt(r),(r=e=r.prev)===r.next)break;i=!0}while(i||r!==e)return e}function sZ(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;do 0===n.z&&(n.z=sJ(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t)n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,l,h=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<h&&(s++,r=r.nextZ);e++);for(l=h;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,h*=2}while(a>1)}(n)}(t,r,n,o);for(var s,l,h=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?sH(t,r,n,o):sG(t))e.push(s.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),lt(t),t=l.next,h=l.next;else if((t=l)===h){a?1===a?sZ(t=sW(sU(t),e,i),e,i,r,n,o,2):2===a&&sX(t,e,i,r,n,o):sZ(sU(t),e,i,r,n,o,1);break}}}function sG(t){var e=t.prev,i=t,r=t.next;if(s2(e,i,r)>=0)return!1;for(var n=e.x,o=i.x,a=r.x,s=e.y,l=i.y,h=r.y,u=n<o?n<a?n:a:o<a?o:a,c=s<l?s<h?s:h:l<h?l:h,f=n>o?n>a?n:a:o>a?o:a,d=s>l?s>h?s:h:l>h?l:h,p=r.next;p!==e;){if(p.x>=u&&p.x<=f&&p.y>=c&&p.y<=d&&s0(n,s,o,l,a,h,p.x,p.y)&&s2(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function sH(t,e,i,r){var n=t.prev,o=t,a=t.next;if(s2(n,o,a)>=0)return!1;for(var s=n.x,l=o.x,h=a.x,u=n.y,c=o.y,f=a.y,d=s<l?s<h?s:h:l<h?l:h,p=u<c?u<f?u:f:c<f?c:f,m=s>l?s>h?s:h:l>h?l:h,g=u>c?u>f?u:f:c>f?c:f,y=sJ(d,p,e,i,r),v=sJ(m,g,e,i,r),_=t.prevZ,b=t.nextZ;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==n&&_!==a&&s0(s,u,l,c,h,f,_.x,_.y)&&s2(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==a&&s0(s,u,l,c,h,f,b.x,b.y)&&s2(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==n&&_!==a&&s0(s,u,l,c,h,f,_.x,_.y)&&s2(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==n&&b!==a&&s0(s,u,l,c,h,f,b.x,b.y)&&s2(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function sW(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!s6(n,o)&&s3(n,r,r.next,o)&&s5(n,o)&&s5(o,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),lt(r),lt(r.next),r=t=o),r=r.next}while(r!==t)return sU(r)}function sX(t,e,i,r,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&s1(a,s)){var l=s7(a,s);return a=sU(a,a.next),l=sU(l,l.next),sZ(a,e,i,r,n,o,0),void sZ(l,e,i,r,n,o,0)}s=s.next}a=a.next}while(a!==t)}function s$(t,e){return t.x-e.x}function sY(t,e){var i=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,i=r.x<r.next.x?r:r.next,s===n))return i}r=r.next}while(r!==e)if(!i)return null;var l,h=i,u=i.x,c=i.y,f=1/0;r=i;do n>=r.x&&r.x>=u&&n!==r.x&&s0(o<c?n:a,o,u,c,o<c?a:n,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(n-r.x),s5(r,t)&&(l<f||l===f&&(r.x>i.x||r.x===i.x&&sK(i,r)))&&(i=r,f=l)),r=r.next;while(r!==h)return i}(t,e);if(!i)return e;var r=s7(i,t);return sU(r,r.next),sU(i,i.next)}function sK(t,e){return 0>s2(t.prev,t,e.prev)&&0>s2(e.next,t,t.next)}function sJ(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function sQ(t){var e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t)return i}function s0(t,e,i,r,n,o,a,s){return(n-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(i-a)*(e-s)&&(i-a)*(o-s)>=(n-a)*(r-s)}function s1(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&s3(i,i.next,t,e))return!0;i=i.next}while(i!==t)return!1}(t,e)&&(s5(t,e)&&s5(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t)return r}(t,e)&&(s2(t.prev,t,e.prev)||s2(t,e.prev,e))||s6(t,e)&&s2(t.prev,t,t.next)>0&&s2(e.prev,e,e.next)>0)}function s2(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function s6(t,e){return t.x===e.x&&t.y===e.y}function s3(t,e,i,r){var n=s4(s2(t,e,i)),o=s4(s2(t,e,r)),a=s4(s2(i,r,t)),s=s4(s2(i,r,e));return n!==o&&a!==s||!(0!==n||!s8(t,i,e))||!(0!==o||!s8(t,r,e))||!(0!==a||!s8(i,t,r))||!(0!==s||!s8(i,e,r))}function s8(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function s4(t){return t>0?1:t<0?-1:0}function s5(t,e){return 0>s2(t.prev,t,t.next)?s2(t,e,t.next)>=0&&s2(t,t.prev,e)>=0:0>s2(t,e,t.prev)||0>s2(t,t.next,e)}function s7(t,e){var i=new le(t.i,t.x,t.y),r=new le(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function s9(t,e,i,r){var n=new le(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function lt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function le(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function li(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}sj.exports=sq,sj.exports.default=sq,sq.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,a=Math.abs(li(t,0,o,i));if(n)for(var s=0,l=e.length;s<l;s++){var h=e[s]*i,u=s<l-1?e[s+1]*i:t.length;a-=Math.abs(li(t,h,u,i))}var c=0;for(s=0;s<r.length;s+=3){var f=r[s]*i,d=r[s+1]*i,p=r[s+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},sq.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i};var lr=eW(sj.exports);function ln(t){var e=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}(t),i=lr(e.vertices,e.holes,2),r=[],n=[];i.forEach(function(t,r){var o=i[r];n.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<n.length;o+=3){var a=n.slice(o,o+3);a.push(n[o]),r.push(_([a]))}return r}function lo(t,e,i){if("Polygon"!==t.geometry.type)throw Error("The input feature must be a Polygon");void 0===i&&(i=1);var r=t.geometry.coordinates,n=[],o={};if(i){for(var a=[],s=0;s<r.length;s++)for(var l=0;l<r[s].length-1;l++)a.push(m(s,l));var h=new ex;h.load(a)}for(var u=0;u<r.length;u++)for(var c=0;c<r[u].length-1;c++)if(i)h.search(m(u,c)).forEach(function(t){var e=t.ring,i=t.edge;p(u,c,e,i)});else for(var f=0;f<r.length;f++)for(var d=0;d<r[f].length-1;d++)p(u,c,f,d);return e||(n={type:"Feature",geometry:{type:"MultiPoint",coordinates:n}}),n;function p(t,i,a,s){var l,h,u=r[t][i],c=r[t][i+1],f=r[a][s],d=r[a][s+1],p=function(t,e,i,r){if(la(t,i)||la(t,r)||la(e,i)||la(r,i))return null;var n=t[0],o=t[1],a=e[0],s=e[1],l=i[0],h=i[1],u=r[0],c=r[1],f=(n-a)*(h-c)-(o-s)*(l-u);return 0===f?null:[((n*s-o*a)*(l-u)-(n-a)*(l*c-h*u))/f,((n*s-o*a)*(h-c)-(o-s)*(l*c-h*u))/f]}(u,c,f,d);if(null!==p&&(l=c[0]!==u[0]?(p[0]-u[0])/(c[0]-u[0]):(p[1]-u[1])/(c[1]-u[1]),h=d[0]!==f[0]?(p[0]-f[0])/(d[0]-f[0]):(p[1]-f[1])/(d[1]-f[1]),!(l>=1||l<=0||h>=1||h<=0))){var m=p,g=!o[m];g&&(o[m]=!0),e?n.push(e(p,t,i,u,c,l,a,s,f,d,h,g)):n.push(p)}}function m(t,e){var i,n,o,a,s=r[t][e],l=r[t][e+1];return s[0]<l[0]?(i=s[0],n=l[0]):(i=l[0],n=s[0]),s[1]<l[1]?(o=s[1],a=l[1]):(o=l[1],a=s[1]),{minX:i,minY:o,maxX:n,maxY:a,ring:t,edge:e}}}function la(t,e){if(!t||!e||t.length!==e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!la(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function ls(t){if("Feature"!=t.type)throw Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,i=[],r=0;r<e;r++){var n=t.geometry.coordinates[r];lf(n[0],n[n.length-1])||n.push(n[0]);for(var o=0;o<n.length-1;o++)i.push(n[o])}if(!function(t){for(var e={},i=1,r=0,n=t.length;r<n;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){i=0;break}e[t[r]]=1}return i}(i))throw Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var a=i.length,s=lo(t,function(t,e,i,r,n,o,a,s,l,h,u,c){return[t,e,i,r,n,o,a,s,l,h,u,c]}),l=s.length;if(0==l){var h=[];for(r=0;r<e;r++)h.push(_([t.geometry.coordinates[r]],{parent:-1,winding:lc(t.geometry.coordinates[r])}));var u=M(h);return F(),j(),u}var c=[],f=[];for(r=0;r<e;r++)for(c.push([]),o=0;o<t.geometry.coordinates[r].length-1;o++)c[r].push([new ll(t.geometry.coordinates[r][ld(o+1,t.geometry.coordinates[r].length-1)],1,[r,o],[r,ld(o+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new lh(t.geometry.coordinates[r][o],[r,ld(o-1,t.geometry.coordinates[r].length-1)],[r,o],void 0,void 0,!1,!0));for(r=0;r<l;r++)c[s[r][1]][s[r][2]].push(new ll(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&f.push(new lh(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var d=f.length;for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)c[r][o].sort(function(t,e){return t.param<e.param?-1:1});var p=[];for(r=0;r<d;r++)p.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var m=new ex;for(m.load(p),r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(var g=0;g<c[r][o].length;g++){v=g==c[r][o].length-1?c[r][ld(o+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][o][g+1].coord;var y=m.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0];c[r][o][g].nxtIsectAlongEdgeIn=y.index}for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(g=0;g<c[r][o].length;g++){var v=c[r][o][g].coord,b=(y=m.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0]).index;b<a?f[b].nxtIsectAlongRingAndEdge2=c[r][o][g].nxtIsectAlongEdgeIn:lf(f[b].ringAndEdge1,c[r][o][g].ringAndEdgeIn)?f[b].nxtIsectAlongRingAndEdge1=c[r][o][g].nxtIsectAlongEdgeIn:f[b].nxtIsectAlongRingAndEdge2=c[r][o][g].nxtIsectAlongEdgeIn}var x=[];for(r=0,o=0;o<e;o++){var w=r;for(g=0;g<t.geometry.coordinates[o].length-1;g++)f[r].coord[0]<f[w].coord[0]&&(w=r),r++;var S=f[w].nxtIsectAlongRingAndEdge2;for(g=0;g<f.length;g++)if(f[g].nxtIsectAlongRingAndEdge1==w||f[g].nxtIsectAlongRingAndEdge2==w){var k=g;break}var E=lu([f[k].coord,f[w].coord,f[S].coord],!0)?1:-1;x.push({isect:w,parent:-1,winding:E})}for(x.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1}),h=[];x.length>0;){var I=x.pop(),P=I.isect,T=I.parent,A=I.winding,C=h.length,R=[f[P].coord],N=P;if(f[P].ringAndEdge1Walkable)var z=f[P].ringAndEdge1,O=f[P].nxtIsectAlongRingAndEdge1;else z=f[P].ringAndEdge2,O=f[P].nxtIsectAlongRingAndEdge2;for(;!lf(f[P].coord,f[O].coord);){R.push(f[O].coord);var D=void 0;for(r=0;r<x.length;r++)if(x[r].isect==O){D=r;break}if(null!=D&&x.splice(D,1),lf(z,f[O].ringAndEdge1)){if(z=f[O].ringAndEdge2,f[O].ringAndEdge2Walkable=!1,f[O].ringAndEdge1Walkable){var B={isect:O};lu([f[N].coord,f[O].coord,f[f[O].nxtIsectAlongRingAndEdge2].coord],1==A)?(B.parent=T,B.winding=-A):(B.parent=C,B.winding=A),x.push(B)}N=O,O=f[O].nxtIsectAlongRingAndEdge2}else z=f[O].ringAndEdge1,f[O].ringAndEdge1Walkable=!1,f[O].ringAndEdge2Walkable&&(B={isect:O},lu([f[N].coord,f[O].coord,f[f[O].nxtIsectAlongRingAndEdge1].coord],1==A)?(B.parent=T,B.winding=-A):(B.parent=C,B.winding=A),x.push(B)),N=O,O=f[O].nxtIsectAlongRingAndEdge1}R.push(f[O].coord),h.push(_([R],{index:C,parent:T,winding:A,netWinding:void 0}))}function F(){for(var t=[],e=0;e<u.features.length;e++)-1==u.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var i=-1,r=0;r<u.features.length;r++)t[e]!=r&&tO(u.features[t[e]].geometry.coordinates[0][0],u.features[r],{ignoreBoundary:!0})&&tw(u.features[r])<1/0&&(i=r);u.features[t[e]].properties.parent=i}}function j(){for(var t=0;t<u.features.length;t++)if(-1==u.features[t].properties.parent){var e=u.features[t].properties.winding;u.features[t].properties.netWinding=e,q(t,e)}}function q(t,e){for(var i=0;i<u.features.length;i++)if(u.features[i].properties.parent==t){var r=e+u.features[i].properties.winding;u.features[i].properties.netWinding=r,q(i,r)}}return u=M(h),F(),j(),u}var ll=function(t,e,i,r,n){this.coord=t,this.param=e,this.ringAndEdgeIn=i,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=n},lh=function(t,e,i,r,n,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=i,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=n,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function lu(t,e){if(void 0===e&&(e=!0),3!=t.length)throw Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function lc(t){for(var e=0,i=0;i<t.length-1;i++)t[i][0]<t[e][0]&&(e=i);if(lu([t[ld(e-1,t.length-1)],t[e],t[ld(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function lf(t,e){if(!t||!e||t.length!=e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!lf(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1;return!0}function ld(t,e){return(t%e+e)%e}function lp(t){return function(){return t}}function lm(t){return t[0]}function lg(t){return t[1]}function ly(){this._=null}function lv(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function l_(t,e){var i=e,r=e.R,n=i.U;n?n.L===i?n.L=r:n.R=r:t._=r,r.U=n,i.U=r,i.R=r.L,i.R&&(i.R.U=i),r.L=i}function lb(t,e){var i=e,r=e.L,n=i.U;n?n.L===i?n.L=r:n.R=r:t._=r,r.U=n,i.U=r,i.L=r.R,i.L&&(i.L.U=i),r.R=i}function lx(t){for(;t.L;)t=t.L;return t}function lw(t,e,i,r){var n=[null,null],o=lH.push(n)-1;return n.left=t,n.right=e,i&&lS(n,t,e,i),r&&lS(n,e,t,r),lZ[t.index].halfedges.push(o),lZ[e.index].halfedges.push(o),n}function lM(t,e,i){var r=[e,i];return r.left=t,r}function lS(t,e,i,r){t[0]||t[1]?t.left===i?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=i)}function lk(t,e,i,r,n){var o,a=t[0],s=t[1],l=a[0],h=a[1],u=0,c=1,f=s[0]-l,d=s[1]-h;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>u&&(u=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<c&&(c=o)}if(o=i-h,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>u&&(u=o)}if(o=n-h,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<c&&(c=o)}return!(u>0||c<1)||(u>0&&(t[0]=[l+u*f,h+u*d]),c<1&&(t[1]=[l+c*f,h+c*d]),!0)}}}}}function lE(t,e,i,r,n){var o=t[1];if(o)return!0;var a,s,l=t[0],h=t.left,u=t.right,c=h[0],f=h[1],d=u[0],p=u[1],m=(c+d)/2,g=(f+p)/2;if(p===f){if(m<e||m>=r)return;if(c>d){if(l){if(l[1]>=n)return}else l=[m,i];o=[m,n]}else{if(l){if(l[1]<i)return}else l=[m,n];o=[m,i]}}else if(s=g-(a=(c-d)/(p-f))*m,a<-1||a>1){if(c>d){if(l){if(l[1]>=n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else{if(l){if(l[1]<i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}}else if(f<p){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function lI(t,e){var i=t.site,r=e.left,n=e.right;return i===n&&(n=r,r=i),n?Math.atan2(n[1]-r[1],n[0]-r[0]):(i===r?(r=e[1],n=e[0]):(r=e[0],n=e[1]),Math.atan2(r[0]-n[0],n[1]-r[1]))}function lP(t,e){return e[+(e.left!==t.site)]}function lT(t,e){return e[+(e.left===t.site)]}ly.prototype={constructor:ly,insert:function(t,e){var i,r,n;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=lx(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(r=i.U).L?(n=r.R)&&n.C?(i.C=n.C=!1,r.C=!0,t=r):(t===i.R&&(l_(this,i),i=(t=i).U),i.C=!1,r.C=!0,lb(this,r)):(n=r.L)&&n.C?(i.C=n.C=!1,r.C=!0,t=r):(t===i.L&&(lb(this,i),i=(t=i).U),i.C=!1,r.C=!0,l_(this,r)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,r,n=t.U,o=t.L,a=t.R;if(i=o?a?lx(a):o:a,n?n.L===t?n.L=i:n.R=i:this._=i,o&&a?(r=i.C,i.C=t.C,i.L=o,o.U=i,i!==a?(n=i.U,i.U=t.U,t=i.R,n.L=t,i.R=a,a.U=i):(i.U=n,n=i,t=i.R)):(r=t.C,t=i),t&&(t.U=n),!r){if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===n.L){if((e=n.R).C&&(e.C=!1,n.C=!0,l_(this,n),e=n.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,lb(this,e),e=n.R),e.C=n.C,n.C=e.R.C=!1,l_(this,n),t=this._;break}}else if((e=n.L).C&&(e.C=!1,n.C=!0,lb(this,n),e=n.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,l_(this,e),e=n.L),e.C=n.C,n.C=e.L.C=!1,lb(this,n),t=this._;break}e.C=!0,t=n,n=n.U}while(!t.C)t&&(t.C=!1)}}}};var lA,lC=[];function lL(){lv(this),this.x=this.y=this.arc=this.site=this.cy=null}function lR(t){var e=t.P,i=t.N;if(e&&i){var r=e.site,n=t.site,o=i.site;if(r!==o){var a=n[0],s=n[1],l=r[0]-a,h=r[1]-s,u=o[0]-a,c=o[1]-s,f=2*(l*c-h*u);if(!(f>=-lX)){var d=l*l+h*h,p=u*u+c*c,m=(c*d-h*p)/f,g=(l*p-u*d)/f,y=lC.pop()||new lL;y.arc=t,y.site=n,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=y;for(var v=null,_=lG._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}lG.insert(v,y),v||(lA=y)}}}}function lN(t){var e=t.circle;e&&(e.P||(lA=e.N),lG.remove(e),lC.push(e),lv(e),t.circle=null)}var lz=[];function lO(){lv(this),this.edge=this.site=this.circle=null}function lD(t){var e=lz.pop()||new lO;return e.site=t,e}function lB(t){lN(t),lU.remove(t),lz.push(t),lv(t)}function lF(t){var e=t.circle,i=e.x,r=e.cy,n=[i,r],o=t.P,a=t.N,s=[t];lB(t);for(var l=o;l.circle&&Math.abs(i-l.circle.x)<lW&&Math.abs(r-l.circle.cy)<lW;)o=l.P,s.unshift(l),lB(l),l=o;s.unshift(l),lN(l);for(var h=a;h.circle&&Math.abs(i-h.circle.x)<lW&&Math.abs(r-h.circle.cy)<lW;)a=h.N,s.push(h),lB(h),h=a;s.push(h),lN(h);var u,c=s.length;for(u=1;u<c;++u)h=s[u],l=s[u-1],lS(h.edge,l.site,h.site,n);l=s[0],(h=s[c-1]).edge=lw(l.site,h.site,null,n),lR(l),lR(h)}function lj(t){for(var e,i,r,n,o=t[0],a=t[1],s=lU._;s;)if((r=lq(s,a)-o)>lW)s=s.L;else{if(!((n=o-lV(s,a))>lW)){r>-lW?(e=s.P,i=s):n>-lW?(e=s,i=s.N):e=i=s;break}if(!s.R){e=s;break}s=s.R}!function(t){lZ[t.index]={site:t,halfedges:[]}}(t);var l=lD(t);if(lU.insert(e,l),e||i){if(e===i)return lN(e),i=lD(e.site),lU.insert(l,i),l.edge=i.edge=lw(e.site,l.site),lR(e),void lR(i);if(i){lN(e),lN(i);var h=e.site,u=h[0],c=h[1],f=t[0]-u,d=t[1]-c,p=i.site,m=p[0]-u,g=p[1]-c,y=2*(f*g-d*m),v=f*f+d*d,_=m*m+g*g,b=[(g*v-d*_)/y+u,(f*_-m*v)/y+c];lS(i.edge,h,p,b),l.edge=lw(h,t,null,b),i.edge=lw(t,p,null,b),lR(e),lR(i)}else l.edge=lw(e.site,l.site)}}function lq(t,e){var i=t.site,r=i[0],n=i[1],o=n-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(i=a.site)[0],l=i[1],h=l-e;if(!h)return s;var u=s-r,c=1/o-1/h,f=u/h;return c?(-f+Math.sqrt(f*f-2*c*(u*u/(-2*h)-l+h/2+n-o/2)))/c+r:(r+s)/2}function lV(t,e){var i=t.N;if(i)return lq(i,e);var r=t.site;return r[1]===e?r[0]:1/0}var lU,lZ,lG,lH,lW=1e-6,lX=1e-12;function l$(t,e){return e[1]-t[1]||e[0]-t[0]}function lY(t,e){var i,r,n,o=t.sort(l$).pop();for(lH=[],lZ=Array(t.length),lU=new ly,lG=new ly;;)if(n=lA,o&&(!n||o[1]<n.y||o[1]===n.y&&o[0]<n.x))o[0]===i&&o[1]===r||(lj(o),i=o[0],r=o[1]),o=t.pop();else{if(!n)break;lF(n.arc)}if(function(){for(var t,e,i,r,n=0,o=lZ.length;n<o;++n)if((t=lZ[n])&&(r=(e=t.halfedges).length)){var a=Array(r),s=Array(r);for(i=0;i<r;++i)a[i]=i,s[i]=lI(t,lH[e[i]]);for(a.sort(function(t,e){return s[e]-s[t]}),i=0;i<r;++i)s[i]=e[a[i]];for(i=0;i<r;++i)e[i]=s[i]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],h=+e[1][1];!function(t,e,i,r){for(var n,o=lH.length;o--;)lE(n=lH[o],t,e,i,r)&&lk(n,t,e,i,r)&&(Math.abs(n[0][0]-n[1][0])>lW||Math.abs(n[0][1]-n[1][1])>lW)||delete lH[o]}(a,s,l,h),function(t,e,i,r){var n,o,a,s,l,h,u,c,f,d,p,m,g=lZ.length,y=!0;for(n=0;n<g;++n)if(o=lZ[n]){for(a=o.site,s=(l=o.halfedges).length;s--;)lH[l[s]]||l.splice(s,1);for(s=0,h=l.length;s<h;)p=(d=lT(o,lH[l[s]]))[0],m=d[1],c=(u=lP(o,lH[l[++s%h]]))[0],f=u[1],(Math.abs(p-c)>lW||Math.abs(m-f)>lW)&&(l.splice(s,0,lH.push(lM(a,d,Math.abs(p-t)<lW&&r-m>lW?[t,Math.abs(c-t)<lW?f:r]:Math.abs(m-r)<lW&&i-p>lW?[Math.abs(f-r)<lW?c:i,r]:Math.abs(p-i)<lW&&m-e>lW?[i,Math.abs(c-i)<lW?f:e]:Math.abs(m-e)<lW&&p-t>lW?[Math.abs(f-e)<lW?c:t,e]:null))-1),++h);h&&(y=!1)}if(y){var v,_,b,x=1/0;for(n=0,y=null;n<g;++n)(o=lZ[n])&&(b=(v=(a=o.site)[0]-t)*v+(_=a[1]-e)*_)<x&&(x=b,y=o);if(y){var w=[t,e],M=[t,r],S=[i,r],k=[i,e];y.halfedges.push(lH.push(lM(a=y.site,w,M))-1,lH.push(lM(a,M,S))-1,lH.push(lM(a,S,k))-1,lH.push(lM(a,k,w))-1)}}for(n=0;n<g;++n)(o=lZ[n])&&(o.halfedges.length||delete lZ[n])}(a,s,l,h)}this.edges=lH,this.cells=lZ,lU=lG=lH=lZ=null}lY.prototype={constructor:lY,polygons:function(){var t=this.edges;return this.cells.map(function(e){var i=e.halfedges.map(function(i){return lP(e,t[i])});return i.data=e.site.data,i})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(i,r){if(o=(n=i.halfedges).length)for(var n,o,a,s,l,h,u=i.site,c=-1,f=e[n[o-1]],d=f.left===u?f.right:f.left;++c<o;)a=d,d=(f=e[n[c]]).left===u?f.right:f.left,a&&d&&r<a.index&&r<d.index&&(l=a,h=d,((s=u)[0]-h[0])*(l[1]-s[1])-(s[0]-l[0])*(h[1]-s[1])<0)&&t.push([u.data,a.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,i){for(var r,n,o=this,a=o._found||0,s=o.cells.length;!(n=o.cells[a]);)if(++a>=s)return null;var l=t-n.site[0],h=e-n.site[1],u=l*l+h*h;do n=o.cells[r=a],a=null,n.halfedges.forEach(function(i){var r=o.edges[i],s=r.left;if(s!==n.site&&s||(s=r.right)){var l=t-s[0],h=e-s[1],c=l*l+h*h;c<u&&(u=c,a=s.index)}});while(null!==a)return o._found=r,null==i||u<=i*i?n.site:null}},t.along=function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Y(t).coordinates,n=0,o=0;o<r.length&&!(e>=n&&o===r.length-1);o++){if(n>=e){var a=e-n;if(a){var s=Q(r[o],r[o-1])-180;return tt(r[o],a,s,i)}return y(r[o])}n+=te(r[o],r[o+1],i)}return y(r[r.length-1])},t.angle=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!j(r))throw Error("options is invalid");if(!t)throw Error("startPoint is required");if(!e)throw Error("midPoint is required");if(!i)throw Error("endPoint is required");var n=t,o=e,a=i,s=Math.abs(R(!0!==r.mercator?Q(n,o):ti(n,o))-R(!0!==r.mercator?Q(a,o):ti(a,o)));return!0===r.explementary?360-s:s},t.applyFilter=r9,t.area=tw,t.areaFactors=p,t.azimuthToBearing=N,t.bbox=tI,t.bboxClip=function(t,e){var i=Y(t),r=i.type,n="Feature"===t.type?t.properties:{},o=i.coordinates;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(o=[o]),o.forEach(function(t){!function(t,e,i){var r,n,o,a,s,l=t.length,h=tA(t[0],e),u=[];for(i||(i=[]),r=1;r<l;r++){for(a=t[r-1],n=o=tA(s=t[r],e);;){if(!(h|n)){u.push(a),n!==o?(u.push(s),r<l-1&&(i.push(u),u=[])):r===l-1&&u.push(s);break}if(h&n)break;h?h=tA(a=tT(a,s,h,e),e):n=tA(s=tT(a,s,n,e),e)}h=o}u.length&&i.push(u)}(t,e,a)}),1===a.length?x(a[0],n):S(a,n);case"Polygon":return _(tC(o,e),n);case"MultiPolygon":return E(o.map(function(t){return tC(t,e)}),n);default:throw Error("geometry "+r+" not supported")}},t.bboxPolygon=tL,t.bearing=Q,t.bearingToAzimuth=R,t.bezierSpline=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.resolution||1e4,r=e.sharpness||.85,n=[],o=Y(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),a=new tR({duration:i,points:o,sharpness:r}),s=function(t){var e=a.pos(t);Math.floor(t/100)%2==0&&n.push([e.x,e.y])},l=0;l<a.duration;l+=10)s(l);return s(a.duration),x(n,e.properties)},t.booleanClockwise=tN,t.booleanConcave=function(t){var e=Y(t).coordinates;if(e[0].length<=4)return!1;for(var i=!1,r=e[0].length-1,n=0;n<r;n++){var o=e[0][(n+2)%r][0]-e[0][(n+1)%r][0],a=e[0][(n+2)%r][1]-e[0][(n+1)%r][1],s=e[0][n][0]-e[0][(n+1)%r][0],l=o*(e[0][n][1]-e[0][(n+1)%r][1])-a*s;if(0===n)i=l>0;else if(i!==l>0)return!0}return!1},t.booleanContains=function(t,e){var i=Y(t),r=Y(e),n=i.type,o=r.type,a=i.coordinates,s=r.coordinates;switch(n){case"Point":if("Point"===o)return tq(a,s);throw Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var i,r=!1;for(i=0;i<t.coordinates.length;i++)if(tq(t.coordinates[i],e.coordinates)){r=!0;break}return r}(i,r);case"MultiPoint":return function(t,e){var i,r=u(e.coordinates);try{for(r.s();!(i=r.n()).done;){var n,o=i.value,a=!1,s=u(t.coordinates);try{for(s.s();!(n=s.n()).done;)if(tq(o,n.value)){a=!0;break}}catch(t){s.e(t)}finally{s.f()}if(!a)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return tD(r,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){var i,r=!1,n=u(e.coordinates);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(tD({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!tD({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}}catch(t){n.e(t)}finally{n.f()}return r}(i,r);case"MultiPoint":return function(t,e){var i,r=!1,n=u(e.coordinates);try{for(n.s();!(i=n.n()).done;){var o=i.value;if(tD(o,t,{ignoreEndVertices:!0})&&(r=!0),!tD(o,t))return!1}}catch(t){n.e(t)}finally{n.f()}return!!r}(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return tO(r,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var i=!1,r=0;if(!tj(tI(t),tI(e)))return!1;for(;r<e.coordinates.length-1;r++)if(tO({type:"Point",coordinates:tV(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){i=!0;break}return i}(i,r);case"Polygon":return tF(i,r);case"MultiPoint":return function(t,e){var i,r=u(e.coordinates);try{for(r.s();!(i=r.n()).done;)if(!tO(i.value,t,{ignoreBoundary:!0}))return!1}catch(t){r.e(t)}finally{r.f()}return!0}(i,r);default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":if("Polygon"===o)return function(t,e){return t.coordinates.some(function(t){return tF({type:"Polygon",coordinates:t},e)})}(i,r);throw Error("feature2 "+o+" geometry not supported");default:throw Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=t3,t.booleanDisjoint=t9,t.booleanEqual=function(t,e){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if("number"!=typeof(i=null==i||isNaN(i)?6:i)||!(i>=0))throw Error("precision must be a positive number");return Y(t).type===Y(e).type&&eh(ef(t),ef(e),{precision:i})},t.booleanIntersects=eg,t.booleanOverlap=function(t,e){var i=Y(t),r=Y(e),n=i.type,o=r.type;if("MultiPoint"===n&&"MultiPoint"!==o||("LineString"===n||"MultiLineString"===n)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===n||"MultiPolygon"===n)&&"Polygon"!==o&&"MultiPolygon"!==o)throw Error("features must be of the same type");if("Point"===n)throw Error("Point geometry not supported");if(eh(t,e,{precision:6}))return!1;var a=0;switch(n){case"MultiPoint":for(var s=0;s<i.coordinates.length;s++)for(var l=0;l<r.coordinates.length;l++){var h=i.coordinates[s],u=r.coordinates[l];if(h[0]===u[0]&&h[1]===u[1])return!0}return!1;case"LineString":case"MultiLineString":tm(t,function(t){tm(e,function(e){eY(t,e).features.length&&a++})});break;case"Polygon":case"MultiPolygon":tm(t,function(t){tm(e,function(e){t1(t,e).features.length&&a++})})}return a>0},t.booleanParallel=function(t,e){if(!t)throw Error("line1 is required");if(!e)throw Error("line2 is required");if("LineString"!==eQ(t,"line1"))throw Error("line1 must be a LineString");if("LineString"!==eQ(e,"line2"))throw Error("line2 must be a LineString");for(var i=eO(ef(t)).features,r=eO(ef(e)).features,n=0;n<i.length;n++){var o=i[n].geometry.coordinates;if(!r[n])break;if(!eJ(o,r[n].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=tO,t.booleanPointOnLine=tD,t.booleanTouches=function(t,e){var i=Y(t),r=Y(e),n=i.type,o=r.type;switch(n){case"Point":switch(o){case"LineString":return e0(i,r);case"MultiLineString":for(var a=!1,s=0;s<r.coordinates.length;s++)e0(i,{type:"LineString",coordinates:r.coordinates[s]})&&(a=!0);return a;case"Polygon":for(var l=0;l<r.coordinates.length;l++)if(tD(i,{type:"LineString",coordinates:r.coordinates[l]}))return!0;return!1;case"MultiPolygon":for(l=0;l<r.coordinates.length;l++)for(s=0;s<r.coordinates[l].length;s++)if(tD(i,{type:"LineString",coordinates:r.coordinates[l][s]}))return!0;return!1;default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"LineString":for(a=!1,l=0;l<i.coordinates.length;l++)if(a||e0({type:"Point",coordinates:i.coordinates[l]},r)&&(a=!0),tD({type:"Point",coordinates:i.coordinates[l]},r,{ignoreEndVertices:!0}))return!1;return a;case"MultiLineString":for(a=!1,l=0;l<i.coordinates.length;l++)for(s=0;s<r.coordinates.length;s++)if(a||e0({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:r.coordinates[s]})&&(a=!0),tD({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:r.coordinates[s]},{ignoreEndVertices:!0}))return!1;return a;case"Polygon":for(a=!1,l=0;l<i.coordinates.length;l++)if(a||tD({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[l]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,l=0;l<i.coordinates.length;l++)for(s=0;s<r.coordinates.length;s++)if(a||tD({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:r.coordinates[s][0]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[l]},{type:"Polygon",coordinates:r.coordinates[s]},{ignoreBoundary:!0}))return!1;return a;default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return e0(r,i);case"MultiPoint":for(a=!1,l=0;l<r.coordinates.length;l++)if(a||e0({type:"Point",coordinates:r.coordinates[l]},i)&&(a=!0),tD({type:"Point",coordinates:r.coordinates[l]},i,{ignoreEndVertices:!0}))return!1;return a;case"LineString":var h=!1;if(e0({type:"Point",coordinates:i.coordinates[0]},r)&&(h=!0),e0({type:"Point",coordinates:i.coordinates[i.coordinates.length-1]},r)&&(h=!0),!1===h)return!1;for(l=0;l<i.coordinates.length;l++)if(tD({type:"Point",coordinates:i.coordinates[l]},r,{ignoreEndVertices:!0}))return!1;return h;case"MultiLineString":for(h=!1,l=0;l<r.coordinates.length;l++)for(e0({type:"Point",coordinates:i.coordinates[0]},{type:"LineString",coordinates:r.coordinates[l]})&&(h=!0),e0({type:"Point",coordinates:i.coordinates[i.coordinates.length-1]},{type:"LineString",coordinates:r.coordinates[l]})&&(h=!0),s=0;s<i.coordinates[l].length;s++)if(tD({type:"Point",coordinates:i.coordinates[s]},{type:"LineString",coordinates:r.coordinates[l]},{ignoreEndVertices:!0}))return!1;return h;case"Polygon":for(a=!1,l=0;l<i.coordinates.length;l++)if(a||tD({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[l]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,l=0;l<i.coordinates.length;l++){for(s=0;s<r.coordinates.length;s++)a||tD({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:r.coordinates[s][0]})&&(a=!0);if(tO({type:"Point",coordinates:i.coordinates[l]},r,{ignoreBoundary:!0}))return!1}return a;default:throw Error("feature2 "+o+" geometry not supported")}case"MultiLineString":switch(o){case"Point":for(l=0;l<i.coordinates.length;l++)if(e0(r,{type:"LineString",coordinates:i.coordinates[l]}))return!0;return!1;case"MultiPoint":for(a=!1,l=0;l<i.coordinates.length;l++)for(s=0;s<r.coordinates.length;s++)if(a||e0({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:i.coordinates[s]})&&(a=!0),tD({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:i.coordinates[s]},{ignoreEndVertices:!0}))return!1;return a;case"LineString":for(h=!1,l=0;l<i.coordinates.length;l++)for(e0({type:"Point",coordinates:i.coordinates[l][0]},r)&&(h=!0),e0({type:"Point",coordinates:i.coordinates[l][i.coordinates[l].length-1]},r)&&(h=!0),s=0;s<r.coordinates.length;s++)if(tD({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:i.coordinates[l]},{ignoreEndVertices:!0}))return!1;return h;case"MultiLineString":for(h=!1,l=0;l<i.coordinates.length;l++)for(s=0;s<r.coordinates.length;s++){e0({type:"Point",coordinates:i.coordinates[l][0]},{type:"LineString",coordinates:r.coordinates[s]})&&(h=!0),e0({type:"Point",coordinates:i.coordinates[l][i.coordinates[l].length-1]},{type:"LineString",coordinates:r.coordinates[s]})&&(h=!0);for(var u=0;u<i.coordinates[l].length;u++)if(tD({type:"Point",coordinates:i.coordinates[l][u]},{type:"LineString",coordinates:r.coordinates[s]},{ignoreEndVertices:!0}))return!1}return h;case"Polygon":for(a=!1,l=0;l<i.coordinates.length;l++)for(s=0;s<i.coordinates.length;s++)if(a||tD({type:"Point",coordinates:i.coordinates[l][s]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[l][s]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,l=0;l<r.coordinates[0].length;l++)for(s=0;s<i.coordinates.length;s++)for(u=0;u<i.coordinates[s].length;u++)if(a||tD({type:"Point",coordinates:i.coordinates[s][u]},{type:"LineString",coordinates:r.coordinates[0][l]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[s][u]},{type:"Polygon",coordinates:[r.coordinates[0][l]]},{ignoreBoundary:!0}))return!1;return a;default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":for(l=0;l<i.coordinates.length;l++)if(tD(r,{type:"LineString",coordinates:i.coordinates[l]}))return!0;return!1;case"MultiPoint":case"LineString":for(a=!1,l=0;l<r.coordinates.length;l++)if(a||tD({type:"Point",coordinates:r.coordinates[l]},{type:"LineString",coordinates:i.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:r.coordinates[l]},i,{ignoreBoundary:!0}))return!1;return a;case"MultiLineString":for(a=!1,l=0;l<r.coordinates.length;l++)for(s=0;s<r.coordinates[l].length;s++)if(a||tD({type:"Point",coordinates:r.coordinates[l][s]},{type:"LineString",coordinates:i.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:r.coordinates[l][s]},i,{ignoreBoundary:!0}))return!1;return a;case"Polygon":for(a=!1,l=0;l<i.coordinates[0].length;l++)if(a||tD({type:"Point",coordinates:i.coordinates[0][l]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[0][l]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,l=0;l<r.coordinates[0].length;l++)for(s=0;s<i.coordinates[0].length;s++)if(a||tD({type:"Point",coordinates:i.coordinates[0][s]},{type:"LineString",coordinates:r.coordinates[0][l]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[0][s]},{type:"Polygon",coordinates:r.coordinates[0][l]},{ignoreBoundary:!0}))return!1;return a;default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Point":for(l=0;l<i.coordinates[0].length;l++)if(tD(r,{type:"LineString",coordinates:i.coordinates[0][l]}))return!0;return!1;case"MultiPoint":case"LineString":for(a=!1,l=0;l<i.coordinates[0].length;l++)for(s=0;s<r.coordinates.length;s++)if(a||tD({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:i.coordinates[0][l]})&&(a=!0),tO({type:"Point",coordinates:r.coordinates[s]},{type:"Polygon",coordinates:i.coordinates[0][l]},{ignoreBoundary:!0}))return!1;return a;case"MultiLineString":for(a=!1,l=0;l<i.coordinates.length;l++)for(s=0;s<r.coordinates.length;s++)for(u=0;u<r.coordinates[s].length;u++)if(a||tD({type:"Point",coordinates:r.coordinates[s][u]},{type:"LineString",coordinates:i.coordinates[l][0]})&&(a=!0),tO({type:"Point",coordinates:r.coordinates[s][u]},{type:"Polygon",coordinates:[i.coordinates[l][0]]},{ignoreBoundary:!0}))return!1;return a;case"Polygon":for(a=!1,l=0;l<i.coordinates[0].length;l++)for(s=0;s<i.coordinates[0][l].length;s++)if(a||tD({type:"Point",coordinates:i.coordinates[0][l][s]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[0][l][s]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,l=0;l<i.coordinates[0].length;l++)for(s=0;s<r.coordinates[0].length;s++)for(u=0;u<i.coordinates[0].length;u++)if(a||tD({type:"Point",coordinates:i.coordinates[0][l][u]},{type:"LineString",coordinates:r.coordinates[0][s]})&&(a=!0),tO({type:"Point",coordinates:i.coordinates[0][l][u]},{type:"Polygon",coordinates:r.coordinates[0][s]},{ignoreBoundary:!0}))return!1;return a;default:throw Error("feature2 "+o+" geometry not supported")}default:throw Error("feature1 "+n+" geometry not supported")}},t.booleanValid=function(t){if(!t.type)return!1;var e=Y(t),i=e.type,r=e.coordinates;switch(i){case"Point":return r.length>1;case"MultiPoint":for(var n=0;n<r.length;n++)if(r[n].length<2)return!1;return!0;case"LineString":case"MultiLineString":if(r.length<2)return!1;for(n=0;n<r.length;n++)if(r[n].length<2)return!1;return!0;case"Polygon":for(n=0;n<e.coordinates.length;n++)if(r[n].length<4||!e2(r[n])||e6(r[n])||n>0&&t1(_([r[0]]),_([r[n]])).features.length>1)return!1;return!0;case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)for(var o=e.coordinates[n],a=0;a<o.length;a++)if(o[a].length<4||!e2(o[a])||e6(o[a])||0===a&&!e3(o,e.coordinates,n)||a>0&&t1(_([o[0]]),_([o[a]])).features.length>1)return!1;return!0;default:return!1}},t.booleanWithin=e8,t.buffer=function(t,i,r){var n=(r=r||{}).units||"kilometers",o=r.steps||8;if(!t)throw Error("geojson is required");if("object"!==e(r))throw Error("options must be an object");if("number"!=typeof o)throw Error("steps must be an number");if(void 0===i)throw Error("radius is required");if(o<=0)throw Error("steps must be greater than 0");var a=[];switch(t.type){case"GeometryCollection":return tc(t,function(t){var e=rv(t,i,n,o);e&&a.push(e)}),M(a);case"FeatureCollection":return tl(t,function(t){var e=rv(t,i,n,o);e&&tl(e,function(t){t&&a.push(t)})}),M(a)}return rv(t,i,n,o)},t.center=e9,t.centerMean=rw,t.centerMedian=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(e=e||{}))throw Error("options is invalid");var i=e.counter||10;if(!F(i))throw Error("counter must be a number");var r=e.weight,n=rw(t,{weight:e.weight}),o=M([]);tl(t,function(t){var e;o.features.push(rM(t,{properties:{weight:null==(e=t.properties)?void 0:e[r]}}))});var a={tolerance:e.tolerance,medianCandidates:[]};return rS(n.geometry.coordinates,[0,0],o,a,i)},t.centerOfMass=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(K(e)){case"Point":return y(Z(e),i.properties);case"Polygon":var r=[];tn(e,function(t){r.push(t)});var n,o,a,s,l,h,u,c,f=rM(e,{properties:i.properties}),d=f.geometry.coordinates,p=0,m=0,g=0,v=r.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(n=0;n<r.length-1;n++)s=(o=v[n])[0],h=o[1],l=(a=v[n+1])[0],g+=c=s*(u=a[1])-l*h,p+=(s+l)*c,m+=(h+u)*c;if(0===g)return f;var _=1/(.5*g*6);return y([d[0]+_*p,d[1]+_*m],i.properties);default:var b=rJ(e);return b?t(b,{properties:i.properties}):rM(e,{properties:i.properties})}},t.centroid=rM,t.circle=rQ,t.cleanCoords=ef,t.clone=r0,t.cloneProperties=r2,t.clusterEach=r4,t.clusterReduce=r5,t.clusters=ni,t.clustersDbscan=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==i.mutate&&(t=r0(t));var r=i.minPoints||3,n=C(e,i.units),o=new nr(t.features.length),l=t.features.map(function(t){return!1}),h=t.features.map(function(t){return!1}),u=t.features.map(function(t){return!1}),c=t.features.map(function(t){return -1});o.load(t.features.map(function(t,e){var i=a(t.geometry.coordinates,2),r=i[0],n=i[1];return{minX:r,minY:n,maxX:r,maxY:n,index:e}}));var f=function(i){var r=t.features[i],s=a(r.geometry.coordinates,2),l=s[0],h=s[1],u=Math.max(h-n,-90),c=Math.min(h+n,90),f=u<0&&c>0?n:Math.abs(u)<Math.abs(c)?n/Math.cos(O(c)):n/Math.cos(O(u)),d={minX:Math.max(l-f,-360),minY:u,maxX:Math.min(l+f,360),maxY:c};return o.search(d).filter(function(i){var n=i.index;return te(r,t.features[n],{units:"kilometers"})<=e})},d=0;return t.features.forEach(function(t,e){if(!l[e]){var i=f(e);if(i.length>=r){var n=d;d++,l[e]=!0,function(t,e){for(var i=0;i<e.length;i++){var n=e[i].index;if(!l[n]){l[n]=!0;var o=f(n);o.length>=r&&e.push.apply(e,s(o))}h[n]||(h[n]=!0,c[n]=t)}}(n,i)}else u[e]=!0}}),t.features.forEach(function(e,i){var r=t.features[i];r.properties||(r.properties={}),c[i]>=0?(r.properties.dbscan=u[i]?"edge":"core",r.properties.cluster=c[i]):r.properties.dbscan="noise"}),t},t.clustersKmeans=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(i/2)),e.numberOfClusters>i&&(e.numberOfClusters=i),!0!==e.mutate&&(t=r0(t));var r=tu(t),n=r.slice(0,e.numberOfClusters),o=nc(r,e.numberOfClusters,n),a={};return o.centroids.forEach(function(t,e){a[e]=t}),tl(t,function(t,e){var i=o.idxs[e];t.properties.cluster=i,t.properties.centroid=a[i]}),t},t.collect=function(t,e,i,r){var n=new nf(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[i]}});return n.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=tI(t),i=n.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];i.forEach(function(e){tO([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[r]=o}),t},t.collectionOf=$,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return tl(t,function(t){var i,r,n,o;switch(null==(o=t.geometry)?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(i=e.MultiPoint.coordinates).push.apply(i,s(t.geometry.coordinates)),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,s(t.geometry.coordinates)),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(n=e.MultiPolygon.coordinates).push.apply(n,s(t.geometry.coordinates)),e.MultiPolygon.properties.push(t.properties)}}),M(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return m({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},t.concave=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.maxEdge||1/0,r=nd(function(t){var e=[],i={};return tl(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(i,r)||(e.push(t),i[r]=!0)}}),M(e)}(t));if(r.features=r.features.filter(function(t){var r=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=te(r,n,e),s=te(n,o,e),l=te(r,o,e);return a<=i&&s<=i&&l<=i}),r.features.length<1)return null;var n=nq(r);return 1===n.coordinates.length&&(n.coordinates=n.coordinates[0],n.type="Polygon"),m(n)},t.containsNumber=H,t.convertArea=B,t.convertLength=D,t.convex=rJ,t.coordAll=tu,t.coordEach=tn,t.coordReduce=to,t.createBins=r7,t.degreesToRadians=O,t.destination=tt,t.difference=function(t){var e=[];if(tc(t,function(t){e.push(t.coordinates)}),e.length<2)throw Error("Must have at least two features");var i=t.features[0].properties||{},r=ob.difference.apply(ob,[e[0]].concat(s(e.slice(1))));return 0===r.length?null:1===r.length?_(r[0],i):E(r,i)},t.dissolve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(e=e||{}))throw Error("options is invalid");var i=e.propertyName;$(t,"Polygon","dissolve");var r=[];if(!i)return ox(E(ob.union.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var n={};tl(t,function(t){t.properties&&(Object.prototype.hasOwnProperty.call(n,t.properties[i])||(n[t.properties[i]]=[]),n[t.properties[i]].push(t))});for(var o=Object.keys(n),a=0;a<o.length;a++){var s=E(ob.union.apply(null,n[o[a]].map(function(t){return t.geometry.coordinates})));s&&s.properties&&(s.properties[i]=o[a],r.push(s))}return ox(M(r))},t.distance=te,t.distanceWeight=oM,t.earthRadius=f,t.ellipse=oI,t.envelope=oT,t.explode=oA,t.factors=d,t.feature=m,t.featureCollection=M,t.featureEach=tl,t.featureOf=X,t.featureReduce=th,t.filterProperties=ne,t.findPoint=tb,t.findSegment=t_,t.flatten=ox,t.flattenEach=td,t.flattenReduce=tp,t.flip=function(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i,r=null!=(i=e.mutate)&&i;if(!t)throw Error("geojson is required");return!1!==r&&void 0!==r||(t=r0(t)),tn(t,function(t){var e=t[0],i=t[1];t[0]=i,t[1]=e}),t},t.geojsonRbush=ez,t.geojsonType=W,t.geomEach=tc,t.geomReduce=tf,t.geometry=g,t.geometryCollection=I,t.getCluster=r8,t.getCoord=Z,t.getCoords=G,t.getGeom=Y,t.getType=K,t.greatCircle=function(t,i,r){if("object"!==e(r=r||{}))throw Error("options is invalid");var n=r.properties,o=r.npoints,a=r.offset;return t=Z(t),i=Z(i),n=n||{},o=o||100,a=a||10,new oO({x:t[0],y:t[1]},{x:i[0],y:i[1]},n).Arc(o,{offset:a}).json()},t.helpers=U,t.hexGrid=oB,t.interpolate=function(t,i,r){if("object"!==e(r=r||{}))throw Error("options is invalid");var n=r.gridType,o=r.property,a=r.weight;if(!t)throw Error("points is required");if($(t,"Point","input must contain Points"),!i)throw Error("cellSize is required");if(void 0!==a&&"number"!=typeof a)throw Error("weight must be a number");o=o||"elevation",n=n||"square",a=a||1;var s,l=tI(t);switch(n){case"point":case"points":s=oq(l,i,r);break;case"square":case"squares":s=oU(l,i,r);break;case"hex":case"hexes":s=oB(l,i,r);break;case"triangle":case"triangles":s=oZ(l,i,r);break;default:throw Error("invalid gridType")}var h=[];return tl(s,function(e){var i=0,s=0;tl(t,function(t){var l,h=te("point"===n?e:rM(e),t,r);if(void 0!==o&&(l=t.properties[o]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw Error("zValue is missing");0===h&&(i=l);var u=1/Math.pow(h,a);s+=u,i+=u*l});var l=r0(e);l.properties[o]=i/s,h.push(l)}),M(h)},t.intersect=oD,t.invariant=J,t.isNumber=F,t.isObject=j,t.isobands=function(t,e,i){if(!j(i=i||{}))throw Error("options is invalid");var r=i.zProperty||"elevation",n=i.commonProperties||{},a=i.breaksProperties||[];if($(t,"Point","Input must contain Points"),!e)throw Error("breaks is required");if(!Array.isArray(e))throw Error("breaks is not an Array");if(!j(n))throw Error("commonProperties is not an Object");if(!Array.isArray(a))throw Error("breaksProperties is not an Array");var s=ar(t,{zProperty:r,flip:!0}),l=function(t,e,i){for(var r=[],n=1;n<e.length;n++){var a=+e[n-1],s=+e[n],l=ao(an(o3(t,a,s-a)));r.push(o({groupedRings:l},i,a+"-"+s))}return r}(s,e,r);return M((l=function(t,e,i){var r=tI(i),n=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],l=e[0].length-1,h=e.length-1,u=n/l,c=o/h;return t.map(function(t){return t.groupedRings=t.groupedRings.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0]*u+a,t[1]*c+s]})})}),t})}(l,s,t)).map(function(t,e){if(a[e]&&!j(a[e]))throw Error("Each mappedProperty is required to be an Object");var i=ai(ai({},n),a[e]);return i[r]=t[r],E(t.groupedRings,i)}))},t.isolines=function(t,e,i){if(!j(i=i||{}))throw Error("options is invalid");var r=i.zProperty||"elevation",n=i.commonProperties||{},o=i.breaksProperties||[];if($(t,"Point","Input must contain Points"),!e)throw Error("breaks is required");if(!Array.isArray(e))throw Error("breaks must be an Array");if(!j(n))throw Error("commonProperties must be an Object");if(!Array.isArray(o))throw Error("breaksProperties must be an Array");var a=ap(t,{zProperty:r,flip:!0});return M(function(t,e,i){var r=tI(i),n=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],l=e[0].length-1,h=e.length-1,u=n/l,c=o/h,f=function(t){t[0]=t[0]*u+a,t[1]=t[1]*c+s};return t.forEach(function(t){tn(t,f)}),t}(function(t,e,i,r,n){for(var o=[],a=0;a<e.length;a++){var s=+e[a],l=ad(ad({},r),n[a]);l[i]=s;var h=S(o1(t,s,{linearRing:!1,noFrame:!0}),l);o.push(h)}return o}(a,e,r,n,o),a,t))},t.kinks=function(t){var e,i,r,n={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===t.type?t.geometry:t).type)i=[r.coordinates];else if("MultiLineString"===r.type)i=r.coordinates;else if("MultiPolygon"===r.type)i=(e=[]).concat.apply(e,s(r.coordinates));else{if("Polygon"!==r.type)throw Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");i=r.coordinates}return i.forEach(function(t){i.forEach(function(e){for(var i=0;i<t.length-1;i++)for(var r=i;r<e.length-1;r++)if(t!==e||1!==Math.abs(i-r)&&(0!==i||r!==t.length-2||t[i][0]!==t[t.length-1][0]||t[i][1]!==t[t.length-1][1])){var o=am(t[i][0],t[i][1],t[i+1][0],t[i+1][1],e[r][0],e[r][1],e[r+1][0],e[r+1][1]);o&&n.features.push(y([o[0],o[1]]))}})}),n},t.length=ag,t.lengthToDegrees=C,t.lengthToRadians=A,t.lineArc=ay,t.lineChunk=function(t,e,i){if(!j(i=i||{}))throw Error("options is invalid");var r=i.units,n=i.reverse;if(!t)throw Error("geojson is required");if(e<=0)throw Error("segmentLength must be greater than 0");var o=[];return td(t,function(t){n&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,i,r){var n=ag(t,{units:i});if(n<=e)return r(t);var o=n/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(a_(t,e*a,e*(a+1),{units:i}),a)}(t,e,r,function(t){o.push(t)})}),M(o)},t.lineEach=ty,t.lineIntersect=t1,t.lineOffset=function(t,e,i){if(!j(i=i||{}))throw Error("options is invalid");var r=i.units;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("distance is required");var n=K(t),o=t.properties;switch(n){case"LineString":return aM(t,e,r);case"MultiLineString":var a=[];return td(t,function(t){a.push(aM(t,e,r).geometry.coordinates)}),S(a,o);default:throw Error("geometry "+n+" is not supported")}},t.lineOverlap=eY,t.lineReduce=tv,t.lineSegment=eO,t.lineSlice=function(t,e,i){var r=G(i);if("LineString"!==K(i))throw Error("line must be a LineString");for(var n,o=eH(i,t),a=eH(i,e),s=[(n=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=n[0].properties.index+1;l<n[1].properties.index+1;l++)s.push(r[l]);return s.push(n[1].geometry.coordinates),x(s,i.properties)},t.lineSliceAlong=a_,t.lineSplit=function(t,e){if(!t)throw Error("line is required");if(!e)throw Error("splitter is required");var i=K(t),r=K(e);if("LineString"!==i)throw Error("line must be LineString");if("FeatureCollection"===r)throw Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw Error("splitter cannot be a GeometryCollection");var n=ak(e,{precision:7});switch(r){case"Point":return aI(t,n);case"MultiPoint":return aE(t,n);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return aE(t,t1(t,n,{ignoreSelfIntersections:!0}))}},t.lineString=x,t.lineStrings=w,t.lineToPolygon=function(t){var e,i,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.properties,a=null==(e=n.autoComplete)||e,s=null==(i=n.orderCoords)||i;if(null!=(r=n.mutate)&&r||(t=r0(t)),"FeatureCollection"===t.type){var l=[];return t.features.forEach(function(t){l.push(G(aA(t,{},a,s)))}),E(l,o)}return aA(t,o,a,s)},t.mask=function(t,e,i){var r,n=null!=(r=null==i?void 0:i.mutate)&&r,o=e;e&&!1===n&&(o=r0(e));var a,s=aR(o),l=null;return(l="FeatureCollection"===t.type?aL(2===(a=t).features.length?ob.union(a.features[0].geometry.coordinates,a.features[1].geometry.coordinates):ob.union.apply(ob,a.features.map(function(t){return t.geometry.coordinates}))):"Feature"===t.type?aL(ob.union(t.geometry.coordinates)):aL(ob.union(t.coordinates))).geometry.coordinates.forEach(function(t){s.geometry.coordinates.push(t[0])}),s},t.meta=tx,t.midpoint=function(t,e){return tt(t,te(t,e)/2,Q(t,e))},t.moranIndex=function(t,e){var i,r,n=e.inputField,o=e.threshold||1e5,a=e.p||2,s=null!=(i=e.binary)&&i,l=oM(t,{alpha:e.alpha||-1,binary:s,p:a,standardization:null==(r=e.standardization)||r,threshold:o}),h=[];tl(t,function(t){var e=t.properties||{};h.push(e[n])});for(var c=aN(h),f=function(t){var e,i=aN(t),r=0,n=u(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r+=Math.pow(o-i,2)}}catch(t){n.e(t)}finally{n.f()}return r/t.length}(h),d=0,p=0,m=0,g=0,y=l.length,v=0;v<y;v++){for(var _=0,b=0;b<y;b++)d+=l[v][b]*(h[v]-c)*(h[b]-c),p+=l[v][b],m+=Math.pow(l[v][b]+l[b][v],2),_+=l[v][b]+l[b][v];g+=Math.pow(_,2)}var x=d/p/f,w=-1/(y-1),M=Math.sqrt((y*y*(m*=.5)-y*g+p*p*3)/((y-1)*(y+1)*(p*p))-w*w);return{expectedMoranIndex:w,moranIndex:x,stdNorm:M,zNorm:(x-w)/M}},t.multiLineString=S,t.multiPoint=k,t.multiPolygon=E,t.nearestNeighborAnalysis=function(t,e){var i=(e=e||{}).studyArea||tL(tI(t)),r=e.properties||{},n=e.units||"kilometers",o=[];tl(t,function(t){o.push(rM(t))});var a=o.length,s=o.map(function(t,e){return te(t,aZ(t,M(o.filter(function(t,i){return i!==e}))).geometry.coordinates,{units:n})}).reduce(function(t,e){return t+e},0)/a,l=a/B(tw(i),"meters",n),h=1/(2*Math.sqrt(l)),u=.26136/Math.sqrt(a*l);return r.nearestNeighborAnalysis={units:n,arealUnits:n+"²",observedMeanDistance:s,expectedMeanDistance:h,nearestNeighborIndex:s/h,numberOfPoints:a,zScore:(s-h)/u},i.properties=r,i},t.nearestPoint=aZ,t.nearestPointOnLine=eH,t.nearestPointToLine=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.units,n=i.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return tc(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw Error("points must be a Point Collection")}}(t);if(!o.features.length)throw Error("points must contain features");if(!e)throw Error("line is required");if("LineString"!==K(e))throw Error("line must be a LineString");var a=1/0,s=null;return tl(o,function(t){var i=aG(t,e,{units:r});i<a&&(a=i,s=t)}),s&&(s.properties=aQ(aQ(aQ({},{dist:a}),s.properties),n)),s},t.planepoint=function(t,e){var i=Z(t),r=Y(e).coordinates[0];if(r.length<4)throw Error("OuterRing of a Polygon must have 4 or more Positions.");var n="Feature"===e.type&&e.properties||{},o=n.a,a=n.b,s=n.c,l=i[0],h=i[1],u=r[0][0],c=r[0][1],f=void 0!==o?o:r[0][2],d=r[1][0],p=r[1][1],m=void 0!==a?a:r[1][2],g=r[2][0],y=r[2][1],v=void 0!==s?s:r[2][2];return(v*(l-u)*(h-p)+f*(l-d)*(h-y)+m*(l-g)*(h-c)-m*(l-u)*(h-y)-v*(l-d)*(h-c)-f*(l-g)*(h-p))/((l-u)*(h-p)+(l-d)*(h-y)+(l-g)*(h-c)-(l-u)*(h-y)-(l-d)*(h-c)-(l-g)*(h-p))},t.point=y,t.pointGrid=oq,t.pointOnFeature=function(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?M([m(t)]):M([t]):t}(t),i=e9(e),r=!1,n=0;!r&&n<e.features.length;){var o=e.features[n].geometry,a=!1;if("Point"===o.type)i.geometry.coordinates[0]===o.coordinates[0]&&i.geometry.coordinates[1]===o.coordinates[1]&&(r=!0);else if("MultiPoint"===o.type)for(var s=!1,l=0;!s&&l<o.coordinates.length;)i.geometry.coordinates[0]===o.coordinates[l][0]&&i.geometry.coordinates[1]===o.coordinates[l][1]&&(r=!0,s=!0),l++;else if("LineString"===o.type)for(var h=0;!a&&h<o.coordinates.length-1;)a0(i.geometry.coordinates[0],i.geometry.coordinates[1],o.coordinates[h][0],o.coordinates[h][1],o.coordinates[h+1][0],o.coordinates[h+1][1])&&(a=!0,r=!0),h++;else if("MultiLineString"===o.type)for(var u=0;u<o.coordinates.length;){a=!1;for(var c=0,f=o.coordinates[u];!a&&c<f.length-1;)a0(i.geometry.coordinates[0],i.geometry.coordinates[1],f[c][0],f[c][1],f[c+1][0],f[c+1][1])&&(a=!0,r=!0),c++;u++}else"Polygon"!==o.type&&"MultiPolygon"!==o.type||tO(i,o)&&(r=!0);n++}if(r)return i;for(var d=M([]),p=0;p<e.features.length;p++)d.features=d.features.concat(oA(e.features[p]).features);return y(aZ(i,d).geometry.coordinates)},t.pointToLineDistance=aG,t.points=v,t.pointsWithinPolygon=a1,t.polygon=_,t.polygonSmooth=function(t,e){(e=e||{}).iterations=e.iterations||1;var i=e.iterations,r=[];if(!t)throw Error("inputPolys is required");return tc(t,function(t,e,n){if("Polygon"===t.type){for(var o=[[]],a=0;a<i;a++){var s=[],l=t;a>0&&(l=_(o).geometry),a7(l,s),o=s.slice(0)}r.push(_(o,n))}else{if("MultiPolygon"!==t.type)throw Error("geometry is invalid, must be Polygon or MultiPolygon");for(var h=[[[]]],u=0;u<i;u++){var c=[],f=t;u>0&&(f=E(h).geometry),a9(f,c),h=c.slice(0)}r.push(E(h,n))}}),M(r)},t.polygonTangents=function(t,e){var i,r=G(t),n=G(e),o=[],s=[],l=tI(e),h=0,u=null;switch(r[0]>l[0]&&r[0]<l[2]&&r[1]>l[1]&&r[1]<l[3]&&(h=(u=aZ(t,oA(e))).properties.featureIndex),K(e)){case"Polygon":o=n[0][h],s=n[0][0],null!==u&&u.geometry.coordinates[1]<r[1]&&(s=n[0][h]),i=si(n[0][0],n[0][n[0].length-1],r);var c=a(st(n[0],r,i,o,s),2);o=c[0],s=c[1];break;case"MultiPolygon":for(var f=0,d=0,p=0,m=0;m<n[0].length;m++){f=m;for(var g=!1,v=0;v<n[0][m].length;v++){if(d=v,p===h){g=!0;break}p++}if(g)break}o=n[0][f][d],s=n[0][f][d],i=si(n[0][0][0],n[0][0][n[0][0].length-1],r),n.forEach(function(t){var e=a(st(t[0],r,i,o,s),2);o=e[0],s=e[1]})}return M([y(o),y(s)])},t.polygonToLine=t2,t.polygonize=function(t){var e=a5.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var i=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?i.push(t):r.push(t)}),i.forEach(function(t){a4.findEdgeRingContaining(t,r)&&r.push(t)}),M(r.map(function(t){return t.toPolygon()}))},t.polygons=b,t.projection=sl,t.propEach=ta,t.propReduce=ts,t.propertiesContainsFilter=nt,t.quadratAnalysis=function(t,e){for(var i=(e=e||{}).studyBbox||tI(t),r=e.confidenceLevel||20,n=t.features,o=n.length,a=tw(tL(i)),s=oU(i,Math.sqrt(a/o*2),{units:"meters"}).features,l={},h=0;h<s.length;h++)l[h]={box:tI(s[h]),cnt:0};var c,f=0,d=u(n);try{for(d.s();!(c=d.n()).done;)for(var p=c.value,m=0,g=Object.keys(l);m<g.length;m++){var y=g[m],v=l[y].box;if(su(Z(p),v)){l[y].cnt+=1,f+=1;break}}}catch(t){d.e(t)}finally{d.f()}for(var _=0,b=0,x=Object.keys(l);b<x.length;b++){var w=l[x[b]].cnt;w>_&&(_=w)}for(var M=[],S=Object.keys(l).length,k=f/S,E=0,I=0;I<_+1;I++)E+=Math.exp(-k)*Math.pow(k,I)/sc(I),M.push(E);for(var P=[],T=0,A=0;A<_+1;A++){for(var C=0,R=Object.keys(l);C<R.length;C++)l[R[C]].cnt===A&&(T+=1);var N=T/S;P.push(N)}for(var z=0,O=0;O<_+1;O++){var D=Math.abs(M[O]-P[O]);D>z&&(z=D)}var B=sh[r]/Math.sqrt(S),F={criticalValue:B,isRandom:!0,maxAbsoluteDifference:z,observedDistribution:P};return z>B&&(F.isRandom=!1),F},t.radiansToDegrees=z,t.radiansToLength=T,t.random=sb,t.randomLineString=sy,t.randomPoint=sm,t.randomPolygon=sg,t.randomPosition=sf,t.rectangleGrid=oV,t.rewind=function(t){var e,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(r=r||{}))throw Error("options is invalid");var n=null!=(e=r.mutate)&&e,o=null!=(i=r.reverse)&&i;if(!t)throw Error("<geojson> is required");if("boolean"!=typeof o)throw Error("<reverse> must be a boolean");if("boolean"!=typeof n)throw Error("<mutate> must be a boolean");n||"Point"===t.type||"MultiPoint"===t.type||(t=r0(t));var a=[];switch(t.type){case"GeometryCollection":return tc(t,function(t){sx(t,o)}),t;case"FeatureCollection":return tl(t,function(t){tl(sx(t,o),function(t){a.push(t)})}),M(a)}return sx(t,o)},t.rhumbBearing=ti,t.rhumbDestination=oS,t.rhumbDistance=ok,t.round=P,t.sample=function(t,e){if(!t)throw Error("fc is required");if(null==e)throw Error("num is required");if("number"!=typeof e)throw Error("num must be a number");return M(function(t,e){for(var i,r,n=t.slice(0),o=t.length,a=o-e;o-- >a;)i=n[r=Math.floor((o+1)*Math.random())],n[r]=n[o],n[o]=i;return n.slice(a)}(t.features,e))},t.sector=function(t,i,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!j(o=o||{}))throw Error("options is invalid");var a=o.properties;if(!t)throw Error("center is required");if(null==r)throw Error("bearing1 is required");if(null==n)throw Error("bearing2 is required");if(!i)throw Error("radius is required");if("object"!==e(o))throw Error("options must be an object");if(sS(r)===sS(n))return rQ(t,i,o);var s=G(t),l=ay(t,i,r,n,o),h=[[s]];return tn(l,function(t){h[0].push(t)}),h[0].push(s),_(h,a)},t.segmentEach=tm,t.segmentReduce=tg,t.shortestPath=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!j(i=i||{}))throw Error("options is invalid");var r=i.obstacles||M([]),n=i.resolution||100;if(!t)throw Error("start is required");if(!e)throw Error("end is required");if(n&&(!F(n)||n<=0))throw Error("options.resolution must be a number, greater than 0");var o=Z(t),s=Z(e);if(t=y(o),e=y(s),"FeatureCollection"===r.type){if(0===r.features.length)return x([o,s])}else{if("Polygon"!==r.type)throw Error("invalid obstacles");r=M([m(Y(r))])}var l=r;l.features.push(t),l.features.push(e);var h=a(tI(sk(tL(tI(l)),1.15)),4),u=h[0],c=h[1],f=h[2],d=h[3],p=te([u,c],[f,c],i)/n;l.features.pop(),l.features.pop();for(var g,v,_=p/te([u,c],[f,c],i)*(f-u),b=p/te([u,c],[u,d],i)*(d-c),w=f-u,S=d-c,k=Math.floor(w/_),E=Math.floor(S/b),I=(w-k*_)/2,P=[],T=[],A=1/0,C=1/0,R=d-(S-E*b)/2,N=0;R>=c;){for(var z=[],O=[],D=u+I,B=0;D<=f;){var q=y([D,R]),V=sL(q,r);z.push(V?0:1),O.push(D+"|"+R);var U=te(q,t);!V&&U<A&&(A=U,g={x:B,y:N});var G=te(q,e);!V&&G<C&&(C=G,v={x:B,y:N}),D+=_,B++}T.push(z),P.push(O),R-=b,N++}var H=new sT(T,{diagonal:!0}),W=H.grid[g.y][g.x],X=H.grid[v.y][v.x],$=sP.search(H,W,X),K=[o];return $.forEach(function(t){var e=P[t.x][t.y].split("|");K.push([+e[0],+e[1]])}),K.push(s),ef(x(K))},t.simplify=function(t){var e,i,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!j(n=null!=n?n:{}))throw Error("options is invalid");var o=null!=(e=n.tolerance)?e:1,a=null!=(i=n.highQuality)&&i,s=null!=(r=n.mutate)&&r;if(!t)throw Error("geojson is required");if(o&&o<0)throw Error("invalid tolerance");return!0!==s&&(t=r0(t)),tc(t,function(t){!function(t,e,i){var r=t.type;if("Point"!==r&&"MultiPoint"!==r&&(ef(t,{mutate:!0}),"GeometryCollection"!==r))switch(r){case"LineString":t.coordinates=sO(t.coordinates,e,i);break;case"MultiLineString":t.coordinates=t.coordinates.map(function(t){return sO(t,e,i)});break;case"Polygon":t.coordinates=sD(t.coordinates,e,i);break;case"MultiPolygon":t.coordinates=t.coordinates.map(function(t){return sD(t,e,i)})}}(t,o,a)}),t},t.square=aS,t.squareGrid=oU,t.standardDeviationalEllipse=function(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i,r=e.steps||64,n=e.weight,o=e.properties||{};if(!F(r))throw Error("steps must be a number");if(!j(o))throw Error("properties must be a number");var a=tu(t).length,s=rw(t,{weight:n}),l=0,h=0,u=0;tl(t,function(t){var e,i=n&&(null==(e=t.properties)?void 0:e[n])||1,r=sF(G(t),G(s));l+=Math.pow(r.x,2)*i,h+=Math.pow(r.y,2)*i,u+=r.x*r.y*i});var c=l-h,f=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),d=Math.atan((c+f)/(2*u)),p=180*d/Math.PI,m=0,g=0,y=0;tl(t,function(t){var e,i=n&&(null==(e=t.properties)?void 0:e[n])||1,r=sF(G(t),G(s));m+=Math.pow(r.x*Math.cos(d)-r.y*Math.sin(d),2)*i,g+=Math.pow(r.x*Math.sin(d)+r.y*Math.cos(d),2)*i,y+=i});var v=Math.sqrt(2*m/y),_=Math.sqrt(2*g/y),b=oI(s,v,_,{units:"degrees",angle:p,steps:r,properties:o}),x=a1(t,M([b])),w={meanCenterCoordinates:G(s),semiMajorAxis:v,semiMinorAxis:_,numberOfFeatures:a,angle:p,percentageWithinEllipse:100*tu(x).length/a};return b.properties=null!=(i=b.properties)?i:{},b.properties.standardDeviationalEllipse=w,b},t.tag=function(t,e,i,r){return t=r0(t),e=r0(e),tl(t,function(t){t.properties||(t.properties={}),tl(e,function(e){t.properties&&e.properties&&void 0===t.properties[r]&&tO(t,e)&&(t.properties[r]=e.properties[i])})}),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=ln(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(ln(t))}),e},t.tin=nd,t.toMercator=sr,t.toWgs84=sn,t.transformRotate=oE,t.transformScale=sk,t.transformTranslate=function(t,e,i,r){if(!j(r=r||{}))throw Error("options is invalid");var n=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==i||isNaN(i))throw Error("direction is required");return e<0&&(e=-e,i+=180),!1!==a&&void 0!==a||(t=r0(t)),tn(t,function(t){var r=G(oS(t,e,i,{units:n}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.triangleGrid=oZ,t.truncate=ak,t.union=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];if(tc(t,function(t){i.push(t.coordinates)}),i.length<2)throw Error("Must have at least 2 geometries");var r=ob.union.apply(ob,[i[0]].concat(s(i.slice(1))));return 0===r.length?null:1===r.length?_(r[0],e.properties):E(r,e.properties)},t.unkinkPolygon=function(t){var e=[];return td(t,function(t){"Polygon"===t.geometry.type&&tl(ls(t),function(i){e.push(_(i.geometry.coordinates,t.properties))})}),M(e)},t.validateBBox=q,t.validateId=V,t.voronoi=function(t,e){if(!j(e=e||{}))throw Error("options is invalid");var i=e.bbox||[-180,-85,180,85];if(!t)throw Error("points is required");if(!Array.isArray(i))throw Error("bbox is invalid");return $(t,"Point","points"),M((function(){var t=lm,e=lg,i=null;function r(r){return new lY(r.map(function(i,n){var o=[Math.round(t(i,n,r)/lW)*lW,Math.round(e(i,n,r)/lW)*lW];return o.index=n,o.data=i,o}),i)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:lp(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:lp(+t),r):e},r.extent=function(t){return arguments.length?(i=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},r.size=function(t){return arguments.length?(i=null==t?null:[[0,0],[+t[0],+t[1]]],r):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},r})().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(t.features).map(function(e,i){return Object.assign(function(t){return(t=t.slice()).push(t[0]),_([t])}(e),{properties:r2(t.features[i].properties)})}))},Object.defineProperty(t,"__esModule",{value:!0})});var $cBgUY=parcelRequire("cBgUY"),$4466b8a79b86a2da$exports={};!function(t){if("function"==typeof define&&define.amd)define(["leaflet","proj4"],t);else if("object"==typeof $4466b8a79b86a2da$exports)$4466b8a79b86a2da$exports=t(parcelRequire("aEpXh"),parcelRequire("cBgUY"));else{if(void 0===window.L||void 0===window.proj4)throw"Leaflet and proj4 must be loaded first";t(window.L,window.proj4)}}(function(t,e){return e.__esModule&&e.default&&(e=e.default),t.Proj={},t.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},t.Proj.Projection=t.Class.extend({initialize:function(e,i,r){var n=t.Proj._isProj4Obj(e);this._proj=n?e:this._projFromCodeDef(e,i),this.bounds=n?i:r},project:function(e){var i=this._proj.forward([e.lng,e.lat]);return new t.Point(i[0],i[1])},unproject:function(e,i){var r=this._proj.inverse([e.x,e.y]);return new t.LatLng(r[1],r[0],i)},_projFromCodeDef:function(t,i){if(i)e.defs(t,i);else if(void 0===e.defs[t]){var r=t.split(":");if(r.length>3&&(t=r[r.length-3]+":"+r[r.length-1]),void 0===e.defs[t])throw"No projection definition for code "+t}return e(t)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,i,r){var n,o,a,s;if(t.Proj._isProj4Obj(e)?(n=(o=e).srsCode,s=i||{},this.projection=new t.Proj.Projection(o,s.bounds)):(n=e,a=i,s=r||{},this.projection=new t.Proj.Projection(n,a,s.bounds)),t.Util.setOptions(this,s),this.code=n,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var l=this.options.resolutions.length-1;l>=0;l--)this.options.resolutions[l]&&(this._scales[l]=1/this.options.resolutions[l])}this.infinite=!this.options.bounds},scale:function(t){var e,i,r=Math.floor(t);return t===r?this._scales[t]:(e=this._scales[r],i=this._scales[r+1]-e,e+i*(t-r))},zoom:function(t){var e,i,r,n=this._closestElement(this._scales,t),o=this._scales.indexOf(n);return t===n?o:void 0===n?-1/0:(i=o+1,void 0===(e=this._scales[i]))?1/0:(r=e-n,(t-n)/r+o)},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(t,e){for(var i,r=t.length;r--;)t[r]<=e&&(void 0===i||i<t[r])&&(i=t[r]);return i}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,i){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,e,i)},addData:function(e){var i;e&&(e.crs&&"name"===e.crs.type?i=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(i=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==i&&(this.options.coordsToLatLng=function(e){var r=t.point(e[0],e[1]);return i.projection.unproject(r)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,i){return new t.Proj.GeoJSON(e,i)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,i,r){t.ImageOverlay.prototype.initialize.call(this,e,null,r),this._projectedBounds=i},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),r=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),n=this._projectedToNewLayerPoint(r,e.zoom,e.center);t.DomUtil.setTransform(this._image,n,i)},_reset:function(){var e=this._map.getZoom(),i=this._map.getPixelOrigin(),r=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(i),this._transform(this._projectedBounds.max,e)._subtract(i)),n=r.getSize();t.DomUtil.setPosition(this._image,r.min),this._image.style.width=n.x+"px",this._image.style.height=n.y+"px"},_projectedToNewLayerPoint:function(t,e,i){var r=this._map.getSize()._divideBy(2),n=this._map.project(i,e)._subtract(r)._round().add(this._map._getMapPanePos());return this._transform(t,e)._subtract(n)},_transform:function(t,e){var i=this._map.options.crs,r=i.transformation,n=i.scale(e);return r.transform(t,n)}}),t.Proj.imageOverlay=function(e,i,r){return new t.Proj.ImageOverlay(e,i,r)},t.Proj});var $0050603897a74c12$exports={},$aKNZT=parcelRequire("aKNZT"),$fLiic=parcelRequire("fLiic"),$0050603897a74c12$require$Buffer=$fLiic.Buffer,$9ZyLq=parcelRequire("9ZyLq"),$cb62d5c4a55ce9b4$exports={},$aKNZT=parcelRequire("aKNZT");function $cb62d5c4a55ce9b4$var$assertPath(t){if("string"!=typeof t)throw TypeError("Path must be a string. Received "+JSON.stringify(t))}function $cb62d5c4a55ce9b4$var$normalizeStringPosix(t,e){for(var i,r="",n=0,o=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)i=t.charCodeAt(s);else if(47===i)break;else i=47;if(47===i){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2)){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",n=0):n=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",n=0,o=s,a=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(o+1,s):r=t.slice(o+1,s),n=s-o-1;o=s,a=0}else 46===i&&-1!==a?++a:a=-1}return r}function $cb62d5c4a55ce9b4$var$_format(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+t+r:r}var $cb62d5c4a55ce9b4$var$posix={resolve:function(){for(var t,e,i="",r=!1,n=arguments.length-1;n>=-1&&!r;n--)n>=0?e=arguments[n]:(void 0===t&&(t=$aKNZT.cwd()),e=t),$cb62d5c4a55ce9b4$var$assertPath(e),0!==e.length&&(i=e+"/"+i,r=47===e.charCodeAt(0));return(i=$cb62d5c4a55ce9b4$var$normalizeStringPosix(i,!r),r)?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(t){if($cb62d5c4a55ce9b4$var$assertPath(t),0===t.length)return".";var e=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return(0!==(t=$cb62d5c4a55ce9b4$var$normalizeStringPosix(t,!e)).length||e||(t="."),t.length>0&&i&&(t+="/"),e)?"/"+t:t},isAbsolute:function(t){return $cb62d5c4a55ce9b4$var$assertPath(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];$cb62d5c4a55ce9b4$var$assertPath(i),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":$cb62d5c4a55ce9b4$var$posix.normalize(t)},relative:function(t,e){if($cb62d5c4a55ce9b4$var$assertPath(t),$cb62d5c4a55ce9b4$var$assertPath(e),t===e||(t=$cb62d5c4a55ce9b4$var$posix.resolve(t))===(e=$cb62d5c4a55ce9b4$var$posix.resolve(e)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var r=t.length,n=r-i,o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var a=e.length-o,s=n<a?n:a,l=-1,h=0;h<=s;++h){if(h===s){if(a>s){if(47===e.charCodeAt(o+h))return e.slice(o+h+1);if(0===h)return e.slice(o+h)}else n>s&&(47===t.charCodeAt(i+h)?l=h:0===h&&(l=0));break}var u=t.charCodeAt(i+h);if(u!==e.charCodeAt(o+h))break;47===u&&(l=h)}var c="";for(h=i+l+1;h<=r;++h)(h===r||47===t.charCodeAt(h))&&(0===c.length?c+="..":c+="/..");return c.length>0?c+e.slice(o+l):(o+=l,47===e.charCodeAt(o)&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if($cb62d5c4a55ce9b4$var$assertPath(t),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,r=-1,n=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!n){r=o;break}}else n=!1;return -1===r?i?"/":".":i&&1===r?"//":t.slice(0,r)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw TypeError('"ext" argument must be a string');$cb62d5c4a55ce9b4$var$assertPath(t);var i,r=0,n=-1,o=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,s=-1;for(i=t.length-1;i>=0;--i){var l=t.charCodeAt(i);if(47===l){if(!o){r=i+1;break}}else -1===s&&(o=!1,s=i+1),a>=0&&(l===e.charCodeAt(a)?-1==--a&&(n=i):(a=-1,n=s))}return r===n?n=s:-1===n&&(n=t.length),t.slice(r,n)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!o){r=i+1;break}}else -1===n&&(o=!1,n=i+1);return -1===n?"":t.slice(r,n)},extname:function(t){$cb62d5c4a55ce9b4$var$assertPath(t);for(var e=-1,i=0,r=-1,n=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47===s){if(!n){i=a+1;break}continue}-1===r&&(n=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1)}return -1===e||-1===r||0===o||1===o&&e===r-1&&e===i+1?"":t.slice(e,r)},format:function(t){if(null===t||"object"!=typeof t)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return $cb62d5c4a55ce9b4$var$_format("/",t)},parse:function(t){$cb62d5c4a55ce9b4$var$assertPath(t);var e,i={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return i;var r=t.charCodeAt(0),n=47===r;n?(i.root="/",e=1):e=0;for(var o=-1,a=0,s=-1,l=!0,h=t.length-1,u=0;h>=e;--h){if(47===(r=t.charCodeAt(h))){if(!l){a=h+1;break}continue}-1===s&&(l=!1,s=h+1),46===r?-1===o?o=h:1!==u&&(u=1):-1!==o&&(u=-1)}return -1===o||-1===s||0===u||1===u&&o===s-1&&o===a+1?-1!==s&&(0===a&&n?i.base=i.name=t.slice(1,s):i.base=i.name=t.slice(a,s)):(0===a&&n?(i.name=t.slice(1,o),i.base=t.slice(1,s)):(i.name=t.slice(a,o),i.base=t.slice(a,s)),i.ext=t.slice(o,s)),a>0?i.dir=t.slice(0,a-1):n&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};$cb62d5c4a55ce9b4$var$posix.posix=$cb62d5c4a55ce9b4$var$posix,$cb62d5c4a55ce9b4$exports=$cb62d5c4a55ce9b4$var$posix,$07da88d463d75388$export$c1d46b5ea6262c0b=function(){return"/"},$73ac41bce01e26c9$export$5f828d93ff035aa8=$73ac41bce01e26c9$export$cd94982b18c6332c=$73ac41bce01e26c9$export$1d518568e4f529b0=$73ac41bce01e26c9$export$5285b6d41c912b41=parcelRequire("1IbV4"),$73ac41bce01e26c9$export$2fb37efbf6ae0c0e=$73ac41bce01e26c9$export$ab85ecd77ce6a5cd=parcelRequire("cYT9k"),$73ac41bce01e26c9$export$da39cf97e1eb7c91=$73ac41bce01e26c9$export$52a9039d7177394f=parcelRequire("g9Omc");var $9adcd31e69cd05a2$exports={};$9adcd31e69cd05a2$exports=parcelRequire("ftKR2");var $73ac41bce01e26c9$var$algoKeys=Object.keys($9adcd31e69cd05a2$exports),$73ac41bce01e26c9$var$hashes=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat($73ac41bce01e26c9$var$algoKeys),$csvUc=parcelRequire("csvUc");$73ac41bce01e26c9$export$448fa22aedc9dbca=$csvUc.pbkdf2,$73ac41bce01e26c9$export$b80c7ba289c8fa56=$csvUc.pbkdf2Sync;var $95f29dcf5e9d31c6$exports={},$entWb=parcelRequire("entWb");$f9d9c56bf2e34de5$export$eab97d15b1788b8d=parcelRequire("3WHoc"),$f9d9c56bf2e34de5$export$26e5786e8ac8e530=parcelRequire("dm77F"),$f9d9c56bf2e34de5$export$cc8859615686b300=parcelRequire("f8WUS"),$f9d9c56bf2e34de5$export$8ad3f227af08fcc5=parcelRequire("lOLNi"),$f9d9c56bf2e34de5$export$947646e34766044f=parcelRequire("jrmLL");var $dFiDG=parcelRequire("dFiDG"),$8GZk1=parcelRequire("8GZk1"),$95f29dcf5e9d31c6$require$Buffer=$8GZk1.Buffer,$95f29dcf5e9d31c6$var$modes={"des-ede3-cbc":$f9d9c56bf2e34de5$export$8ad3f227af08fcc5.instantiate($f9d9c56bf2e34de5$export$947646e34766044f),"des-ede3":$f9d9c56bf2e34de5$export$947646e34766044f,"des-ede-cbc":$f9d9c56bf2e34de5$export$8ad3f227af08fcc5.instantiate($f9d9c56bf2e34de5$export$947646e34766044f),"des-ede":$f9d9c56bf2e34de5$export$947646e34766044f,"des-cbc":$f9d9c56bf2e34de5$export$8ad3f227af08fcc5.instantiate($f9d9c56bf2e34de5$export$cc8859615686b300),"des-ecb":$f9d9c56bf2e34de5$export$cc8859615686b300};function $95f29dcf5e9d31c6$var$DES(t){$entWb.call(this);var e,i=t.mode.toLowerCase(),r=$95f29dcf5e9d31c6$var$modes[i];e=t.decrypt?"decrypt":"encrypt";var n=t.key;$95f29dcf5e9d31c6$require$Buffer.isBuffer(n)||(n=$95f29dcf5e9d31c6$require$Buffer.from(n)),("des-ede"===i||"des-ede-cbc"===i)&&(n=$95f29dcf5e9d31c6$require$Buffer.concat([n,n.slice(0,8)]));var o=t.iv;$95f29dcf5e9d31c6$require$Buffer.isBuffer(o)||(o=$95f29dcf5e9d31c6$require$Buffer.from(o)),this._des=r.create({key:n,iv:o,type:e})}$95f29dcf5e9d31c6$var$modes.des=$95f29dcf5e9d31c6$var$modes["des-cbc"],$95f29dcf5e9d31c6$var$modes.des3=$95f29dcf5e9d31c6$var$modes["des-ede3-cbc"],$95f29dcf5e9d31c6$exports=$95f29dcf5e9d31c6$var$DES,$dFiDG($95f29dcf5e9d31c6$var$DES,$entWb),$95f29dcf5e9d31c6$var$DES.prototype._update=function(t){return $95f29dcf5e9d31c6$require$Buffer.from(this._des.update(t))},$95f29dcf5e9d31c6$var$DES.prototype._final=function(){return $95f29dcf5e9d31c6$require$Buffer.from(this._des.final())};var $hMpyE=parcelRequire("hMpyE"),$aAGV1=parcelRequire("aAGV1"),$4267c26725f812c8$exports={};$parcel$export($4267c26725f812c8$exports,"des-ecb",()=>$4267c26725f812c8$export$116f8a5cee447347,t=>$4267c26725f812c8$export$116f8a5cee447347=t),$parcel$export($4267c26725f812c8$exports,"des-cbc",()=>$4267c26725f812c8$export$7483c4066bfb7ae9,t=>$4267c26725f812c8$export$7483c4066bfb7ae9=t),$parcel$export($4267c26725f812c8$exports,"des",()=>$4267c26725f812c8$export$e7a565d2e588bb06,t=>$4267c26725f812c8$export$e7a565d2e588bb06=t),$parcel$export($4267c26725f812c8$exports,"des-ede3-cbc",()=>$4267c26725f812c8$export$aaa2f54a426f3eb8,t=>$4267c26725f812c8$export$aaa2f54a426f3eb8=t),$parcel$export($4267c26725f812c8$exports,"des3",()=>$4267c26725f812c8$export$eba20568dde4ada,t=>$4267c26725f812c8$export$eba20568dde4ada=t),$parcel$export($4267c26725f812c8$exports,"des-ede3",()=>$4267c26725f812c8$export$d3b5e5996938f5ae,t=>$4267c26725f812c8$export$d3b5e5996938f5ae=t),$parcel$export($4267c26725f812c8$exports,"des-ede-cbc",()=>$4267c26725f812c8$export$57c08356130bc99b,t=>$4267c26725f812c8$export$57c08356130bc99b=t),$parcel$export($4267c26725f812c8$exports,"des-ede",()=>$4267c26725f812c8$export$c7169791d5c1e65d,t=>$4267c26725f812c8$export$c7169791d5c1e65d=t),$4267c26725f812c8$export$116f8a5cee447347={key:8,iv:0},$4267c26725f812c8$export$7483c4066bfb7ae9=$4267c26725f812c8$export$e7a565d2e588bb06={key:8,iv:8},$4267c26725f812c8$export$aaa2f54a426f3eb8=$4267c26725f812c8$export$eba20568dde4ada={key:24,iv:8},$4267c26725f812c8$export$d3b5e5996938f5ae={key:24,iv:0},$4267c26725f812c8$export$57c08356130bc99b={key:16,iv:8},$4267c26725f812c8$export$c7169791d5c1e65d={key:16,iv:0};var $diEuB=parcelRequire("diEuB");function $f6f6e24e01d689f8$var$createCipher(t,e){if($aAGV1[t=t.toLowerCase()])i=$aAGV1[t].key,r=$aAGV1[t].iv;else if($4267c26725f812c8$exports[t])i=8*$4267c26725f812c8$exports[t].key,r=$4267c26725f812c8$exports[t].iv;else throw TypeError("invalid suite type");var i,r,n=$diEuB(e,!1,i,r);return $f6f6e24e01d689f8$var$createCipheriv(t,n.key,n.iv)}function $f6f6e24e01d689f8$var$createDecipher(t,e){if($aAGV1[t=t.toLowerCase()])i=$aAGV1[t].key,r=$aAGV1[t].iv;else if($4267c26725f812c8$exports[t])i=8*$4267c26725f812c8$exports[t].key,r=$4267c26725f812c8$exports[t].iv;else throw TypeError("invalid suite type");var i,r,n=$diEuB(e,!1,i,r);return $f6f6e24e01d689f8$var$createDecipheriv(t,n.key,n.iv)}function $f6f6e24e01d689f8$var$createCipheriv(t,e,i){if($aAGV1[t=t.toLowerCase()])return $hMpyE.createCipheriv(t,e,i);if($4267c26725f812c8$exports[t])return new $95f29dcf5e9d31c6$exports({key:e,iv:i,mode:t});throw TypeError("invalid suite type")}function $f6f6e24e01d689f8$var$createDecipheriv(t,e,i){if($aAGV1[t=t.toLowerCase()])return $hMpyE.createDecipheriv(t,e,i);if($4267c26725f812c8$exports[t])return new $95f29dcf5e9d31c6$exports({key:e,iv:i,mode:t,decrypt:!0});throw TypeError("invalid suite type")}function $f6f6e24e01d689f8$var$getCiphers(){return Object.keys($4267c26725f812c8$exports).concat($hMpyE.getCiphers())}$f6f6e24e01d689f8$export$bdd223f16383713e=$f6f6e24e01d689f8$export$26e5786e8ac8e530=$f6f6e24e01d689f8$var$createCipher,$f6f6e24e01d689f8$export$2f64596b8cbf08b4=$f6f6e24e01d689f8$export$20533d26f07f1ee0=$f6f6e24e01d689f8$var$createCipheriv,$f6f6e24e01d689f8$export$12ada9414fbc594c=$f6f6e24e01d689f8$export$2ce6d8d0e8b04e1a=$f6f6e24e01d689f8$var$createDecipher,$f6f6e24e01d689f8$export$36b6d6ef312eab39=$f6f6e24e01d689f8$export$f5e7e39d57cd9700=$f6f6e24e01d689f8$var$createDecipheriv,$f6f6e24e01d689f8$export$dedd8dc3dc62b370=$f6f6e24e01d689f8$export$58a258485f1e49f6=$f6f6e24e01d689f8$var$getCiphers,$73ac41bce01e26c9$export$36b6d6ef312eab39=$f6f6e24e01d689f8$export$36b6d6ef312eab39;var $fLiic=parcelRequire("fLiic"),$d07a5d50e8b73002$require$Buffer=$fLiic.Buffer,$10ef8806721141e0$exports={},$1IbV4=parcelRequire("1IbV4");$10ef8806721141e0$exports=$10ef8806721141e0$var$findPrime,$10ef8806721141e0$var$findPrime.simpleSieve=$10ef8806721141e0$var$simpleSieve,$10ef8806721141e0$var$findPrime.fermatTest=$10ef8806721141e0$var$fermatTest;var $26s1V=parcelRequire("26s1V"),$10ef8806721141e0$var$TWENTYFOUR=new $26s1V(24),$e265cff6f2ccbfb9$exports={},$jIF9i=parcelRequire("jIF9i"),$gkrIn=parcelRequire("gkrIn");function $e265cff6f2ccbfb9$var$MillerRabin(t){this.rand=t||new $gkrIn.Rand}$e265cff6f2ccbfb9$exports=$e265cff6f2ccbfb9$var$MillerRabin,$e265cff6f2ccbfb9$var$MillerRabin.create=function(t){return new $e265cff6f2ccbfb9$var$MillerRabin(t)},$e265cff6f2ccbfb9$var$MillerRabin.prototype._randbelow=function(t){var e=Math.ceil(t.bitLength()/8);do var i=new $jIF9i(this.rand.generate(e));while(i.cmp(t)>=0)return i},$e265cff6f2ccbfb9$var$MillerRabin.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},$e265cff6f2ccbfb9$var$MillerRabin.prototype.test=function(t,e,i){var r=t.bitLength(),n=$jIF9i.mont(t),o=new $jIF9i(1).toRed(n);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var l=t.shrn(s),h=a.toRed(n),u=!0;e>0;e--){var c=this._randrange(new $jIF9i(2),a);i&&i(c);var f=c.toRed(n).redPow(l);if(0!==f.cmp(o)&&0!==f.cmp(h)){for(var d=1;d<s;d++){if(0===(f=f.redSqr()).cmp(o))return!1;if(0===f.cmp(h))break}if(d===s)return!1}}return u},$e265cff6f2ccbfb9$var$MillerRabin.prototype.getDivisor=function(t,e){var i=t.bitLength(),r=$jIF9i.mont(t),n=new $jIF9i(1).toRed(r);e||(e=Math.max(1,i/48|0));for(var o=t.subn(1),a=0;!o.testn(a);a++);for(var s=t.shrn(a),l=o.toRed(r);e>0;e--){var h=this._randrange(new $jIF9i(2),o),u=t.gcd(h);if(0!==u.cmpn(1))return u;var c=h.toRed(r).redPow(s);if(0!==c.cmp(n)&&0!==c.cmp(l)){for(var f=1;f<a;f++){if(0===(c=c.redSqr()).cmp(n))return c.fromRed().subn(1).gcd(t);if(0===c.cmp(l))break}if(f===a)return(c=c.redSqr()).fromRed().subn(1).gcd(t)}}return!1};var $10ef8806721141e0$var$millerRabin=new $e265cff6f2ccbfb9$exports,$10ef8806721141e0$var$ONE=new $26s1V(1),$10ef8806721141e0$var$TWO=new $26s1V(2),$10ef8806721141e0$var$FIVE=new $26s1V(5);new $26s1V(16),new $26s1V(8);var $10ef8806721141e0$var$TEN=new $26s1V(10),$10ef8806721141e0$var$THREE=new $26s1V(3);new $26s1V(7);var $10ef8806721141e0$var$ELEVEN=new $26s1V(11),$10ef8806721141e0$var$FOUR=new $26s1V(4);new $26s1V(12);var $10ef8806721141e0$var$primes=null;function $10ef8806721141e0$var$_getPrimes(){if(null!==$10ef8806721141e0$var$primes)return $10ef8806721141e0$var$primes;var t=1048576,e=[];e[0]=2;for(var i=1,r=3;r<t;r+=2){for(var n=Math.ceil(Math.sqrt(r)),o=0;o<i&&e[o]<=n&&r%e[o]!=0;o++);i!==o&&e[o]<=n||(e[i++]=r)}return $10ef8806721141e0$var$primes=e,e}function $10ef8806721141e0$var$simpleSieve(t){for(var e=$10ef8806721141e0$var$_getPrimes(),i=0;i<e.length;i++)if(0===t.modn(e[i])){if(0!==t.cmpn(e[i]))return!1;break}return!0}function $10ef8806721141e0$var$fermatTest(t){var e=$26s1V.mont(t);return 0===$10ef8806721141e0$var$TWO.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function $10ef8806721141e0$var$findPrime(t,e){var i,r;if(t<16)return new $26s1V(2===e||5===e?[140,123]:[140,39]);for(e=new $26s1V(e);;){for(i=new $26s1V($1IbV4(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd($10ef8806721141e0$var$ONE),i.testn(1)||i.iadd($10ef8806721141e0$var$TWO),e.cmp($10ef8806721141e0$var$TWO)){if(!e.cmp($10ef8806721141e0$var$FIVE))for(;i.mod($10ef8806721141e0$var$TEN).cmp($10ef8806721141e0$var$THREE);)i.iadd($10ef8806721141e0$var$FOUR)}else for(;i.mod($10ef8806721141e0$var$TWENTYFOUR).cmp($10ef8806721141e0$var$ELEVEN);)i.iadd($10ef8806721141e0$var$FOUR);if($10ef8806721141e0$var$simpleSieve(r=i.shrn(1))&&$10ef8806721141e0$var$simpleSieve(i)&&$10ef8806721141e0$var$fermatTest(r)&&$10ef8806721141e0$var$fermatTest(i)&&$10ef8806721141e0$var$millerRabin.test(r)&&$10ef8806721141e0$var$millerRabin.test(i))return i}}var $738b41f2a7743d3d$exports={};$738b41f2a7743d3d$exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}');var $8402f93d5e31032a$exports={},$fLiic=parcelRequire("fLiic"),$8402f93d5e31032a$require$Buffer=$fLiic.Buffer,$26s1V=parcelRequire("26s1V"),$8402f93d5e31032a$var$millerRabin=new $e265cff6f2ccbfb9$exports,$8402f93d5e31032a$var$TWENTYFOUR=new $26s1V(24),$8402f93d5e31032a$var$ELEVEN=new $26s1V(11),$8402f93d5e31032a$var$TEN=new $26s1V(10),$8402f93d5e31032a$var$THREE=new $26s1V(3),$8402f93d5e31032a$var$SEVEN=new $26s1V(7),$1IbV4=parcelRequire("1IbV4");function $8402f93d5e31032a$var$setPublicKey(t,e){return e=e||"utf8",$8402f93d5e31032a$require$Buffer.isBuffer(t)||(t=new $8402f93d5e31032a$require$Buffer(t,e)),this._pub=new $26s1V(t),this}function $8402f93d5e31032a$var$setPrivateKey(t,e){return e=e||"utf8",$8402f93d5e31032a$require$Buffer.isBuffer(t)||(t=new $8402f93d5e31032a$require$Buffer(t,e)),this._priv=new $26s1V(t),this}$8402f93d5e31032a$exports=$8402f93d5e31032a$var$DH;var $8402f93d5e31032a$var$primeCache={};function $8402f93d5e31032a$var$checkPrime(t,e){var i,r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in $8402f93d5e31032a$var$primeCache)return $8402f93d5e31032a$var$primeCache[n];var o=0;if(t.isEven()||!$10ef8806721141e0$exports.simpleSieve||!$10ef8806721141e0$exports.fermatTest(t)||!$8402f93d5e31032a$var$millerRabin.test(t))return o+=1,"02"===r||"05"===r?o+=8:o+=4,$8402f93d5e31032a$var$primeCache[n]=o,o;switch($8402f93d5e31032a$var$millerRabin.test(t.shrn(1))||(o+=2),r){case"02":t.mod($8402f93d5e31032a$var$TWENTYFOUR).cmp($8402f93d5e31032a$var$ELEVEN)&&(o+=8);break;case"05":(i=t.mod($8402f93d5e31032a$var$TEN)).cmp($8402f93d5e31032a$var$THREE)&&i.cmp($8402f93d5e31032a$var$SEVEN)&&(o+=8);break;default:o+=4}return $8402f93d5e31032a$var$primeCache[n]=o,o}function $8402f93d5e31032a$var$DH(t,e,i){this.setGenerator(e),this.__prime=new $26s1V(t),this._prime=$26s1V.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=$8402f93d5e31032a$var$setPublicKey,this.setPrivateKey=$8402f93d5e31032a$var$setPrivateKey):this._primeCode=8}function $8402f93d5e31032a$var$formatReturnValue(t,e){var i=new $8402f93d5e31032a$require$Buffer(t.toArray());return e?i.toString(e):i}function $d07a5d50e8b73002$var$getDiffieHellman(t){var e=new $d07a5d50e8b73002$require$Buffer($738b41f2a7743d3d$exports[t].prime,"hex"),i=new $d07a5d50e8b73002$require$Buffer($738b41f2a7743d3d$exports[t].gen,"hex");return new $8402f93d5e31032a$exports(e,i)}Object.defineProperty($8402f93d5e31032a$var$DH.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=$8402f93d5e31032a$var$checkPrime(this.__prime,this.__gen)),this._primeCode}}),$8402f93d5e31032a$var$DH.prototype.generateKeys=function(){return this._priv||(this._priv=new $26s1V($1IbV4(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},$8402f93d5e31032a$var$DH.prototype.computeSecret=function(t){var e=new $8402f93d5e31032a$require$Buffer((t=(t=new $26s1V(t)).toRed(this._prime)).redPow(this._priv).fromRed().toArray()),i=this.getPrime();if(e.length<i.length){var r=new $8402f93d5e31032a$require$Buffer(i.length-e.length);r.fill(0),e=$8402f93d5e31032a$require$Buffer.concat([r,e])}return e},$8402f93d5e31032a$var$DH.prototype.getPublicKey=function(t){return $8402f93d5e31032a$var$formatReturnValue(this._pub,t)},$8402f93d5e31032a$var$DH.prototype.getPrivateKey=function(t){return $8402f93d5e31032a$var$formatReturnValue(this._priv,t)},$8402f93d5e31032a$var$DH.prototype.getPrime=function(t){return $8402f93d5e31032a$var$formatReturnValue(this.__prime,t)},$8402f93d5e31032a$var$DH.prototype.getGenerator=function(t){return $8402f93d5e31032a$var$formatReturnValue(this._gen,t)},$8402f93d5e31032a$var$DH.prototype.setGenerator=function(t,e){return e=e||"utf8",$8402f93d5e31032a$require$Buffer.isBuffer(t)||(t=new $8402f93d5e31032a$require$Buffer(t,e)),this.__gen=t,this._gen=new $26s1V(t),this};var $d07a5d50e8b73002$var$ENCODINGS={binary:!0,hex:!0,base64:!0};function $d07a5d50e8b73002$var$createDiffieHellman(t,e,i,r){return $d07a5d50e8b73002$require$Buffer.isBuffer(e)||void 0===$d07a5d50e8b73002$var$ENCODINGS[e]?$d07a5d50e8b73002$var$createDiffieHellman(t,"binary",e,i):(e=e||"binary",r=r||"binary",i=i||new $d07a5d50e8b73002$require$Buffer([2]),$d07a5d50e8b73002$require$Buffer.isBuffer(i)||(i=new $d07a5d50e8b73002$require$Buffer(i,r)),"number"==typeof t)?new $8402f93d5e31032a$exports($10ef8806721141e0$exports(t,i),i,!0):($d07a5d50e8b73002$require$Buffer.isBuffer(t)||(t=new $d07a5d50e8b73002$require$Buffer(t,e)),new $8402f93d5e31032a$exports(t,i,!0))}$d07a5d50e8b73002$export$971862a2fcb1bb40=$d07a5d50e8b73002$export$c6ff6a88acbeaf40=$d07a5d50e8b73002$export$fdc27893e98845cc=$d07a5d50e8b73002$var$getDiffieHellman,$d07a5d50e8b73002$export$6671fb9a1323bed=$d07a5d50e8b73002$export$d74daf141a551db=$d07a5d50e8b73002$var$createDiffieHellman;var $a1d55349491a9b59$exports={},$8GZk1=parcelRequire("8GZk1"),$a1d55349491a9b59$require$Buffer=$8GZk1.Buffer,$cYT9k=parcelRequire("cYT9k"),$lf03h=parcelRequire("lf03h"),$dFiDG=parcelRequire("dFiDG"),$52dbe07733bdfe8f$exports={},$8GZk1=parcelRequire("8GZk1"),$52dbe07733bdfe8f$require$Buffer=$8GZk1.Buffer,$g9Omc=parcelRequire("g9Omc"),$4SWJf=parcelRequire("4SWJf"),$eOncC=parcelRequire("eOncC"),$52dbe07733bdfe8f$require$EC=$eOncC.ec,$eiOan=parcelRequire("eiOan"),$frmAS=parcelRequire("frmAS"),$605cc3dd63c5c42a$exports={};$605cc3dd63c5c42a$exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}');var $52dbe07733bdfe8f$var$RSA_PKCS1_PADDING=1;function $52dbe07733bdfe8f$var$sign(t,e,i,r,n){var o=$frmAS(e);if(o.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw Error("wrong private key type");return $52dbe07733bdfe8f$var$ecSign(t,o)}if("dsa"===o.type){if("dsa"!==r)throw Error("wrong private key type");return $52dbe07733bdfe8f$var$dsaSign(t,o,i)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw Error("wrong private key type");if(void 0!==e.padding&&e.padding!==$52dbe07733bdfe8f$var$RSA_PKCS1_PADDING)throw Error("illegal or unsupported padding mode");t=$52dbe07733bdfe8f$require$Buffer.concat([n,t]);for(var a=o.modulus.byteLength(),s=[0,1];t.length+s.length+1<a;)s.push(255);s.push(0);for(var l=-1;++l<t.length;)s.push(t[l]);return $4SWJf(s,o)}function $52dbe07733bdfe8f$var$ecSign(t,e){var i=$605cc3dd63c5c42a$exports[e.curve.join(".")];if(!i)throw Error("unknown curve "+e.curve.join("."));var r=new $52dbe07733bdfe8f$require$EC(i).keyFromPrivate(e.privateKey).sign(t);return $52dbe07733bdfe8f$require$Buffer.from(r.toDER())}function $52dbe07733bdfe8f$var$dsaSign(t,e,i){for(var r,n=e.params.priv_key,o=e.params.p,a=e.params.q,s=e.params.g,l=new $eiOan(0),h=$52dbe07733bdfe8f$var$bits2int(t,a).mod(a),u=!1,c=$52dbe07733bdfe8f$var$getKey(n,a,t,i);!1===u;)l=$52dbe07733bdfe8f$var$makeR(s,r=$52dbe07733bdfe8f$var$makeKey(a,c,i),o,a),0===(u=r.invm(a).imul(h.add(n.mul(l))).mod(a)).cmpn(0)&&(u=!1,l=new $eiOan(0));return $52dbe07733bdfe8f$var$toDER(l,u)}function $52dbe07733bdfe8f$var$toDER(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),$52dbe07733bdfe8f$require$Buffer.from(i)}function $52dbe07733bdfe8f$var$getKey(t,e,i,r){if((t=$52dbe07733bdfe8f$require$Buffer.from(t.toArray())).length<e.byteLength()){var n=$52dbe07733bdfe8f$require$Buffer.alloc(e.byteLength()-t.length);t=$52dbe07733bdfe8f$require$Buffer.concat([n,t])}var o=i.length,a=$52dbe07733bdfe8f$var$bits2octets(i,e),s=$52dbe07733bdfe8f$require$Buffer.alloc(o);s.fill(1);var l=$52dbe07733bdfe8f$require$Buffer.alloc(o);return l=$g9Omc(r,l).update(s).update($52dbe07733bdfe8f$require$Buffer.from([0])).update(t).update(a).digest(),s=$g9Omc(r,l).update(s).digest(),l=$g9Omc(r,l).update(s).update($52dbe07733bdfe8f$require$Buffer.from([1])).update(t).update(a).digest(),s=$g9Omc(r,l).update(s).digest(),{k:l,v:s}}function $52dbe07733bdfe8f$var$bits2int(t,e){var i=new $eiOan(t),r=(t.length<<3)-e.bitLength();return r>0&&i.ishrn(r),i}function $52dbe07733bdfe8f$var$bits2octets(t,e){t=(t=$52dbe07733bdfe8f$var$bits2int(t,e)).mod(e);var i=$52dbe07733bdfe8f$require$Buffer.from(t.toArray());if(i.length<e.byteLength()){var r=$52dbe07733bdfe8f$require$Buffer.alloc(e.byteLength()-i.length);i=$52dbe07733bdfe8f$require$Buffer.concat([r,i])}return i}function $52dbe07733bdfe8f$var$makeKey(t,e,i){var r,n;do{for(r=$52dbe07733bdfe8f$require$Buffer.alloc(0);8*r.length<t.bitLength();)e.v=$g9Omc(i,e.k).update(e.v).digest(),r=$52dbe07733bdfe8f$require$Buffer.concat([r,e.v]);n=$52dbe07733bdfe8f$var$bits2int(r,t),e.k=$g9Omc(i,e.k).update(e.v).update($52dbe07733bdfe8f$require$Buffer.from([0])).digest(),e.v=$g9Omc(i,e.k).update(e.v).digest()}while(-1!==n.cmp(t))return n}function $52dbe07733bdfe8f$var$makeR(t,e,i,r){return t.toRed($eiOan.mont(i)).redPow(e).fromRed().mod(r)}$52dbe07733bdfe8f$exports=$52dbe07733bdfe8f$var$sign,$52dbe07733bdfe8f$exports.getKey=$52dbe07733bdfe8f$var$getKey,$52dbe07733bdfe8f$exports.makeKey=$52dbe07733bdfe8f$var$makeKey;var $33b7965c218a6e70$exports={},$8GZk1=parcelRequire("8GZk1"),$33b7965c218a6e70$require$Buffer=$8GZk1.Buffer,$eiOan=parcelRequire("eiOan"),$eOncC=parcelRequire("eOncC"),$33b7965c218a6e70$require$EC=$eOncC.ec,$frmAS=parcelRequire("frmAS");function $33b7965c218a6e70$var$verify(t,e,i,r,n){var o=$frmAS(i);if("ec"===o.type){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw Error("wrong public key type");return $33b7965c218a6e70$var$ecVerify(t,e,o)}if("dsa"===o.type){if("dsa"!==r)throw Error("wrong public key type");return $33b7965c218a6e70$var$dsaVerify(t,e,o)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw Error("wrong public key type");e=$33b7965c218a6e70$require$Buffer.concat([n,e]);for(var a=o.modulus.byteLength(),s=[1],l=0;e.length+s.length+2<a;)s.push(255),l+=1;s.push(0);for(var h=-1;++h<e.length;)s.push(e[h]);s=$33b7965c218a6e70$require$Buffer.from(s);var u=$eiOan.mont(o.modulus);t=(t=new $eiOan(t).toRed(u)).redPow(new $eiOan(o.publicExponent));var c=l<8?1:0;for(a=Math.min((t=$33b7965c218a6e70$require$Buffer.from(t.fromRed().toArray())).length,s.length),t.length!==s.length&&(c=1),h=-1;++h<a;)c|=t[h]^s[h];return 0===c}function $33b7965c218a6e70$var$ecVerify(t,e,i){var r=$605cc3dd63c5c42a$exports[i.data.algorithm.curve.join(".")];if(!r)throw Error("unknown curve "+i.data.algorithm.curve.join("."));var n=new $33b7965c218a6e70$require$EC(r),o=i.data.subjectPrivateKey.data;return n.verify(e,t,o)}function $33b7965c218a6e70$var$dsaVerify(t,e,i){var r=i.data.p,n=i.data.q,o=i.data.g,a=i.data.pub_key,s=$frmAS.signature.decode(t,"der"),l=s.s,h=s.r;$33b7965c218a6e70$var$checkValue(l,n),$33b7965c218a6e70$var$checkValue(h,n);var u=$eiOan.mont(r),c=l.invm(n);return 0===o.toRed(u).redPow(new $eiOan(e).mul(c).mod(n)).fromRed().mul(a.toRed(u).redPow(h.mul(c).mod(n)).fromRed()).mod(r).mod(n).cmp(h)}function $33b7965c218a6e70$var$checkValue(t,e){if(0>=t.cmpn(0)||t.cmp(e)>=0)throw Error("invalid sig")}$33b7965c218a6e70$exports=$33b7965c218a6e70$var$verify;var $ftKR2=parcelRequire("ftKR2");function $a1d55349491a9b59$var$Sign(t){$lf03h.Writable.call(this);var e=$ftKR2[t];if(!e)throw Error("Unknown message digest");this._hashType=e.hash,this._hash=$cYT9k(e.hash),this._tag=e.id,this._signType=e.sign}function $a1d55349491a9b59$var$Verify(t){$lf03h.Writable.call(this);var e=$ftKR2[t];if(!e)throw Error("Unknown message digest");this._hash=$cYT9k(e.hash),this._tag=e.id,this._signType=e.sign}function $a1d55349491a9b59$var$createSign(t){return new $a1d55349491a9b59$var$Sign(t)}function $a1d55349491a9b59$var$createVerify(t){return new $a1d55349491a9b59$var$Verify(t)}Object.keys($ftKR2).forEach(function(t){$ftKR2[t].id=$a1d55349491a9b59$require$Buffer.from($ftKR2[t].id,"hex"),$ftKR2[t.toLowerCase()]=$ftKR2[t]}),$dFiDG($a1d55349491a9b59$var$Sign,$lf03h.Writable),$a1d55349491a9b59$var$Sign.prototype._write=function(t,e,i){this._hash.update(t),i()},$a1d55349491a9b59$var$Sign.prototype.update=function(t,e){return this._hash.update("string"==typeof t?$a1d55349491a9b59$require$Buffer.from(t,e):t),this},$a1d55349491a9b59$var$Sign.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=$52dbe07733bdfe8f$exports(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},$dFiDG($a1d55349491a9b59$var$Verify,$lf03h.Writable),$a1d55349491a9b59$var$Verify.prototype._write=function(t,e,i){this._hash.update(t),i()},$a1d55349491a9b59$var$Verify.prototype.update=function(t,e){return this._hash.update("string"==typeof t?$a1d55349491a9b59$require$Buffer.from(t,e):t),this},$a1d55349491a9b59$var$Verify.prototype.verify=function(t,e,i){var r="string"==typeof e?$a1d55349491a9b59$require$Buffer.from(e,i):e;this.end();var n=this._hash.digest();return $33b7965c218a6e70$exports(r,n,t,this._signType,this._tag)},$a1d55349491a9b59$exports={Sign:$a1d55349491a9b59$var$createSign,Verify:$a1d55349491a9b59$var$createVerify,createSign:$a1d55349491a9b59$var$createSign,createVerify:$a1d55349491a9b59$var$createVerify},$73ac41bce01e26c9$export$45df7cae684751af=$a1d55349491a9b59$exports.createSign,$73ac41bce01e26c9$export$1db683ad541682f6=$a1d55349491a9b59$exports.Sign,$73ac41bce01e26c9$export$6f65485f87568e37=$a1d55349491a9b59$exports.createVerify,$73ac41bce01e26c9$export$91a8e56769aeb334=$a1d55349491a9b59$exports.Verify,$73ac41bce01e26c9$export$2d4117e99c2179e4=parcelRequire("iWRbR"),$d1322f019848fee7$export$512823e338ddb1b7=parcelRequire("lpH4d"),$d1322f019848fee7$export$7efb24e2fddf99b9=parcelRequire("7pS8b"),$d1322f019848fee7$export$9d0e0c0c4a8d30f3=function(t,e){return $d1322f019848fee7$export$512823e338ddb1b7(t,e,!0)},$d1322f019848fee7$export$b9d55ff329113abd=function(t,e){return $d1322f019848fee7$export$7efb24e2fddf99b9(t,e,!0)};var $aKNZT=parcelRequire("aKNZT");function $d4fc44335ce77f37$var$oldBrowser(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var $8GZk1=parcelRequire("8GZk1"),$1IbV4=parcelRequire("1IbV4"),$d4fc44335ce77f37$var$Buffer=$8GZk1.Buffer,$d4fc44335ce77f37$var$kBufferMaxLength=$8GZk1.kMaxLength,$d4fc44335ce77f37$var$crypto=$parcel$global.crypto||$parcel$global.msCrypto,$d4fc44335ce77f37$var$kMaxUint32=4294967295;function $d4fc44335ce77f37$var$assertOffset(t,e){if("number"!=typeof t||t!=t)throw TypeError("offset must be a number");if(t>$d4fc44335ce77f37$var$kMaxUint32||t<0)throw TypeError("offset must be a uint32");if(t>$d4fc44335ce77f37$var$kBufferMaxLength||t>e)throw RangeError("offset out of range")}function $d4fc44335ce77f37$var$assertSize(t,e,i){if("number"!=typeof t||t!=t)throw TypeError("size must be a number");if(t>$d4fc44335ce77f37$var$kMaxUint32||t<0)throw TypeError("size must be a uint32");if(t+e>i||t>$d4fc44335ce77f37$var$kBufferMaxLength)throw RangeError("buffer too small")}function $d4fc44335ce77f37$var$randomFill(t,e,i,r){if(!$d4fc44335ce77f37$var$Buffer.isBuffer(t)&&!(t instanceof $parcel$global.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)r=e,e=0,i=t.length;else if("function"==typeof i)r=i,i=t.length-e;else if("function"!=typeof r)throw TypeError('"cb" argument must be a function');return $d4fc44335ce77f37$var$assertOffset(e,t.length),$d4fc44335ce77f37$var$assertSize(i,e,t.length),$d4fc44335ce77f37$var$actualFill(t,e,i,r)}function $d4fc44335ce77f37$var$actualFill(t,e,i,r){var n=new Uint8Array(t.buffer,e,i);if($d4fc44335ce77f37$var$crypto.getRandomValues(n),r){$aKNZT.nextTick(function(){r(null,t)});return}return t}function $d4fc44335ce77f37$var$randomFillSync(t,e,i){if(void 0===e&&(e=0),!$d4fc44335ce77f37$var$Buffer.isBuffer(t)&&!(t instanceof $parcel$global.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');return $d4fc44335ce77f37$var$assertOffset(e,t.length),void 0===i&&(i=t.length-e),$d4fc44335ce77f37$var$assertSize(i,e,t.length),$d4fc44335ce77f37$var$actualFill(t,e,i)}$d4fc44335ce77f37$var$crypto&&$d4fc44335ce77f37$var$crypto.getRandomValues?($d4fc44335ce77f37$export$bb1abf2ce84fc7e8=$d4fc44335ce77f37$var$randomFill,$d4fc44335ce77f37$export$2f7171e78e524d5e=$d4fc44335ce77f37$var$randomFillSync):($d4fc44335ce77f37$export$bb1abf2ce84fc7e8=$d4fc44335ce77f37$var$oldBrowser,$d4fc44335ce77f37$export$2f7171e78e524d5e=$d4fc44335ce77f37$var$oldBrowser);var $c3eee7413ce329db$exports={};$c3eee7413ce329db$exports=JSON.parse('{"name":"dotenv","version":"16.4.5","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}');const $0050603897a74c12$var$version=$c3eee7413ce329db$exports.version,$0050603897a74c12$var$LINE=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function $0050603897a74c12$var$parse(t){let e;let i={},r=t.toString();for(r=r.replace(/\r\n?/mg,"\n");null!=(e=$0050603897a74c12$var$LINE.exec(r));){let t=e[1],r=e[2]||"",n=(r=r.trim())[0];r=r.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),'"'===n&&(r=(r=r.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),i[t]=r}return i}function $0050603897a74c12$var$_parseVault(t){let e;let i=$0050603897a74c12$var$_vaultPath(t),r=$0050603897a74c12$var$DotenvModule.configDotenv({path:i});if(!r.parsed){let t=Error(`MISSING_DATA: Cannot parse ${i} for an unknown reason`);throw t.code="MISSING_DATA",t}let n=$0050603897a74c12$var$_dotenvKey(t).split(","),o=n.length;for(let t=0;t<o;t++)try{let i=n[t].trim(),o=$0050603897a74c12$var$_instructions(r,i);e=$0050603897a74c12$var$DotenvModule.decrypt(o.ciphertext,o.key);break}catch(e){if(t+1>=o)throw e}return $0050603897a74c12$var$DotenvModule.parse(e)}function $0050603897a74c12$var$_log(t){console.log(`[dotenv@${$0050603897a74c12$var$version}][INFO] ${t}`)}function $0050603897a74c12$var$_warn(t){console.log(`[dotenv@${$0050603897a74c12$var$version}][WARN] ${t}`)}function $0050603897a74c12$var$_debug(t){console.log(`[dotenv@${$0050603897a74c12$var$version}][DEBUG] ${t}`)}function $0050603897a74c12$var$_dotenvKey(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:""}function $0050603897a74c12$var$_instructions(t,e){let i;try{i=new URL(e)}catch(t){if("ERR_INVALID_URL"===t.code){let t=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw t.code="INVALID_DOTENV_KEY",t}throw t}let r=i.password;if(!r){let t=Error("INVALID_DOTENV_KEY: Missing key part");throw t.code="INVALID_DOTENV_KEY",t}let n=i.searchParams.get("environment");if(!n){let t=Error("INVALID_DOTENV_KEY: Missing environment part");throw t.code="INVALID_DOTENV_KEY",t}let o=`DOTENV_VAULT_${n.toUpperCase()}`,a=t.parsed[o];if(!a){let t=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);throw t.code="NOT_FOUND_DOTENV_ENVIRONMENT",t}return{ciphertext:a,key:r}}function $0050603897a74c12$var$_vaultPath(t){let e=null;if(t&&t.path&&t.path.length>0){if(Array.isArray(t.path))for(let i of t.path)$9ZyLq.existsSync(i)&&(e=i.endsWith(".vault")?i:`${i}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`}else e=$cb62d5c4a55ce9b4$exports.resolve($aKNZT.cwd(),".env.vault");return $9ZyLq.existsSync(e)?e:null}function $0050603897a74c12$var$_resolveHome(t){return"~"===t[0]?$cb62d5c4a55ce9b4$exports.join($07da88d463d75388$export$c1d46b5ea6262c0b(),t.slice(1)):t}function $0050603897a74c12$var$_configVault(t){$0050603897a74c12$var$_log("Loading env from encrypted .env.vault");let e=$0050603897a74c12$var$DotenvModule._parseVault(t),i={};return t&&null!=t.processEnv&&(i=t.processEnv),$0050603897a74c12$var$DotenvModule.populate(i,e,t),{parsed:e}}function $0050603897a74c12$var$configDotenv(t){let e;let i=$cb62d5c4a55ce9b4$exports.resolve($aKNZT.cwd(),".env"),r="utf8",n=!!(t&&t.debug);t&&t.encoding?r=t.encoding:n&&$0050603897a74c12$var$_debug("No encoding is specified. UTF-8 is used by default");let o=[i];if(t&&t.path){if(Array.isArray(t.path))for(let e of(o=[],t.path))o.push($0050603897a74c12$var$_resolveHome(e));else o=[$0050603897a74c12$var$_resolveHome(t.path)]}let a={};for(let i of o)try{let e=$0050603897a74c12$var$DotenvModule.parse($9ZyLq.readFileSync(i,{encoding:r}));$0050603897a74c12$var$DotenvModule.populate(a,e,t)}catch(t){n&&$0050603897a74c12$var$_debug(`Failed to load ${i} ${t.message}`),e=t}let s={};return(t&&null!=t.processEnv&&(s=t.processEnv),$0050603897a74c12$var$DotenvModule.populate(s,a,t),e)?{parsed:a,error:e}:{parsed:a}}function $0050603897a74c12$var$config(t){if(0===$0050603897a74c12$var$_dotenvKey(t).length)return $0050603897a74c12$var$DotenvModule.configDotenv(t);let e=$0050603897a74c12$var$_vaultPath(t);return e?$0050603897a74c12$var$DotenvModule._configVault(t):($0050603897a74c12$var$_warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),$0050603897a74c12$var$DotenvModule.configDotenv(t))}function $0050603897a74c12$var$decrypt(t,e){let i=$0050603897a74c12$require$Buffer.from(e.slice(-64),"hex"),r=$0050603897a74c12$require$Buffer.from(t,"base64"),n=r.subarray(0,12),o=r.subarray(-16);r=r.subarray(12,-16);try{let t=$73ac41bce01e26c9$export$36b6d6ef312eab39("aes-256-gcm",i,n);return t.setAuthTag(o),`${t.update(r)}${t.final()}`}catch(r){let t=r instanceof RangeError,e="Invalid key length"===r.message,i="Unsupported state or unable to authenticate data"===r.message;if(t||e){let t=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw t.code="INVALID_DOTENV_KEY",t}if(i){let t=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw t.code="DECRYPTION_FAILED",t}throw r}}function $0050603897a74c12$var$populate(t,e,i={}){let r=!!(i&&i.debug),n=!!(i&&i.override);if("object"!=typeof e){let t=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw t.code="OBJECT_REQUIRED",t}for(let i of Object.keys(e))Object.prototype.hasOwnProperty.call(t,i)?(!0===n&&(t[i]=e[i]),r&&(!0===n?$0050603897a74c12$var$_debug(`"${i}" is already defined and WAS overwritten`):$0050603897a74c12$var$_debug(`"${i}" is already defined and was NOT overwritten`))):t[i]=e[i]}const $0050603897a74c12$var$DotenvModule={configDotenv:$0050603897a74c12$var$configDotenv,_configVault:$0050603897a74c12$var$_configVault,_parseVault:$0050603897a74c12$var$_parseVault,config:$0050603897a74c12$var$config,decrypt:$0050603897a74c12$var$decrypt,parse:$0050603897a74c12$var$parse,populate:$0050603897a74c12$var$populate};$0050603897a74c12$exports.configDotenv=$0050603897a74c12$var$DotenvModule.configDotenv,$0050603897a74c12$exports._configVault=$0050603897a74c12$var$DotenvModule._configVault,$0050603897a74c12$exports._parseVault=$0050603897a74c12$var$DotenvModule._parseVault,$0050603897a74c12$exports.config=$0050603897a74c12$var$DotenvModule.config,$0050603897a74c12$exports.decrypt=$0050603897a74c12$var$DotenvModule.decrypt,$0050603897a74c12$exports.parse=$0050603897a74c12$var$DotenvModule.parse,$0050603897a74c12$exports.populate=$0050603897a74c12$var$DotenvModule.populate,$0050603897a74c12$exports=$0050603897a74c12$var$DotenvModule,$parcel$interopDefault($0050603897a74c12$exports).config(),(0,$cBgUY.default).defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");let $4817097f2da4986c$var$wgs84="+proj=longlat +datum=WGS84 +no_defs",$4817097f2da4986c$var$lv95="+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +datum=WGS84 +units=m +no_defs";function $4817097f2da4986c$var$WGS84toLV95(t,e){let[i,r]=(0,$cBgUY.default)($4817097f2da4986c$var$wgs84,$4817097f2da4986c$var$lv95,[e,t]);return{easting:i,northing:r}}let $4817097f2da4986c$var$check_if_point_in_zone=(t,e,i)=>{let r=(0,$c997c68b83d6b0f4$exports.point)([e,t]);return(0,$c997c68b83d6b0f4$exports.booleanPointInPolygon)(r,i)},$4817097f2da4986c$var$owner_zone="",$4817097f2da4986c$var$city_zone="",$4817097f2da4986c$var$ccity_zone="";fetch("assets/json/e322_grundeigentum.json",{mode:"cors"}).then(t=>{if(!t.ok)throw Error("Network response was not ok");return t.json()}).then(t=>{$4817097f2da4986c$var$owner_zone=t.grundeigentum_privates.features}).catch(t=>{console.error("There was a problem with the fetch operation:",t)}),fetch("https://api3.geo.admin.ch/rest/services/api/MapServer/ch.swisstopo.swissboundaries3d-gemeinde-flaeche.fill/371?geometryFormat=geojson&sr=4326",{mode:"cors"}).then(t=>{if(!t.ok)throw Error("Network response was not ok");return t.json()}).then(t=>{$4817097f2da4986c$var$city_zone=t.feature.geometry.coordinates[0][0]}).catch(t=>{console.error("There was a problem with the fetch operation:",t)});let $4817097f2da4986c$export$471f7ae5c4103ae1={default_lang:"de",userLang:navigator.language||navigator.userLanguage},$4817097f2da4986c$var$report={set:!1,lat:47.143299,lng:7.24876,img:null,email:null,id:$f46ca6cda8227c99$export$2e2bcd8739ae039(),updateUser:!1,owner:"public"},$4817097f2da4986c$var$trans=()=>{$4817097f2da4986c$var$translation=$4817097f2da4986c$export$471f7ae5c4103ae1.userLang.includes("de-DE")?{button_0:"ohne Foto weiter >",button_1:"Schaden fotografieren",button_2:"Schaden melden",button_3:"Schaden senden",button_4:"< zur Karte",button_5:"< zurück",button_6:"Foto ersetzen",button_7:"weiter >",button_8:"Foto auswählen",form_message_0:"Es ist ein Fehler aufgetreten",form_message_1:"Bitte beschreibe den Schaden",form_message_2:"Die E-Mailadresse ist ungültig",form_message_3:"Schadensmeldung",form_text_0:"Beschreibe kurz den Schaden",form_text_1:"Deine E-Mailadresse benötigen wir für eventuelle Rückfragen.",form_text_2:"Ich möchte über den Verlauf des Schadens informiert werden.",form_toggle_true:"Ja",form_toggle_false:"Nein",map_marker_is_outside:"Du kannst Schäden nur imnerhalb der Gemeindegrenze melden",map_marker_popup:"<p>Bewege mich zum Ort der Schadens</p>",impressum:"<strong>Impressum & Datenschutz</strong>",impressum_text:"<h1>Datenschutz</h1><h1>Lizenzen</h1>Mithril MIT<br>Leaflet MIT<br>GeoAdmin<h2>Code</h2><a href='https://github.com/strukturart/fixit'>https://github.com/strukturart/fixit</a>",success_text:"Vielen Dank für deine Meldung!<br><br> Wir freuen uns über deine Unterstützung und Mitarbeit, um unsere Stadt in Schuss zu halten. Dein Hinweis hilft uns, Schäden schnell zu beheben und unsere Infrastruktur in einem guten Zustand zu halten. <br>Wir kümmern uns so schnell wie möglich darum und halten dich auf dem Laufenden.",description:"<h1>Schaden melden</h1><h2>Hilf mit, unsere Stadt in Schuss zu halten!</h2><br>Mit dieser App kannst du Schäden an Straßen, Gebäuden und anderen öffentlichen Einrichtungen ganz einfach melden.<br><br>Im nächsten Schritt kannst du den Schaden auf einer Karte markieren, ein Foto hochladen und eine kurze Beschreibung hinzufügen."}:{button_0:"continuer >",button_1:"Photographier les dégâts",button_2:"déclarer un dommage",button_3:"Envoyer un dommage",button_4:"retour à la carte",button_5:"< retour",button_6:"Foto ersetzen",button_7:"continuer >",button_8:"Foto auswählen",form_message_0:"Une erreur est survenue",form_message_1:"Veuillez décrire le dommage",form_message_2:"L'adresse e-mail n'est pas valide",form_message_3:"Schadensmeldung",form_text_0:"Décrivez brièvement le dommage",form_text_1:"Nous avons besoin de ton adresse e-mail pour d'éventuelles questions.",form_text_2:"Je souhaite être informé(e) de l'évolution du sinistre.",form_toggle_true:"Oui",form_toggle_false:"Non",map_marker_popup:"<p>Me déplacer vers le lieu du dommage</p>",map_marker_is_outside:"Vous ne pouvez déclarer les dommages que dans les limites communales",impressum:"<strong>Impressum & protection des données</strong>",impressum_text:"Ihre Daten...",success_text:"Merci beaucoup pour ton message !<br>  Nous nous réjouissons de ton soutien et de ta collaboration pour maintenir notre ville en bon état. Nous nous en occuperons le plus rapidement possible et nous te tiendrons au courant.",description:"<h1>Signaler les dégâts</h1><h2>Aide-nous à maintenir notre ville en bon état !</h2><br><br>Grâce à cette application, tu peux facilement signaler les dommages causés aux rues, aux bâtiments et autres installations publiques. <br><br> Dans l'étape suivante, tu peux marquer le dommage sur une carte, télécharger une photo et ajouter une brève description."}};$4817097f2da4986c$var$trans();let $4817097f2da4986c$var$check_owner=(t,e)=>{$4817097f2da4986c$var$check_if_point_in_zone(t,e,$4817097f2da4986c$var$ccity_zone)?$4817097f2da4986c$var$report.zone=!0:($4817097f2da4986c$var$report.zone=!1,$a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.map_marker_is_outside,3e3)),$4817097f2da4986c$var$report.owner="public";for(let i=0;i<$4817097f2da4986c$var$owner_zone.length;i++){let r=$4817097f2da4986c$var$owner_zone[i];if(r.geometry.coordinates[0][0].length>4)try{let i=r.geometry.coordinates[0][0].map(t=>(0,$cBgUY.default)("EPSG:2056","EPSG:4326",t)),n=(0,$c997c68b83d6b0f4$exports.polygon)([i]);if($4817097f2da4986c$var$check_if_point_in_zone(t,e,n)){$4817097f2da4986c$var$report.owner="private",console.log("Point is in the private zone!");break}}catch(t){console.error("Error creating polygon for item:",r,t.message)}}"private"!==$4817097f2da4986c$var$report.owner&&console.log("Point is in the public zone!")};const $4817097f2da4986c$var$send_mail=()=>{let t=new FormData(document.getElementById("form"));for(let[e,i]of Object.entries($4817097f2da4986c$var$report))"set"!==e&&null!=i&&t.append(e,i);fetch("./assets/php/send-email.php",{method:"POST",body:t}).then(t=>{if(!t.ok)throw $a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.form_message_0,5e3),Error(`HTTP error! Status: ${t.status}`);return t.text()}).then(t=>{console.log(t),t.includes("description is empty")&&$a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.form_message_1,4e3),t.includes("Invalid email address.")&&$a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.form_message_2,4e3),t.includes("Message has been sent")&&($4817097f2da4986c$var$report.img="",$4817097f2da4986c$var$report.description="",$4817097f2da4986c$var$report.email="",$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/success"))}).catch(t=>{console.error("Fetch error:",t.message),$a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.form_message_0,5e3)})};let $4817097f2da4986c$var$map_func=()=>{let t;let e=new($parcel$interopDefault($aEpXh)).Map("map",{minZoom:1,keyboard:!0,zoomControl:!0,enableHighAccuracy:!0,maximumAge:3e3,timeout:1e4,crossOrigin:!0});$79909368fa137f54$export$2e2bcd8739ae039("https://vectortiles.geo.admin.ch/tiles/ch.swisstopo.imagerybasemap.vt/v1.0.0/{z}/{x}/{y}.pbf",{minZoom:1,maxZoom:22,maxNativeZoom:14,fetchOptions:{mode:"no-cors"}});let i=$parcel$interopDefault($aEpXh).maplibreGL({style:"https://vectortiles.geo.admin.ch/styles/ch.swisstopo.imagerybasemap.vt/style.json"});var r=$parcel$interopDefault($aEpXh).tileLayer.wms("https://biel-bienne.mapplus.ch/cgi-bin/mapserv?map=/data/Client_Data/biel-bienne/wms_stadtplan.map",{SERVICE:"WMS",crs:$parcel$interopDefault($aEpXh).CRS.EPSG2056,format:"image/png",transparent:!0,TILED:!0,TileSetId:30,attribution:"map.geo.admin.ch",maxNativeZoom:20,maxZoom:22,minZoom:1,layers:"e321_stadtplan,sp_strassenmarkierungen,e322_fussgaengerstreifen,x_kronenflaeche_schematisch_shadows,e321_av_bodenbedeckung",version:"1.3.0"}).addTo(e);e.addLayer(r);var n={"Biel/Bienne":r,GeoAdmin:i};$parcel$interopDefault($aEpXh).control.layers(n).addTo(e),e.addEventListener("baselayerchange",function(){e.fire("click")}),$4817097f2da4986c$var$ccity_zone=(0,$c997c68b83d6b0f4$exports.polygon)([$4817097f2da4986c$var$city_zone]);let o={color:"blue",fillColor:"green",fillOpacity:0,weight:3};function a(i){$4817097f2da4986c$var$report.set&&void 0!=$4817097f2da4986c$var$report.lat?(e.setView([$4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng],20),t.setLatLng([$4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng],20),t.getPopup()||t.bindPopup($4817097f2da4986c$var$translation.map_marker_popup,{closeOnClick:!0,autoClose:!1}),t.openPopup()):(e.setView([i.coords.latitude,i.coords.longitude],20),t.setLatLng([i.coords.latitude,i.coords.longitude],18),t.getPopup()||t.bindPopup($4817097f2da4986c$var$translation.map_marker_popup,{closeOnClick:!0,autoClose:!1}),t.openPopup(),$4817097f2da4986c$var$report.lat=i.coords.latitude,$4817097f2da4986c$var$report.lng=i.coords.longitude),$4817097f2da4986c$var$check_owner($4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng)}function s(){$a0f3d463663c82ef$export$6593825dc0f3a767("Sorry, no position available.",2e3),e.setView([$4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng],20),t.setLatLng([$4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng],20),t.getPopup()||t.bindPopup($4817097f2da4986c$var$translation.map_marker_popup,{closeOnClick:!0,autoClose:!1}),t.openPopup()}$parcel$interopDefault($aEpXh).geoJSON((0,$c997c68b83d6b0f4$exports.polygon)([$4817097f2da4986c$var$city_zone]),{style:o}).addTo(e),e.setView([$4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng],18),t=$parcel$interopDefault($aEpXh).marker([$4817097f2da4986c$var$report.lat,$4817097f2da4986c$var$report.lng],{draggable:!0,icon:$parcel$interopDefault($aEpXh).icon({iconUrl:"./assets/css/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:null})}).addTo(e),navigator.geolocation.getCurrentPosition(a,s);let l=!1;function h(t){t.target.classList.contains("item")&&(l=!0)}document.querySelectorAll("button").forEach(t=>{t.addEventListener("click",h)}),e.on("click",function(e){if(l)return;let i=e.latlng;t.setLatLng(i),$4817097f2da4986c$var$report.lat=i.lat,$4817097f2da4986c$var$report.lng=i.lng,$4817097f2da4986c$var$report.LV95=$4817097f2da4986c$var$WGS84toLV95(i.lat,i.lng),$4817097f2da4986c$var$report.set=!0,t.closeTooltip(),$4817097f2da4986c$var$check_owner(i.lat,i.lng),console.log($4817097f2da4986c$var$report.LV95);let r=$4817097f2da4986c$var$report.LV95.easting+","+$4817097f2da4986c$var$report.LV95.northing;console.log("https://www.openstreetmap.org/?mlat="+$4817097f2da4986c$var$report.lat+"&mlon="+$4817097f2da4986c$var$report.lng+"#map=18/"+$4817097f2da4986c$var$report.lat+"/"+$4817097f2da4986c$var$report.lng),console.log("https://map.geo.admin.ch/?center="+r+"&z=10&crosshair=cross")}),t.on("dragstart",function(t){e.dragging.disable()}),t.on("dragend",function(t){e.dragging.enable(),console.log(t);var i=t.target.getLatLng();$4817097f2da4986c$var$report.lat=i.lat,$4817097f2da4986c$var$report.lng=i.lng,$4817097f2da4986c$var$report.LV95=$4817097f2da4986c$var$WGS84toLV95(i.lat,i.lng),$4817097f2da4986c$var$report.set=!0,console.log($4817097f2da4986c$var$report),$4817097f2da4986c$var$check_owner(i.lat,i.lng)})},$4817097f2da4986c$var$select_image=()=>{let t=document.createElement("input");t.type="file",t.accept=".jpeg, .jpg, .png, .gif, .bmp, .webp",t.style.display="none",document.body.appendChild(t),t.click(),t.addEventListener("change",function(t){let e=t.target.files[0];if(e){let t=new FileReader;t.onload=function(t){let e=t.target.result;$4817097f2da4986c$var$report.img=e,$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/imageView")},t.readAsDataURL(e)}})};var $4817097f2da4986c$var$root=document.getElementById("app"),$4817097f2da4986c$var$intro={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"width-100 height-100",id:"intro",oninit:function(){setTimeout(function(){$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/start")},3e3)}},[$parcel$interopDefault($80d6699e473cee9b$exports)("img",{src:"./assets/icons/intro.svg",oncreate:()=>{fetch("/manifest.webmanifest").then(t=>t.json()).then(t=>{$4817097f2da4986c$export$471f7ae5c4103ae1.version=t.version,document.querySelector("#version").textContent=t.version})}}),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{id:"circle"}),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"flex width-100  justify-content-center",id:"version-box"},[$parcel$interopDefault($80d6699e473cee9b$exports)("kbd",{id:"version"},$4817097f2da4986c$export$471f7ae5c4103ae1.version)])])}},$4817097f2da4986c$var$map={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"map-wrapper"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{id:"map",class:"width-100",oncreate:()=>{$4817097f2da4986c$var$map_func()}},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{class:"level-1",id:"button-photo",onclick:()=>{$4817097f2da4986c$var$report.zone?$4817097f2da4986c$var$select_image():$a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.map_marker_is_outside,4e3)}},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",$parcel$interopDefault($80d6699e473cee9b$exports).trust($4817097f2da4986c$var$translation.button_1+"<img class='camera-icon' src='/assets/image/camera.svg'>"))])]),$parcel$interopDefault($80d6699e473cee9b$exports)("nav",{class:"flex width-100 justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"nav-inner flex justify-content-spacebetween"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{class:"item level-0",onclick:()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/start")}},$4817097f2da4986c$var$translation.button_5),$parcel$interopDefault($80d6699e473cee9b$exports)("button",{class:"item",onclick:()=>{$4817097f2da4986c$var$report.zone?$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/send"):$a0f3d463663c82ef$export$6593825dc0f3a767($4817097f2da4986c$var$translation.map_marker_is_outside,4e3)}},$4817097f2da4986c$var$translation.button_0)])])])])}},$4817097f2da4986c$var$start={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"page width-100 flex justify-content-center algin-item-start"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{id:"lang-switch"},[$parcel$interopDefault($80d6699e473cee9b$exports)("input",{type:"checkbox",id:"switch"}),$parcel$interopDefault($80d6699e473cee9b$exports)("label",{for:"switch",onclick:()=>{$4817097f2da4986c$export$471f7ae5c4103ae1.userLang.includes("fr")?$4817097f2da4986c$export$471f7ae5c4103ae1.userLang="de-DE":$4817097f2da4986c$export$471f7ae5c4103ae1.userLang="fr",$4817097f2da4986c$export$471f7ae5c4103ae1.userLang.includes("de-DE")||(document.querySelector("#switch").checked=!1),$4817097f2da4986c$var$trans(),$parcel$interopDefault($80d6699e473cee9b$exports).redraw()}},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",[$parcel$interopDefault($80d6699e473cee9b$exports)("span","DE"),$parcel$interopDefault($80d6699e473cee9b$exports)("span","FR")])])]),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"width-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"text"},$parcel$interopDefault($80d6699e473cee9b$exports).trust($4817097f2da4986c$var$translation.description)),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"width-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"flex justify-content-center text",onclick:()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/impressum")}},$parcel$interopDefault($80d6699e473cee9b$exports).trust($4817097f2da4986c$var$translation.impressum))])])]),$parcel$interopDefault($80d6699e473cee9b$exports)("nav",{class:"width-100   flex width-100 justify-content-center"},$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"nav-inner"},[[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{onclick:()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/map")}},$4817097f2da4986c$var$translation.button_2)]]))])}},$4817097f2da4986c$var$impressum={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"page width-100 height-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"width-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"text"},$parcel$interopDefault($80d6699e473cee9b$exports).trust($4817097f2da4986c$var$translation.impressum_text))])]),$parcel$interopDefault($80d6699e473cee9b$exports)("nav",[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"nav-inner"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{onclick:()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/start")}},$4817097f2da4986c$var$translation.button_5)])])])}},$4817097f2da4986c$var$getImage={video:null,canvas:null,stream:null,view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"page width-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("canvas",{id:"canvas"}),$parcel$interopDefault($80d6699e473cee9b$exports)("nav",{class:"width-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{id:"photo-shut-button",onclick:()=>{if(!this.video||!this.canvas){console.error("One or more elements are not initialized.");return}let t=this.video.videoWidth,e=this.video.videoHeight;this.canvas.width=t,this.canvas.height=e,this.canvas.getContext("2d").drawImage(this.video,0,0,t,e);let i=this.canvas.toDataURL("image/jpeg");$4817097f2da4986c$var$report.img=i,this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/imageView")}})]),$parcel$interopDefault($80d6699e473cee9b$exports)("video",{autoplay:!0,playsinline:!0,class:"",id:"video",oncreate:t=>{if(this.video=t.dom,this.canvas=document.getElementById("canvas"),!this.video||!this.canvas){console.error("Failed to find one or more elements.");return}navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(t=>{this.stream=t,this.video.srcObject=t,this.video.onloadedmetadata=()=>{this.video.play(),this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight}}).catch(t=>{console.error("Error accessing the camera: ",t)})}})])}},$4817097f2da4986c$var$imageView={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"width-100 page flex justify-content-center algin-item-start"},[$parcel$interopDefault($80d6699e473cee9b$exports)("img",{id:"overview-img",src:$4817097f2da4986c$var$report.img}),$parcel$interopDefault($80d6699e473cee9b$exports)("nav",{class:"flex width-100 justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"nav-inner flex justify-content-spacebetween"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{onclick:()=>{$4817097f2da4986c$var$select_image()}},$4817097f2da4986c$var$translation.button_6),$parcel$interopDefault($80d6699e473cee9b$exports)("button",{onclick:()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/send")}},$4817097f2da4986c$var$translation.button_7)])])])}},$4817097f2da4986c$var$send={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{id:"send",class:"page page-1 width-100 flex justify-content-center algin-item-start"},[$parcel$interopDefault($80d6699e473cee9b$exports)("form",{id:"form",class:"flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("h1",{},$4817097f2da4986c$var$translation.form_message_3),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"text"},$4817097f2da4986c$var$translation.form_text_0),$parcel$interopDefault($80d6699e473cee9b$exports)("textarea",{rows:20,cols:50,name:"description"}),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"text"},$4817097f2da4986c$var$translation.form_text_1),$parcel$interopDefault($80d6699e473cee9b$exports)("input",{class:"text",type:"email",autocomplete:"email",placeholder:"E-Mail",oninput:t=>{$4817097f2da4986c$var$report.email=t.target.value}}),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"checkbox-container"},[$parcel$interopDefault($80d6699e473cee9b$exports)("input",{type:"checkbox",id:"myCheckbox",checked:$4817097f2da4986c$var$report.updateUser,onchange:t=>{$4817097f2da4986c$var$report.updateUser=t.target.checked}}),$parcel$interopDefault($80d6699e473cee9b$exports)("label",{for:"myCheckbox",class:"checkbox-label"},$4817097f2da4986c$var$translation.form_text_2),$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"button-box  flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{class:"button-true",onclick:t=>{t.preventDefault(),$4817097f2da4986c$var$report.updateUser=!0,document.getElementById("myCheckbox").checked=$4817097f2da4986c$var$report.updateUser}},$4817097f2da4986c$var$translation.form_toggle_true),$parcel$interopDefault($80d6699e473cee9b$exports)("button",{class:"button-false",onclick:t=>{t.preventDefault(),$4817097f2da4986c$var$report.updateUser=!1,document.getElementById("myCheckbox").checked=$4817097f2da4986c$var$report.updateUser}},$4817097f2da4986c$var$translation.form_toggle_false)])])]),$parcel$interopDefault($80d6699e473cee9b$exports)("nav",{class:"flex width-100 justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"nav-inner flex justify-content-spacebetween"},[$parcel$interopDefault($80d6699e473cee9b$exports)("button",{class:"level-0",onclick:()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/map")}},$4817097f2da4986c$var$translation.button_4),$parcel$interopDefault($80d6699e473cee9b$exports)("button",{onclick:()=>{$4817097f2da4986c$var$send_mail()},class:"level-1"},$4817097f2da4986c$var$translation.button_3)])])])}},$4817097f2da4986c$var$success={view:function(){return $parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"page width-100 height-100 flex justify-content-center"},[$parcel$interopDefault($80d6699e473cee9b$exports)("div",{class:"text",oncreate:()=>{setTimeout(()=>{$parcel$interopDefault($80d6699e473cee9b$exports).route.set("/start")},6e3)}},$parcel$interopDefault($80d6699e473cee9b$exports).trust($4817097f2da4986c$var$translation.success_text))])}};$parcel$interopDefault($80d6699e473cee9b$exports).route($4817097f2da4986c$var$root,"/intro",{"/intro":$4817097f2da4986c$var$intro,"/start":$4817097f2da4986c$var$start,"/map":$4817097f2da4986c$var$map,"/getImage":$4817097f2da4986c$var$getImage,"/imageView":$4817097f2da4986c$var$imageView,"/send":$4817097f2da4986c$var$send,"/success":$4817097f2da4986c$var$success,"/impressum":$4817097f2da4986c$var$impressum});